diff --git a/TMessagesProj/src/main/java/org/telegram/payment/ConfirmationRequester.java b/TMessagesProj/src/main/java/org/telegram/payment/ConfirmationRequester.java
index cb6f09556..c757dec83 100644
--- a/TMessagesProj/src/main/java/org/telegram/payment/ConfirmationRequester.java
+++ b/TMessagesProj/src/main/java/org/telegram/payment/ConfirmationRequester.java
@@ -14,13 +14,17 @@
     private ArrayList<CustomHttpParams> params =new ArrayList<>();
 
 
-    public ConfirmationRequester(String paymentId, String userId ,String amount)
+    public ConfirmationRequester(String paymentId, String userId ,String amount,String mobNo, String cCode)
     {
 
 
         params.add(new CustomHttpParams("paymentId",paymentId));
         params.add(new CustomHttpParams("userId",userId));
-        params.add(new CustomHttpParams("amount",amount));
+        params.add(new CustomHttpParams("transAmount",amount));
+        params.add(new CustomHttpParams("mobileNo",mobNo));
+        params.add(new CustomHttpParams("cc",cCode));
+
+
 
     }
     @Override
diff --git a/TMessagesProj/src/main/java/org/telegram/payment/PaymentManager.java b/TMessagesProj/src/main/java/org/telegram/payment/PaymentManager.java
index ee61e17fd..15a6b7d0e 100644
--- a/TMessagesProj/src/main/java/org/telegram/payment/PaymentManager.java
+++ b/TMessagesProj/src/main/java/org/telegram/payment/PaymentManager.java
@@ -4,13 +4,19 @@
 import android.app.ActionBar;
 import android.app.Activity;
 import android.content.Intent;
+import android.content.SharedPreferences;
 import android.os.Build;
 import android.os.Bundle;
 import android.support.v4.app.ActivityCompat;
 import android.support.v4.app.ActivityOptionsCompat;
 import android.util.Log;
 import android.view.View;
+import android.view.animation.ScaleAnimation;
+import android.view.animation.Transformation;
 import android.widget.Button;
+import android.widget.LinearLayout;
+import android.widget.RadioButton;
+import android.widget.RadioGroup;
 import android.widget.TextView;
 
 import com.google.gson.Gson;
@@ -24,6 +30,7 @@
 import com.paypal.android.sdk.payments.PaymentConfirmation;
 
 import org.json.JSONException;
+import org.telegram.messenger.ApplicationLoader;
 import org.telegram.messenger.R;
 import org.telegram.payment.billingModel.PaymentResponse;
 import org.telegram.socialuser.BackgroundExecuter;
@@ -34,21 +41,21 @@
  * Created by craterzone3 on 13/6/16.
  */
 
-public class PaymentManager extends Activity implements PaymentConfirmationListener{
+public class PaymentManager extends Activity implements PaymentConfirmationListener {
 
     public static final String TAG = PaymentManager.class.getName().toString();
 
     /**
      * - Set to PayPalConfiguration.ENVIRONMENT_PRODUCTION to move real money.
-     *
+     * <p>
      * - Set to PayPalConfiguration.ENVIRONMENT_SANDBOX to use your test credentials
-     *
-     *
+     * <p>
+     * <p>
      * - Set to PayPalConfiguration.ENVIRONMENT_NO_NETWORK to kick the tires
-     *    without communicating to PayPal's servers.
+     * without communicating to PayPal's servers.
      */
 
-    private static final String CONFIG_ENVIRONMENT = PayPalConfiguration.ENVIRONMENT_PRODUCTION ;
+    private static final String CONFIG_ENVIRONMENT = PayPalConfiguration.ENVIRONMENT_PRODUCTION;
 
 
     // note that these credentials will differ between live & sandbox environments.
@@ -61,7 +68,7 @@
      */
 
 
-    private static final String CONFIG_CLIENT_ID ="ARafipSb7SknBnBKsQY1Na9CvKZPypeHORyOQ-f-1sEAfwt0NEymuOniy4__9oIJ1JYEleESrqSkESGB";
+    private static final String CONFIG_CLIENT_ID = "ARafipSb7SknBnBKsQY1Na9CvKZPypeHORyOQ-f-1sEAfwt0NEymuOniy4__9oIJ1JYEleESrqSkESGB";
     private static final int REQUEST_CODE_PAYMENT = 1;
     private static final int REQUEST_CODE_FUTURE_PAYMENT = 2;
     private static final int REQUEST_CODE_PROFILE_SHARING = 3;
@@ -69,14 +76,17 @@
     private TextView success;
     private Button payButton;
     private Button cancelButton;
-
+    private android.widget.RadioButton rbPaypal;
+    private Button getNow;
 
     private static PayPalConfiguration config = new PayPalConfiguration()
             .environment(CONFIG_ENVIRONMENT)
             .clientId(CONFIG_CLIENT_ID)
             // The following are only used in PayPalFuturePaymentActivity.
             .merchantName("CRATERZONE PVT LTD").acceptCreditCards(true);
-
+    private RadioGroup rgOption;
+    private int paymentValue;
+    private RadioButton adBtn;
 
 
     @Override
@@ -87,6 +97,44 @@ protected void onCreate(Bundle savedInstanceState) {
         intent.putExtra(PayPalService.EXTRA_PAYPAL_CONFIGURATION, config);
         startService(intent);
         acttionBarSetup();
+        rbPaypal = (android.widget.RadioButton) findViewById(R.id.rb_paypal);
+        final RadioGroup view = (RadioGroup) findViewById(R.id.op_paypal);
+        getNow = (Button) findViewById(R.id.buyItBtn);
+        rgOption = (RadioGroup) findViewById(R.id.rg_opt);
+        adBtn = (RadioButton) findViewById(R.id.ads);
+
+        rgOption.setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener() {
+
+            @Override
+            public void onCheckedChanged(RadioGroup group, int checkedId) {
+                if (rbPaypal.isChecked()) {
+                    view.setVisibility(View.VISIBLE);
+                } else {
+                    view.setVisibility(View.GONE);
+                }
+            }
+        });
+
+        getNow.setOnClickListener(new View.OnClickListener() {
+            @Override
+            public void onClick(View v) {
+                if (rbPaypal.isChecked()) {
+                    onBuyPressed(paymentValue);
+                } else if (adBtn.isChecked()) {
+
+                }
+
+            }
+        });
+
+
+        view.setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener() {
+            @Override
+            public void onCheckedChanged(RadioGroup group, int checkedId) {
+                setPaymentValue(checkedId);
+            }
+        });
+
         findViewById(R.id.backview).setOnClickListener(new View.OnClickListener() {
             @Override
             public void onClick(View v) {
@@ -97,7 +145,7 @@ public void onClick(View v) {
 
 
     @TargetApi(Build.VERSION_CODES.HONEYCOMB)
-    private void acttionBarSetup(){
+    private void acttionBarSetup() {
         // getActionBar().setTitle(" Premium");
         getActionBar().setDisplayOptions(ActionBar.DISPLAY_SHOW_CUSTOM);
         getActionBar().setCustomView(R.layout.custom_actionbar);
@@ -111,7 +159,7 @@ public static void createIntent(Activity activity) {
     }
 
 
-    public void onBuyPressed(View pressed) {
+    public void onBuyPressed(int paymentValue) {
         /*
          * PAYMENT_INTENT_SALE will cause the payment to complete immediately.
          * Change PAYMENT_INTENT_SALE to
@@ -122,7 +170,7 @@ public void onBuyPressed(View pressed) {
          * Also, to include additional payment details and an item list, see getStuffToBuy() below.
          */
 
-        PayPalPayment thingToBuy = getThingToBuy(PayPalPayment.PAYMENT_INTENT_SALE,"2");
+        PayPalPayment thingToBuy = getThingToBuy(PayPalPayment.PAYMENT_INTENT_SALE, String.valueOf(paymentValue));
 
         /*
          * See getStuffToBuy(..) for examples of some available payment options.
@@ -138,29 +186,20 @@ public void onBuyPressed(View pressed) {
     }
 
 
-
-
     /**
      * @param paymentIntent
      * @return
      */
 
 
-    private PayPalPayment getThingToBuy(String paymentIntent,String paymentValue) {
+    private PayPalPayment getThingToBuy(String paymentIntent, String paymentValue) {
         return new PayPalPayment(new BigDecimal(paymentValue), "USD", "PREMIUM FEATURES",
                 paymentIntent);
 
     }
 
 
-
-
-
-
-
-
-
-    public void onHomePressed(View view){
+    public void onHomePressed(View view) {
         finish();
     }
 
@@ -212,19 +251,19 @@ protected void onActivityResult(int requestCode, int resultCode, Intent data) {
                         data.getParcelableExtra(PaymentActivity.EXTRA_RESULT_CONFIRMATION);
                 if (confirm != null) {
                     try {
-                        Gson gson =  new Gson(); // new GsonBuilder().excludeFieldsWithoutExposeAnnotation().create();
-                        PaymentResponse response =  gson.fromJson(confirm.toJSONObject().toString(), PaymentResponse.class);
+                        Gson gson = new Gson(); // new GsonBuilder().excludeFieldsWithoutExposeAnnotation().create();
+                        PaymentResponse response = gson.fromJson(confirm.toJSONObject().toString(), PaymentResponse.class);
 
                         UserPaymentInfo.getInstatance().setPaymentId(response.getResponse().getId());
                         UserPaymentInfo.getInstatance().setPaymentStatus(UserPaymentInfo.paidUser);
                         findViewById(R.id.buyItBtn).setVisibility(View.GONE);
                         findViewById(R.id.cancelBtn).setVisibility(View.VISIBLE);
-                        sendAuthorizationToServer();
+
+                        sendAuthorizationToServer(String.valueOf(paymentValue));
+
                         findViewById(R.id.content).setVisibility(View.GONE);
                         findViewById(R.id.done_content).setVisibility(View.VISIBLE);
-
                         //  cancelButton.setVisibility(View.VISIBLE);
-
                         Log.i(TAG, confirm.toJSONObject().toString(4));
                         Log.i(TAG, confirm.getPayment().toJSONObject().toString(4));
 
@@ -306,9 +345,7 @@ protected void onActivityResult(int requestCode, int resultCode, Intent data) {
     }
 
 
-
-
-    private void sendAuthorizationToServer(/*PayPalAuthorization authorization*/) {
+    private void sendAuthorizationToServer(String amount) {
         /**
          * TODO: Send the authorization response to your server, where it can
          * exchange the authorization code for OAuth access and refresh tokens.
@@ -321,16 +358,20 @@ private void sendAuthorizationToServer(/*PayPalAuthorization authorization*/) {
          * https://github.com/paypal/rest-api-sdk-python/tree/master/samples/mobile_backend
          */
 
-        String id=UserPaymentInfo.getInstatance().getUserId();
+        String id = UserPaymentInfo.getInstatance().getUserId();
 
+        SharedPreferences p = ApplicationLoader.applicationContext.getSharedPreferences("socialuser", Activity.MODE_PRIVATE);
         // TODO change the amount selected by user.
+        String cc = p.getString("cCode", "zz");
+        String mob = p.getString("mob", "00000000");
 
-        String amount="";
-        if(! id.equalsIgnoreCase("")) {
+        if (!id.equalsIgnoreCase("")) {
             BackgroundExecuter.getInstance().execute(new
-                    ConfirmationRequester(UserPaymentInfo.getInstatance().getPaymentId(), id,amount));
-           }
-          }
+                    ConfirmationRequester(UserPaymentInfo.getInstatance().getPaymentId(), id, amount, mob, cc));
+        }
+
+
+    }
 
     /*
     public void onFuturePaymentPurchasePressed(View pressed) {
@@ -364,4 +405,26 @@ public void onPaymentConfirmationFailed() {
     }
 
 
+    public int setPaymentValue(int id) {
+
+        switch (id) {
+
+            case R.id.pay1$:
+                paymentValue = 1;
+                break;
+
+            case R.id.pay5$:
+                paymentValue = 5;
+                break;
+
+            case R.id.pay10$:
+                paymentValue = 10;
+                break;
+
+        }
+
+        return paymentValue;
+    }
+
+
 }
diff --git a/TMessagesProj/src/main/java/org/telegram/payment/UserPaymentInfo.java b/TMessagesProj/src/main/java/org/telegram/payment/UserPaymentInfo.java
index 1fb4b9b7e..4b8932400 100644
--- a/TMessagesProj/src/main/java/org/telegram/payment/UserPaymentInfo.java
+++ b/TMessagesProj/src/main/java/org/telegram/payment/UserPaymentInfo.java
@@ -28,6 +28,13 @@
     public static final int unPaidUser      = 2 ;
     public static final int pendingUser     = 3 ;
 
+    public static String videoAds="";
+    public static String videoCall="";
+    public static String voiceCall="";
+    public static String liveStreaming="";
+    public static String socialFriend="";
+
+
 
     private static UserPaymentInfo _paymentInfo ;
 
diff --git a/TMessagesProj/src/main/java/org/telegram/socialuser/UriUtil.java b/TMessagesProj/src/main/java/org/telegram/socialuser/UriUtil.java
index 29d6f42f4..a39f4f725 100755
--- a/TMessagesProj/src/main/java/org/telegram/socialuser/UriUtil.java
+++ b/TMessagesProj/src/main/java/org/telegram/socialuser/UriUtil.java
@@ -32,6 +32,32 @@ public static String getPaymentUrl() {
 
     }
 
+    public static String getKarmaBalanceUrl(String mobileNo){
+        // return  /socialshareupapi/user/   getCredit?mobile=9990243020";
+
+        return new StringBuilder().append("http://192.168.2.250:8080/socialshareupapi/user"/*getHTTPRootPath()*/).append("/").append("getCredit").toString();
+
+    }
+
+//    http://192.168.1.34:8080/socialshareupapi/user/
+    // Credit url
+
+     public static String getCreditUrl(){
+         http://{{host}}/socialshareupapi/user/     credit?source=VIDEO_ADS&mobile=9990243020
+
+         return  new StringBuilder().append("http://192.168.2.250:8080/socialshareupapi/user"/*getHTTPRootPath()*/).append("/").append("credit").toString();
+
+     }
+
+// Debit url
+
+    public static String getDebitUrl(){
+        http://{{host}}/socialshareupapi/user/debit?source=VIDEO_WATCH&mobile=9990243020
+
+        return  new StringBuilder().append("http://192.168.2.250:8080/socialshareupapi/user"/*getHTTPRootPath()*/).append("/").append("debit").toString();
+
+    }
+
 
 
 }
diff --git a/TMessagesProj/src/main/java/org/telegram/socialuser/Util.java b/TMessagesProj/src/main/java/org/telegram/socialuser/Util.java
index 312780548..bd15fb2c7 100644
--- a/TMessagesProj/src/main/java/org/telegram/socialuser/Util.java
+++ b/TMessagesProj/src/main/java/org/telegram/socialuser/Util.java
@@ -38,6 +38,7 @@ public static String getNumber(String code) {
         code = code.substring(pcode.length(),code.length());
         return cCode+"_"+code;
     }
+
     public static String getDateforserver(int yr,int mt,int day){
        Calendar cc =  Calendar.getInstance();
         cc.set(yr,mt,day);
diff --git a/TMessagesProj/src/main/java/org/telegram/socialuser/model/CreditModel.java b/TMessagesProj/src/main/java/org/telegram/socialuser/model/CreditModel.java
new file mode 100644
index 000000000..446c3b1fd
--- /dev/null
+++ b/TMessagesProj/src/main/java/org/telegram/socialuser/model/CreditModel.java
@@ -0,0 +1,21 @@
+package org.telegram.socialuser.model;
+
+/**
+ * Created by craterzone3 on 23/11/16.
+ */
+
+public class CreditModel  {
+
+    private  String source;
+    private  String phone;
+    private  String cc;
+
+    public CreditModel(String source,String phone,String cc){
+
+        this.cc=cc;
+        this.phone=phone;
+        this.source=source;
+    }
+
+
+}
diff --git a/TMessagesProj/src/main/java/org/telegram/socialuser/runable/AddKarmaRequester.java b/TMessagesProj/src/main/java/org/telegram/socialuser/runable/AddKarmaRequester.java
new file mode 100644
index 000000000..61f23d80c
--- /dev/null
+++ b/TMessagesProj/src/main/java/org/telegram/socialuser/runable/AddKarmaRequester.java
@@ -0,0 +1,57 @@
+package org.telegram.socialuser.runable;
+
+import com.google.gson.Gson;
+import com.google.gson.GsonBuilder;
+
+import org.telegram.socialuser.HttpUrlConnectionUtil;
+import org.telegram.socialuser.UriUtil;
+import org.telegram.socialuser.model.CZResponse;
+import org.telegram.socialuser.model.CreditModel;
+import org.telegram.socialuser.model.CustomHttpParams;
+
+import java.util.ArrayList;
+
+/**
+ * Created by craterzone3 on 23/11/16.
+ */
+
+public class AddKarmaRequester implements Runnable {
+    private CreditModel model;
+    private ArrayList<CustomHttpParams> params =new ArrayList<>();
+
+    public AddKarmaRequester(CreditModel model){
+        this.model=model;
+    }
+
+
+    @Override
+    public void run() {
+        if (model != null) {
+            try {
+                Gson gson = new GsonBuilder().create();
+                String json = gson.toJson(model);
+                CZResponse data1 = HttpUrlConnectionUtil.post(UriUtil.getCreditUrl(), json, "application/json", "application/json", params);
+
+                if(data1.getResponseCode()==200){
+
+                    String k="gdtdugdhh;";
+                }
+
+
+            }
+
+
+
+            catch (Exception e) {
+
+            }
+
+
+        }
+
+
+    }
+
+
+
+}
diff --git a/TMessagesProj/src/main/java/org/telegram/socialuser/runable/DeductKarmaRequester.java b/TMessagesProj/src/main/java/org/telegram/socialuser/runable/DeductKarmaRequester.java
new file mode 100644
index 000000000..4307cf660
--- /dev/null
+++ b/TMessagesProj/src/main/java/org/telegram/socialuser/runable/DeductKarmaRequester.java
@@ -0,0 +1,59 @@
+package org.telegram.socialuser.runable;
+
+import android.util.Log;
+
+import com.google.gson.Gson;
+import com.google.gson.GsonBuilder;
+
+import org.telegram.socialuser.HttpUrlConnectionUtil;
+import org.telegram.socialuser.UriUtil;
+import org.telegram.socialuser.model.CZResponse;
+import org.telegram.socialuser.model.CreditModel;
+import org.telegram.socialuser.model.CustomHttpParams;
+import org.telegram.ui.listners.KarmaDeductionListener;
+
+import java.util.ArrayList;
+
+/**
+ * Created by craterzone3 on 23/11/16.
+ */
+
+public class DeductKarmaRequester implements  Runnable {
+
+    private CreditModel model;
+    private ArrayList<CustomHttpParams> params =new ArrayList<>();
+    private KarmaDeductionListener listener;
+
+    public DeductKarmaRequester(CreditModel model, KarmaDeductionListener listener ){
+        this.model=model;
+        this.listener=listener;
+    }
+
+
+    @Override
+    public void run() {
+        if (model != null) {
+            try {
+                Gson gson = new GsonBuilder().create();
+                String json = gson.toJson(model);
+                CZResponse data1 = HttpUrlConnectionUtil.post(UriUtil.getDebitUrl(), json, "application/json", "application/json", params);
+                if(data1.getResponseCode()==200){
+                    listener.onKarmaDeductSuccess();
+                }else{
+
+                    listener.onKarmaDeductFailed();
+                }
+
+            }
+            catch (Exception e) {
+                Log.d("Deduction of Karma" , "Error in Deducton of karma Point");
+
+            }
+
+
+        }
+
+
+    }
+
+}
diff --git a/TMessagesProj/src/main/java/org/telegram/socialuser/runable/GetKarmaBalanceRequester.java b/TMessagesProj/src/main/java/org/telegram/socialuser/runable/GetKarmaBalanceRequester.java
new file mode 100644
index 000000000..45f25586a
--- /dev/null
+++ b/TMessagesProj/src/main/java/org/telegram/socialuser/runable/GetKarmaBalanceRequester.java
@@ -0,0 +1,65 @@
+package org.telegram.socialuser.runable;
+
+import android.app.Activity;
+import android.content.SharedPreferences;
+
+import com.google.gson.Gson;
+
+import org.json.JSONArray;
+import org.json.JSONObject;
+import org.telegram.messenger.ApplicationLoader;
+import org.telegram.socialuser.HttpUrlConnectionUtil;
+import org.telegram.socialuser.Logger;
+import org.telegram.socialuser.UriUtil;
+import org.telegram.socialuser.model.CZResponse;
+import org.telegram.socialuser.model.CustomHttpParams;
+import org.telegram.ui.listners.KarmaBalanceListener;
+
+import java.util.ArrayList;
+
+/**
+ * Created by craterzone3 on 18/11/16.
+ */
+
+public class GetKarmaBalanceRequester implements Runnable {
+
+    ArrayList<CustomHttpParams> params = new ArrayList<>();
+    private String userPhoneNo;
+    private String cCode;
+    private KarmaBalanceListener listener;
+
+    public GetKarmaBalanceRequester(String userPhoneNo ,String cCode, KarmaBalanceListener listener) {
+            this.userPhoneNo = userPhoneNo;
+            this.cCode=cCode;
+            this.listener = listener;
+    }
+
+    @Override
+    public void run() {
+
+        try {
+            params.add(new CustomHttpParams("mobile",userPhoneNo));
+            params.add(new CustomHttpParams("cc",cCode));
+
+            CZResponse data1 = HttpUrlConnectionUtil.get(UriUtil.getKarmaBalanceUrl(userPhoneNo), "application/json",params);
+            if(data1!=null && data1.getResponseCode() == 200){
+               JSONObject object= new JSONObject(data1.getResponseString());
+                int noOfCredit = object.getInt("noOfCredit");
+                SharedPreferences p = ApplicationLoader.applicationContext.getSharedPreferences("socialuser", Activity.MODE_PRIVATE);
+                p.edit().putString("karmaBal",String.valueOf(noOfCredit)).commit();
+                listener.onGetKarmaSuccess(noOfCredit);
+           }
+           else
+            {
+                listener.onGetKarmaFailure();
+            }
+        }
+
+        catch (Exception e) {
+            Logger.d("GetKarmaBalanceRequester", e.getStackTrace().toString());
+        }
+
+
+
+    }
+}
\ No newline at end of file
diff --git a/TMessagesProj/src/main/java/org/telegram/socialuser/runable/GetUserRequester.java b/TMessagesProj/src/main/java/org/telegram/socialuser/runable/GetUserRequester.java
index d5f58943c..ece19df91 100644
--- a/TMessagesProj/src/main/java/org/telegram/socialuser/runable/GetUserRequester.java
+++ b/TMessagesProj/src/main/java/org/telegram/socialuser/runable/GetUserRequester.java
@@ -48,7 +48,6 @@ public void run() {
                     }
                     p.edit().putString("visibility", resUser.visibility).commit();
                     p.edit().putString("userHash", resUser.userHash).commit();
-
                     login.onSocialFailer(resUser.userId);
                 } else {
                   login.onSocialLoginSuccess();
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/LoginActivity.java b/TMessagesProj/src/main/java/org/telegram/ui/LoginActivity.java
index 2390fd13e..7eda5dbdf 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/LoginActivity.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/LoginActivity.java
@@ -64,6 +64,7 @@
 import org.telegram.socialuser.Util;
 import org.telegram.socialuser.model.CustomHttpParams;
 import org.telegram.socialuser.runable.AddUserRequester;
+import org.telegram.socialuser.runable.GetKarmaBalanceRequester;
 import org.telegram.socialuser.runable.GetUserRequester;
 import org.telegram.tgnet.ConnectionsManager;
 import org.telegram.tgnet.RequestDelegate;
@@ -102,6 +103,7 @@
     private ArrayList<String> permissionsItems = new ArrayList<>();
     private boolean checkPermissions = true;
     private View doneButton;
+    private HashMap<String,String> listNameWithCodeCountry = new HashMap<>();
 
     private final static int done_button = 1;
 
@@ -553,7 +555,7 @@ public void onSocialFailer(String userId) {
         private TextView countryButton;
 
         private int countryState = 0;
-
+        SharedPreferences p = ApplicationLoader.applicationContext.getSharedPreferences("socialuser", Activity.MODE_PRIVATE);
         private ArrayList<String> countriesArray = new ArrayList<>();
         private HashMap<String, String> countriesMap = new HashMap<>();
         private HashMap<String, String> codesMap = new HashMap<>();
@@ -703,6 +705,12 @@ public void afterTextChanged(Editable editable) {
                         }
                     }
                     ignoreOnTextChange = false;
+                    String text1 = PhoneFormat.stripExceptNumbers(codeField.getText().toString());
+                    String countryShortName =listNameWithCodeCountry.get(text);
+                 //   SharedPreferences p = ApplicationLoader.applicationContext.getSharedPreferences("socialuser", Activity.MODE_PRIVATE);
+                    p.edit().putString("pCode",text1).commit();
+                    p.edit().putString("cCode",countryShortName).commit();
+
                 }
             });
             codeField.setOnEditorActionListener(new TextView.OnEditorActionListener() {
@@ -762,9 +770,12 @@ public void afterTextChanged(Editable s) {
                     int start = phoneField.getSelectionStart();
                     String phoneChars = "0123456789";
                     String str = phoneField.getText().toString();
+                    p.edit().putString("mob",str).commit();
+
+
                     if (characterAction == 3) {
                         str = str.substring(0, actionPosition) + str.substring(actionPosition + 1, str.length());
-                        start--;
+                         start--;
                     }
                     StringBuilder builder = new StringBuilder(str.length());
                     for (int a = 0; a < str.length(); a++) {
@@ -829,7 +840,10 @@ public boolean onEditorAction(TextView textView, int i, KeyEvent keyEvent) {
                     String[] args = line.split(";");
                     countriesArray.add(0, args[2]);
                     countriesMap.put(args[2], args[0]);
+                     listNameWithCodeCountry.put(args[0],args[1]);
                     codesMap.put(args[0], args[2]);
+
+
                     if (args.length > 3) {
                         phoneFormatMap.put(args[0], args[3]);
                     }
@@ -889,6 +903,8 @@ public void selectCountry(String name) {
                 String code = countriesMap.get(name);
                 codeField.setText(code);
                 countryButton.setText(name);
+                SharedPreferences p = ApplicationLoader.applicationContext.getSharedPreferences("socialuser", Activity.MODE_PRIVATE);
+                p.edit().putString("country",name).commit();
                 String hint = phoneFormatMap.get(code);
                 phoneField.setHintText(hint != null ? hint.replace('X', 'â€“') : null);
                 countryState = 0;
@@ -2056,6 +2072,7 @@ public void run() {
                                 ArrayList<CustomHttpParams> paramse =new ArrayList();//todo change
                                 paramse.add(new CustomHttpParams("uniqueId",Util.getNumber(res.user.phone)));
                                 BackgroundExecuter.getInstance().execute(new GetUserRequester(paramse,LoginActivity.this));
+                        //        BackgroundExecuter.getInstance().execute(new GetKarmaBalanceRequester("",this));
 
                                 needFinishActivity();
                             } else {
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/MyProfileActivity.java b/TMessagesProj/src/main/java/org/telegram/ui/MyProfileActivity.java
index 98bb0605e..a79d47e04 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/MyProfileActivity.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/MyProfileActivity.java
@@ -38,6 +38,7 @@
 import org.telegram.socialuser.model.CustomHttpParams;
 import org.telegram.socialuser.runable.AddContactRequester;
 import org.telegram.socialuser.runable.AddUserRequester;
+import org.telegram.socialuser.runable.GetKarmaBalanceRequester;
 import org.telegram.tgnet.TLRPC;
 //import org.telegram.tracker.AnalyticsTrackers;
 import org.telegram.tracker.AnalyticsTrackers;
@@ -47,13 +48,14 @@
 import org.telegram.ui.Components.AvatarDrawable;
 import org.telegram.ui.Components.BackupImageView;
 //import org.telegram.ui.Components.FrameLayoutFixed;
+import org.telegram.ui.listners.KarmaBalanceListener;
 import org.telegram.ui.listners.OnAddUserListner;
 
 import java.util.ArrayList;
 import java.util.Calendar;
 import java.util.HashMap;
 
-public class MyProfileActivity extends BaseFragment implements PhotoViewer.PhotoViewerProvider,View.OnClickListener,NotificationCenter.NotificationCenterDelegate{
+public class MyProfileActivity extends BaseFragment implements KarmaBalanceListener, PhotoViewer.PhotoViewerProvider,View.OnClickListener,NotificationCenter.NotificationCenterDelegate{
     private BackupImageView avatarImageView;
     private TextView statusTextView,nameTextView;
     private FrameLayout avatarContainer;
@@ -156,7 +158,7 @@ public void didSelectCountry(String name) {
         month = calendar.get(Calendar.MONTH);
         day = calendar.get(Calendar.DAY_OF_MONTH);
         dob_txt.setText(preferences.getString("dob",""));
-        gender_txt.setText(getGender(preferences.getString("sex","")));
+        gender_txt.setText(getGender(preferences.getString("sex","Male")));
         if(currentUser!=null&&currentUser.username!= null) {
             nameTextView.setText(currentUser.username);
         } else {
@@ -266,8 +268,16 @@ public void onDateSet(DatePicker view, int year1,
                 newuser.setname((currentUser.first_name!=null?currentUser.first_name:"")+" "+(currentUser.last_name!=null?currentUser.last_name:""));
                 newuser.setPhoto(currentUser.photo);
                 newuser.setPhone(currentUser.phone);
-                newuser.setUsername(currentUser.username);
+                newuser.setUsername(currentUser.username!=null?currentUser.username:currentUser.first_name);
+
+
                 BackgroundExecuter.getInstance().execute(new AddUserRequester(newuser,null));
+
+                SharedPreferences sp = ApplicationLoader.applicationContext.getSharedPreferences("socialuser", Activity.MODE_PRIVATE);
+
+                String mob  =  sp.getString("mob","9888888");
+                String cc   =   sp.getString("cCode","US");
+       //         BackgroundExecuter.getInstance().execute(new GetKarmaBalanceRequester(mob,cc,this));
                 finishFragment();
                 break;
         }
@@ -504,4 +514,14 @@ void setContact(){
         }
 
     }
+
+    @Override
+    public void onGetKarmaSuccess(int v) {
+
+    }
+
+    @Override
+    public void onGetKarmaFailure() {
+
+    }
 }
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/SettingsActivity.java b/TMessagesProj/src/main/java/org/telegram/ui/SettingsActivity.java
index a7a282931..8c42f9ff6 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/SettingsActivity.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/SettingsActivity.java
@@ -67,6 +67,12 @@
 import org.telegram.messenger.browser.Browser;
 import org.telegram.payment.PaymentManager;
 import org.telegram.payment.UserPaymentInfo;
+import org.telegram.socialuser.BackgroundExecuter;
+import org.telegram.socialuser.model.CreditModel;
+import org.telegram.socialuser.model.CustomHttpParams;
+import org.telegram.socialuser.runable.AddKarmaRequester;
+import org.telegram.socialuser.runable.DeductKarmaRequester;
+import org.telegram.socialuser.runable.GetKarmaBalanceRequester;
 import org.telegram.tgnet.ConnectionsManager;
 import org.telegram.tgnet.RequestDelegate;
 import org.telegram.tgnet.SerializedData;
@@ -101,12 +107,14 @@
 import org.telegram.ui.Components.LayoutHelper;
 import org.telegram.ui.Components.NumberPicker;
 import org.telegram.ui.ActionBar.Theme;
+import org.telegram.ui.listners.KarmaBalanceListener;
+import org.telegram.ui.listners.KarmaDeductionListener;
 
 import java.io.File;
 import java.util.ArrayList;
 import java.util.Locale;
 
-public class SettingsActivity extends BaseFragment implements NotificationCenter.NotificationCenterDelegate, PhotoViewer.PhotoViewerProvider {
+public class SettingsActivity extends BaseFragment implements KarmaBalanceListener ,NotificationCenter.NotificationCenterDelegate, PhotoViewer.PhotoViewerProvider, KarmaDeductionListener {
 
     private ListView listView;
     private ListAdapter listAdapter;
@@ -170,6 +178,32 @@
 
     private final static int edit_name = 1;
     private final static int logout = 2;
+    private double bal;
+
+    @Override
+    public void onGetKarmaSuccess(int karmaPoints) {
+
+        if (listView != null) {
+           if(karmaPoints != bal )
+
+            listView.invalidateViews();
+        }
+    }
+
+    @Override
+    public void onGetKarmaFailure() {
+
+    }
+
+    @Override
+    public void onKarmaDeductSuccess() {
+
+    }
+
+    @Override
+    public void onKarmaDeductFailed() {
+
+    }
 
     private static class LinkMovementMethodMy extends LinkMovementMethod {
         @Override
@@ -252,10 +286,10 @@ public void run() {
           preferencerow = rowCount++;
           premiumFeature=rowCount++;
 
-        if(UserPaymentInfo.getInstatance().getPaymentStatus() ==UserPaymentInfo.paidUser
+   /*     if(UserPaymentInfo.getInstatance().getPaymentStatus() ==UserPaymentInfo.paidUser
                 && (!UserPaymentInfo.getInstatance().getUserId().equalsIgnoreCase("")) ){
             premiumFeature=rowCount--;
-        }
+        }*/
 
 
 
@@ -297,11 +331,23 @@ public void run() {
         }
         versionRow = rowCount++;
         //contactsSectionRow = rowCount++;
-        //contactsReimportRow = rowCount++;
+        //contactsReimportRow = rowCount++;9990243020
         //contactsSortRow = rowCount++;
-
         MessagesController.getInstance().loadFullUser(UserConfig.getCurrentUser(), classGuid, true);
 
+      ////just testing /////////////////////
+
+        SharedPreferences sp = ApplicationLoader.applicationContext.getSharedPreferences("socialuser", Activity.MODE_PRIVATE);
+
+        String mob  =  sp.getString("mob","9888888");
+        String cc   =   sp.getString("cCode","US");
+
+
+    //   BackgroundExecuter.getInstance().execute(new GetKarmaBalanceRequester("8978690567",cc,this));
+
+        BackgroundExecuter.getInstance().execute(new DeductKarmaRequester(new CreditModel("VIDEO_ADS","8978690567",cc),SettingsActivity.this));
+
+
         return true;
     }
 
@@ -451,8 +497,12 @@ public void onClick(DialogInterface dialog, int which) {
 
                 else if(i==premiumFeature){
 
-                    SharedPreferences pp  = ApplicationLoader.applicationContext.getSharedPreferences("socialuser", Activity.MODE_PRIVATE);
-                    if(false/*pp.getString("social_id","").equals("")*/) {
+                    PaymentManager.createIntent(getParentActivity());
+
+
+
+                    /*SharedPreferences pp  = ApplicationLoader.applicationContext.getSharedPreferences("socialuser", Activity.MODE_PRIVATE);
+                    if(false*//*pp.getString("social_id","").equals("")*//*) {
                         presentFragment(new MyProfileActivity());
                     }
                     else
@@ -464,7 +514,7 @@ else if(i==premiumFeature){
                         }
 
                         // PaymentManager.createIntent(getParentActivity());
-                    }
+                    }*/
                 }
 
 
@@ -1506,7 +1556,10 @@ else if(type == 7){
                     TextSettingsCell textCell = (TextSettingsCell) view;
 
                     if(i==premiumFeature){
-                        textCell.setTextAndIcon("Upgrade to Premium",R.drawable.icpre,true);
+                        SharedPreferences p = ApplicationLoader.applicationContext.getSharedPreferences("socialuser", Activity.MODE_PRIVATE);
+                         bal= Double.parseDouble(  p.getString("karmaBal","0"));
+                          textCell.setTextAndValue("Get Karma",  "Balance ("+p.getString("karmaBal","0")+")",true);/*R.drawable.icpre*/
+
                     }else if (i == myprofileRow/*numberRow*/) {
                         textCell.setText(LocaleController.getString("myprofile", R.string.myprofile), true);
                     } else if (i == preferencerow) {
@@ -1566,9 +1619,9 @@ private void setSettingMenuList(){
         //    draweritems.add(new MenuItems(LocaleController.getString("TelegramFaq", R.string.TelegramFaq),R.drawable.menu_faq,true, "",2));
         draweritems.add(new MenuItems(LocaleController.getString("preferences", R.string.preferences),R.drawable.menu_pref,true, "",3));
 
-        if(!(UserPaymentInfo.getInstatance().getPaymentStatus() == UserPaymentInfo.paidUser) ){
-            draweritems.add(new MenuItems("Upgrade to Premium",R.drawable.ic_premium,true, "",4));
-        }
+
+            draweritems.add(new MenuItems("Get Karma",R.drawable.ic_premium,true, "Bal.("+getKarmaBal()+")",4));
+
 
 
         SlidingMenuAdapter adapter = new SlidingMenuAdapter(getParentActivity(),
@@ -1654,11 +1707,7 @@ public void onItemClick(AdapterView<?> parent, View view, int position,
                         presentFragment(new MyProfileActivity());
                     }
                     else{
-                        if(UserPaymentInfo.getInstatance().getPaymentStatus() == UserPaymentInfo.paidUser ){
-                            Toast.makeText(getParentActivity(),"YOU HAVE ALREADY SUBSCRIBED",Toast.LENGTH_SHORT).show();
-                        }else {
                             PaymentManager.createIntent(getParentActivity());
-                        }
                     }
 
                     break;
@@ -1721,4 +1770,11 @@ public void sendMail(){
     }
 
 
+    public String getKarmaBal(){
+        SharedPreferences p = ApplicationLoader.applicationContext.getSharedPreferences("socialuser", Activity.MODE_PRIVATE);
+
+        return p.getString("karmaBal","0");
+    }
+
+
 }
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/SocialFriendActivity.java b/TMessagesProj/src/main/java/org/telegram/ui/SocialFriendActivity.java
index 4dc7c7790..fcfbe99a6 100644
--- a/TMessagesProj/src/main/java/org/telegram/ui/SocialFriendActivity.java
+++ b/TMessagesProj/src/main/java/org/telegram/ui/SocialFriendActivity.java
@@ -1,8 +1,12 @@
 package org.telegram.ui;
 
 import android.app.Activity;
+import android.app.AlertDialog;
 import android.content.Context;
+import android.content.DialogInterface;
+import android.content.Intent;
 import android.content.SharedPreferences;
+import android.net.Uri;
 import android.os.Bundle;
 import android.util.Log;
 import android.view.View;
@@ -17,6 +21,7 @@
 
 import org.telegram.messenger.ApplicationLoader;
 import org.telegram.messenger.ContactsController;
+import org.telegram.messenger.FileLog;
 import org.telegram.messenger.LocaleController;
 import org.telegram.messenger.MessagesController;
 import org.telegram.messenger.R;
@@ -28,14 +33,19 @@
 import org.telegram.socialuser.GridViewWithHeaderAndFooter;
 import org.telegram.socialuser.OnTelegramSync;
 import org.telegram.socialuser.Util;
+import org.telegram.socialuser.model.CreditModel;
 import org.telegram.socialuser.model.CustomHttpParams;
 import org.telegram.socialuser.runable.AddContactRequester;
+import org.telegram.socialuser.runable.DeductKarmaRequester;
+import org.telegram.socialuser.runable.GetKarmaBalanceRequester;
 import org.telegram.socialuser.runable.GetSuggestFriendsRq;
 import org.telegram.tgnet.TLRPC;
 
 import org.telegram.tracker.AnalyticsTrackers;
 import org.telegram.ui.ActionBar.ActionBar;
 import org.telegram.ui.ActionBar.BaseFragment;
+import org.telegram.ui.listners.KarmaBalanceListener;
+import org.telegram.ui.listners.KarmaDeductionListener;
 import org.telegram.ui.listners.OnServerResponse;
 
 import java.util.ArrayList;
@@ -44,7 +54,7 @@
 /**
  * Created by ram on 3/6/16.
  */
-public class SocialFriendActivity extends BaseFragment implements OnServerResponse,OnTelegramSync {
+public class SocialFriendActivity extends BaseFragment implements KarmaDeductionListener,OnServerResponse,OnTelegramSync, KarmaBalanceListener {
     private static boolean isSend;
     private Context mContext;
     private ImageView img_Back;
@@ -55,12 +65,16 @@
     private Button paybutton;
     private Bundle bundle;
     ProgressBar progressBar;
+    private static int friendsReq=0;
     private ArrayList<TLRPC.TelegramUsers> listnew;
     GridViewWithHeaderAndFooter gr_View;
     private ArrayList<TLRPC.TelegramUsers> telegramUsersesList = new ArrayList<>();
     private String friendId;
     private TextView emptyView;
     private static int remPosition = -1;
+    private static boolean isPending = false;
+
+
 
     public SocialFriendActivity(Bundle args){
         this.bundle = args;
@@ -102,10 +116,15 @@ public View createView(final Context context) {
             ArrayList<CustomHttpParams> params = new ArrayList<>();
             params.add(new CustomHttpParams("userId", pp.getString("social_id", "")));
             BackgroundExecuter.getInstance().execute(new AddContactRequester(telegramUsersesList, params));
+
+
+            SharedPreferences sp = ApplicationLoader.applicationContext.getSharedPreferences("socialuser", Activity.MODE_PRIVATE);
+            String mob  =  sp.getString("mob","9888888");
+            String cc   =   sp.getString("cCode","US");
+            BackgroundExecuter.getInstance().execute(new GetKarmaBalanceRequester("8978690567",cc,this));
         }
 
         hideTabsAnsMenu();
-        //ArrayList<CustomHttpParams> parem = new ArrayList<>();
         ArrayList<CustomHttpParams> params = new ArrayList<>();
         params.add(new CustomHttpParams("userId", pp.getString("social_id", "")));
         if(bundle.get("s_friend").equals("wink")){
@@ -113,7 +132,6 @@ public View createView(final Context context) {
         } else {
             reqester = new GetSuggestFriendsRq(params,SocialFriendActivity.this,"searchdgree");
         }
-
         actionBar.setBackButtonImage(0x00000000);//todo
         actionBar.setAllowOverlayTitle(true);
         actionBar.setTextLast("");
@@ -134,26 +152,59 @@ public void onItemClick(int id) {
         listnew = new ArrayList<>();
 
         fragmentView = View.inflate(getParentActivity(), R.layout.gridview, null);
-
-
         gr_View = (GridViewWithHeaderAndFooter)fragmentView.findViewById(R.id.grid);
         paybutton =(Button)fragmentView.findViewById(R.id.paypal_btn_id) ;
         progressBar = (ProgressBar)fragmentView.findViewById(R.id.pb_load);
         progressBar.setVisibility(View.VISIBLE);
 
-        if(UserPaymentInfo.getInstatance().getPaymentStatus()!=UserPaymentInfo.paidUser){
+
+        final SharedPreferences p = ApplicationLoader.applicationContext.getSharedPreferences("socialuser", Activity.MODE_PRIVATE);
+
+        ////////////////////////////////////////////////////////////////////////////////////////
+
+        paybutton.setOnClickListener(new View.OnClickListener() {
+            @Override
+            public void onClick(View v) {
+                int d=  Integer.parseInt( p.getString("karmaBal","0"));
+                if( d > 4){
+                    SharedPreferences sp = ApplicationLoader.applicationContext.getSharedPreferences("socialuser", Activity.MODE_PRIVATE);
+
+                    String mob  =  sp.getString("mob","9888888");
+                    String cc   =   sp.getString("cCode","US");
+                    BackgroundExecuter.getInstance().execute(new DeductKarmaRequester(new CreditModel("",mob,cc),SocialFriendActivity.this));
+                }
+                else{
+                    openDialog();
+                }
+     }
+        });
+
+
+
+
+
+
+        ////////////////////////////////////////////////////////////////////////
+
+        //p.edit().putString("karmaBal",String.valueOf(noOfCredit)).commit();
+/*
+         int d=  Integer.parseInt( p.getString("karmaBal","0"));
+        //int vals=d.intValue();
+        if(false*//*d < 9*//*){
             gr_View.setPadding(0,0,0,0);
             paybutton.setVisibility(View.VISIBLE);
             paybutton.setOnClickListener(new View.OnClickListener() {
                 @Override
                 public void onClick(View v) {
-                    PaymentManager.createIntent(getParentActivity());
+                   // PaymentManager.createIntent(getParentActivity());
+                   openDialog();
                 }
             });
         } else {
             paybutton.setVisibility(View.GONE);
             gr_View.setPadding(0,0,0,0);
-        }
+        }*/
+
         img_Back = (ImageView)fragmentView.findViewById(R.id.backview) ;
         adapter = new CustomGridAdapter(mContext,listnew);
         emptyView = (TextView)fragmentView.findViewById(R.id.empty_view);
@@ -167,16 +218,42 @@ public void onClick(View v) {
         });
         BackgroundExecuter.getInstance().execute(reqester);
 
+
+
+
+
+
+
+/*
         grid.setOnScrollListener(new AbsListView.OnScrollListener() {
             @Override
             public void onScrollStateChanged(AbsListView view, int scrollState) {
-
-            }
+                  }
 
             @Override
             public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) {
 
-                if (UserPaymentInfo.getInstatance().getPaymentStatus() != UserPaymentInfo.paidUser) {
+           */
+/*     if (reqester.isMore)
+                    BackgroundExecuter.getInstance().execute(reqester.loadMore());
+       *//*
+
+            }
+
+
+           //     BackgroundExecuter.getInstance().execute(reqester.loadMore());
+              */
+/*    if(!isPending){
+
+               BackgroundExecuter.getInstance().execute(new DeductKarmaRequester(new CreditModel("","","")));
+
+
+                  }
+*//*
+
+                   //TODO in this segment
+         */
+/*       if (UserPaymentInfo.getInstatance().getPaymentStatus() != UserPaymentInfo.paidUser) {
                     paybutton.setVisibility(View.VISIBLE);
 
                     paybutton.setOnClickListener(new View.OnClickListener() {
@@ -191,9 +268,12 @@ public void onClick(View v) {
                     if (reqester.isMore)
                         BackgroundExecuter.getInstance().execute(reqester.loadMore());
                 }
+            }*//*
 
-            }
         });
+*/
+
+
 
 
         grid.setOnItemClickListener(new AdapterView.OnItemClickListener() {
@@ -203,7 +283,6 @@ public void onItemClick(AdapterView<?> parent, View view,
                                     int position, long id) {
 
                 remPosition = position;
-
                 Bundle args = new Bundle();
                 try {
                     final int pos=position;
@@ -240,6 +319,8 @@ public void onClick(View v) {
         return fragmentView;
     }
 
+
+
     @Override
     public void onResume() {
         super.onResume();
@@ -277,7 +358,6 @@ public void run() {
                         }
                         else{ actionBar.setTextLast("");
                         }
-
                         adapter.notifyDataSetChanged();
 
                     }
@@ -300,27 +380,74 @@ public void run() {
                 }
         );
     }
+    @Override
+    public void onUserSyncSuccess(final TLRPC.User user) {
+    }
+
+    @Override
+    public void onUserSyncFailed() {
+    }
+
+    public static  void setMessageSend(boolean isMessageSend){
+        isSend = isMessageSend;
+    }
+
 
 
 
 
+    public void openDialog(){
 
+        AlertDialog.Builder builder = new AlertDialog.Builder(getParentActivity());
+        builder.setMessage(LocaleController.getString("InviteUser", R.string.InviteUser));
+        builder.setTitle(LocaleController.getString("AppName", R.string.AppName));
+     /*   final String arg1 = usePhone;*/
+        builder.setPositiveButton(LocaleController.getString("OK", R.string.OK), new DialogInterface.OnClickListener() {
+            @Override
+            public void onClick(DialogInterface dialogInterface, int i) {
+                try {
+                    PaymentManager.createIntent(getParentActivity());
+                } catch (Exception e) {
+                    FileLog.e("tmessages", e);
+                }
+            }
+        });
+        builder.setNegativeButton(LocaleController.getString("Cancel", R.string.Cancel), null);
+        showDialog(builder.create());
+    }
 
 
     @Override
-    public void onUserSyncSuccess(final TLRPC.User user) {
+    public void onGetKarmaSuccess(int karmaPoints) { }
+
 
+    @Override
+    public void onGetKarmaFailure() {
     }
 
+
     @Override
-    public void onUserSyncFailed() {
+    public void onKarmaDeductSuccess() {
+        SharedPreferences p = ApplicationLoader.applicationContext.getSharedPreferences("socialuser", Activity.MODE_PRIVATE);
+        friendsReq++;
+        p.edit().putString("friendrequest",String.valueOf(friendsReq)).commit();
+
+
+      //  isPending=false;
+
+        if (reqester.isMore)
+            BackgroundExecuter.getInstance().execute(reqester.loadMore());
 
     }
 
-    public static  void setMessageSend(boolean isMessageSend){
-        isSend = isMessageSend;
+
+    @Override
+    public void onKarmaDeductFailed() {
+
     }
 
 
 
+
+
 }
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/listners/KarmaBalanceListener.java b/TMessagesProj/src/main/java/org/telegram/ui/listners/KarmaBalanceListener.java
new file mode 100644
index 000000000..242d52de1
--- /dev/null
+++ b/TMessagesProj/src/main/java/org/telegram/ui/listners/KarmaBalanceListener.java
@@ -0,0 +1,13 @@
+package org.telegram.ui.listners;
+
+/**
+ * Created by craterzone3 on 18/11/16.
+ */
+
+public interface KarmaBalanceListener {
+
+     public void onGetKarmaSuccess(int karmaPoints);
+     public void onGetKarmaFailure();
+
+
+}
diff --git a/TMessagesProj/src/main/java/org/telegram/ui/listners/KarmaDeductionListener.java b/TMessagesProj/src/main/java/org/telegram/ui/listners/KarmaDeductionListener.java
new file mode 100644
index 000000000..9c7f6dbef
--- /dev/null
+++ b/TMessagesProj/src/main/java/org/telegram/ui/listners/KarmaDeductionListener.java
@@ -0,0 +1,13 @@
+package org.telegram.ui.listners;
+
+/**
+ * Created by craterzone3 on 23/11/16.
+ */
+
+public interface KarmaDeductionListener {
+
+    public void onKarmaDeductSuccess();
+    public void onKarmaDeductFailed();
+
+
+}
diff --git a/TMessagesProj/src/main/res/layout/activity_main.xml b/TMessagesProj/src/main/res/layout/activity_main.xml
index 227bb0f2f..6d431cb8c 100644
--- a/TMessagesProj/src/main/res/layout/activity_main.xml
+++ b/TMessagesProj/src/main/res/layout/activity_main.xml
@@ -64,8 +64,6 @@
            android:text=" Be smart!\n Opt for Paid Version in just 2$ and  get :"
            android:layout_height="wrap_content" />
 
-
-
      <LinearLayout
 
     android:layout_below="@+id/buy_content1"
@@ -107,7 +105,15 @@
            android:layout_height="wrap_content" />
 
 
-</LinearLayout></LinearLayout>
+</LinearLayout>
+
+
+
+
+
+
+
+           </LinearLayout>
 
 <!--
        <TextView
@@ -122,6 +128,83 @@
            android:layout_height="wrap_content" />-->
 
 
+
+           <LinearLayout
+               android:layout_width="match_parent"
+               android:background="#d5f5e3"
+               android:layout_height="wrap_content">
+
+           <RadioGroup
+               android:layout_width="match_parent"
+               android:layout_marginLeft="20dp"
+               android:id="@+id/rg_opt"
+               android:layout_height="wrap_content">
+
+               <RadioButton
+                   android:layout_width="match_parent"
+                   android:text="Get Credit using Paypal "
+                   android:id="@+id/rb_paypal"
+                   android:checked="true"
+                   android:textSize="14sp"
+
+                   android:textColor="@color/black"
+                   android:layout_marginTop="5dp"
+                   android:layout_height="wrap_content" />
+
+
+               <RadioButton
+                   android:layout_width="match_parent"
+                   android:text="Get Credit by Watching Ads"
+                   android:id="@+id/ads"
+                   android:textSize="14sp"
+
+                   android:layout_marginTop="5dp"
+                   android:layout_marginBottom="5dp"
+                   android:textColor="@color/black"
+                   android:layout_height="wrap_content" />
+                </RadioGroup>
+
+           </LinearLayout>
+
+           <RadioGroup
+               android:layout_width="match_parent"
+               android:layout_margin="20dp"
+               android:id="@+id/op_paypal"
+               android:animateLayoutChanges="true"
+               android:layout_height="wrap_content">
+
+               <RadioButton
+                   android:layout_width="match_parent"
+                   android:text="Pay 1$ and get 10 Karma point."
+                   android:id="@+id/pay1$"
+                   android:checked="true"
+                   android:textSize="14sp"
+
+                   android:textColor="@color/black"
+                   android:layout_height="wrap_content" />
+
+               <RadioButton
+                   android:layout_width="match_parent"
+                   android:text="Pay 5$ and get 50 Karma point."
+                   android:id="@+id/pay5$"
+                   android:textSize="14sp"
+
+                   android:textColor="@color/black"
+                   android:layout_height="wrap_content" />
+
+               <RadioButton
+                   android:layout_width="match_parent"
+                   android:text="Pay 10$ and get 100 Karma point."
+                   android:id="@+id/pay10$"
+                   android:textSize="14sp"
+
+                   android:textColor="@color/black"
+                   android:layout_height="wrap_content" />
+
+           </RadioGroup>
+
+
+
        </LinearLayout>
 
 
@@ -149,7 +232,7 @@
                   android:textSize="20sp"
                   android:layout_margin="10dp"
                   android:textColor="@color/common_plus_signin_btn_text_dark_focused"
-                  android:text="Buy Now" />
+                  android:text="Get Now" />
 
 
            <Button
diff --git a/TMessagesProj/src/main/res/layout/gridview.xml b/TMessagesProj/src/main/res/layout/gridview.xml
index cacfe7134..8869d2c76 100644
--- a/TMessagesProj/src/main/res/layout/gridview.xml
+++ b/TMessagesProj/src/main/res/layout/gridview.xml
@@ -52,7 +52,7 @@
             android:layout_width="200dp"
             android:paddingLeft="10dp"
             android:paddingRight="10dp"
-            android:visibility="gone"
+
             android:layout_height="wrap_content"
             android:text="@string/premium_features"
             android:layout_alignBottom="@+id/grid"
diff --git a/TMessagesProj/src/main/res/layout/myprofile_layout.xml b/TMessagesProj/src/main/res/layout/myprofile_layout.xml
index 56969b143..f3e93fb1e 100644
--- a/TMessagesProj/src/main/res/layout/myprofile_layout.xml
+++ b/TMessagesProj/src/main/res/layout/myprofile_layout.xml
@@ -179,7 +179,7 @@
                     android:id="@+id/id_age"
                     android:layout_height="wrap_content"
                     android:layout_width="wrap_content"
-                    android:text="XX/MM/YYYY"
+                    android:text="01/01/1990"
                     android:layout_toRightOf="@id/age_image"
                     android:layout_gravity="center_vertical"
                     android:textColor="@color/black">
