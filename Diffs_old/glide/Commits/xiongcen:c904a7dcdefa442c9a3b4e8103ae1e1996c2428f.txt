diff --git a/library/src/test/java/com/bumptech/glide/GlideTest.java b/library/src/test/java/com/bumptech/glide/GlideTest.java
deleted file mode 100644
index 22e9d4beb..000000000
--- a/library/src/test/java/com/bumptech/glide/GlideTest.java
+++ /dev/null
@@ -1,765 +0,0 @@
-package com.bumptech.glide;
-
-import static com.bumptech.glide.request.RequestOptions.decodeTypeOf;
-import static com.bumptech.glide.request.RequestOptions.placeholderOf;
-import static org.junit.Assert.assertNotNull;
-import static org.mockito.Matchers.anyInt;
-import static org.mockito.Matchers.eq;
-import static org.mockito.Matchers.isA;
-import static org.mockito.Matchers.notNull;
-import static org.mockito.Mockito.doAnswer;
-import static org.mockito.Mockito.mock;
-import static org.mockito.Mockito.times;
-import static org.mockito.Mockito.verify;
-import static org.mockito.Mockito.when;
-
-import android.content.ContentResolver;
-import android.content.Context;
-import android.content.pm.ApplicationInfo;
-import android.content.res.AssetFileDescriptor;
-import android.graphics.Bitmap;
-import android.graphics.Color;
-import android.graphics.drawable.BitmapDrawable;
-import android.graphics.drawable.ColorDrawable;
-import android.graphics.drawable.Drawable;
-import android.media.MediaMetadataRetriever;
-import android.net.Uri;
-import android.os.Bundle;
-import android.os.Handler;
-import android.os.ParcelFileDescriptor;
-import android.view.ViewGroup;
-import android.widget.ImageView;
-import com.bumptech.glide.load.DataSource;
-import com.bumptech.glide.load.Key;
-import com.bumptech.glide.load.Options;
-import com.bumptech.glide.load.data.DataFetcher;
-import com.bumptech.glide.load.engine.GlideException;
-import com.bumptech.glide.load.engine.bitmap_recycle.BitmapPool;
-import com.bumptech.glide.load.engine.cache.DiskCache;
-import com.bumptech.glide.load.engine.cache.MemoryCache;
-import com.bumptech.glide.load.engine.executor.GlideExecutor;
-import com.bumptech.glide.load.engine.executor.MockGlideExecutor;
-import com.bumptech.glide.load.model.GlideUrl;
-import com.bumptech.glide.load.model.ModelLoader;
-import com.bumptech.glide.load.model.ModelLoaderFactory;
-import com.bumptech.glide.load.model.MultiModelLoaderFactory;
-import com.bumptech.glide.load.resource.gif.GifDrawable;
-import com.bumptech.glide.manager.Lifecycle;
-import com.bumptech.glide.manager.RequestManagerTreeNode;
-import com.bumptech.glide.module.GlideModule;
-import com.bumptech.glide.request.Request;
-import com.bumptech.glide.request.RequestListener;
-import com.bumptech.glide.request.target.SizeReadyCallback;
-import com.bumptech.glide.request.target.Target;
-import com.bumptech.glide.request.transition.Transition;
-import com.bumptech.glide.tests.GlideShadowLooper;
-import com.bumptech.glide.tests.Util;
-import com.bumptech.glide.testutil.TestResourceUtil;
-import java.io.ByteArrayInputStream;
-import java.io.File;
-import java.io.IOException;
-import java.io.InputStream;
-import java.net.MalformedURLException;
-import java.net.URL;
-import java.nio.ByteBuffer;
-import java.util.HashMap;
-import java.util.Map;
-import org.junit.After;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.mockito.invocation.InvocationOnMock;
-import org.mockito.stubbing.Answer;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.RuntimeEnvironment;
-import org.robolectric.Shadows;
-import org.robolectric.annotation.Config;
-import org.robolectric.annotation.Implementation;
-import org.robolectric.annotation.Implements;
-import org.robolectric.annotation.Resetter;
-import org.robolectric.internal.ShadowExtractor;
-import org.robolectric.res.builder.RobolectricPackageManager;
-import org.robolectric.shadows.ShadowBitmap;
-
-/**
- * Tests for the {@link Glide} interface and singleton.
- */
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18, shadows = {
-    GlideTest.ShadowFileDescriptorContentResolver.class,
-    GlideTest.ShadowMediaMetadataRetriever.class, GlideShadowLooper.class,
-    GlideTest.MutableShadowBitmap.class })
-@SuppressWarnings("unchecked")
-public class GlideTest {
-  @SuppressWarnings("rawtypes")
-  private Target target = null;
-  private ImageView imageView;
-  private RequestManager requestManager;
-
-  @Before
-  public void setUp() throws Exception {
-    Glide.tearDown();
-
-    RobolectricPackageManager pm =
-        (RobolectricPackageManager) RuntimeEnvironment.application.getPackageManager();
-    ApplicationInfo info =
-        pm.getApplicationInfo(RuntimeEnvironment.application.getPackageName(), 0);
-    info.metaData = new Bundle();
-    info.metaData.putString(SetupModule.class.getName(), "GlideModule");
-
-    // Ensure that target's size ready callback will be called synchronously.
-    target = mock(Target.class);
-    imageView = new ImageView(RuntimeEnvironment.application);
-    imageView.setLayoutParams(new ViewGroup.LayoutParams(100, 100));
-    doAnswer(new CallSizeReady()).when(target).getSize(isA(SizeReadyCallback.class));
-
-    Handler bgHandler = mock(Handler.class);
-    when(bgHandler.post(isA(Runnable.class))).thenAnswer(new Answer<Boolean>() {
-      @Override
-      public Boolean answer(InvocationOnMock invocation) throws Throwable {
-        Runnable runnable = (Runnable) invocation.getArguments()[0];
-        runnable.run();
-        return true;
-      }
-    });
-
-    Lifecycle lifecycle = mock(Lifecycle.class);
-    RequestManagerTreeNode treeNode = mock(RequestManagerTreeNode.class);
-    requestManager = new RequestManager(Glide.get(getContext()), lifecycle, treeNode);
-    requestManager.resumeRequests();
-  }
-
-  @After
-  public void tearDown() {
-    Glide.tearDown();
-  }
-
-  @Test
-  public void testCanSetMemoryCategory() {
-    MemoryCache memoryCache = mock(MemoryCache.class);
-    BitmapPool bitmapPool = mock(BitmapPool.class);
-
-    MemoryCategory memoryCategory = MemoryCategory.NORMAL;
-    Glide glide =
-        new GlideBuilder(getContext()).setMemoryCache(memoryCache).setBitmapPool(bitmapPool)
-            .createGlide();
-    glide.setMemoryCategory(memoryCategory);
-
-    verify(memoryCache).setSizeMultiplier(eq(memoryCategory.getMultiplier()));
-    verify(bitmapPool).setSizeMultiplier(eq(memoryCategory.getMultiplier()));
-  }
-
-  @Test
-  public void testClearMemory() {
-    BitmapPool bitmapPool = mock(BitmapPool.class);
-    MemoryCache memoryCache = mock(MemoryCache.class);
-
-    Glide glide =
-        new GlideBuilder(getContext()).setBitmapPool(bitmapPool).setMemoryCache(memoryCache)
-            .createGlide();
-
-    glide.clearMemory();
-
-    verify(bitmapPool).clearMemory();
-    verify(memoryCache).clearMemory();
-  }
-
-  @Test
-  public void testTrimMemory() {
-    BitmapPool bitmapPool = mock(BitmapPool.class);
-    MemoryCache memoryCache = mock(MemoryCache.class);
-
-    Glide glide =
-        new GlideBuilder(getContext()).setBitmapPool(bitmapPool).setMemoryCache(memoryCache)
-            .createGlide();
-
-    final int level = 123;
-
-    glide.trimMemory(level);
-
-    verify(bitmapPool).trimMemory(eq(level));
-    verify(memoryCache).trimMemory(eq(level));
-  }
-
-  @Test
-  public void testFileDefaultLoaderWithInputStream() throws Exception {
-    registerFailFactory(File.class, ParcelFileDescriptor.class);
-    runTestFileDefaultLoader();
-  }
-
-  @Test
-  public void testFileDefaultLoaderWithFileDescriptor() throws Exception {
-    registerFailFactory(File.class, InputStream.class);
-    runTestFileDefaultLoader();
-  }
-
-  @Test
-  public void testFileDefaultLoader() {
-    runTestFileDefaultLoader();
-  }
-
-  private void runTestFileDefaultLoader() {
-    File file = new File("fake");
-    mockUri(Uri.fromFile(file));
-
-    requestManager.load(file).into(target);
-    requestManager.load(file).into(imageView);
-
-    verify(target).onResourceReady(isA(BitmapDrawable.class), isA(Transition.class));
-    verify(target).setRequest((Request) notNull());
-
-    assertNotNull(imageView.getDrawable());
-  }
-
-  @Test
-  public void testUrlDefaultLoader() throws MalformedURLException {
-    URL url = new URL("http://www.google.com");
-
-    requestManager.load(url).into(target);
-    requestManager.load(url).into(imageView);
-
-    verify(target).onResourceReady(isA(BitmapDrawable.class), isA(Transition.class));
-    verify(target).setRequest((Request) notNull());
-
-    assertNotNull(imageView.getDrawable());
-  }
-
-  @Test
-  public void testAsBitmapOption() {
-    Uri uri = Uri.parse("content://something/else");
-    mockUri(uri);
-
-    requestManager.asBitmap().load(uri).into(target);
-
-    verify(target).onResourceReady(isA(Bitmap.class), isA(Transition.class));
-  }
-
-  @Test
-  public void testToBytesOption() {
-    Uri uri = Uri.parse("content://something/else");
-    mockUri(uri);
-
-    requestManager.as(byte[].class).apply(decodeTypeOf(Bitmap.class)).load(uri).into(target);
-
-    verify(target).onResourceReady(isA(byte[].class), isA(Transition.class));
-  }
-
-  @Test
-  public void testUriDefaultLoaderWithInputStream() throws Exception {
-    registerFailFactory(Uri.class, ParcelFileDescriptor.class);
-    runTestUriDefaultLoader();
-  }
-
-  @Test
-  public void testUriDefaultLoaderWithFileDescriptor() throws Exception {
-    registerFailFactory(Uri.class, InputStream.class);
-    runTestUriDefaultLoader();
-  }
-
-  @Test
-  public void testUriDefaultLoader() {
-    runTestUriDefaultLoader();
-  }
-
-  private void runTestUriDefaultLoader() {
-    Uri uri = Uri.parse("content://test/something");
-    mockUri(uri);
-
-    requestManager.load(uri).into(target);
-    requestManager.load(uri).into(imageView);
-
-    verify(target).onResourceReady(notNull(), isA(Transition.class));
-    verify(target).setRequest((Request) notNull());
-
-    assertNotNull(imageView.getDrawable());
-  }
-
-  @Test
-  public void testStringDefaultLoaderWithUrl() {
-    runTestStringDefaultLoader("http://www.google.com");
-  }
-
-  @Test
-  public void testFileStringDefaultLoaderWithInputStream() throws Exception {
-    registerFailFactory(String.class, ParcelFileDescriptor.class);
-    runTestFileStringDefaultLoader();
-  }
-
-  @Test
-  public void testFileStringDefaultLoaderWithFileDescriptor() throws Exception {
-    registerFailFactory(String.class, ParcelFileDescriptor.class);
-    runTestFileStringDefaultLoader();
-  }
-
-  @Test
-  public void testFileStringDefaultLoader() {
-    runTestFileStringDefaultLoader();
-  }
-
-  private void runTestFileStringDefaultLoader() {
-    String path = "/some/random/path";
-    mockUri(Uri.fromFile(new File(path)));
-    runTestStringDefaultLoader(path);
-  }
-
-  @Test
-  public void testUriStringDefaultLoaderWithInputStream() throws Exception {
-    registerFailFactory(String.class, ParcelFileDescriptor.class);
-    runTestUriStringDefaultLoader();
-  }
-
-  @Test
-  public void testUriStringDefaultLoaderWithFileDescriptor() throws Exception {
-    registerFailFactory(String.class, InputStream.class);
-    runTestUriStringDefaultLoader();
-  }
-
-  @Test
-  public void testUriStringDefaultLoader() {
-    runTestUriStringDefaultLoader();
-  }
-
-  private void runTestUriStringDefaultLoader() {
-    String stringUri = "content://some/random/uri";
-    mockUri(Uri.parse(stringUri));
-    runTestStringDefaultLoader(stringUri);
-  }
-
-  private void runTestStringDefaultLoader(String string) {
-    requestManager.load(string).listener(new RequestListener<Drawable>() {
-      @Override
-      public boolean onLoadFailed(GlideException e, Object model, Target<Drawable> target,
-          boolean isFirstResource) {
-        throw new RuntimeException("Load failed");
-      }
-
-      @Override
-      public boolean onResourceReady(Drawable resource, Object model, Target<Drawable> target,
-          DataSource dataSource, boolean isFirstResource) {
-        return false;
-      }
-    }).into(target);
-    requestManager.load(string).into(imageView);
-
-    verify(target).onResourceReady(isA(BitmapDrawable.class), isA(Transition.class));
-    verify(target).setRequest((Request) notNull());
-
-    assertNotNull(imageView.getDrawable());
-  }
-
-  @Test
-  public void testIntegerDefaultLoaderWithInputStream() throws Exception {
-    registerFailFactory(Integer.class, ParcelFileDescriptor.class);
-    runTestIntegerDefaultLoader();
-  }
-
-  @Test
-  public void testIntegerDefaultLoaderWithFileDescriptor() throws Exception {
-    registerFailFactory(Integer.class, InputStream.class);
-    runTestIntegerDefaultLoader();
-  }
-
-  @Test
-  public void testIntegerDefaultLoader() {
-    runTestIntegerDefaultLoader();
-  }
-
-  private void runTestIntegerDefaultLoader() {
-    int integer = android.R.drawable.star_on;
-    mockUri("android.resource://" + "android" + "/drawable/star_on");
-
-    requestManager.load(integer).into(target);
-    requestManager.load(integer).into(imageView);
-
-    verify(target).onResourceReady(isA(BitmapDrawable.class), isA(Transition.class));
-    verify(target).setRequest((Request) notNull());
-
-    assertNotNull(imageView.getDrawable());
-  }
-
-  @Test
-  public void testByteArrayDefaultLoader() {
-    byte[] bytes = new byte[10];
-    requestManager.load(bytes).into(target);
-    requestManager.load(bytes).into(imageView);
-
-    verify(target).onResourceReady(isA(BitmapDrawable.class), isA(Transition.class));
-    verify(target).setRequest((Request) notNull());
-
-    assertNotNull(imageView.getDrawable());
-  }
-
-
-  @Test(expected = Exception.class)
-  public void testUnregisteredModelThrowsException() {
-    Float unregistered = 0.5f;
-    requestManager.load(unregistered).into(target);
-  }
-
-  @Test
-  @SuppressWarnings("unchecked")
-  public void testNonDefaultModelWithRegisteredFactoryDoesNotThrow() {
-    registerMockStreamModelLoader(Float.class);
-
-    requestManager.load(0.5f).into(target);
-  }
-
-  @Test
-  public void testReceivesGif() throws IOException {
-    String fakeUri = "content://fake";
-    InputStream testGifData = openResource("test.gif");
-    mockUri(Uri.parse(fakeUri), testGifData);
-
-    requestManager.asGif().load(fakeUri).into(target);
-
-    verify(target).onResourceReady(isA(GifDrawable.class), isA(Transition.class));
-  }
-
-  @Test
-  public void testReceivesGifBytes() throws IOException {
-    String fakeUri = "content://fake";
-    InputStream testGifData = openResource("test.gif");
-    mockUri(Uri.parse(fakeUri), testGifData);
-
-    requestManager.as(byte[].class).apply(decodeTypeOf(GifDrawable.class)).load(fakeUri)
-        .into(target);
-
-    verify(target).onResourceReady(isA(byte[].class), isA(Transition.class));
-  }
-
-  @Test
-  public void testReceivesBitmapBytes() {
-    String fakeUri = "content://fake";
-    mockUri(fakeUri);
-    requestManager.as(byte[].class).apply(decodeTypeOf(Bitmap.class)).load(fakeUri).into(target);
-
-    verify(target).onResourceReady(isA(byte[].class), isA(Transition.class));
-  }
-
-  @Test
-  public void testReceivesThumbnails() {
-    String full = mockUri("content://full");
-    String thumb = mockUri("content://thumb");
-    requestManager
-        .load(full)
-        .thumbnail(requestManager.load(thumb))
-        .into(target);
-
-    verify(target, times(2)).onResourceReady(isA(Drawable.class), isA(Transition.class));
-  }
-
-  @Test
-  public void testReceivesRecursiveThumbnails() {
-    requestManager.load(mockUri("content://first")).thumbnail(
-        requestManager.load(mockUri("content://second")).thumbnail(
-            requestManager.load(mockUri("content://third")).thumbnail(
-                requestManager.load(mockUri("content://fourth")))))
-        .into(target);
-    verify(target, times(4)).onResourceReady(isA(Drawable.class), isA(Transition.class));
-  }
-
-  @Test
-  public void testReceivesRecursiveThumbnailWithPercentage() {
-    requestManager.load(mockUri("content://first"))
-        .thumbnail(requestManager.load(mockUri("content://second")).thumbnail(0.5f))
-        .into(target);
-    verify(target, times(3)).onResourceReady(isA(Drawable.class), isA(Transition.class));
-  }
-
-  @Test
-  public void testNullModelInGenericImageLoadDoesNotThrow() {
-    requestManager.load(null).into(target);
-  }
-
-  @Test
-  public void testNullModelInGenericVideoLoadDoesNotThrow() {
-    requestManager.load(null).into(target);
-  }
-
-  @Test
-  public void testNullModelInGenericLoadDoesNotThrow() {
-    requestManager.load(null).into(target);
-  }
-
-  @Test
-  public void testNullModelDoesNotThrow() {
-    Drawable drawable = new ColorDrawable(Color.RED);
-    requestManager
-        .load(null)
-        .apply(placeholderOf(drawable))
-        .into(target);
-
-    verify(target).onLoadFailed(eq(drawable));
-  }
-
-  @Test
-  public void testNullModelPrefersErrorDrawable() {
-    Drawable placeholder = new ColorDrawable(Color.GREEN);
-    Drawable error = new ColorDrawable(Color.RED);
-
-    requestManager
-        .load(null)
-        .apply(placeholderOf(placeholder)
-            .error(error))
-        .into(target);
-
-    verify(target).onLoadFailed(eq(error));
-  }
-
-  @Test
-  public void testNullModelPrefersFallbackDrawable() {
-    Drawable placeholder = new ColorDrawable(Color.GREEN);
-    Drawable error = new ColorDrawable(Color.RED);
-    Drawable fallback = new ColorDrawable(Color.BLUE);
-
-    requestManager
-        .load(null)
-        .apply(placeholderOf(placeholder)
-            .error(error)
-            .fallback(fallback))
-        .into(target);
-
-    verify(target).onLoadFailed(eq(fallback));
-  }
-
-  @Test
-  public void testByteData() {
-    byte[] data = new byte[] { 1, 2, 3, 4, 5, 6 };
-    requestManager.load(data).into(target);
-  }
-
-  @Test
-  public void testClone() throws IOException {
-    Target<Drawable> firstTarget = mock(Target.class);
-    doAnswer(new CallSizeReady(100, 100)).when(firstTarget).getSize(isA(SizeReadyCallback.class));
-    Target<Drawable> secondTarget = mock(Target.class);
-    doAnswer(new CallSizeReady(100, 100)).when(secondTarget).getSize(isA(SizeReadyCallback.class));
-    RequestBuilder<Drawable> firstRequest = requestManager
-        .load(mockUri("content://first"));
-
-    firstRequest.into(firstTarget);
-
-    firstRequest.clone()
-        .apply(placeholderOf(new ColorDrawable(Color.RED)))
-        .into(secondTarget);
-
-    verify(firstTarget).onResourceReady(isA(Drawable.class), isA(Transition.class));
-    verify(secondTarget).onResourceReady(notNull(Drawable.class), isA(Transition.class));
-  }
-
-  @SuppressWarnings("unchecked")
-  private <T, Z> void registerFailFactory(Class<T> failModel, Class<Z> failResource)
-      throws Exception {
-    DataFetcher<Z> failFetcher = mock(DataFetcher.class);
-    doAnswer(new Util.CallDataReady<>(null))
-        .when(failFetcher)
-        .loadData(isA(Priority.class), isA(DataFetcher.DataCallback.class));
-    when(failFetcher.getDataClass()).thenReturn(failResource);
-    ModelLoader<T, Z> failLoader = mock(ModelLoader.class);
-    when(failLoader.buildLoadData(isA(failModel), anyInt(), anyInt(), isA(Options.class)))
-        .thenReturn(new ModelLoader.LoadData<>(mock(Key.class), failFetcher));
-    when(failLoader.handles(isA(failModel))).thenReturn(true);
-    ModelLoaderFactory<T, Z> failFactory = mock(ModelLoaderFactory.class);
-    when(failFactory.build(isA(MultiModelLoaderFactory.class))).thenReturn(failLoader);
-
-    Glide.get(getContext()).getRegistry().prepend(failModel, failResource, failFactory);
-  }
-
-  private String mockUri(String uriString) {
-    return mockUri(Uri.parse(uriString), null);
-  }
-
-  private String mockUri(Uri uri) {
-    return mockUri(uri, null);
-  }
-
-  private String mockUri(Uri uri, InputStream is) {
-    if (is == null) {
-      is = new ByteArrayInputStream(new byte[0]);
-    }
-    ContentResolver contentResolver = RuntimeEnvironment.application.getContentResolver();
-    ShadowFileDescriptorContentResolver shadowContentResolver =
-        (ShadowFileDescriptorContentResolver) ShadowExtractor.extract(contentResolver);
-    shadowContentResolver.registerInputStream(uri, is);
-
-    AssetFileDescriptor assetFileDescriptor = mock(AssetFileDescriptor.class);
-    ParcelFileDescriptor parcelFileDescriptor = mock(ParcelFileDescriptor.class);
-    when(assetFileDescriptor.getParcelFileDescriptor()).thenReturn(parcelFileDescriptor);
-
-    shadowContentResolver.registerAssetFileDescriptor(uri, assetFileDescriptor);
-    return uri.toString();
-  }
-
-  private Context getContext() {
-    return RuntimeEnvironment.application;
-  }
-
-  @SuppressWarnings("unchecked")
-  private <T> void registerMockStreamModelLoader(final Class<T> modelClass) {
-    ModelLoader<T, InputStream> modelLoader = mockStreamModelLoader(modelClass);
-    ModelLoaderFactory<T, InputStream> modelLoaderFactory = mock(ModelLoaderFactory.class);
-    when(modelLoaderFactory.build(isA(MultiModelLoaderFactory.class))).thenReturn(modelLoader);
-
-    Glide.get(RuntimeEnvironment.application).getRegistry()
-        .prepend(modelClass, InputStream.class, modelLoaderFactory);
-  }
-
-  @SuppressWarnings("unchecked")
-  private <T> ModelLoader<T, InputStream> mockStreamModelLoader(final Class<T> modelClass) {
-    ModelLoader<T, InputStream> modelLoader = mock(ModelLoader.class);
-    DataFetcher<InputStream> fetcher = mock(DataFetcher.class);
-    try {
-      doAnswer(new Util.CallDataReady<>(new ByteArrayInputStream(new byte[0]))).when(fetcher)
-          .loadData(isA(Priority.class), isA(DataFetcher.DataCallback.class));
-    } catch (Exception e) {
-      // Do nothing.
-    }
-    when(fetcher.getDataClass()).thenReturn(InputStream.class);
-    when(modelLoader.buildLoadData(isA(modelClass), anyInt(), anyInt(), isA(Options.class)))
-        .thenReturn(new ModelLoader.LoadData<>(mock(Key.class), fetcher));
-    when(modelLoader.handles(isA(modelClass))).thenReturn(true);
-
-    return modelLoader;
-  }
-
-  private InputStream openResource(String imageName) throws IOException {
-    return TestResourceUtil.openResource(getClass(), imageName);
-  }
-
-  private static class CallSizeReady implements Answer<Void> {
-    private int width;
-    private int height;
-
-    public CallSizeReady() {
-      this(100, 100);
-    }
-
-    public CallSizeReady(int width, int height) {
-      this.width = width;
-      this.height = height;
-    }
-
-    @Override
-    public Void answer(InvocationOnMock invocation) throws Throwable {
-      SizeReadyCallback cb = (SizeReadyCallback) invocation.getArguments()[0];
-      cb.onSizeReady(width, height);
-      return null;
-    }
-  }
-
-  public static class SetupModule implements GlideModule {
-
-    @Override
-    public void applyOptions(Context context, GlideBuilder builder) {
-      // Run all tasks on the main thread so they complete synchronously.
-      GlideExecutor executor = MockGlideExecutor.newMainThreadExecutor();
-
-      DiskCache.Factory diskCacheFactory = mock(DiskCache.Factory.class);
-      when(diskCacheFactory.build()).thenReturn(mock(DiskCache.class));
-
-      builder.setMemoryCache(mock(MemoryCache.class)).setDiskCache(diskCacheFactory)
-          .setResizeExecutor(executor).setDiskCacheExecutor(executor);
-    }
-
-    @Override
-    public void registerComponents(Context context, Registry registry) {
-      registerMockModelLoader(GlideUrl.class, InputStream.class,
-          new ByteArrayInputStream(new byte[0]), registry);
-      registerMockModelLoader(File.class, InputStream.class,
-          new ByteArrayInputStream(new byte[0]), registry);
-      registerMockModelLoader(File.class, ParcelFileDescriptor.class,
-          mock(ParcelFileDescriptor.class), registry);
-      registerMockModelLoader(File.class, ByteBuffer.class,
-          ByteBuffer.allocate(10), registry);
-    }
-
-    private static <X, Y> void registerMockModelLoader(Class<X> modelClass, Class<Y> dataClass,
-          Y loadedData, Registry registry) {
-      DataFetcher<Y> mockStreamFetcher = mock(DataFetcher.class);
-      when(mockStreamFetcher.getDataClass()).thenReturn(dataClass);
-      try {
-        doAnswer(new Util.CallDataReady<>(loadedData))
-            .when(mockStreamFetcher)
-            .loadData(isA(Priority.class), isA(DataFetcher.DataCallback.class));
-      } catch (Exception e) {
-        throw new RuntimeException(e);
-      }
-      ModelLoader<X, Y> mockUrlLoader = mock(ModelLoader.class);
-      when(mockUrlLoader.buildLoadData(isA(modelClass), anyInt(), anyInt(), isA(Options.class)))
-          .thenReturn(new ModelLoader.LoadData<>(mock(Key.class), mockStreamFetcher));
-      when(mockUrlLoader.handles(isA(modelClass))).thenReturn(true);
-      ModelLoaderFactory<X, Y> mockUrlLoaderFactory = mock(ModelLoaderFactory.class);
-      when(mockUrlLoaderFactory.build(isA(MultiModelLoaderFactory.class)))
-          .thenReturn(mockUrlLoader);
-
-      registry.replace(modelClass, dataClass, mockUrlLoaderFactory);
-    }
-  }
-
-  // TODO: Extending ShadowContentResolver results in exceptions because of some state issues
-  // where we seem to get one content resolver shadow in one part of the test and a different one in
-  // a different part of the test. Each one ends up with different registered uris, which causes
-  // tests to fail. We shouldn't need to do this, but using static maps seems to fix the issue.
-  @Implements(value = ContentResolver.class)
-  @SuppressWarnings("unused")
-  public static class ShadowFileDescriptorContentResolver {
-    private static final Map<Uri, AssetFileDescriptor> URI_TO_FILE_DESCRIPTOR = new HashMap<>();
-    private static final Map<Uri, InputStream> URI_TO_INPUT_STREAMS = new HashMap<>();
-
-    @Resetter
-    public static void reset() {
-      URI_TO_INPUT_STREAMS.clear();
-      URI_TO_FILE_DESCRIPTOR.clear();
-    }
-
-    public void registerInputStream(Uri uri, InputStream inputStream) {
-      URI_TO_INPUT_STREAMS.put(uri, inputStream);
-    }
-
-    public void registerAssetFileDescriptor(Uri uri, AssetFileDescriptor assetFileDescriptor) {
-      URI_TO_FILE_DESCRIPTOR.put(uri, assetFileDescriptor);
-    }
-
-    @Implementation
-    public InputStream openInputStream(Uri uri) {
-      if (!URI_TO_INPUT_STREAMS.containsKey(uri)) {
-        throw new IllegalArgumentException(
-            "You must first register an InputStream for uri: " + uri);
-      }
-      return URI_TO_INPUT_STREAMS.get(uri);
-    }
-
-    @Implementation
-    public AssetFileDescriptor openAssetFileDescriptor(Uri uri, String type) {
-      if (!URI_TO_FILE_DESCRIPTOR.containsKey(uri)) {
-        throw new IllegalArgumentException(
-            "You must first register an AssetFileDescriptor for " + "uri: " + uri);
-      }
-      return URI_TO_FILE_DESCRIPTOR.get(uri);
-    }
-  }
-
-  @Implements(Bitmap.class)
-  public static class MutableShadowBitmap extends ShadowBitmap {
-
-    @Implementation
-    public static Bitmap createBitmap(int width, int height, Bitmap.Config config) {
-      Bitmap bitmap = ShadowBitmap.createBitmap(width, height, config);
-      Shadows.shadowOf(bitmap).setMutable(true);
-      return bitmap;
-    }
-  }
-
-  @Implements(MediaMetadataRetriever.class)
-  public static class ShadowMediaMetadataRetriever {
-
-    @Implementation
-    @SuppressWarnings("unused")
-    public Bitmap getFrameAtTime() {
-      Bitmap bitmap = Bitmap.createBitmap(100, 100, Bitmap.Config.ARGB_8888);
-      Shadows.shadowOf(bitmap).appendDescription(" from MediaMetadataRetriever");
-      return bitmap;
-    }
-  }
-}
-
diff --git a/library/src/test/java/com/bumptech/glide/ListPreloaderTest.java b/library/src/test/java/com/bumptech/glide/ListPreloaderTest.java
deleted file mode 100644
index f1b8b51e8..000000000
--- a/library/src/test/java/com/bumptech/glide/ListPreloaderTest.java
+++ /dev/null
@@ -1,379 +0,0 @@
-package com.bumptech.glide;
-
-import static com.bumptech.glide.tests.Util.cast;
-import static com.google.common.truth.Truth.assertThat;
-import static org.junit.Assert.assertEquals;
-import static org.junit.Assert.assertTrue;
-import static org.mockito.Mockito.mock;
-import static org.mockito.Mockito.times;
-import static org.mockito.Mockito.verify;
-
-import com.bumptech.glide.request.target.SizeReadyCallback;
-import com.bumptech.glide.request.target.Target;
-import java.util.ArrayList;
-import java.util.Arrays;
-import java.util.Collections;
-import java.util.HashSet;
-import java.util.List;
-import java.util.concurrent.atomic.AtomicBoolean;
-import java.util.concurrent.atomic.AtomicInteger;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.mockito.ArgumentCaptor;
-import org.mockito.Mock;
-import org.mockito.MockitoAnnotations;
-import org.mockito.verification.VerificationMode;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class ListPreloaderTest {
-
-  @Mock private RequestBuilder<Object> request;
-  @Mock private RequestManager requestManager;
-
-  @Before
-  public void setUp() throws Exception {
-    MockitoAnnotations.initMocks(this);
-  }
-
-  @Test
-  public void testGetItemsIsCalledIncreasing() {
-    final AtomicBoolean called = new AtomicBoolean(false);
-    final AtomicInteger calledCount = new AtomicInteger();
-
-    ListPreloaderAdapter preloaderAdapter = new ListPreloaderAdapter() {
-      @Override
-      public List<Object> getPreloadItems(int position) {
-        called.set(true);
-        final int count = calledCount.getAndIncrement();
-        assertEquals(11 + count, position);
-        return super.getPreloadItems(position);
-      }
-    };
-    ListPreloader<Object> preloader = new ListPreloader<>(requestManager,
-        preloaderAdapter, preloaderAdapter, 10);
-    preloader.onScroll(null, 1, 10, 30);
-    assertEquals(10, calledCount.get());
-  }
-
-  @Test
-  public void testGetItemsIsCalledInOrderIncreasing() {
-    final int toPreload = 10;
-    final List<Object> objects = new ArrayList<>();
-    for (int i = 0; i < toPreload; i++) {
-      objects.add(i);
-    }
-
-    ListPreloaderAdapter preloaderAdapter = new ListPreloaderAdapter() {
-      private int expectedPosition;
-
-      @Override
-      public int[] getPreloadSize(Object item, int adapterPosition, int itemPosition) {
-        return new int[] { 10, 10 };
-      }
-
-      @Override
-      public List<Object> getPreloadItems(int position) {
-        return objects.subList(position - 11, position + 1 - 11);
-      }
-
-      @Override
-      @SuppressWarnings("unchecked")
-      public RequestBuilder<Object> getPreloadRequestBuilder(Object item) {
-        assertEquals(objects.get(expectedPosition), item);
-        expectedPosition++;
-        return mock(RequestBuilder.class);
-      }
-    };
-    ListPreloader<Object> preloader =
-        new ListPreloader<>(requestManager, preloaderAdapter, preloaderAdapter, toPreload);
-    preloader.onScroll(null, 1, 10, 20);
-  }
-
-  @Test
-  public void testGetItemsIsCalledDecreasing() {
-    final AtomicBoolean called = new AtomicBoolean(false);
-    final AtomicInteger calledCount = new AtomicInteger();
-    ListPreloaderAdapter preloaderAdapter = new ListPreloaderAdapter() {
-      @Override
-      public List<Object> getPreloadItems(int position) {
-        // Ignore the preload caused from us starting at the end
-        if (position >= 40) {
-          return Collections.emptyList();
-        }
-        final int count = calledCount.getAndIncrement();
-        called.set(true);
-        assertEquals(28 - count, position);
-        return super.getPreloadItems(position);
-      }
-    };
-    ListPreloader<Object> preloader = new ListPreloader<>(requestManager,
-        preloaderAdapter, preloaderAdapter, 10);
-    preloader.onScroll(null, 30, 10, 40);
-    preloader.onScroll(null, 29, 10, 40);
-    assertTrue(called.get());
-  }
-
-  @Test
-  public void testGetItemsIsCalledInOrderDecreasing() {
-    final int toPreload = 10;
-    final List<Object> objects = new ArrayList<>();
-    for (int i = 0; i < toPreload; i++) {
-      objects.add(new Object());
-    }
-
-    ListPreloaderAdapter preloaderAdapter = new ListPreloaderAdapter() {
-      private int expectedPosition = toPreload - 1;
-
-      @Override
-      public int[] getPreloadSize(Object item, int adapterPosition, int itemPosition) {
-        return new int[] { 10, 10 };
-      }
-
-      @Override
-      public List<Object> getPreloadItems(int position) {
-        if (position == 40) {
-          return null;
-        }
-        return objects.subList(position, position + 1);
-      }
-
-      @Override
-      @SuppressWarnings("unchecked")
-      public RequestBuilder<Object> getPreloadRequestBuilder(Object item) {
-        assertEquals(objects.get(expectedPosition), item);
-        expectedPosition--;
-        return mock(RequestBuilder.class);
-      }
-    };
-    ListPreloader<Object> preloader =
-        new ListPreloader<>(requestManager, preloaderAdapter, preloaderAdapter, toPreload);
-    preloader.onScroll(null, 30, 10, 10);
-    preloader.onScroll(null, 29, 10, 10);
-  }
-
-  @Test
-  public void testGetItemsIsNeverCalledWithEndGreaterThanTotalItems() {
-    final AtomicBoolean called = new AtomicBoolean(false);
-    final AtomicInteger calledCount = new AtomicInteger();
-    ListPreloaderAdapter preloaderAdapter = new ListPreloaderAdapter() {
-      @Override
-      public List<Object> getPreloadItems(int position) {
-        called.set(true);
-        final int count = calledCount.getAndIncrement();
-        assertEquals(26 + count, position);
-        return super.getPreloadItems(position);
-      }
-    };
-    ListPreloader<Object> preloader = new ListPreloader<>(requestManager,
-        preloaderAdapter, preloaderAdapter, 10);
-    preloader.onScroll(null, 16, 10, 30);
-    assertTrue(called.get());
-  }
-
-  @Test
-  public void testGetItemsIsNeverCalledWithStartLessThanZero() {
-    final AtomicBoolean called = new AtomicBoolean(false);
-    final AtomicInteger calledCount = new AtomicInteger();
-    ListPreloaderAdapter preloaderAdapter = new ListPreloaderAdapter() {
-      @Override
-      public List<Object> getPreloadItems(int position) {
-        if (position >= 17) {
-          return Collections.emptyList();
-        }
-        called.set(true);
-        final int count = calledCount.getAndIncrement();
-        assertEquals(5 - count, position);
-        return super.getPreloadItems(position);
-      }
-    };
-
-    ListPreloader<Object> preloader = new ListPreloader<>(requestManager,
-        preloaderAdapter, preloaderAdapter, 10);
-    preloader.onScroll(null, 7, 10, 30);
-    preloader.onScroll(null, 6, 10, 30);
-    assertTrue(called.get());
-  }
-
-  @Test
-  public void testDontPreloadItemsRepeatedlyWhileIncreasing() {
-    final AtomicInteger called = new AtomicInteger();
-    ListPreloaderAdapter preloaderAdapter = new ListPreloaderAdapter() {
-      @Override
-      public List<Object> getPreloadItems(int position) {
-        final int current = called.getAndIncrement();
-        assertEquals(11 + current, position);
-        return super.getPreloadItems(position);
-      }
-    };
-
-    ListPreloader<Object> preloader = new ListPreloader<>(requestManager,
-        preloaderAdapter, preloaderAdapter, 10);
-    preloader.onScroll(null, 1, 10, 30);
-    preloader.onScroll(null, 4, 10, 30);
-
-    assertEquals(13, called.get());
-  }
-
-  @Test
-  public void testDontPreloadItemsRepeatedlyWhileDecreasing() {
-    final AtomicInteger called = new AtomicInteger();
-    ListPreloaderAdapter preloaderAdapter = new ListPreloaderAdapter() {
-      @Override
-      public List<Object> getPreloadItems(int position) {
-        if (position >= 20) {
-          return Collections.emptyList();
-        }
-        final int current = called.getAndIncrement();
-        assertEquals(19 - current, position);
-        return super.getPreloadItems(position);
-      }
-    };
-
-    ListPreloader<Object> preloader = new ListPreloader<>(requestManager,
-        preloaderAdapter, preloaderAdapter, 10);
-    preloader.onScroll(null, 21, 10, 30);
-    preloader.onScroll(null, 20, 10, 30);
-    preloader.onScroll(null, 17, 10, 30);
-    assertEquals(13, called.get());
-  }
-
-  @Test
-  public void testMultipleItemsForPositionIncreasing() throws NoSuchFieldException {
-    final List<Object> objects = new ArrayList<>();
-    objects.add(new Object());
-    objects.add(new Object());
-    ListPreloaderAdapter preloaderAdapter = new ListPreloaderAdapter() {
-      private int expectedPosition = (1 + 10) * 2;
-
-      @Override
-      public List<Object> getPreloadItems(int position) {
-        return objects;
-      }
-
-      @Override
-      public int[] getPreloadSize(Object item, int adapterPosition, int itemPosition) {
-        assertEquals(expectedPosition / 2, adapterPosition);
-        assertEquals(expectedPosition % 2, itemPosition);
-        expectedPosition++;
-        return itemPosition == 0 ? new int[] { 10, 11 } : new int[] { 20, 21 };
-      }
-
-      @Override
-      public RequestBuilder<Object> getPreloadRequestBuilder(Object item) {
-        return request;
-      }
-    };
-    ListPreloader<Object> preloader = new ListPreloader<>(requestManager,
-        preloaderAdapter, preloaderAdapter, 10);
-    Iterable<Integer> expected = Arrays.asList(10, 11, 20, 21, 10, 11, 20, 21);
-
-    preloader.onScroll(null, 1, 10, 1 + 10 + 2);
-
-    List<Integer> allValues = getTargetsSizes(request, times(4));
-    assertEquals(expected, allValues);
-  }
-
-  @Test
-  public void testMultipleItemsForPositionDecreasing() throws NoSuchFieldException {
-    final List<Object> objects = new ArrayList<>();
-    objects.add(new Object());
-    objects.add(new Object());
-    ListPreloaderAdapter preloaderAdapter = new ListPreloaderAdapter() {
-      private int expectedPosition = objects.size() * 2 - 1;
-
-      @Override
-      public List<Object> getPreloadItems(int position) {
-        return objects;
-      }
-
-      @Override
-      public int[] getPreloadSize(Object item, int adapterPosition, int itemPosition) {
-        assertEquals(expectedPosition / 2, adapterPosition);
-        assertEquals(expectedPosition % 2, itemPosition);
-        expectedPosition--;
-        return itemPosition == 0 ? new int[] { 10, 11 } : new int[] { 20, 21 };
-      }
-
-      @Override
-      public RequestBuilder<Object> getPreloadRequestBuilder(Object item) {
-        return request;
-      }
-    };
-    ListPreloader<Object> preloader = new ListPreloader<>(requestManager,
-        preloaderAdapter, preloaderAdapter, 10);
-    Iterable<Integer> expected = Arrays.asList(20, 21, 10, 11, 20, 21, 10, 11);
-
-    preloader.onScroll(null, 3, 2, 3 + 2);
-    preloader.onScroll(null, 2, 2, 3 + 2);
-
-    List<Integer> allValues = getTargetsSizes(request, times(4));
-    assertEquals(expected, allValues);
-  }
-
-  private <R> List<Integer> getTargetsSizes(
-      RequestBuilder<R> requestBuilder, VerificationMode mode) {
-    ArgumentCaptor<Integer> integerArgumentCaptor = ArgumentCaptor.forClass(Integer.class);
-    ArgumentCaptor<Target<R>> targetArgumentCaptor = cast(ArgumentCaptor.forClass(Target.class));
-    SizeReadyCallback cb = mock(SizeReadyCallback.class);
-    verify(requestBuilder, mode).into(targetArgumentCaptor.capture());
-    for (Target<R> target : targetArgumentCaptor.getAllValues()) {
-      target.getSize(cb);
-    }
-    verify(cb, mode).onSizeReady(integerArgumentCaptor.capture(), integerArgumentCaptor.capture());
-    return integerArgumentCaptor.getAllValues();
-  }
-
-  @Test
-  public void testItemsArePreloadedWithGlide() {
-    final List<Object> objects = new ArrayList<>();
-    objects.add(new Object());
-    objects.add(new Object());
-    final HashSet<Object> loadedObjects = new HashSet<>();
-    ListPreloaderAdapter preloaderAdapter = new ListPreloaderAdapter() {
-      @Override
-      public List<Object> getPreloadItems(int position) {
-        return objects.subList(position - 11, position - 10);
-      }
-
-      @Override
-      public RequestBuilder<Object> getPreloadRequestBuilder(Object item) {
-        loadedObjects.add(item);
-        return super.getPreloadRequestBuilder(item);
-      }
-    };
-    ListPreloader<Object> preloader = new ListPreloader<>(requestManager,
-        preloaderAdapter, preloaderAdapter, 10);
-
-    preloader.onScroll(null, 1, 10, 13);
-    assertThat(loadedObjects).containsAllIn(objects);
-  }
-
-  private static class ListPreloaderAdapter implements ListPreloader.PreloadModelProvider<Object>,
-      ListPreloader.PreloadSizeProvider<Object> {
-
-    public ListPreloaderAdapter() {
-    }
-
-    @Override
-    public List<Object> getPreloadItems(int position) {
-      ArrayList<Object> result = new ArrayList<>(1);
-      Collections.fill(result, new Object());
-      return result;
-    }
-
-    @Override
-    @SuppressWarnings("unchecked")
-    public RequestBuilder<Object> getPreloadRequestBuilder(Object item) {
-      return mock(RequestBuilder.class);
-    }
-
-    @Override
-    public int[] getPreloadSize(Object item, int adapterPosition, int itemPosition) {
-      return new int[] { 100, 100 };
-    }
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/RequestBuilderTest.java b/library/src/test/java/com/bumptech/glide/RequestBuilderTest.java
deleted file mode 100644
index ecf16662e..000000000
--- a/library/src/test/java/com/bumptech/glide/RequestBuilderTest.java
+++ /dev/null
@@ -1,115 +0,0 @@
-package com.bumptech.glide;
-
-import static com.bumptech.glide.tests.BackgroundUtil.testInBackground;
-import static org.mockito.Matchers.eq;
-import static org.mockito.Matchers.isA;
-import static org.mockito.Mockito.mock;
-import static org.mockito.Mockito.verify;
-import static org.mockito.Mockito.when;
-
-import android.widget.ImageView;
-import com.bumptech.glide.request.BaseRequestOptions;
-import com.bumptech.glide.request.Request;
-import com.bumptech.glide.request.RequestOptions;
-import com.bumptech.glide.request.target.Target;
-import com.bumptech.glide.tests.BackgroundUtil;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.mockito.Mock;
-import org.mockito.MockitoAnnotations;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.RuntimeEnvironment;
-import org.robolectric.annotation.Config;
-
-@SuppressWarnings("unchecked")
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class RequestBuilderTest {
-  @Mock GlideContext glideContext;
-  @Mock RequestManager requestManager;
-
-  @Before
-  public void setUp() {
-    MockitoAnnotations.initMocks(this);
-  }
-
-  @Test(expected = NullPointerException.class)
-  public void testThrowsIfContextIsNull() {
-    new RequestBuilder<>(null /*context*/, requestManager, Object.class);
-  }
-
-  @Test(expected = NullPointerException.class)
-  public void testThrowsWhenTransitionsOptionsIsNull() {
-    //noinspection ConstantConditions testing if @NonNull is enforced
-    getNullModelRequest().transition(null);
-  }
-
-  @Test
-  public void testDoesNotThrowWithNullModelWhenRequestIsBuilt() {
-    getNullModelRequest().into(mock(Target.class));
-  }
-
-  @Test
-  public void testAddsNewRequestToRequestTracker() {
-    Target<Object> target = mock(Target.class);
-    getNullModelRequest().into(target);
-
-    verify(requestManager).track(eq(target), isA(Request.class));
-  }
-
-  @Test
-  public void testRemovesPreviousRequestFromRequestTracker() {
-    Request previous = mock(Request.class);
-    Target<Object> target = mock(Target.class);
-    when(target.getRequest()).thenReturn(previous);
-
-    getNullModelRequest().into(target);
-
-    verify(requestManager).clear(eq(target));
-  }
-
-  @Test(expected = NullPointerException.class)
-  public void testThrowsIfGivenNullTarget() {
-    //noinspection ConstantConditions testing if @NonNull is enforced
-    getNullModelRequest().into((Target<Object>) null);
-  }
-
-  @Test(expected = NullPointerException.class)
-  public void testThrowsIfGivenNullView() {
-    getNullModelRequest().into((ImageView) null);
-  }
-
-  @Test(expected = RuntimeException.class)
-  public void testThrowsIfIntoViewCalledOnBackgroundThread() throws InterruptedException {
-    final ImageView imageView = new ImageView(RuntimeEnvironment.application);
-    testInBackground(new BackgroundUtil.BackgroundTester() {
-      @Override
-      public void runTest() throws Exception {
-        getNullModelRequest().into(imageView);
-
-      }
-    });
-  }
-
-  @Test(expected = RuntimeException.class)
-  public void testThrowsIfIntoTargetCalledOnBackgroundThread() throws InterruptedException {
-    final Target<Object> target = mock(Target.class);
-    testInBackground(new BackgroundUtil.BackgroundTester() {
-      @Override
-      public void runTest() throws Exception {
-        getNullModelRequest().into(target);
-      }
-    });
-  }
-
-  private RequestBuilder<Object> getNullModelRequest() {
-    when(glideContext.buildImageViewTarget(isA(ImageView.class), isA(Class.class)))
-        .thenReturn(mock(Target.class));
-    when(glideContext.getDefaultRequestOptions()).thenReturn(new RequestOptions());
-    when(requestManager.getDefaultRequestOptions())
-        .thenReturn((BaseRequestOptions) new RequestOptions());
-    return new RequestBuilder<>(glideContext, requestManager, Object.class)
-        .load((Object) null);
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/RequestManagerTest.java b/library/src/test/java/com/bumptech/glide/RequestManagerTest.java
deleted file mode 100644
index 68551d56d..000000000
--- a/library/src/test/java/com/bumptech/glide/RequestManagerTest.java
+++ /dev/null
@@ -1,154 +0,0 @@
-package com.bumptech.glide;
-
-import static com.bumptech.glide.tests.BackgroundUtil.testInBackground;
-import static org.junit.Assert.assertFalse;
-import static org.junit.Assert.assertTrue;
-import static org.mockito.Matchers.eq;
-import static org.mockito.Matchers.isA;
-import static org.mockito.Mockito.mock;
-import static org.mockito.Mockito.never;
-import static org.mockito.Mockito.verify;
-import static org.mockito.Mockito.when;
-
-import android.content.Context;
-import com.bumptech.glide.manager.ConnectivityMonitor;
-import com.bumptech.glide.manager.ConnectivityMonitor.ConnectivityListener;
-import com.bumptech.glide.manager.ConnectivityMonitorFactory;
-import com.bumptech.glide.manager.Lifecycle;
-import com.bumptech.glide.manager.RequestManagerTreeNode;
-import com.bumptech.glide.manager.RequestTracker;
-import com.bumptech.glide.tests.BackgroundUtil;
-import com.bumptech.glide.tests.GlideShadowLooper;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.mockito.Mock;
-import org.mockito.MockitoAnnotations;
-import org.mockito.invocation.InvocationOnMock;
-import org.mockito.stubbing.Answer;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.RuntimeEnvironment;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18, shadows = GlideShadowLooper.class)
-public class RequestManagerTest {
-  @Mock Lifecycle lifecycle = mock(Lifecycle.class);
-  @Mock RequestManagerTreeNode treeNode = mock(RequestManagerTreeNode.class);
-
-  private RequestManager manager;
-  private ConnectivityMonitor connectivityMonitor;
-  private RequestTracker requestTracker;
-  private ConnectivityListener connectivityListener;
-
-  @Before
-  public void setUp() {
-    MockitoAnnotations.initMocks(this);
-    connectivityMonitor = mock(ConnectivityMonitor.class);
-    ConnectivityMonitorFactory factory = mock(ConnectivityMonitorFactory.class);
-    when(factory.build(isA(Context.class), isA(ConnectivityMonitor.ConnectivityListener.class)))
-        .thenAnswer(new Answer<ConnectivityMonitor>() {
-          @Override
-          public ConnectivityMonitor answer(InvocationOnMock invocation) throws Throwable {
-            connectivityListener = (ConnectivityListener) invocation.getArguments()[1];
-            return connectivityMonitor;
-          }
-        });
-    requestTracker = mock(RequestTracker.class);
-    manager =
-        new RequestManager(
-            Glide.get(RuntimeEnvironment.application),
-            lifecycle,
-            treeNode,
-            requestTracker,
-            factory);
-  }
-
-  @Test
-  public void testPauseRequestsPausesRequests() {
-    manager.pauseRequests();
-
-    verify(requestTracker).pauseRequests();
-  }
-
-  @Test
-  public void testResumeRequestsResumesRequests() {
-    manager.resumeRequests();
-
-    verify(requestTracker).resumeRequests();
-  }
-
-  @Test
-  public void testPausesRequestsOnStop() {
-    manager.onStart();
-    manager.onStop();
-
-    verify(requestTracker).pauseRequests();
-  }
-
-  @Test
-  public void testResumesRequestsOnStart() {
-    manager.onStart();
-
-    verify(requestTracker).resumeRequests();
-  }
-
-  @Test
-  public void testClearsRequestsOnDestroy() {
-    manager.onDestroy();
-
-    verify(requestTracker).clearRequests();
-  }
-
-  @Test
-  public void testAddsConnectivityMonitorToLifecycleWhenConstructed() {
-    verify(lifecycle).addListener(eq(connectivityMonitor));
-  }
-
-  @Test
-  public void testAddsSelfToLifecycleWhenConstructed() {
-    verify(lifecycle).addListener(eq(manager));
-  }
-
-  @Test
-  public void testRestartsRequestOnConnected() {
-    connectivityListener.onConnectivityChanged(true);
-
-    verify(requestTracker).restartRequests();
-  }
-
-  @Test
-  public void testDoesNotRestartRequestsOnDisconnected() {
-    connectivityListener.onConnectivityChanged(false);
-
-    verify(requestTracker, never()).restartRequests();
-  }
-
-  @Test(expected = RuntimeException.class)
-  public void testThrowsIfResumeCalledOnBackgroundThread() throws InterruptedException {
-    testInBackground(new BackgroundUtil.BackgroundTester() {
-      @Override
-      public void runTest() throws Exception {
-        manager.resumeRequests();
-      }
-    });
-  }
-
-  @Test(expected = RuntimeException.class)
-  public void testThrowsIfPauseCalledOnBackgroundThread() throws InterruptedException {
-    testInBackground(new BackgroundUtil.BackgroundTester() {
-      @Override
-      public void runTest() throws Exception {
-        manager.pauseRequests();
-      }
-    });
-  }
-
-  @Test
-  public void testDelegatesIsPausedToRequestTracker() {
-    when(requestTracker.isPaused()).thenReturn(true);
-    assertTrue(manager.isPaused());
-    when(requestTracker.isPaused()).thenReturn(false);
-    assertFalse(manager.isPaused());
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/MultiTransformationTest.java b/library/src/test/java/com/bumptech/glide/load/MultiTransformationTest.java
deleted file mode 100644
index eb9528704..000000000
--- a/library/src/test/java/com/bumptech/glide/load/MultiTransformationTest.java
+++ /dev/null
@@ -1,124 +0,0 @@
-package com.bumptech.glide.load;
-
-import static com.bumptech.glide.tests.Util.anyResource;
-import static com.bumptech.glide.tests.Util.mockResource;
-import static org.junit.Assert.assertEquals;
-import static org.mockito.Matchers.any;
-import static org.mockito.Matchers.anyInt;
-import static org.mockito.Matchers.eq;
-import static org.mockito.Mockito.doAnswer;
-import static org.mockito.Mockito.never;
-import static org.mockito.Mockito.verify;
-import static org.mockito.Mockito.when;
-
-import com.bumptech.glide.load.engine.Resource;
-import com.bumptech.glide.tests.KeyAssertions;
-import com.bumptech.glide.tests.Util;
-import java.security.MessageDigest;
-import java.security.NoSuchAlgorithmException;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.junit.runners.JUnit4;
-import org.mockito.Mock;
-import org.mockito.MockitoAnnotations;
-
-@RunWith(JUnit4.class)
-@SuppressWarnings("unchecked")
-public class MultiTransformationTest {
-
-  @Mock Transformation<Object> first;
-  @Mock Transformation<Object> second;
-  @Mock Resource<Object> initial;
-  @Mock Resource<Object> firstTransformed;
-  @Mock Resource<Object> secondTransformed;
-
-  @Before
-  public void setUp() {
-    MockitoAnnotations.initMocks(this);
-  }
-
-  @Test
-  public void testAppliesTransformationsInOrder() {
-    final int width = 584;
-    final int height = 768;
-
-    MultiTransformation<Object> transformation = new MultiTransformation<>(first, second);
-    when(first.transform(eq(initial), eq(width), eq(height))).thenReturn(firstTransformed);
-
-    when(second.transform(eq(firstTransformed), eq(width), eq(height)))
-        .thenReturn(secondTransformed);
-
-    assertEquals(secondTransformed, transformation.transform(initial, width, height));
-  }
-
-  @Test
-  public void testInitialResourceIsNotRecycled() {
-    when(first.transform(anyResource(), anyInt(), anyInt())).thenReturn(firstTransformed);
-
-    MultiTransformation<Object> transformation = new MultiTransformation<>(first);
-
-    transformation.transform(initial, 123, 456);
-
-    verify(initial, never()).recycle();
-  }
-
-  @Test
-  public void testInitialResourceIsNotRecycledEvenIfReturnedByMultipleTransformations() {
-    when(first.transform(anyResource(), anyInt(), anyInt())).thenReturn(initial);
-    when(second.transform(anyResource(), anyInt(), anyInt())).thenReturn(initial);
-
-    MultiTransformation<Object> transformation = new MultiTransformation<>(first, second);
-    transformation.transform(initial, 1111, 2222);
-
-    verify(initial, never()).recycle();
-  }
-
-  @Test
-  public void
-  testInitialResourceIsNotRecycledIfReturnedByOneTransformationButNotByALaterTransformation() {
-    when(first.transform(anyResource(), anyInt(), anyInt())).thenReturn(initial);
-    when(second.transform(anyResource(), anyInt(), anyInt()))
-        .thenReturn(mockResource());
-
-    MultiTransformation<Object> transformation = new MultiTransformation<>(first, second);
-    transformation.transform(initial, 1, 2);
-
-    verify(initial, never()).recycle();
-  }
-
-  @Test
-  public void testFinalResourceIsNotRecycled() {
-    when(first.transform(anyResource(), anyInt(), anyInt())).thenReturn(firstTransformed);
-
-    MultiTransformation<Object> transformation = new MultiTransformation<>(first);
-
-    transformation.transform(mockResource(), 111, 222);
-
-    verify(firstTransformed, never()).recycle();
-  }
-
-  @Test
-  public void testIntermediateResourcesAreRecycled() {
-    when(first.transform(anyResource(), anyInt(), anyInt())).thenReturn(firstTransformed);
-    when(second.transform(anyResource(), anyInt(), anyInt())).thenReturn(secondTransformed);
-
-    MultiTransformation<Object> transformation = new MultiTransformation<>(first, second);
-
-    transformation.transform(mockResource(), 233, 454);
-
-    verify(firstTransformed).recycle();
-  }
-
-  @Test
-  public void testEquals() throws NoSuchAlgorithmException {
-    doAnswer(new Util.WriteDigest("first")).when(first)
-        .updateDiskCacheKey(any(MessageDigest.class));
-    KeyAssertions.assertSame(new MultiTransformation<>(first), new MultiTransformation<>(first));
-
-    doAnswer(new Util.WriteDigest("second")).when(second)
-        .updateDiskCacheKey(any(MessageDigest.class));
-    KeyAssertions.assertDifferent(
-        new MultiTransformation<>(first), new MultiTransformation<>(second));
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/OptionsTest.java b/library/src/test/java/com/bumptech/glide/load/OptionsTest.java
deleted file mode 100644
index bac793e3b..000000000
--- a/library/src/test/java/com/bumptech/glide/load/OptionsTest.java
+++ /dev/null
@@ -1,35 +0,0 @@
-package com.bumptech.glide.load;
-
-import com.google.common.testing.EqualsTester;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class OptionsTest {
-
-  @Test
-  public void testEquals() {
-    Option<Object> firstOption = Option.memory("firstKey");
-    Object firstValue = new Object();
-    Option<Object> secondOption = Option.memory("secondKey");
-    Object secondValue = new Object();
-    new EqualsTester()
-        .addEqualityGroup(new Options(), new Options())
-        .addEqualityGroup(
-            new Options().set(firstOption, firstValue),
-            new Options().set(firstOption, firstValue)
-        )
-        .addEqualityGroup(
-            new Options().set(secondOption, secondValue),
-            new Options().set(secondOption, secondValue)
-        )
-        .addEqualityGroup(
-            new Options().set(firstOption, firstValue).set(secondOption, secondValue),
-            new Options().set(firstOption, firstValue).set(secondOption, secondValue)
-        ).testEquals();
-  }
-
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/data/ExifOrientationStreamTest.java b/library/src/test/java/com/bumptech/glide/load/data/ExifOrientationStreamTest.java
deleted file mode 100644
index 82080d64d..000000000
--- a/library/src/test/java/com/bumptech/glide/load/data/ExifOrientationStreamTest.java
+++ /dev/null
@@ -1,49 +0,0 @@
-package com.bumptech.glide.load.data;
-
-import static com.google.common.truth.Truth.assertThat;
-
-import com.bumptech.glide.load.engine.bitmap_recycle.ArrayPool;
-import com.bumptech.glide.load.engine.bitmap_recycle.LruArrayPool;
-import com.bumptech.glide.load.resource.bitmap.ImageHeaderParser;
-import com.bumptech.glide.testutil.TestResourceUtil;
-import java.io.IOException;
-import java.io.InputStream;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class ExifOrientationStreamTest {
-  private ArrayPool byteArrayPool;
-
-  private InputStream openOrientationExample(boolean isLandscape, int item) {
-    String filePrefix = isLandscape ? "Landscape" : "Portrait";
-    return TestResourceUtil.openResource(getClass(),
-        "exif-orientation-examples/" + filePrefix + "_" + item + ".jpg");
-  }
-
-  @Before
-  public void setUp() {
-    byteArrayPool = new LruArrayPool();
-  }
-
-  @Test
-  public void testIncludesGivenExifOrientation() throws IOException {
-    for (int i = 0; i < 8; i++) {
-      for (int j = 0; j < 8; j++) {
-        InputStream toWrap = openOrientationExample(true /*isLandscape*/, j + 1);
-        InputStream wrapped = new ExifOrientationStream(toWrap, i);
-        ImageHeaderParser parser = new ImageHeaderParser(wrapped, byteArrayPool);
-        assertThat(parser.getOrientation()).isEqualTo(i);
-
-        toWrap = openOrientationExample(false /*isLandscape*/, j + 1);
-        wrapped = new ExifOrientationStream(toWrap, i);
-        parser = new ImageHeaderParser(wrapped, byteArrayPool);
-        assertThat(parser.getOrientation()).isEqualTo(i);
-      }
-    }
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/data/FileDescriptorAssetPathFetcherTest.java b/library/src/test/java/com/bumptech/glide/load/data/FileDescriptorAssetPathFetcherTest.java
deleted file mode 100644
index ae3982203..000000000
--- a/library/src/test/java/com/bumptech/glide/load/data/FileDescriptorAssetPathFetcherTest.java
+++ /dev/null
@@ -1,70 +0,0 @@
-package com.bumptech.glide.load.data;
-
-import static org.mockito.Matchers.eq;
-import static org.mockito.Mockito.mock;
-import static org.mockito.Mockito.never;
-import static org.mockito.Mockito.verify;
-import static org.mockito.Mockito.when;
-
-import android.content.res.AssetFileDescriptor;
-import android.content.res.AssetManager;
-import android.os.ParcelFileDescriptor;
-import com.bumptech.glide.Priority;
-import java.io.IOException;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.mockito.Mock;
-import org.mockito.MockitoAnnotations;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class FileDescriptorAssetPathFetcherTest {
-
-  @Mock AssetManager assetManager;
-  @Mock AssetFileDescriptor assetFileDescriptor;
-  @Mock DataFetcher.DataCallback<ParcelFileDescriptor> callback;
-
-  private FileDescriptorAssetPathFetcher fetcher;
-  private ParcelFileDescriptor expected;
-  private String assetPath;
-
-  @Before
-  public void setUp() throws IOException {
-    MockitoAnnotations.initMocks(this);
-    assetPath = "/some/asset/path";
-    fetcher = new FileDescriptorAssetPathFetcher(assetManager, assetPath);
-    expected = mock(ParcelFileDescriptor.class);
-    when(assetFileDescriptor.getParcelFileDescriptor()).thenReturn(expected);
-    when(assetManager.openFd(eq(assetPath))).thenReturn(assetFileDescriptor);
-  }
-
-  @Test
-  public void testOpensInputStreamForPathWithAssetManager() throws Exception {
-    fetcher.loadData(Priority.NORMAL, callback);
-    verify(callback).onDataReady(eq(expected));
-  }
-
-  @Test
-  public void testClosesOpenedInputStreamOnCleanup() throws Exception {
-    fetcher.loadData(Priority.NORMAL, callback);
-    fetcher.cleanup();
-
-    verify(expected).close();
-  }
-
-  @Test
-  public void testDoesNothingOnCleanupIfNoDataLoaded() throws IOException {
-    fetcher.cleanup();
-    verify(expected, never()).close();
-  }
-
-  @Test
-  public void testDoesNothingOnCancel() throws Exception {
-    fetcher.loadData(Priority.NORMAL, callback);
-    fetcher.cancel();
-    verify(expected, never()).close();
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/data/HttpUrlFetcherServerTest.java b/library/src/test/java/com/bumptech/glide/load/data/HttpUrlFetcherServerTest.java
deleted file mode 100644
index 94fd216bf..000000000
--- a/library/src/test/java/com/bumptech/glide/load/data/HttpUrlFetcherServerTest.java
+++ /dev/null
@@ -1,242 +0,0 @@
-package com.bumptech.glide.load.data;
-
-import static com.google.common.truth.Truth.assertThat;
-import static org.mockito.Matchers.isA;
-import static org.mockito.Mockito.mock;
-import static org.mockito.Mockito.verify;
-import static org.mockito.Mockito.when;
-
-import com.bumptech.glide.Priority;
-import com.bumptech.glide.load.model.GlideUrl;
-import com.bumptech.glide.load.model.Headers;
-import com.bumptech.glide.testutil.TestUtil;
-import java.io.IOException;
-import java.io.InputStream;
-import java.net.HttpURLConnection;
-import java.net.URL;
-import java.util.HashMap;
-import java.util.Map;
-import java.util.concurrent.TimeUnit;
-import okhttp3.mockwebserver.MockResponse;
-import okhttp3.mockwebserver.MockWebServer;
-import okhttp3.mockwebserver.RecordedRequest;
-import org.junit.After;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.mockito.ArgumentCaptor;
-import org.mockito.Mock;
-import org.mockito.MockitoAnnotations;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.annotation.Config;
-
-/**
- * Tests {@link com.bumptech.glide.load.data.HttpUrlFetcher} against server responses. Tests for
- * behavior (connection/disconnection/options) should go in
- * {@link com.bumptech.glide.load.data.HttpUrlFetcherTest}, response handling should go here.
- */
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class HttpUrlFetcherServerTest {
-  private static final String DEFAULT_PATH = "/fakepath";
-  private static final int TIMEOUT_TIME_MS = 300;
-
-  @Mock DataFetcher.DataCallback<InputStream> callback;
-
-  private MockWebServer mockWebServer;
-  private boolean defaultFollowRedirects;
-  private ArgumentCaptor<InputStream> streamCaptor;
-
-  @Before
-  public void setUp() throws IOException {
-    MockitoAnnotations.initMocks(this);
-    defaultFollowRedirects = HttpURLConnection.getFollowRedirects();
-    HttpURLConnection.setFollowRedirects(false);
-    mockWebServer = new MockWebServer();
-    mockWebServer.start();
-
-    streamCaptor = ArgumentCaptor.forClass(InputStream.class);
-  }
-
-  @After
-  public void tearDown() throws IOException {
-    HttpURLConnection.setFollowRedirects(defaultFollowRedirects);
-    mockWebServer.shutdown();
-  }
-
-  @Test
-  public void testReturnsInputStreamOnStatusOk() throws Exception {
-    String expected = "fakedata";
-    mockWebServer.enqueue(new MockResponse().setBody(expected).setResponseCode(200));
-    HttpUrlFetcher fetcher = getFetcher();
-    fetcher.loadData(Priority.HIGH, callback);
-    verify(callback).onDataReady(streamCaptor.capture());
-    TestUtil.assertStreamOf(expected, streamCaptor.getValue());
-  }
-
-  @Test
-  public void testHandlesRedirect301s() throws Exception {
-    String expected = "fakedata";
-    mockWebServer.enqueue(new MockResponse().setResponseCode(301)
-        .setHeader("Location", mockWebServer.url("/redirect").toString()));
-    mockWebServer.enqueue(new MockResponse().setResponseCode(200).setBody(expected));
-    getFetcher().loadData(Priority.LOW, callback);
-    verify(callback).onDataReady(streamCaptor.capture());
-    TestUtil.assertStreamOf(expected, streamCaptor.getValue());
-  }
-
-  @Test
-  public void testHandlesRedirect302s() throws Exception {
-    String expected = "fakedata";
-    mockWebServer.enqueue(new MockResponse().setResponseCode(302)
-        .setHeader("Location", mockWebServer.url("/redirect").toString()));
-    mockWebServer.enqueue(new MockResponse().setResponseCode(200).setBody(expected));
-    getFetcher().loadData(Priority.LOW, callback);
-    verify(callback).onDataReady(streamCaptor.capture());
-    TestUtil.assertStreamOf(expected, streamCaptor.getValue());
-  }
-
-  @Test
-  public void testHandlesRelativeRedirects() throws Exception {
-    String expected = "fakedata";
-    mockWebServer
-        .enqueue(new MockResponse().setResponseCode(301).setHeader("Location", "/redirect"));
-    mockWebServer.enqueue(new MockResponse().setResponseCode(200).setBody(expected));
-    getFetcher().loadData(Priority.NORMAL, callback);
-    verify(callback).onDataReady(streamCaptor.capture());
-    TestUtil.assertStreamOf(expected, streamCaptor.getValue());
-
-    mockWebServer.takeRequest();
-    RecordedRequest second = mockWebServer.takeRequest();
-    assertThat(second.getPath()).endsWith("/redirect");
-  }
-
-  @Test
-  public void testHandlesUpToFiveRedirects() throws Exception {
-    int numRedirects = 4;
-    String expected = "redirectedData";
-    String redirectBase = "/redirect";
-    for (int i = 0; i < numRedirects; i++) {
-      mockWebServer.enqueue(new MockResponse().setResponseCode(301)
-          .setHeader("Location", mockWebServer.url(redirectBase + i).toString()));
-    }
-    mockWebServer.enqueue(new MockResponse().setResponseCode(200).setBody(expected));
-
-    getFetcher().loadData(Priority.NORMAL, callback);
-    verify(callback).onDataReady(streamCaptor.capture());
-    TestUtil.assertStreamOf(expected, streamCaptor.getValue());
-
-    assertThat(mockWebServer.takeRequest().getPath()).contains(DEFAULT_PATH);
-    for (int i = 0; i < numRedirects; i++) {
-      assertThat(mockWebServer.takeRequest().getPath()).contains(redirectBase + i);
-    }
-  }
-
-  @Test
-  public void testFailsOnRedirectLoops() throws Exception {
-    mockWebServer.enqueue(new MockResponse().setResponseCode(301)
-        .setHeader("Location", mockWebServer.url("/redirect").toString()));
-    mockWebServer.enqueue(new MockResponse().setResponseCode(301)
-        .setHeader("Location", mockWebServer.url("/redirect").toString()));
-
-    getFetcher().loadData(Priority.IMMEDIATE, callback);
-
-    verify(callback).onLoadFailed(isA(IOException.class));
-  }
-
-  @Test
-  public void testFailsIfRedirectLocationIsNotPresent() throws Exception {
-    mockWebServer.enqueue(new MockResponse().setResponseCode(301));
-
-    getFetcher().loadData(Priority.NORMAL, callback);
-
-    verify(callback).onLoadFailed(isA(IOException.class));
-  }
-
-  @Test
-  public void testFailsIfRedirectLocationIsPresentAndEmpty() throws Exception {
-    mockWebServer.enqueue(new MockResponse().setResponseCode(301).setHeader("Location", ""));
-
-    getFetcher().loadData(Priority.NORMAL, callback);
-
-    verify(callback).onLoadFailed(isA(IOException.class));
-  }
-
-  @Test
-  public void testFailsIfStatusCodeIsNegativeOne() throws Exception {
-    mockWebServer.enqueue(new MockResponse().setResponseCode(-1));
-    getFetcher().loadData(Priority.LOW, callback);
-
-    verify(callback).onLoadFailed(isA(IOException.class));
-  }
-
-  @Test
-  public void testFailsAfterTooManyRedirects() throws Exception {
-    for (int i = 0; i < 10; i++) {
-      mockWebServer.enqueue(new MockResponse().setResponseCode(301)
-          .setHeader("Location", mockWebServer.url("/redirect" + i).toString()));
-    }
-    getFetcher().loadData(Priority.NORMAL, callback);
-
-    verify(callback).onLoadFailed(isA(IOException.class));
-  }
-
-  @Test
-  public void testFailsIfStatusCodeIs500() throws Exception {
-    mockWebServer.enqueue(new MockResponse().setResponseCode(500));
-    getFetcher().loadData(Priority.NORMAL, callback);
-
-    verify(callback).onLoadFailed(isA(IOException.class));
-  }
-
-  @Test
-  public void testFailsIfStatusCodeIs400() throws Exception {
-    mockWebServer.enqueue(new MockResponse().setResponseCode(400));
-    getFetcher().loadData(Priority.LOW, callback);
-
-    verify(callback).onLoadFailed(isA(IOException.class));
-  }
-
-  @Test
-  public void testSetsReadTimeout() throws Exception {
-    MockWebServer tempWebServer = new MockWebServer();
-    tempWebServer.enqueue(
-        new MockResponse().setBody("test").throttleBody(1, TIMEOUT_TIME_MS, TimeUnit.MILLISECONDS));
-    tempWebServer.start();
-
-    try {
-      getFetcher().loadData(Priority.HIGH, callback);
-    } finally {
-      tempWebServer.shutdown();
-      // shutdown() called before any enqueue() blocks until it times out.
-      mockWebServer.enqueue(new MockResponse().setResponseCode(200));
-    }
-
-    verify(callback).onLoadFailed(isA(IOException.class));
-  }
-
-  @Test
-  public void testAppliesHeadersInGlideUrl() throws Exception {
-    mockWebServer.enqueue(new MockResponse().setResponseCode(200));
-    String headerField = "field";
-    String headerValue = "value";
-    Map<String, String> headersMap = new HashMap<>();
-    headersMap.put(headerField, headerValue);
-    Headers headers = mock(Headers.class);
-    when(headers.getHeaders()).thenReturn(headersMap);
-
-    getFetcher(headers).loadData(Priority.HIGH, callback);
-
-    assertThat(mockWebServer.takeRequest().getHeader(headerField)).isEqualTo(headerValue);
-  }
-
-  private HttpUrlFetcher getFetcher() {
-    return getFetcher(Headers.DEFAULT);
-  }
-
-  private HttpUrlFetcher getFetcher(Headers headers) {
-    URL url = mockWebServer.url(DEFAULT_PATH).url();
-    return new HttpUrlFetcher(new GlideUrl(url, headers), TIMEOUT_TIME_MS,
-        HttpUrlFetcher.DEFAULT_CONNECTION_FACTORY);
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/data/HttpUrlFetcherTest.java b/library/src/test/java/com/bumptech/glide/load/data/HttpUrlFetcherTest.java
deleted file mode 100644
index 7ad707409..000000000
--- a/library/src/test/java/com/bumptech/glide/load/data/HttpUrlFetcherTest.java
+++ /dev/null
@@ -1,117 +0,0 @@
-package com.bumptech.glide.load.data;
-
-import static org.mockito.Matchers.eq;
-import static org.mockito.Matchers.isNull;
-import static org.mockito.Mockito.inOrder;
-import static org.mockito.Mockito.never;
-import static org.mockito.Mockito.verify;
-import static org.mockito.Mockito.when;
-
-import com.bumptech.glide.Priority;
-import com.bumptech.glide.load.model.GlideUrl;
-import java.io.ByteArrayInputStream;
-import java.io.IOException;
-import java.io.InputStream;
-import java.net.HttpURLConnection;
-import java.net.URL;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.mockito.InOrder;
-import org.mockito.Mock;
-import org.mockito.MockitoAnnotations;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class HttpUrlFetcherTest {
-  @Mock HttpURLConnection urlConnection;
-  @Mock HttpUrlFetcher.HttpUrlConnectionFactory connectionFactory;
-  @Mock GlideUrl glideUrl;
-  @Mock InputStream stream;
-  @Mock DataFetcher.DataCallback<InputStream> callback;
-
-  private static final int TIMEOUT_MS = 100;
-  private HttpUrlFetcher fetcher;
-
-  @Before
-  public void setUp() throws IOException {
-    MockitoAnnotations.initMocks(this);
-    URL url = new URL("http://www.google.com");
-
-    when(connectionFactory.build(eq(url))).thenReturn(urlConnection);
-    when(urlConnection.getInputStream()).thenReturn(stream);
-    when(urlConnection.getResponseCode()).thenReturn(200);
-    when(glideUrl.toURL()).thenReturn(url);
-
-    fetcher = new HttpUrlFetcher(glideUrl, TIMEOUT_MS, connectionFactory);
-  }
-
-  @Test
-  public void testSetsReadTimeout() throws IOException {
-    fetcher.loadData(Priority.HIGH, callback);
-    verify(urlConnection).setReadTimeout(eq(TIMEOUT_MS));
-  }
-
-  @Test
-  public void testSetsConnectTimeout() throws IOException {
-    fetcher.loadData(Priority.IMMEDIATE, callback);
-    verify(urlConnection).setConnectTimeout(eq(TIMEOUT_MS));
-  }
-
-  @Test
-  public void testReturnsNullIfCancelledBeforeConnects() throws IOException {
-    InputStream notExpected = new ByteArrayInputStream(new byte[0]);
-    when(urlConnection.getInputStream()).thenReturn(notExpected);
-
-    fetcher.cancel();
-    fetcher.loadData(Priority.LOW, callback);
-    verify(callback).onDataReady(isNull(InputStream.class));
-  }
-
-  @Test
-  public void testDisconnectsUrlOnCleanup() throws IOException {
-    fetcher.loadData(Priority.HIGH, callback);
-    fetcher.cleanup();
-
-    verify(urlConnection).disconnect();
-  }
-
-  @Test
-  public void testDoesNotThrowIfCleanupCalledBeforeStarted() {
-    fetcher.cleanup();
-  }
-
-  @Test
-  public void testDoesNotThrowIfCancelCalledBeforeStart() {
-    fetcher.cancel();
-  }
-
-  @Test
-  public void testCancelDoesNotDisconnectIfAlreadyConnected()
-      throws IOException {
-    fetcher.loadData(Priority.HIGH, callback);
-    fetcher.cancel();
-
-    verify(urlConnection, never()).disconnect();
-  }
-
-  @Test
-  public void testClosesStreamInCleanupIfNotNull() throws IOException {
-    fetcher.loadData(Priority.HIGH, callback);
-    fetcher.cleanup();
-
-    verify(stream).close();
-  }
-
-  @Test
-  public void testClosesStreamBeforeDisconnectingConnection() throws IOException {
-    fetcher.loadData(Priority.NORMAL, callback);
-    fetcher.cleanup();
-
-    InOrder order = inOrder(stream, urlConnection);
-    order.verify(stream).close();
-    order.verify(urlConnection).disconnect();
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/data/LocalUriFetcherTest.java b/library/src/test/java/com/bumptech/glide/load/data/LocalUriFetcherTest.java
deleted file mode 100644
index b5980ac6b..000000000
--- a/library/src/test/java/com/bumptech/glide/load/data/LocalUriFetcherTest.java
+++ /dev/null
@@ -1,83 +0,0 @@
-package com.bumptech.glide.load.data;
-
-import static org.mockito.Mockito.doThrow;
-import static org.mockito.Mockito.mock;
-import static org.mockito.Mockito.never;
-import static org.mockito.Mockito.verify;
-
-import android.content.ContentResolver;
-import android.content.Context;
-import android.net.Uri;
-import com.bumptech.glide.Priority;
-import java.io.Closeable;
-import java.io.FileNotFoundException;
-import java.io.IOException;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.mockito.Mock;
-import org.mockito.MockitoAnnotations;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.RuntimeEnvironment;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class LocalUriFetcherTest {
-  private TestLocalUriFetcher fetcher;
-  @Mock DataFetcher.DataCallback<Closeable> callback;
-
-  @Before
-  public void setUp() {
-    MockitoAnnotations.initMocks(this);
-    fetcher = new TestLocalUriFetcher(RuntimeEnvironment.application, Uri.parse("content://empty"));
-  }
-
-  @Test
-  public void testClosesDataOnCleanup() throws Exception {
-    fetcher.loadData(Priority.NORMAL, callback);
-    fetcher.cleanup();
-
-    verify(fetcher.closeable).close();
-  }
-
-  @Test
-  public void testDoesNotCloseNullData() throws IOException {
-    fetcher.cleanup();
-
-    verify(fetcher.closeable, never()).close();
-  }
-
-  @Test
-  public void testHandlesExceptionOnClose() throws Exception {
-    fetcher.loadData(Priority.NORMAL, callback);
-
-    doThrow(new IOException("Test")).when(fetcher.closeable).close();
-    fetcher.cleanup();
-    verify(fetcher.closeable).close();
-  }
-
-  private static class TestLocalUriFetcher extends LocalUriFetcher<Closeable> {
-    final Closeable closeable = mock(Closeable.class);
-
-    public TestLocalUriFetcher(Context context, Uri uri) {
-      super(context.getContentResolver(), uri);
-    }
-
-    @Override
-    protected Closeable loadResource(Uri uri, ContentResolver contentResolver)
-        throws FileNotFoundException {
-      return closeable;
-    }
-
-    @Override
-    protected void close(Closeable data) throws IOException {
-      data.close();
-    }
-
-    @Override
-    public Class<Closeable> getDataClass() {
-      return Closeable.class;
-    }
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/data/StreamAssetPathFetcherTest.java b/library/src/test/java/com/bumptech/glide/load/data/StreamAssetPathFetcherTest.java
deleted file mode 100644
index 5b03e0f83..000000000
--- a/library/src/test/java/com/bumptech/glide/load/data/StreamAssetPathFetcherTest.java
+++ /dev/null
@@ -1,64 +0,0 @@
-package com.bumptech.glide.load.data;
-
-import static org.mockito.Matchers.eq;
-import static org.mockito.Mockito.never;
-import static org.mockito.Mockito.verify;
-import static org.mockito.Mockito.when;
-
-import android.content.res.AssetManager;
-import com.bumptech.glide.Priority;
-import java.io.IOException;
-import java.io.InputStream;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.mockito.Mock;
-import org.mockito.MockitoAnnotations;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class StreamAssetPathFetcherTest {
-  @Mock AssetManager assetManager;
-  @Mock InputStream expected;
-  @Mock DataFetcher.DataCallback<InputStream> callback;
-
-  private StreamAssetPathFetcher fetcher;
-  private String assetPath;
-
-  @Before
-  public void setUp() throws IOException {
-    MockitoAnnotations.initMocks(this);
-    assetPath = "/some/asset/path";
-    fetcher = new StreamAssetPathFetcher(assetManager, assetPath);
-    when(assetManager.open(eq(assetPath))).thenReturn(expected);
-  }
-
-  @Test
-  public void testOpensInputStreamForPathWithAssetManager() throws Exception {
-    fetcher.loadData(Priority.NORMAL, callback);
-    verify(callback).onDataReady(eq(expected));
-  }
-
-  @Test
-  public void testClosesOpenedInputStreamOnCleanup() throws Exception {
-    fetcher.loadData(Priority.NORMAL, callback);
-    fetcher.cleanup();
-
-    verify(expected).close();
-  }
-
-  @Test
-  public void testDoesNothingOnCleanupIfNoDataLoaded() throws IOException {
-    fetcher.cleanup();
-    verify(expected, never()).close();
-  }
-
-  @Test
-  public void testDoesNothingOnCancel() throws Exception {
-    fetcher.loadData(Priority.NORMAL, callback);
-    fetcher.cancel();
-    verify(expected, never()).close();
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/data/mediastore/ThumbFetcherTest.java b/library/src/test/java/com/bumptech/glide/load/data/mediastore/ThumbFetcherTest.java
deleted file mode 100644
index 4ceec4c8f..000000000
--- a/library/src/test/java/com/bumptech/glide/load/data/mediastore/ThumbFetcherTest.java
+++ /dev/null
@@ -1,62 +0,0 @@
-package com.bumptech.glide.load.data.mediastore;
-
-import static org.mockito.Matchers.eq;
-import static org.mockito.Matchers.isNotNull;
-import static org.mockito.Mockito.verify;
-import static org.mockito.Mockito.when;
-
-import android.net.Uri;
-import android.provider.MediaStore;
-import com.bumptech.glide.Priority;
-import com.bumptech.glide.load.data.DataFetcher;
-import java.io.InputStream;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.mockito.Mock;
-import org.mockito.MockitoAnnotations;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class ThumbFetcherTest {
-
-  @Mock ThumbnailStreamOpener opener;
-  @Mock DataFetcher.DataCallback<InputStream> callback;
-  @Mock InputStream expected;
-
-  private ThumbFetcher fetcher;
-  private Uri uri;
-
-  @Before
-  public void setUp() {
-    MockitoAnnotations.initMocks(this);
-
-    uri = Uri.withAppendedPath(MediaStore.Video.Media.EXTERNAL_CONTENT_URI, "123");
-    fetcher = new ThumbFetcher(uri, opener);
-  }
-
-  @Test
-  public void testReturnsInputStreamFromThumbnailOpener() throws Exception {
-    when(opener.open(eq(uri))).thenReturn(expected);
-
-    fetcher.loadData(Priority.LOW, callback);
-    verify(callback).onDataReady(isNotNull(InputStream.class));
-  }
-
-  @Test
-  public void testClosesInputStreamFromThumbnailOpenerOnCleanup() throws Exception {
-    when(opener.open(eq(uri))).thenReturn(expected);
-
-    fetcher.loadData(Priority.HIGH, callback);
-
-    fetcher.cleanup();
-    verify(expected).close();
-  }
-
-  @Test
-  public void testDoesNotThrowIfCleanupWithNullInputStream() {
-    fetcher.cleanup();
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/data/mediastore/ThumbnailStreamOpenerTest.java b/library/src/test/java/com/bumptech/glide/load/data/mediastore/ThumbnailStreamOpenerTest.java
deleted file mode 100644
index a27944ab7..000000000
--- a/library/src/test/java/com/bumptech/glide/load/data/mediastore/ThumbnailStreamOpenerTest.java
+++ /dev/null
@@ -1,134 +0,0 @@
-package com.bumptech.glide.load.data.mediastore;
-
-import static org.junit.Assert.assertEquals;
-import static org.junit.Assert.assertNull;
-import static org.junit.Assert.assertTrue;
-import static org.mockito.Matchers.anyString;
-import static org.mockito.Matchers.eq;
-import static org.mockito.Mockito.mock;
-import static org.mockito.Mockito.when;
-
-import android.content.ContentResolver;
-import android.database.MatrixCursor;
-import android.net.Uri;
-import android.provider.MediaStore;
-import com.bumptech.glide.load.engine.bitmap_recycle.ArrayPool;
-import com.bumptech.glide.load.engine.bitmap_recycle.LruArrayPool;
-import java.io.ByteArrayInputStream;
-import java.io.File;
-import java.io.FileNotFoundException;
-import java.io.InputStream;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.RuntimeEnvironment;
-import org.robolectric.Shadows;
-import org.robolectric.annotation.Config;
-import org.robolectric.fakes.RoboCursor;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class ThumbnailStreamOpenerTest {
-  private Harness harness;
-
-  @Before
-  public void setUp() {
-    harness = new Harness();
-  }
-
-  @Test
-  public void testReturnsNullIfCursorIsNull() throws FileNotFoundException {
-    when(harness.query.query(eq(harness.uri))).thenReturn(null);
-    assertNull(harness.get().open(harness.uri));
-  }
-
-  @Test
-  public void testReturnsNullIfCursorIsEmpty() throws FileNotFoundException {
-    when(harness.query.query(eq(harness.uri))).thenReturn(new MatrixCursor(new String[1]));
-    assertNull(harness.get().open(harness.uri));
-  }
-
-  @Test
-  public void testReturnsNullIfCursorHasEmptyPath() throws FileNotFoundException {
-    MatrixCursor cursor = new MatrixCursor(new String[1]);
-    cursor.addRow(new Object[] { "" });
-    when(harness.query.query(eq(harness.uri))).thenReturn(cursor);
-    assertNull(harness.get().open(harness.uri));
-  }
-
-  @Test
-  public void testReturnsNullIfFileDoesNotExist() throws FileNotFoundException {
-    when(harness.service.get(anyString())).thenReturn(harness.file);
-    when(harness.service.exists(eq(harness.file))).thenReturn(false);
-    assertNull(harness.get().open(harness.uri));
-  }
-
-  @Test
-  public void testReturnNullIfFileLengthIsZero() throws FileNotFoundException {
-    when(harness.service.get(anyString())).thenReturn(harness.file);
-    when(harness.service.length(eq(harness.file))).thenReturn(0L);
-    assertNull(harness.get().open(harness.uri));
-  }
-
-  @Test
-  public void testClosesCursor() throws FileNotFoundException {
-    harness.get().open(harness.uri);
-    assertTrue(harness.cursor.isClosed());
-  }
-
-  @Test
-  public void testReturnsOpenedInputStreamWhenFileFound() throws FileNotFoundException {
-    InputStream expected = new ByteArrayInputStream(new byte[0]);
-    Shadows.shadowOf(RuntimeEnvironment.application.getContentResolver())
-        .registerInputStream(harness.uri, expected);
-    assertEquals(expected, harness.get().open(harness.uri));
-  }
-
-  @Test
-  public void testVideoQueryReturnsVideoCursor() {
-    Uri queryUri = MediaStore.Video.Thumbnails.EXTERNAL_CONTENT_URI;
-    ThumbFetcher.VideoThumbnailQuery query =
-        new ThumbFetcher.VideoThumbnailQuery(getContentResolver());
-    RoboCursor testCursor = new RoboCursor();
-    Shadows.shadowOf(RuntimeEnvironment.application.getContentResolver())
-        .setCursor(queryUri, testCursor);
-    assertEquals(testCursor, query.query(harness.uri));
-  }
-
-  @Test
-  public void testImageQueryReturnsImageCursor() {
-    Uri queryUri = MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI;
-    ThumbFetcher.ImageThumbnailQuery query =
-        new ThumbFetcher.ImageThumbnailQuery(getContentResolver());
-    RoboCursor testCursor = new RoboCursor();
-    Shadows.shadowOf(RuntimeEnvironment.application.getContentResolver())
-        .setCursor(queryUri, testCursor);
-    assertEquals(testCursor, query.query(harness.uri));
-  }
-
-  private static ContentResolver getContentResolver() {
-    return RuntimeEnvironment.application.getContentResolver();
-  }
-
-  private static class Harness {
-    MatrixCursor cursor = new MatrixCursor(new String[1]);
-    File file = new File("fake/uri");
-    Uri uri = Uri.fromFile(file);
-    ThumbnailQuery query = mock(ThumbnailQuery.class);
-    FileService service = mock(FileService.class);
-    ArrayPool byteArrayPool = new LruArrayPool();
-
-    public Harness() {
-      cursor.addRow(new String[] { file.getAbsolutePath() });
-      when(query.query(eq(uri))).thenReturn(cursor);
-      when(service.get(eq(file.getAbsolutePath()))).thenReturn(file);
-      when(service.exists(eq(file))).thenReturn(true);
-      when(service.length(eq(file))).thenReturn(1L);
-    }
-
-    public ThumbnailStreamOpener get() {
-      return new ThumbnailStreamOpener(service, query, byteArrayPool, getContentResolver());
-    }
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/data/resource/FileDescriptorLocalUriFetcherTest.java b/library/src/test/java/com/bumptech/glide/load/data/resource/FileDescriptorLocalUriFetcherTest.java
deleted file mode 100644
index f2e318e1c..000000000
--- a/library/src/test/java/com/bumptech/glide/load/data/resource/FileDescriptorLocalUriFetcherTest.java
+++ /dev/null
@@ -1,73 +0,0 @@
-package com.bumptech.glide.load.data.resource;
-
-import static org.mockito.Matchers.eq;
-import static org.mockito.Matchers.isA;
-import static org.mockito.Mockito.mock;
-import static org.mockito.Mockito.verify;
-import static org.mockito.Mockito.when;
-
-import android.content.ContentResolver;
-import android.content.Context;
-import android.content.res.AssetFileDescriptor;
-import android.net.Uri;
-import android.os.ParcelFileDescriptor;
-import com.bumptech.glide.Priority;
-import com.bumptech.glide.load.data.DataFetcher;
-import com.bumptech.glide.load.data.FileDescriptorLocalUriFetcher;
-import com.bumptech.glide.tests.ContentResolverShadow;
-import java.io.FileNotFoundException;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.mockito.Mock;
-import org.mockito.MockitoAnnotations;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.RuntimeEnvironment;
-import org.robolectric.annotation.Config;
-import org.robolectric.internal.ShadowExtractor;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18, shadows = { ContentResolverShadow.class })
-public class FileDescriptorLocalUriFetcherTest {
-
-  @Mock DataFetcher.DataCallback<ParcelFileDescriptor> callback;
-
-  @Before
-  public void setUp() {
-    MockitoAnnotations.initMocks(this);
-  }
-
-  @Test
-  public void testLoadResource_returnsFileDescriptor() throws Exception {
-    Context context = RuntimeEnvironment.application;
-    Uri uri = Uri.parse("file://nothing");
-
-    ContentResolver contentResolver = context.getContentResolver();
-    ContentResolverShadow shadow = (ContentResolverShadow) ShadowExtractor.extract(contentResolver);
-
-    AssetFileDescriptor assetFileDescriptor = mock(AssetFileDescriptor.class);
-    ParcelFileDescriptor parcelFileDescriptor = mock(ParcelFileDescriptor.class);
-    when(assetFileDescriptor.getParcelFileDescriptor()).thenReturn(parcelFileDescriptor);
-    shadow.registerFileDescriptor(uri, assetFileDescriptor);
-
-    FileDescriptorLocalUriFetcher fetcher =
-        new FileDescriptorLocalUriFetcher(context.getContentResolver(), uri);
-    fetcher.loadData(Priority.NORMAL, callback);
-    verify(callback).onDataReady(eq(parcelFileDescriptor));
-  }
-
-  @Test
-  public void testLoadResource_withNullFileDescriptor_callsLoadFailed() {
-    Context context = RuntimeEnvironment.application;
-    Uri uri = Uri.parse("file://nothing");
-
-    ContentResolver contentResolver = context.getContentResolver();
-    ContentResolverShadow shadow = (ContentResolverShadow) ShadowExtractor.extract(contentResolver);
-    shadow.registerFileDescriptor(uri, null /*fileDescriptor*/);
-
-    FileDescriptorLocalUriFetcher fetcher =
-        new FileDescriptorLocalUriFetcher(context.getContentResolver(), uri);
-    fetcher.loadData(Priority.NORMAL, callback);
-    verify(callback).onLoadFailed(isA(FileNotFoundException.class));
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/data/resource/StreamLocalUriFetcherTest.java b/library/src/test/java/com/bumptech/glide/load/data/resource/StreamLocalUriFetcherTest.java
deleted file mode 100644
index 230db7a56..000000000
--- a/library/src/test/java/com/bumptech/glide/load/data/resource/StreamLocalUriFetcherTest.java
+++ /dev/null
@@ -1,66 +0,0 @@
-package com.bumptech.glide.load.data.resource;
-
-import static org.mockito.Matchers.isA;
-import static org.mockito.Matchers.isNotNull;
-import static org.mockito.Mockito.verify;
-
-import android.content.ContentResolver;
-import android.content.Context;
-import android.net.Uri;
-import com.bumptech.glide.Priority;
-import com.bumptech.glide.load.data.DataFetcher;
-import com.bumptech.glide.load.data.StreamLocalUriFetcher;
-import com.bumptech.glide.tests.ContentResolverShadow;
-import java.io.ByteArrayInputStream;
-import java.io.FileNotFoundException;
-import java.io.InputStream;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.mockito.Mock;
-import org.mockito.MockitoAnnotations;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.RuntimeEnvironment;
-import org.robolectric.annotation.Config;
-import org.robolectric.internal.ShadowExtractor;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18, shadows = { ContentResolverShadow.class })
-public class StreamLocalUriFetcherTest {
-  @Mock DataFetcher.DataCallback<InputStream> callback;
-
-  @Before
-  public void setUp() {
-    MockitoAnnotations.initMocks(this);
-  }
-
-  @Test
-  public void testLoadResource_returnsInputStream() throws Exception {
-    Context context = RuntimeEnvironment.application;
-    Uri uri = Uri.parse("file://nothing");
-
-    ContentResolver contentResolver = context.getContentResolver();
-    ContentResolverShadow shadow = (ContentResolverShadow) ShadowExtractor.extract(contentResolver);
-    shadow.registerInputStream(uri, new ByteArrayInputStream(new byte[0]));
-
-    StreamLocalUriFetcher fetcher = new StreamLocalUriFetcher(context.getContentResolver(), uri);
-    fetcher.loadData(Priority.NORMAL, callback);
-    verify(callback).onDataReady(isNotNull(InputStream.class));
-  }
-
-  @Test
-  public void testLoadResource_withNullInputStream_callsLoadFailed() {
-    Context context = RuntimeEnvironment.application;
-    Uri uri = Uri.parse("file://nothing");
-
-    ContentResolver contentResolver = context.getContentResolver();
-    ContentResolverShadow shadow = (ContentResolverShadow) ShadowExtractor.extract(contentResolver);
-
-    shadow.registerInputStream(uri, null /*inputStream*/);
-
-    StreamLocalUriFetcher fetcher = new StreamLocalUriFetcher(context.getContentResolver(), uri);
-    fetcher.loadData(Priority.LOW, callback);
-
-    verify(callback).onLoadFailed(isA(FileNotFoundException.class));
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/engine/DataCacheKeyTest.java b/library/src/test/java/com/bumptech/glide/load/engine/DataCacheKeyTest.java
deleted file mode 100644
index 01c767634..000000000
--- a/library/src/test/java/com/bumptech/glide/load/engine/DataCacheKeyTest.java
+++ /dev/null
@@ -1,66 +0,0 @@
-package com.bumptech.glide.load.engine;
-
-import static org.mockito.Matchers.any;
-import static org.mockito.Mockito.doAnswer;
-
-import com.bumptech.glide.load.Key;
-import com.bumptech.glide.tests.KeyAssertions;
-import com.bumptech.glide.tests.Util.WriteDigest;
-import java.io.UnsupportedEncodingException;
-import java.security.MessageDigest;
-import java.security.NoSuchAlgorithmException;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.junit.runners.JUnit4;
-import org.mockito.Mock;
-import org.mockito.MockitoAnnotations;
-
-@RunWith(JUnit4.class)
-public class DataCacheKeyTest {
-
-  @Mock Key firstKey;
-  @Mock Key firstSignature;
-  @Mock Key secondKey;
-  @Mock Key secondSignature;
-
-  @Before
-  public void setUp() throws UnsupportedEncodingException {
-    MockitoAnnotations.initMocks(this);
-    doAnswer(new WriteDigest("firstKey")).when(firstKey)
-        .updateDiskCacheKey(any(MessageDigest.class));
-    doAnswer(new WriteDigest("firstSignature")).when(firstSignature)
-        .updateDiskCacheKey(any(MessageDigest.class));
-    doAnswer(new WriteDigest("secondKey")).when(secondKey)
-        .updateDiskCacheKey(any(MessageDigest.class));
-    doAnswer(new WriteDigest("secondSignature")).when(secondSignature)
-        .updateDiskCacheKey(any(MessageDigest.class));
-  }
-
-  @Test
-  public void testDiffersIfIdDiffers()
-      throws UnsupportedEncodingException, NoSuchAlgorithmException {
-    DataCacheKey first = new DataCacheKey(firstKey, firstSignature);
-    DataCacheKey second = new DataCacheKey(secondKey, firstSignature);
-
-    KeyAssertions.assertDifferent(first, second);
-  }
-
-  @Test
-  public void testDiffersIfSignatureDiffers()
-      throws UnsupportedEncodingException, NoSuchAlgorithmException {
-    DataCacheKey first = new DataCacheKey(firstKey, firstSignature);
-    DataCacheKey second = new DataCacheKey(firstKey, secondSignature);
-
-    KeyAssertions.assertDifferent(first, second);
-  }
-
-  @Test
-  public void testSameIfIdAndSignatureAreTheSame()
-      throws UnsupportedEncodingException, NoSuchAlgorithmException {
-    DataCacheKey first = new DataCacheKey(firstKey, firstSignature);
-    DataCacheKey second = new DataCacheKey(firstKey, firstSignature);
-
-    KeyAssertions.assertSame(first, second);
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/engine/EngineJobTest.java b/library/src/test/java/com/bumptech/glide/load/engine/EngineJobTest.java
deleted file mode 100644
index 6a740e638..000000000
--- a/library/src/test/java/com/bumptech/glide/load/engine/EngineJobTest.java
+++ /dev/null
@@ -1,513 +0,0 @@
-package com.bumptech.glide.load.engine;
-
-import static com.bumptech.glide.tests.Util.anyResource;
-import static com.bumptech.glide.tests.Util.isADataSource;
-import static com.bumptech.glide.tests.Util.mockResource;
-import static org.junit.Assert.assertFalse;
-import static org.junit.Assert.assertTrue;
-import static org.mockito.Matchers.any;
-import static org.mockito.Matchers.eq;
-import static org.mockito.Matchers.isNull;
-import static org.mockito.Mockito.doAnswer;
-import static org.mockito.Mockito.inOrder;
-import static org.mockito.Mockito.mock;
-import static org.mockito.Mockito.never;
-import static org.mockito.Mockito.times;
-import static org.mockito.Mockito.verify;
-import static org.mockito.Mockito.when;
-
-import android.os.Handler;
-import android.support.v4.util.Pools;
-import com.bumptech.glide.load.DataSource;
-import com.bumptech.glide.load.Key;
-import com.bumptech.glide.load.engine.executor.GlideExecutor;
-import com.bumptech.glide.load.engine.executor.MockGlideExecutor;
-import com.bumptech.glide.request.ResourceCallback;
-import java.util.ArrayList;
-import java.util.List;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.mockito.InOrder;
-import org.mockito.invocation.InvocationOnMock;
-import org.mockito.stubbing.Answer;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.Shadows;
-import org.robolectric.annotation.Config;
-import org.robolectric.shadows.ShadowLooper;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class EngineJobTest {
-  private EngineJobHarness harness;
-
-  @Before
-  public void setUp() {
-    harness = new EngineJobHarness();
-  }
-
-  @Test
-  public void testOnResourceReadyPassedToCallbacks() throws Exception {
-    EngineJob<Object> job = harness.getJob();
-    job.start(harness.decodeJob);
-    job.onResourceReady(harness.resource, harness.dataSource);
-
-    ShadowLooper.runUiThreadTasks();
-    verify(harness.cb).onResourceReady(eq(harness.engineResource), eq(harness.dataSource));
-  }
-
-  @Test
-  public void testListenerNotifiedJobCompleteOnOnResourceReady() {
-    EngineJob<Object> job = harness.getJob();
-    job.start(harness.decodeJob);
-    job.onResourceReady(harness.resource, harness.dataSource);
-
-    ShadowLooper.runUiThreadTasks();
-
-    verify(harness.listener).onEngineJobComplete(eq(harness.key), eq(harness.engineResource));
-  }
-
-  @Test
-  public void testNotifiesAllCallbacksOnReady() {
-    MultiCbHarness harness = new MultiCbHarness();
-    harness.job.start(harness.decodeJob);
-    harness.job.onResourceReady(harness.resource, harness.dataSource);
-    for (ResourceCallback cb : harness.cbs) {
-      verify(cb).onResourceReady(eq(harness.engineResource), eq(harness.dataSource));
-    }
-  }
-
-  @Test
-  public void testNotifiesAllCallbacksOnException() {
-    MultiCbHarness harness = new MultiCbHarness();
-    harness.job.start(harness.decodeJob);
-    GlideException exception = new GlideException("test");
-    harness.job.onLoadFailed(exception);
-    for (ResourceCallback cb : harness.cbs) {
-      verify(cb).onLoadFailed(eq(exception));
-    }
-  }
-
-  @Test
-  public void testAcquiresResourceOncePerCallback() {
-    MultiCbHarness harness = new MultiCbHarness();
-    harness.job.start(harness.decodeJob);
-    harness.job.onResourceReady(harness.resource, harness.dataSource);
-
-    // Acquired once and then released while notifying.
-    InOrder order = inOrder(harness.engineResource);
-    order.verify(harness.engineResource, times(harness.numCbs + 1)).acquire();
-    order.verify(harness.engineResource, times(1)).release();
-  }
-
-  @Test
-  public void testListenerNotifiedJobCompleteOnException() {
-    harness = new EngineJobHarness();
-    EngineJob<Object> job = harness.getJob();
-    job.start(harness.decodeJob);
-    job.onLoadFailed(new GlideException("test"));
-    ShadowLooper.runUiThreadTasks();
-    verify(harness.listener).onEngineJobComplete(eq(harness.key), isNull(EngineResource.class));
-  }
-
-  @Test
-  public void testResourceIsCacheableWhenIsCacheableOnReady() {
-    harness.isCacheable = true;
-    EngineJob<Object> job = harness.getJob();
-    job.start(harness.decodeJob);
-    job.onResourceReady(harness.resource, harness.dataSource);
-
-    ShadowLooper.runUiThreadTasks();
-    verify(harness.factory).build(anyResource(), eq(harness.isCacheable));
-  }
-
-  @Test
-  public void testResourceIsCacheableWhenNotIsCacheableOnReady() {
-    harness.isCacheable = false;
-    EngineJob<Object> job = harness.getJob();
-    job.start(harness.decodeJob);
-    job.onResourceReady(harness.resource, harness.dataSource);
-
-    ShadowLooper.runUiThreadTasks();
-    verify(harness.factory).build(anyResource(), eq(harness.isCacheable));
-  }
-
-  @Test
-  public void testListenerNotifiedOfCancelOnCancel() {
-    EngineJob<Object> job = harness.getJob();
-    job.start(harness.decodeJob);
-    job.cancel();
-
-    verify(harness.listener).onEngineJobCancelled(eq(job), eq(harness.key));
-  }
-
-  @Test
-  public void testOnResourceReadyNotDeliveredAfterCancel() {
-    EngineJob<Object> job = harness.getJob();
-    job.start(harness.decodeJob);
-    job.cancel();
-
-    job.onResourceReady(harness.resource, harness.dataSource);
-
-    ShadowLooper.runUiThreadTasks();
-    verify(harness.cb, never()).onResourceReady(anyResource(), isADataSource());
-  }
-
-  @Test
-  public void testOnExceptionNotDeliveredAfterCancel() {
-    harness = new EngineJobHarness();
-    EngineJob<Object> job = harness.getJob();
-    job.start(harness.decodeJob);
-    job.cancel();
-
-    job.onLoadFailed(new GlideException("test"));
-
-    ShadowLooper.runUiThreadTasks();
-    verify(harness.cb, never()).onLoadFailed(any(GlideException.class));
-  }
-
-  @Test
-  public void testRemovingAllCallbacksCancelsRunner() {
-    EngineJob<Object> job = harness.getJob();
-    job.start(harness.decodeJob);
-    job.removeCallback(harness.cb);
-
-    assertTrue(job.isCancelled());
-  }
-
-  @SuppressWarnings("unchecked")
-  @Test
-  public void removingSomeCallbacksDoesNotCancelRunner() {
-    EngineJob<Object> job = harness.getJob();
-    job.addCallback(mock(ResourceCallback.class));
-    job.removeCallback(harness.cb);
-
-    assertFalse(job.isCancelled());
-  }
-
-  @Test
-  public void testResourceIsAcquiredOncePerConsumerAndOnceForCache() {
-    EngineJob<Object> job = harness.getJob();
-    job.start(harness.decodeJob);
-    job.onResourceReady(harness.resource, harness.dataSource);
-
-    // Once while notifying and once for single callback.
-    verify(harness.engineResource, times(2)).acquire();
-  }
-
-  @Test
-  public void testDoesNotNotifyCancelledIfCompletes() {
-    EngineJob<Object> job = harness.getJob();
-    job.start(harness.decodeJob);
-    job.onResourceReady(harness.resource, harness.dataSource);
-
-    verify(harness.listener, never()).onEngineJobCancelled(eq(job), eq(harness.key));
-  }
-
-  @Test
-  public void testDoesNotNotifyCancelledIfAlreadyCancelled() {
-    EngineJob<Object> job = harness.getJob();
-    job.start(harness.decodeJob);
-    job.cancel();
-    job.cancel();
-
-    verify(harness.listener, times(1)).onEngineJobCancelled(eq(job), eq(harness.key));
-  }
-
-  @Test
-  public void testDoesNotNotifyCancelledIfReceivedException() {
-    EngineJob<Object> job = harness.getJob();
-    job.start(harness.decodeJob);
-    job.onLoadFailed(new GlideException("test"));
-
-    verify(harness.listener).onEngineJobComplete(eq(harness.key), isNull(EngineResource.class));
-    verify(harness.listener, never()).onEngineJobCancelled(any(EngineJob.class), any(Key.class));
-  }
-
-  @Test
-  public void testReleasesResourceIfCancelledOnReady() {
-    ShadowLooper shadowLooper = Shadows.shadowOf(harness.mainHandler.getLooper());
-    shadowLooper.pause();
-
-    EngineJob<Object> job = harness.getJob();
-    job.start(harness.decodeJob);
-    job.onResourceReady(harness.resource, harness.dataSource);
-    job.cancel();
-    shadowLooper.runOneTask();
-
-    verify(harness.resource).recycle();
-  }
-
-  @Test
-  public void testDoesNotAcquireOnceForMemoryCacheIfNotCacheable() {
-    harness.isCacheable = false;
-    EngineJob<Object> job = harness.getJob();
-    job.start(harness.decodeJob);
-    job.onResourceReady(harness.resource, harness.dataSource);
-
-    verify(harness.engineResource, times(2)).acquire();
-  }
-
-  @Test
-  public void testNotifiesNewCallbackOfResourceIfCallbackIsAddedDuringOnResourceReady() {
-    final EngineJob<Object> job = harness.getJob();
-    final ResourceCallback existingCallback = mock(ResourceCallback.class);
-    final ResourceCallback newCallback = mock(ResourceCallback.class);
-
-    doAnswer(new Answer<Void>() {
-      @Override
-      public Void answer(InvocationOnMock invocationOnMock) throws Throwable {
-        job.addCallback(newCallback);
-        return null;
-      }
-    }).when(existingCallback).onResourceReady(anyResource(), isADataSource());
-
-    job.addCallback(existingCallback);
-    job.start(harness.decodeJob);
-    job.onResourceReady(harness.resource, harness.dataSource);
-
-    verify(newCallback).onResourceReady(eq(harness.engineResource), eq(harness.dataSource));
-  }
-
-  @Test
-  public void testNotifiesNewCallbackOfExceptionIfCallbackIsAddedDuringOnException() {
-    harness = new EngineJobHarness();
-    final EngineJob<Object> job = harness.getJob();
-    final ResourceCallback existingCallback = mock(ResourceCallback.class);
-    final ResourceCallback newCallback = mock(ResourceCallback.class);
-
-    doAnswer(new Answer<Void>() {
-      @Override
-      public Void answer(InvocationOnMock invocationOnMock) throws Throwable {
-        job.addCallback(newCallback);
-        return null;
-      }
-    }).when(existingCallback).onLoadFailed(any(GlideException.class));
-
-    GlideException exception = new GlideException("test");
-    job.addCallback(existingCallback);
-    job.start(harness.decodeJob);
-    job.onLoadFailed(exception);
-
-    verify(newCallback).onLoadFailed(eq(exception));
-  }
-
-  @Test
-  public void testRemovingCallbackDuringOnResourceReadyIsIgnoredIfCallbackHasAlreadyBeenCalled() {
-    final EngineJob<Object> job = harness.getJob();
-    final ResourceCallback cb = mock(ResourceCallback.class);
-
-    doAnswer(new Answer<Void>() {
-      @Override
-      public Void answer(InvocationOnMock invocationOnMock) throws Throwable {
-        job.removeCallback(cb);
-        return null;
-      }
-    }).when(cb).onResourceReady(anyResource(), isADataSource());
-
-    job.addCallback(cb);
-    job.start(harness.decodeJob);
-    job.onResourceReady(harness.resource, harness.dataSource);
-
-    verify(cb, times(1)).onResourceReady(anyResource(), isADataSource());
-  }
-
-  @Test
-  public void testRemovingCallbackDuringOnExceptionIsIgnoredIfCallbackHasAlreadyBeenCalled() {
-    harness = new EngineJobHarness();
-    final EngineJob<Object> job = harness.getJob();
-    final ResourceCallback cb = mock(ResourceCallback.class);
-
-    doAnswer(new Answer<Void>() {
-      @Override
-      public Void answer(InvocationOnMock invocationOnMock) throws Throwable {
-        job.removeCallback(cb);
-        return null;
-      }
-    }).when(cb).onLoadFailed(any(GlideException.class));
-
-    GlideException exception = new GlideException("test");
-    job.addCallback(cb);
-    job.start(harness.decodeJob);
-    job.onLoadFailed(exception);
-
-    verify(cb, times(1)).onLoadFailed(eq(exception));
-  }
-
-  @Test
-  public void
-  testRemovingCallbackDuringOnResourceReadyPreventsCallbackFromBeingCalledIfNotYetCalled() {
-    final EngineJob<Object> job = harness.getJob();
-    final ResourceCallback notYetCalled = mock(ResourceCallback.class);
-
-    doAnswer(new Answer<Void>() {
-      @Override
-      public Void answer(InvocationOnMock invocationOnMock) throws Throwable {
-        job.removeCallback(notYetCalled);
-        return null;
-      }
-    }).when(harness.cb).onResourceReady(anyResource(), isADataSource());
-
-    job.addCallback(notYetCalled);
-    job.start(harness.decodeJob);
-    job.onResourceReady(harness.resource, harness.dataSource);
-
-    verify(notYetCalled, never()).onResourceReady(anyResource(), isADataSource());
-  }
-
-  @Test
-  public void
-  testRemovingCallbackDuringOnResourceReadyPreventsResourceFromBeingAcquiredForCallback() {
-    final EngineJob<Object> job = harness.getJob();
-    final ResourceCallback notYetCalled = mock(ResourceCallback.class);
-
-    doAnswer(new Answer<Void>() {
-      @Override
-      public Void answer(InvocationOnMock invocationOnMock) throws Throwable {
-        job.removeCallback(notYetCalled);
-        return null;
-      }
-    }).when(harness.cb).onResourceReady(anyResource(), isADataSource());
-
-    job.addCallback(notYetCalled);
-    job.start(harness.decodeJob);
-
-    job.onResourceReady(harness.resource, harness.dataSource);
-
-    // Once for notifying, once for called.
-    verify(harness.engineResource, times(2)).acquire();
-  }
-
-  @Test
-  public void testRemovingCallbackDuringOnExceptionPreventsCallbackFromBeingCalledIfNotYetCalled() {
-    harness = new EngineJobHarness();
-    final EngineJob<Object> job = harness.getJob();
-    final ResourceCallback called = mock(ResourceCallback.class);
-    final ResourceCallback notYetCalled = mock(ResourceCallback.class);
-
-    doAnswer(new Answer<Void>() {
-      @Override
-      public Void answer(InvocationOnMock invocationOnMock) throws Throwable {
-        job.removeCallback(notYetCalled);
-        return null;
-      }
-    }).when(called).onLoadFailed(any(GlideException.class));
-
-    job.addCallback(called);
-    job.addCallback(notYetCalled);
-    job.start(harness.decodeJob);
-    job.onLoadFailed(new GlideException("test"));
-
-    verify(notYetCalled, never()).onResourceReady(anyResource(), isADataSource());
-  }
-
-  @Test
-  public void testCancelsDecodeJobOnCancel() {
-    EngineJob<Object> job = harness.getJob();
-    job.start(harness.decodeJob);
-    job.cancel();
-
-    verify(harness.decodeJob).cancel();
-  }
-
-  @Test
-  public void testSubmitsDecodeJobToSourceServiceOnSubmitForSource() {
-    EngineJob<Object> job = harness.getJob();
-    harness.diskCacheService.shutdownNow();
-    job.reschedule(harness.decodeJob);
-
-    verify(harness.decodeJob).run();
-  }
-
-  @Test
-  public void testSubmitsDecodeJobToDiskCacheServiceWhenDecodingFromCacheOnStart() {
-    EngineJob<Object> job = harness.getJob();
-    when(harness.decodeJob.willDecodeFromCache()).thenReturn(true);
-    harness.diskCacheService.shutdownNow();
-    job.start(harness.decodeJob);
-
-    verify(harness.decodeJob).run();
-  }
-
-  @Test
-  public void testSubmitsDecodeJobToSourceServiceWhenDecodingFromSourceOnlyOnStart() {
-    EngineJob<Object> job = harness.getJob();
-    when(harness.decodeJob.willDecodeFromCache()).thenReturn(false);
-    harness.diskCacheService.shutdownNow();
-    job.start(harness.decodeJob);
-
-    verify(harness.decodeJob).run();
-  }
-
-  @Test
-  public void testSubmitsDecodeJobToUnlimitedSourceServiceWhenDecodingFromSourceOnlyOnStart() {
-    harness.useUnlimitedSourceGeneratorPool = true;
-    EngineJob<Object> job = harness.getJob();
-
-    when(harness.decodeJob.willDecodeFromCache()).thenReturn(false);
-    harness.diskCacheService.shutdownNow();
-    job.start(harness.decodeJob);
-
-    verify(harness.decodeJob).run();
-  }
-
-  @SuppressWarnings("unchecked")
-  private static class MultiCbHarness {
-    Key key = mock(Key.class);
-    Resource<Object> resource = mockResource();
-    EngineResource<Object> engineResource = mock(EngineResource.class);
-    EngineJobListener listener = mock(EngineJobListener.class);
-    boolean isCacheable = true;
-    boolean useUnlimitedSourceGeneratorPool = false;
-    int numCbs = 10;
-    List<ResourceCallback> cbs = new ArrayList<>();
-    EngineJob.EngineResourceFactory factory = mock(EngineJob.EngineResourceFactory.class);
-    EngineJob<Object> job;
-    GlideExecutor diskCacheService = MockGlideExecutor.newMainThreadExecutor();
-    GlideExecutor sourceService = MockGlideExecutor.newMainThreadExecutor();
-    GlideExecutor sourceUnlimitedService = MockGlideExecutor.newMainThreadUnlimitedExecutor();
-    Pools.Pool<EngineJob<?>> pool = new Pools.SimplePool<>(1);
-    DecodeJob<Object> decodeJob = mock(DecodeJob.class);
-    DataSource dataSource = DataSource.LOCAL;
-
-    public MultiCbHarness() {
-      when(factory.build(eq(resource), eq(isCacheable))).thenReturn(engineResource);
-      job = new EngineJob<>(diskCacheService, sourceService, sourceUnlimitedService, listener, pool,
-          factory).init(key, isCacheable, useUnlimitedSourceGeneratorPool);
-      for (int i = 0; i < numCbs; i++) {
-        cbs.add(mock(ResourceCallback.class));
-      }
-      for (ResourceCallback cb : cbs) {
-        job.addCallback(cb);
-      }
-    }
-  }
-
-  @SuppressWarnings("unchecked")
-  private static class EngineJobHarness {
-    EngineJob.EngineResourceFactory factory = mock(EngineJob.EngineResourceFactory.class);
-    Key key = mock(Key.class);
-    Handler mainHandler = new Handler();
-    ResourceCallback cb = mock(ResourceCallback.class);
-    Resource<Object> resource = mockResource();
-    EngineResource<Object> engineResource = mock(EngineResource.class);
-    EngineJobListener listener = mock(EngineJobListener.class);
-    GlideExecutor diskCacheService = MockGlideExecutor.newMainThreadExecutor();
-    GlideExecutor sourceService = MockGlideExecutor.newMainThreadExecutor();
-    GlideExecutor sourceUnlimitedService = MockGlideExecutor.newMainThreadUnlimitedExecutor();
-    boolean isCacheable = true;
-    boolean useUnlimitedSourceGeneratorPool = false;
-    DecodeJob<Object> decodeJob = mock(DecodeJob.class);
-    Pools.Pool<EngineJob<?>> pool = new Pools.SimplePool<>(1);
-    DataSource dataSource = DataSource.DATA_DISK_CACHE;
-
-    public EngineJob<Object> getJob() {
-      when(factory.build(eq(resource), eq(isCacheable))).thenReturn(engineResource);
-      EngineJob<Object> result = new EngineJob<>(
-          diskCacheService, sourceService, sourceUnlimitedService, listener, pool, factory)
-          .init(key, isCacheable, useUnlimitedSourceGeneratorPool);
-      result.addCallback(cb);
-      return result;
-    }
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/engine/EngineKeyTest.java b/library/src/test/java/com/bumptech/glide/load/engine/EngineKeyTest.java
deleted file mode 100644
index 0e691225f..000000000
--- a/library/src/test/java/com/bumptech/glide/load/engine/EngineKeyTest.java
+++ /dev/null
@@ -1,153 +0,0 @@
-package com.bumptech.glide.load.engine;
-
-import static org.junit.Assert.assertEquals;
-import static org.mockito.Matchers.any;
-import static org.mockito.Mockito.doAnswer;
-import static org.mockito.Mockito.mock;
-
-import com.bumptech.glide.load.Key;
-import com.bumptech.glide.load.Option;
-import com.bumptech.glide.load.Options;
-import com.bumptech.glide.load.Transformation;
-import com.bumptech.glide.tests.KeyAssertions;
-import com.bumptech.glide.tests.Util;
-import java.io.UnsupportedEncodingException;
-import java.security.MessageDigest;
-import java.security.NoSuchAlgorithmException;
-import java.util.Collections;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.mockito.invocation.InvocationOnMock;
-import org.mockito.stubbing.Answer;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.annotation.Config;
-
-/**
- * Tests if {@link EngineKey} {@link Object#hashCode() hashCode} and {@link Object#equals(Object)
- * equals} and SHA-1 disk cache key are different on any difference in ID or existence of a certain
- * workflow part. Also checking whether the equals method is symmetric.
- */
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class EngineKeyTest {
-  private Harness harness;
-
-  @Before
-  public void setUp() {
-    harness = new Harness();
-  }
-
-  private static class Harness {
-    String id = "testId";
-    int width = 1;
-    int height = 2;
-    Class<?> resourceClass = Object.class;
-    Class<?> transcodeClass = Integer.class;
-    Key signature = mock(Key.class);
-    @SuppressWarnings("unchecked")
-    Transformation<Object> transformation = mock(Transformation.class);
-    Options options = new Options();
-
-    public Harness() {
-      doAnswer(new Util.WriteDigest("transformation")).when(transformation)
-          .updateDiskCacheKey(any(MessageDigest.class));
-    }
-
-    public EngineKey build() {
-      return new EngineKey(id, signature, width, height,
-          Collections.<Class<?>, Transformation<?>>singletonMap(Object.class, transformation),
-          resourceClass, transcodeClass, options);
-    }
-  }
-
-  @Test
-  public void testIsIdenticalWithSameArguments() {
-    assertEquals(harness.build(), harness.build());
-  }
-
-  @Test
-  public void testDiffersIfIdDiffers() throws Exception {
-    EngineKey first = harness.build();
-    harness.id = harness.id + "2";
-    EngineKey second = harness.build();
-
-    KeyAssertions.assertDifferent(first, second, false /*checkDiskCacheKey*/);
-  }
-
-  @Test
-  public void testDiffersIfHeightDiffers() throws Exception {
-    EngineKey first = harness.build();
-    harness.height += 1;
-    EngineKey second = harness.build();
-
-    KeyAssertions.assertDifferent(first, second, false /*checkDiskCacheKey*/);
-  }
-
-  @Test
-  public void testDiffersIfWidthDiffers() throws Exception {
-    EngineKey first = harness.build();
-    harness.width += 1;
-    EngineKey second = harness.build();
-
-    KeyAssertions.assertDifferent(first, second, false /*checkDiskCacheKey*/);
-  }
-
-  @Test
-  public void testDiffersIfSignatureDiffers()
-      throws UnsupportedEncodingException, NoSuchAlgorithmException {
-    EngineKey first = harness.build();
-    Key signature = mock(Key.class);
-    doAnswer(new Answer<Void>() {
-      @Override
-      public Void answer(InvocationOnMock invocationOnMock) throws Throwable {
-        MessageDigest digest = (MessageDigest) invocationOnMock.getArguments()[0];
-        digest.update("signature".getBytes("UTF-8"));
-        return null;
-      }
-    }).when(signature).updateDiskCacheKey(any(MessageDigest.class));
-    harness.signature = signature;
-    EngineKey second = harness.build();
-
-    KeyAssertions.assertDifferent(first, second, false /*checkDiskCacheKey*/);
-  }
-
-  @Test
-  public void testDiffersIfResourceClassDiffers()
-      throws UnsupportedEncodingException, NoSuchAlgorithmException {
-    EngineKey first = harness.build();
-    harness.resourceClass = Long.class;
-    EngineKey second = harness.build();
-    KeyAssertions.assertDifferent(first, second, false /*checkDiskCacheKey*/);
-  }
-
-  @Test
-  public void testDiffersIfTranscodeClassDiffers()
-      throws UnsupportedEncodingException, NoSuchAlgorithmException {
-    EngineKey first = harness.build();
-    harness.transcodeClass = Long.class;
-    EngineKey second = harness.build();
-    KeyAssertions.assertDifferent(first, second, false /*checkDiskCacheKey*/);
-  }
-
-  @Test
-  public void testDiffersIfTransformationsDiffer() throws NoSuchAlgorithmException {
-    EngineKey first = harness.build();
-
-    @SuppressWarnings("unchecked") Transformation<Object> other = mock(Transformation.class);
-    doAnswer(new Util.WriteDigest("other")).when(other)
-        .updateDiskCacheKey(any(MessageDigest.class));
-    harness.transformation = other;
-    EngineKey second = harness.build();
-    KeyAssertions.assertDifferent(first, second, false /*checkDiskCacheKey*/);
-  }
-
-  @Test
-  public void testDiffersIfOptionsDiffer() throws NoSuchAlgorithmException {
-    EngineKey first = harness.build();
-    harness.options = new Options();
-    harness.options.set(Option.memory("fakeKey"), "someValue");
-    EngineKey second = harness.build();
-    KeyAssertions.assertDifferent(first, second, false /*checkDiskCacheKey*/);
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/engine/EngineResourceTest.java b/library/src/test/java/com/bumptech/glide/load/engine/EngineResourceTest.java
deleted file mode 100644
index c4a05be94..000000000
--- a/library/src/test/java/com/bumptech/glide/load/engine/EngineResourceTest.java
+++ /dev/null
@@ -1,153 +0,0 @@
-package com.bumptech.glide.load.engine;
-
-import static com.bumptech.glide.tests.Util.mockResource;
-import static org.junit.Assert.assertEquals;
-import static org.junit.Assert.assertFalse;
-import static org.junit.Assert.assertTrue;
-import static org.junit.Assert.fail;
-import static org.mockito.Matchers.eq;
-import static org.mockito.Mockito.mock;
-import static org.mockito.Mockito.verify;
-import static org.mockito.Mockito.when;
-
-import com.bumptech.glide.load.Key;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class EngineResourceTest {
-  private EngineResource<Object> engineResource;
-  private EngineResource.ResourceListener listener;
-  private Key cacheKey = mock(Key.class);
-  private Resource<Object> resource;
-
-  @Before
-  public void setUp() {
-    resource = mockResource();
-    engineResource = new EngineResource<>(resource, true /*isMemoryCacheable*/);
-    listener = mock(EngineResource.ResourceListener.class);
-    engineResource.setResourceListener(cacheKey, listener);
-  }
-
-  @Test
-  public void testCanAcquireAndRelease() {
-    engineResource.acquire();
-    engineResource.release();
-
-    verify(listener).onResourceReleased(cacheKey, engineResource);
-  }
-
-  @Test
-  public void testCanAcquireMultipleTimesAndRelease() {
-    engineResource.acquire();
-    engineResource.acquire();
-    engineResource.release();
-    engineResource.release();
-
-    verify(listener).onResourceReleased(eq(cacheKey), eq(engineResource));
-  }
-
-  @Test
-  public void testDelegatesGetToWrappedResource() {
-    Object expected = new Object();
-    when(resource.get()).thenReturn(expected);
-    assertEquals(expected, engineResource.get());
-  }
-
-  @Test
-  public void testDelegatesGetSizeToWrappedResource() {
-    int expectedSize = 1234;
-    when(resource.getSize()).thenReturn(expectedSize);
-    assertEquals(expectedSize, engineResource.getSize());
-  }
-
-  @Test
-  public void testRecyclesWrappedResourceWhenRecycled() {
-    engineResource.acquire();
-    engineResource.release();
-    engineResource.recycle();
-    verify(resource).recycle();
-  }
-
-  @Test(expected = IllegalStateException.class)
-  public void testThrowsIfRecycledTwice() {
-    engineResource.recycle();
-    engineResource.recycle();
-  }
-
-  @Test(expected = IllegalStateException.class)
-  public void testThrowsIfReleasedBeforeAcquired() {
-    engineResource.release();
-  }
-
-  @Test(expected = IllegalStateException.class)
-  public void testThrowsIfRecycledWhileAcquired() {
-    engineResource.acquire();
-    engineResource.recycle();
-  }
-
-  @Test(expected = IllegalStateException.class)
-  public void testThrowsIfAcquiredAfterRecycled() {
-    engineResource.recycle();
-    engineResource.acquire();
-  }
-
-  @Test
-  public void testThrowsIfAcquiredOnBackgroundThread() throws InterruptedException {
-    Thread otherThread = new Thread(new Runnable() {
-      @Override
-      public void run() {
-        try {
-          engineResource.acquire();
-        } catch (IllegalThreadStateException e) {
-          return;
-        }
-        fail("Failed to receive expected IllegalThreadStateException");
-      }
-    });
-    otherThread.start();
-    otherThread.join();
-  }
-
-  @Test
-  public void testThrowsIfReleasedOnBackgroundThread() throws InterruptedException {
-    engineResource.acquire();
-    Thread otherThread = new Thread(new Runnable() {
-      @Override
-      public void run() {
-        try {
-          engineResource.release();
-        } catch (IllegalThreadStateException e) {
-          return;
-        }
-        fail("Failed to receive expected IllegalThreadStateException");
-      }
-    });
-    otherThread.start();
-    otherThread.join();
-  }
-
-  @Test(expected = IllegalStateException.class)
-  public void testThrowsIfReleasedMoreThanAcquired() {
-    engineResource.acquire();
-    engineResource.release();
-    engineResource.release();
-  }
-
-  @Test(expected = NullPointerException.class)
-  public void testThrowsIfWrappedResourceIsNull() {
-    new EngineResource<>(null, false);
-  }
-
-  @Test
-  public void testCanSetAndGetIsCacheable() {
-    engineResource = new EngineResource<>(mockResource(), true);
-    assertTrue(engineResource.isCacheable());
-    engineResource = new EngineResource<>(mockResource(), false);
-    assertFalse(engineResource.isCacheable());
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/engine/EngineTest.java b/library/src/test/java/com/bumptech/glide/load/engine/EngineTest.java
deleted file mode 100644
index 38f51ba04..000000000
--- a/library/src/test/java/com/bumptech/glide/load/engine/EngineTest.java
+++ /dev/null
@@ -1,521 +0,0 @@
-package com.bumptech.glide.load.engine;
-
-import static com.bumptech.glide.tests.Util.anyResource;
-import static com.bumptech.glide.tests.Util.isADataSource;
-import static com.bumptech.glide.tests.Util.mockResource;
-import static com.google.common.truth.Truth.assertThat;
-import static org.junit.Assert.assertEquals;
-import static org.junit.Assert.assertNotNull;
-import static org.junit.Assert.assertNull;
-import static org.mockito.Matchers.any;
-import static org.mockito.Matchers.anyBoolean;
-import static org.mockito.Matchers.anyInt;
-import static org.mockito.Matchers.eq;
-import static org.mockito.Matchers.isNull;
-import static org.mockito.Mockito.doAnswer;
-import static org.mockito.Mockito.mock;
-import static org.mockito.Mockito.never;
-import static org.mockito.Mockito.times;
-import static org.mockito.Mockito.verify;
-import static org.mockito.Mockito.when;
-
-import com.bumptech.glide.GlideContext;
-import com.bumptech.glide.Priority;
-import com.bumptech.glide.load.DataSource;
-import com.bumptech.glide.load.Key;
-import com.bumptech.glide.load.Options;
-import com.bumptech.glide.load.Transformation;
-import com.bumptech.glide.load.engine.cache.DiskCache;
-import com.bumptech.glide.load.engine.cache.MemoryCache;
-import com.bumptech.glide.load.engine.executor.GlideExecutor;
-import com.bumptech.glide.load.engine.executor.MockGlideExecutor;
-import com.bumptech.glide.request.ResourceCallback;
-import com.bumptech.glide.tests.BackgroundUtil;
-import com.bumptech.glide.tests.GlideShadowLooper;
-import java.lang.ref.WeakReference;
-import java.util.HashMap;
-import java.util.Map;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.mockito.invocation.InvocationOnMock;
-import org.mockito.stubbing.Answer;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18, shadows = { GlideShadowLooper.class })
-@SuppressWarnings("unchecked")
-public class EngineTest {
-  private EngineTestHarness harness;
-
-  @Before
-  public void setUp() {
-    harness = new EngineTestHarness();
-  }
-
-  @Test
-  public void testNewRunnerIsCreatedAndPostedWithNoExistingLoad() {
-    harness.doLoad();
-
-    verify(harness.job).start(any(DecodeJob.class));
-  }
-
-  @Test
-  public void testCallbackIsAddedToNewEngineJobWithNoExistingLoad() {
-    harness.doLoad();
-
-    verify(harness.job).addCallback(eq(harness.cb));
-  }
-
-  @Test
-  public void testLoadStatusIsReturnedForNewLoad() {
-    assertNotNull(harness.doLoad());
-  }
-
-  @Test
-  public void testEngineJobReceivesRemoveCallbackFromLoadStatus() {
-    Engine.LoadStatus loadStatus = harness.doLoad();
-    loadStatus.cancel();
-
-    verify(harness.job).removeCallback(eq(harness.cb));
-  }
-
-  @Test
-  public void testNewRunnerIsAddedToRunnersMap() {
-    harness.doLoad();
-
-    assertThat(harness.jobs).containsKey(harness.cacheKey);
-  }
-
-  @Test
-  public void testNewRunnerIsNotCreatedAndPostedWithExistingLoad() {
-    harness.doLoad();
-    harness.doLoad();
-
-    verify(harness.job, times(1)).start(any(DecodeJob.class));
-  }
-
-  @Test
-  public void testCallbackIsAddedToExistingRunnerWithExistingLoad() {
-    harness.doLoad();
-
-    ResourceCallback newCallback = mock(ResourceCallback.class);
-    harness.cb = newCallback;
-    harness.doLoad();
-
-    verify(harness.job).addCallback(eq(newCallback));
-  }
-
-  @Test
-  public void testLoadStatusIsReturnedForExistingJob() {
-    harness.doLoad();
-    Engine.LoadStatus loadStatus = harness.doLoad();
-
-    assertNotNull(loadStatus);
-  }
-
-  @Test
-  public void testResourceIsReturnedFromActiveResourcesIfPresent() {
-    harness.activeResources
-        .put(harness.cacheKey, new WeakReference<EngineResource<?>>(harness.resource));
-
-    harness.doLoad();
-
-    verify(harness.cb).onResourceReady(eq(harness.resource), eq(DataSource.MEMORY_CACHE));
-  }
-
-  @Test
-  public void testResourceIsNotReturnedFromActiveResourcesIfRefIsCleared() {
-    harness.activeResources.put(harness.cacheKey, new WeakReference<EngineResource<?>>(null));
-
-    harness.doLoad();
-
-    verify(harness.cb, never()).onResourceReady(isNull(Resource.class), isADataSource());
-  }
-
-  @Test
-  public void testKeyIsRemovedFromActiveResourcesIfRefIsCleared() {
-    harness.activeResources.put(harness.cacheKey, new WeakReference<EngineResource<?>>(null));
-
-    harness.doLoad();
-
-    assertThat(harness.activeResources).doesNotContainKey(harness.cacheKey);
-  }
-
-  @Test
-  public void testResourceIsAcquiredIfReturnedFromActiveResources() {
-    harness.activeResources
-        .put(harness.cacheKey, new WeakReference<EngineResource<?>>(harness.resource));
-
-    harness.doLoad();
-
-    verify(harness.resource).acquire();
-  }
-
-  @Test
-  public void testNewLoadIsNotStartedIfResourceIsActive() {
-    harness.activeResources
-        .put(harness.cacheKey, new WeakReference<EngineResource<?>>(harness.resource));
-
-    harness.doLoad();
-
-    verify(harness.job, never()).start(any(DecodeJob.class));
-  }
-
-  @Test
-  public void testNullLoadStatusIsReturnedIfResourceIsActive() {
-    harness.activeResources
-        .put(harness.cacheKey, new WeakReference<EngineResource<?>>(harness.resource));
-
-    assertNull(harness.doLoad());
-  }
-
-  @Test
-  public void testActiveResourcesIsNotCheckedIfReturnedFromCache() {
-    when(harness.cache.remove(eq(harness.cacheKey))).thenReturn(harness.resource);
-    EngineResource<?> other = mock(EngineResource.class);
-    harness.activeResources.put(harness.cacheKey, new WeakReference<EngineResource<?>>(other));
-
-    harness.doLoad();
-
-    verify(harness.cb).onResourceReady(eq(harness.resource), eq(DataSource.MEMORY_CACHE));
-    verify(harness.cb, never()).onResourceReady(eq(other), isADataSource());
-  }
-
-  @Test
-  public void testActiveResourcesIsNotCheckedIfNotMemoryCacheable() {
-    harness.activeResources
-        .put(harness.cacheKey, new WeakReference<EngineResource<?>>(harness.resource));
-
-    harness.isMemoryCacheable = false;
-    harness.doLoad();
-
-    verify(harness.resource, never()).acquire();
-    verify(harness.job).start(any(DecodeJob.class));
-  }
-
-  @Test
-  public void testCacheIsCheckedIfMemoryCacheable() {
-    when(harness.cache.remove(eq(harness.cacheKey))).thenReturn(harness.resource);
-
-    harness.doLoad();
-
-    verify(harness.cb).onResourceReady(eq(harness.resource), eq(DataSource.MEMORY_CACHE));
-  }
-
-  @Test
-  public void testCacheIsNotCheckedIfNotMemoryCacheable() {
-    when(harness.cache.remove(eq(harness.cacheKey))).thenReturn(harness.resource);
-
-    harness.isMemoryCacheable = false;
-    harness.doLoad();
-
-    verify(harness.job).start(any(DecodeJob.class));
-  }
-
-  @Test
-  public void testResourceIsReturnedFromCacheIfPresent() {
-    when(harness.cache.remove(eq(harness.cacheKey))).thenReturn(harness.resource);
-
-    harness.doLoad();
-
-    verify(harness.cb).onResourceReady(eq(harness.resource), eq(DataSource.MEMORY_CACHE));
-  }
-
-  @Test
-  public void testHandlesNonEngineResourcesFromCacheIfPresent() {
-    final Object expected = new Object();
-    @SuppressWarnings("rawtypes") Resource fromCache = mockResource();
-    when(fromCache.get()).thenReturn(expected);
-    when(harness.cache.remove(eq(harness.cacheKey))).thenReturn(fromCache);
-
-    doAnswer(new Answer<Void>() {
-      @Override
-      public Void answer(InvocationOnMock invocationOnMock) throws Throwable {
-        Resource<?> resource = (Resource<?>) invocationOnMock.getArguments()[0];
-        assertEquals(expected, resource.get());
-        return null;
-      }
-    }).when(harness.cb).onResourceReady(anyResource(), isADataSource());
-
-    harness.doLoad();
-
-    verify(harness.cb).onResourceReady(anyResource(), isADataSource());
-  }
-
-  @Test
-  public void testResourceIsAddedToActiveResourceIfReturnedFromCache() {
-    when(harness.cache.remove(eq(harness.cacheKey))).thenReturn(harness.resource);
-
-    harness.doLoad();
-
-    assertEquals(harness.resource, harness.activeResources.get(harness.cacheKey).get());
-  }
-
-  @Test
-  public void testResourceIsAcquiredIfReturnedFromCache() {
-    when(harness.cache.remove(eq(harness.cacheKey))).thenReturn(harness.resource);
-
-    harness.doLoad();
-
-    verify(harness.resource).acquire();
-  }
-
-  @Test
-  public void testNewLoadIsNotStartedIfResourceIsCached() {
-    when(harness.cache.remove(eq(harness.cacheKey))).thenReturn(mock(EngineResource.class));
-
-    harness.doLoad();
-
-    verify(harness.job, never()).start(any(DecodeJob.class));
-  }
-
-  @Test
-  public void testNullLoadStatusIsReturnedForCachedResource() {
-    when(harness.cache.remove(eq(harness.cacheKey))).thenReturn(mock(EngineResource.class));
-
-    Engine.LoadStatus loadStatus = harness.doLoad();
-    assertNull(loadStatus);
-  }
-
-  @Test
-  public void testRunnerIsRemovedFromRunnersOnEngineNotifiedJobComplete() {
-    harness.doLoad();
-
-    harness.engine.onEngineJobComplete(harness.cacheKey, harness.resource);
-
-    assertThat(harness.jobs).doesNotContainKey(harness.cacheKey);
-  }
-
-  @Test
-  public void testEngineIsSetAsResourceListenerOnJobComplete() {
-    harness.doLoad();
-
-    harness.engine.onEngineJobComplete(harness.cacheKey, harness.resource);
-
-    verify(harness.resource).setResourceListener(eq(harness.cacheKey), eq(harness.engine));
-  }
-
-  @Test
-  public void testEngineIsNotSetAsResourceListenerIfResourceIsNullOnJobComplete() {
-    harness.doLoad();
-
-    harness.engine.onEngineJobComplete(harness.cacheKey, null);
-  }
-
-  @Test
-  public void testResourceIsAddedToActiveResourcesOnEngineComplete() {
-    when(harness.resource.isCacheable()).thenReturn(true);
-    harness.engine.onEngineJobComplete(harness.cacheKey, harness.resource);
-
-    WeakReference<EngineResource<?>> resourceRef = harness.activeResources.get(harness.cacheKey);
-    assertThat(harness.resource).isEqualTo(resourceRef.get());
-  }
-
-  @Test
-  public void testDoesNotPutNullResourceInActiveResourcesOnEngineComplete() {
-    harness.engine.onEngineJobComplete(harness.cacheKey, null);
-    assertThat(harness.activeResources).doesNotContainKey(harness.cacheKey);
-  }
-
-  @Test
-  public void testDoesNotPutResourceThatIsNotCacheableInActiveResourcesOnEngineComplete() {
-    when(harness.resource.isCacheable()).thenReturn(false);
-    harness.engine.onEngineJobComplete(harness.cacheKey, harness.resource);
-    assertThat(harness.activeResources).doesNotContainKey(harness.cacheKey);
-  }
-
-  @Test
-  public void testRunnerIsRemovedFromRunnersOnEngineNotifiedJobCancel() {
-    harness.doLoad();
-
-    harness.engine.onEngineJobCancelled(harness.job, harness.cacheKey);
-
-    assertThat(harness.jobs).doesNotContainKey(harness.cacheKey);
-  }
-
-  @Test
-  public void testJobIsNotRemovedFromJobsIfOldJobIsCancelled() {
-    harness.doLoad();
-
-    harness.engine.onEngineJobCancelled(mock(EngineJob.class), harness.cacheKey);
-
-    assertEquals(harness.job, harness.jobs.get(harness.cacheKey));
-  }
-
-  @Test
-  public void testResourceIsAddedToCacheOnReleased() {
-    final Object expected = new Object();
-    when(harness.resource.isCacheable()).thenReturn(true);
-    when(harness.resource.get()).thenReturn(expected);
-    doAnswer(new Answer<Void>() {
-      @Override
-      public Void answer(InvocationOnMock invocationOnMock) throws Throwable {
-        Resource<?> resource = (Resource<?>) invocationOnMock.getArguments()[1];
-        assertEquals(expected, resource.get());
-        return null;
-      }
-    }).when(harness.cache).put(eq(harness.cacheKey), anyResource());
-
-    harness.engine.onResourceReleased(harness.cacheKey, harness.resource);
-
-    verify(harness.cache).put(eq(harness.cacheKey), anyResource());
-  }
-
-  @Test
-  public void testResourceIsNotAddedToCacheOnReleasedIfNotCacheable() {
-    when(harness.resource.isCacheable()).thenReturn(false);
-    harness.engine.onResourceReleased(harness.cacheKey, harness.resource);
-
-    verify(harness.cache, never()).put(eq(harness.cacheKey), eq(harness.resource));
-  }
-
-  @Test
-  public void testResourceIsRecycledIfNotCacheableWhenReleased() {
-    when(harness.resource.isCacheable()).thenReturn(false);
-    harness.engine.onResourceReleased(harness.cacheKey, harness.resource);
-    verify(harness.resourceRecycler).recycle(eq(harness.resource));
-  }
-
-  @Test
-  public void testResourceIsRemovedFromActiveResourcesWhenReleased() {
-    harness.activeResources
-        .put(harness.cacheKey, new WeakReference<EngineResource<?>>(harness.resource));
-
-    harness.engine.onResourceReleased(harness.cacheKey, harness.resource);
-
-    assertThat(harness.activeResources).doesNotContainKey(harness.cacheKey);
-  }
-
-  @Test
-  public void testEngineAddedAsListenerToMemoryCache() {
-    verify(harness.cache).setResourceRemovedListener(eq(harness.engine));
-  }
-
-  @Test
-  public void testResourceIsRecycledWhenRemovedFromCache() {
-    harness.engine.onResourceRemoved(harness.resource);
-    verify(harness.resourceRecycler).recycle(eq(harness.resource));
-  }
-
-  @Test
-  public void testJobIsPutInJobWithCacheKeyWithRelevantIds() {
-    harness.doLoad();
-
-    assertThat(harness.jobs).containsEntry(harness.cacheKey, harness.job);
-  }
-
-  @Test
-  public void testKeyFactoryIsGivenNecessaryArguments() {
-    harness.doLoad();
-
-    verify(harness.keyFactory)
-        .buildKey(eq(harness.model), eq(harness.signature), eq(harness.width), eq(harness.height),
-            eq(harness.transformations), eq(Object.class), eq(Object.class), eq(harness.options));
-  }
-
-  @Test
-  public void testFactoryIsGivenNecessaryArguments() {
-    harness.doLoad();
-
-    verify(harness.engineJobFactory).build(
-        eq(harness.cacheKey),
-        eq(true) /*isMemoryCacheable*/,
-        eq(false) /*useUnlimitedSourceGeneratorPool*/);
-  }
-
-  @Test
-  public void testFactoryIsGivenNecessaryArgumentsWithUnlimitedPool() {
-    harness.useUnlimitedSourceGeneratorPool = true;
-    harness.doLoad();
-
-    verify(harness.engineJobFactory).build(
-        eq(harness.cacheKey),
-        eq(true) /*isMemoryCacheable*/,
-        eq(true) /*useUnlimitedSourceGeneratorPool*/);
-  }
-
-  @Test
-  public void testReleaseReleasesEngineResource() {
-    EngineResource<Object> engineResource = mock(EngineResource.class);
-    harness.engine.release(engineResource);
-    verify(engineResource).release();
-  }
-
-  @Test(expected = IllegalArgumentException.class)
-  public void testThrowsIfAskedToReleaseNonEngineResource() {
-    harness.engine.release(mockResource());
-  }
-
-  @Test(expected = RuntimeException.class)
-  public void testThrowsIfLoadCalledOnBackgroundThread() throws InterruptedException {
-    BackgroundUtil.testInBackground(new BackgroundUtil.BackgroundTester() {
-      @Override
-      public void runTest() throws Exception {
-        harness.doLoad();
-      }
-    });
-  }
-
-  private static class EngineTestHarness {
-    EngineKey cacheKey = mock(EngineKey.class);
-    EngineKeyFactory keyFactory = mock(EngineKeyFactory.class);
-    ResourceCallback cb = mock(ResourceCallback.class);
-    @SuppressWarnings("rawtypes")
-    EngineResource resource = mock(EngineResource.class);
-    Map<Key, EngineJob<?>> jobs = new HashMap<>();
-    Map<Key, WeakReference<EngineResource<?>>> activeResources = new HashMap<>();
-
-    int width = 100;
-    int height = 100;
-
-    Object model = new Object();
-    MemoryCache cache = mock(MemoryCache.class);
-    EngineJob<?> job;
-    Engine engine;
-    Engine.EngineJobFactory engineJobFactory = mock(Engine.EngineJobFactory.class);
-    Engine.DecodeJobFactory decodeJobFactory = mock(Engine.DecodeJobFactory.class);
-    ResourceRecycler resourceRecycler = mock(ResourceRecycler.class);
-    Key signature = mock(Key.class);
-    Map<Class<?>, Transformation<?>> transformations = new HashMap<>();
-    Options options = new Options();
-    GlideContext glideContext = mock(GlideContext.class);
-    boolean isMemoryCacheable = true;
-    boolean useUnlimitedSourceGeneratorPool = false;
-
-    public EngineTestHarness() {
-      when(keyFactory.buildKey(eq(model), eq(signature), anyInt(), anyInt(), eq(transformations),
-          eq(Object.class), eq(Object.class), eq(options))).thenReturn(cacheKey);
-
-      job = mock(EngineJob.class);
-
-      engine = new Engine(cache, mock(DiskCache.Factory.class),
-          GlideExecutor.newDiskCacheExecutor(),
-          MockGlideExecutor.newMainThreadExecutor(),
-          MockGlideExecutor.newMainThreadUnlimitedExecutor(),
-          jobs, keyFactory, activeResources,
-          engineJobFactory, decodeJobFactory, resourceRecycler);
-    }
-
-    public Engine.LoadStatus doLoad() {
-      when(engineJobFactory.build(eq(cacheKey), anyBoolean(), anyBoolean()))
-          .thenReturn((EngineJob<Object>) job);
-      return engine.load(glideContext,
-          model,
-          signature,
-          width,
-          height,
-          Object.class /*resourceClass*/,
-          Object.class /*transcodeClass*/,
-          Priority.HIGH,
-          DiskCacheStrategy.ALL,
-          transformations,
-          false /*isTransformationRequired*/,
-          options,
-          isMemoryCacheable,
-          useUnlimitedSourceGeneratorPool,
-          cb);
-    }
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/engine/ResourceCacheKeyTest.java b/library/src/test/java/com/bumptech/glide/load/engine/ResourceCacheKeyTest.java
deleted file mode 100644
index b2d467fac..000000000
--- a/library/src/test/java/com/bumptech/glide/load/engine/ResourceCacheKeyTest.java
+++ /dev/null
@@ -1,135 +0,0 @@
-package com.bumptech.glide.load.engine;
-
-import static org.mockito.Matchers.any;
-import static org.mockito.Mockito.doAnswer;
-import static org.mockito.Mockito.mock;
-
-import com.bumptech.glide.load.Key;
-import com.bumptech.glide.load.Options;
-import com.bumptech.glide.load.Transformation;
-import com.bumptech.glide.signature.ObjectKey;
-import com.bumptech.glide.tests.KeyAssertions;
-import com.bumptech.glide.tests.Util;
-import java.io.UnsupportedEncodingException;
-import java.security.MessageDigest;
-import java.security.NoSuchAlgorithmException;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.junit.runners.JUnit4;
-
-@RunWith(JUnit4.class)
-public class ResourceCacheKeyTest {
-
-  private Factory factory;
-
-  @Before
-  public void setUp() {
-    factory = new Factory();
-  }
-
-  @Test
-  public void testIdenticalWithSameArguments()
-      throws UnsupportedEncodingException, NoSuchAlgorithmException {
-    KeyAssertions.assertSame(factory.build(), factory.build());
-  }
-
-  @Test
-  public void testDifferIfSourceKeyDiffers()
-      throws UnsupportedEncodingException, NoSuchAlgorithmException {
-    mutateAndAssertDifferent(new FactoryMutation() {
-      @Override
-      public void mutate(Factory factory) {
-        factory.sourceKey = new ObjectKey("secondKey");
-      }
-    });
-  }
-
-  @Test
-  public void testDiffersIfSignatureDiffers() {
-    mutateAndAssertDifferent(new FactoryMutation() {
-      @Override
-      public void mutate(Factory factory) {
-        factory.signature = new ObjectKey("secondSignature");
-      }
-    });
-  }
-
-  @Test
-  public void testDiffersIfWidthDiffers() {
-    mutateAndAssertDifferent(new FactoryMutation() {
-      @Override
-      public void mutate(Factory factory) {
-        factory.width = factory.width * 2;
-      }
-    });
-  }
-
-  @Test
-  public void testDiffersIfHeightDiffers() {
-    mutateAndAssertDifferent(new FactoryMutation() {
-      @Override
-      public void mutate(Factory factory) {
-        factory.height = factory.height * 2;
-      }
-    });
-  }
-
-  @Test
-  public void tesDiffersIfTransformationDiffers() {
-    mutateAndAssertDifferent(new FactoryMutation() {
-      @Override
-      public void mutate(Factory factory) {
-        factory.transformation = mock(Transformation.class);
-        doAnswer(new Util.WriteDigest("otherTransformation")).when(factory.transformation)
-            .updateDiskCacheKey(any(MessageDigest.class));
-      }
-    });
-  }
-
-  @Test
-  public void testDiffersIfResourceDiffers() {
-    mutateAndAssertDifferent(new FactoryMutation() {
-      @Override
-      public void mutate(Factory factory) {
-        factory.resourceClass = Integer.class;
-      }
-    });
-  }
-
-  interface FactoryMutation {
-    void mutate(Factory factory);
-  }
-
-  private void mutateAndAssertDifferent(FactoryMutation mutation) {
-    ResourceCacheKey original = factory.build();
-    mutation.mutate(factory);
-    ResourceCacheKey mutated = factory.build();
-
-    try {
-      KeyAssertions.assertDifferent(original, mutated);
-    } catch (NoSuchAlgorithmException e) {
-      throw new RuntimeException(e);
-    }
-  }
-
-  static class Factory {
-    Key sourceKey = new ObjectKey("sourceKey");
-    Key signature = new ObjectKey("signature");
-    int width = 100;
-    int height = 100;
-    Transformation<?> transformation = mock(Transformation.class);
-    Class<?> resourceClass = Object.class;
-    Options options = new Options();
-
-    Factory() {
-      doAnswer(new Util.WriteDigest("transformation")).when(transformation)
-          .updateDiskCacheKey(any(MessageDigest.class));
-    }
-
-    ResourceCacheKey build() {
-      return new ResourceCacheKey(sourceKey, signature, width, height, transformation,
-          resourceClass, options);
-    }
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/engine/ResourceRecyclerTest.java b/library/src/test/java/com/bumptech/glide/load/engine/ResourceRecyclerTest.java
deleted file mode 100644
index 80405ffc9..000000000
--- a/library/src/test/java/com/bumptech/glide/load/engine/ResourceRecyclerTest.java
+++ /dev/null
@@ -1,60 +0,0 @@
-package com.bumptech.glide.load.engine;
-
-import static com.bumptech.glide.tests.Util.mockResource;
-import static org.mockito.Mockito.doAnswer;
-import static org.mockito.Mockito.never;
-import static org.mockito.Mockito.verify;
-
-import android.os.Looper;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.mockito.invocation.InvocationOnMock;
-import org.mockito.stubbing.Answer;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.Shadows;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class ResourceRecyclerTest {
-
-  private ResourceRecycler recycler;
-
-  @Before
-  public void setUp() {
-    recycler = new ResourceRecycler();
-  }
-
-  @Test
-  public void testRecyclesResourceSynchronouslyIfNotAlreadyRecyclingResource() {
-    Resource<?> resource = mockResource();
-    Shadows.shadowOf(Looper.getMainLooper()).pause();
-    recycler.recycle(resource);
-    verify(resource).recycle();
-  }
-
-  @Test
-  public void testDoesNotRecycleChildResourceSynchronously() {
-    Resource<?> parent = mockResource();
-    final Resource<?> child = mockResource();
-    doAnswer(new Answer<Void>() {
-      @Override
-      public Void answer(InvocationOnMock invocationOnMock) throws Throwable {
-        recycler.recycle(child);
-        return null;
-      }
-    }).when(parent).recycle();
-
-    Shadows.shadowOf(Looper.getMainLooper()).pause();
-
-    recycler.recycle(parent);
-
-    verify(parent).recycle();
-    verify(child, never()).recycle();
-
-    Shadows.shadowOf(Looper.getMainLooper()).runOneTask();
-
-    verify(child).recycle();
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/engine/bitmap_recycle/AttributeStrategyKeyTest.java b/library/src/test/java/com/bumptech/glide/load/engine/bitmap_recycle/AttributeStrategyKeyTest.java
deleted file mode 100644
index 5ee47b04b..000000000
--- a/library/src/test/java/com/bumptech/glide/load/engine/bitmap_recycle/AttributeStrategyKeyTest.java
+++ /dev/null
@@ -1,71 +0,0 @@
-package com.bumptech.glide.load.engine.bitmap_recycle;
-
-import static org.junit.Assert.assertEquals;
-import static org.junit.Assert.assertNotEquals;
-import static org.mockito.Matchers.eq;
-import static org.mockito.Mockito.mock;
-import static org.mockito.Mockito.verify;
-
-import android.graphics.Bitmap;
-import com.bumptech.glide.load.engine.bitmap_recycle.AttributeStrategy.Key;
-import com.google.common.testing.EqualsTester;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class AttributeStrategyKeyTest {
-
-  private AttributeStrategy.KeyPool keyPool;
-
-  @Before
-  public void setUp() {
-    keyPool = mock(AttributeStrategy.KeyPool.class);
-  }
-
-  @Test
-  public void testEquality() {
-    Key first = new Key(keyPool);
-    first.init(100, 100, Bitmap.Config.ARGB_4444);
-    Key second = new Key(keyPool);
-    second.init(100, 100, Bitmap.Config.ARGB_4444);
-
-    Key third = new Key(keyPool);
-    third.init(200, 100, Bitmap.Config.ARGB_4444);
-
-    Key fourth = new Key(keyPool);
-    fourth.init(100, 200, Bitmap.Config.ARGB_4444);
-
-    Key fifth = new Key(keyPool);
-    fifth.init(100, 100, Bitmap.Config.RGB_565);
-
-    new EqualsTester().addEqualityGroup(first, second).addEqualityGroup(third)
-        .addEqualityGroup(fourth).addEqualityGroup(fifth).testEquals();
-  }
-
-  @Test
-  public void testReturnsSelfToPoolOnOffer() {
-    Key key = new Key(keyPool);
-    key.offer();
-
-    verify(keyPool).offer(eq(key));
-  }
-
-  @Test
-  public void testInitSetsAttributes() {
-    Key key = new Key(keyPool);
-    key.init(100, 100, Bitmap.Config.ARGB_4444);
-
-    Key other = new Key(keyPool);
-    other.init(200, 200, Bitmap.Config.RGB_565);
-
-    assertNotEquals(key, other);
-
-    key.init(200, 200, Bitmap.Config.RGB_565);
-
-    assertEquals(key, other);
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/engine/bitmap_recycle/AttributeStrategyTest.java b/library/src/test/java/com/bumptech/glide/load/engine/bitmap_recycle/AttributeStrategyTest.java
deleted file mode 100644
index 234b0f0e3..000000000
--- a/library/src/test/java/com/bumptech/glide/load/engine/bitmap_recycle/AttributeStrategyTest.java
+++ /dev/null
@@ -1,107 +0,0 @@
-package com.bumptech.glide.load.engine.bitmap_recycle;
-
-import static org.junit.Assert.assertEquals;
-import static org.junit.Assert.assertNull;
-
-import android.graphics.Bitmap;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.annotation.Config;
-import org.robolectric.shadows.ShadowBitmap;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class AttributeStrategyTest {
-
-  private AttributeStrategy strategy;
-
-  @Before
-  public void setUp() throws Exception {
-    strategy = new AttributeStrategy();
-  }
-
-  @Test
-  public void testIGetNullIfNoMatchingBitmapExists() {
-    assertNull(strategy.get(100, 100, Bitmap.Config.ARGB_8888));
-  }
-
-  @Test
-  public void testICanAddAndGetABitmapOfTheSameSizeAndDimensions() {
-    Bitmap bitmap = ShadowBitmap.createBitmap(100, 100, Bitmap.Config.ARGB_8888);
-    strategy.put(bitmap);
-    assertEquals(bitmap,
-        strategy.get(bitmap.getWidth(), bitmap.getHeight(), Bitmap.Config.ARGB_8888));
-  }
-
-  @Test
-  public void testICantGetABitmapOfTheSameDimensionsButDifferentConfigs() {
-    Bitmap bitmap = ShadowBitmap.createBitmap(100, 100, Bitmap.Config.ARGB_8888);
-    strategy.put(bitmap);
-    assertNull(strategy.get(100, 100, Bitmap.Config.RGB_565));
-  }
-
-  @Test
-  public void testICantGetABitmapOfTheSameDimensionsAndSizeButDifferentConfigs() {
-    Bitmap bitmap = ShadowBitmap.createBitmap(100, 100, Bitmap.Config.ARGB_4444);
-    strategy.put(bitmap);
-    assertNull(strategy.get(100, 100, Bitmap.Config.RGB_565));
-  }
-
-  @Test
-  public void testICantGetABitmapOfDifferentWidths() {
-    Bitmap bitmap = ShadowBitmap.createBitmap(100, 100, Bitmap.Config.ARGB_8888);
-    strategy.put(bitmap);
-    assertNull(strategy.get(99, 100, Bitmap.Config.ARGB_8888));
-  }
-
-  @Test
-  public void testICantGetABitmapOfDifferentHeights() {
-    Bitmap bitmap = ShadowBitmap.createBitmap(100, 100, Bitmap.Config.ARGB_8888);
-    strategy.put(bitmap);
-    assertNull(strategy.get(100, 99, Bitmap.Config.ARGB_8888));
-  }
-
-  @Test
-  public void testICantGetABitmapOfDifferentDimensionsButTheSameSize() {
-    Bitmap bitmap = ShadowBitmap.createBitmap(100, 100, Bitmap.Config.ARGB_8888);
-    strategy.put(bitmap);
-    assertNull(strategy.get(50, 200, Bitmap.Config.ARGB_8888));
-  }
-
-  @Test
-  public void testMultipleBitmapsOfDifferentAttributesCanBeAddedAtOnce() {
-    Bitmap first = ShadowBitmap.createBitmap(100, 100, Bitmap.Config.RGB_565);
-    Bitmap second = ShadowBitmap.createBitmap(100, 100, Bitmap.Config.ARGB_8888);
-    Bitmap third = ShadowBitmap.createBitmap(120, 120, Bitmap.Config.RGB_565);
-
-    strategy.put(first);
-    strategy.put(second);
-    strategy.put(third);
-
-    assertEquals(first, strategy.get(100, 100, Bitmap.Config.RGB_565));
-    assertEquals(second, strategy.get(100, 100, Bitmap.Config.ARGB_8888));
-    assertEquals(third, strategy.get(120, 120, Bitmap.Config.RGB_565));
-  }
-
-  @Test
-  public void testLeastRecentlyUsedAttributeSetIsRemovedFirst() {
-    final Bitmap leastRecentlyUsed = ShadowBitmap.createBitmap(100, 100, Bitmap.Config.ALPHA_8);
-    final Bitmap other = ShadowBitmap.createBitmap(1000, 1000, Bitmap.Config.RGB_565);
-    final Bitmap mostRecentlyUsed = ShadowBitmap.createBitmap(100, 100, Bitmap.Config.ARGB_8888);
-
-    strategy.get(100, 100, Bitmap.Config.ALPHA_8);
-    strategy.get(1000, 1000, Bitmap.Config.RGB_565);
-    strategy.get(100, 100, Bitmap.Config.ARGB_8888);
-
-    strategy.put(other);
-    strategy.put(leastRecentlyUsed);
-    strategy.put(mostRecentlyUsed);
-
-    Bitmap removed = strategy.removeLast();
-    assertEquals(
-        "Expected=" + strategy.logBitmap(leastRecentlyUsed) + " got=" + strategy.logBitmap(removed),
-        leastRecentlyUsed, removed);
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/engine/bitmap_recycle/GroupedLinkedMapTest.java b/library/src/test/java/com/bumptech/glide/load/engine/bitmap_recycle/GroupedLinkedMapTest.java
deleted file mode 100644
index ab9604ddc..000000000
--- a/library/src/test/java/com/bumptech/glide/load/engine/bitmap_recycle/GroupedLinkedMapTest.java
+++ /dev/null
@@ -1,121 +0,0 @@
-package com.bumptech.glide.load.engine.bitmap_recycle;
-
-import static com.google.common.truth.Truth.assertThat;
-import static org.junit.Assert.assertNull;
-import static org.mockito.Mockito.mock;
-
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class GroupedLinkedMapTest {
-
-    private GroupedLinkedMap<Key, Object> map;
-
-    @Before
-    public void setUp() {
-        map = new GroupedLinkedMap<Key, Object>();
-    }
-
-    @Test
-    public void testReturnsNullForGetWithNoBitmap() {
-        assertNull(map.get(mock(Key.class)));
-    }
-
-    @Test
-    public void testCanAddAndRemoveABitmap() {
-        Key key = new Key("key", 1, 1);
-        Object expected = new Object();
-
-        map.put(key, expected);
-
-        assertThat(map.get(key)).isEqualTo(expected);
-    }
-
-    @Test
-    public void testCanAddAndRemoveMoreThanOneBitmapForAGivenKey() {
-        Key key = new Key("key", 1, 1);
-        Integer value = 20;
-
-        int numToAdd = 10;
-
-        for (int i = 0; i < numToAdd; i++) {
-            map.put(key, new Integer(value));
-        }
-
-        for (int i = 0; i < numToAdd; i++) {
-            assertThat(map.get(key)).isEqualTo(value);
-        }
-    }
-
-    @Test
-    public void testLeastRecentlyRetrievedKeyIsLeastRecentlyUsed() {
-        Key firstKey = new Key("key", 1, 1);
-        Integer firstValue = 10;
-        map.put(firstKey, firstValue);
-        map.put(firstKey, new Integer(firstValue));
-
-        Key secondKey = new Key("key", 2, 2);
-        Integer secondValue = 20;
-        map.put(secondKey, secondValue);
-
-        map.get(firstKey);
-
-        assertThat(map.removeLast()).isEqualTo(secondValue);
-    }
-
-    @Test
-    public void testAddingAnEntryDoesNotMakeItMostRecentlyUsed() {
-        Key firstKey = new Key("key", 1, 1);
-        Integer firstValue = 10;
-
-        map.put(firstKey, firstValue);
-        map.put(firstKey, new Integer(firstValue));
-
-        map.get(firstKey);
-
-        Integer secondValue = 20;
-        map.put(new Key("key", 2, 2), secondValue);
-
-        assertThat(map.removeLast()).isEqualTo(secondValue);
-    }
-
-    private static class Key implements Poolable {
-
-        private final String key;
-        private final int width;
-        private final int height;
-
-        public Key(String key, int width, int height) {
-            this.key = key;
-            this.width = width;
-            this.height = height;
-        }
-
-        @Override
-        public boolean equals(Object o) {
-            if (o instanceof Key) {
-                Key other = (Key) o;
-                return key.equals(other.key) && width == other.width && height == other.height;
-            }
-            return false;
-        }
-
-        @Override
-        public int hashCode() {
-            int result = key != null ? key.hashCode() : 0;
-            result = 31 * result + width;
-            result = 31 * result + height;
-            return result;
-        }
-
-        @Override
-        public void offer() {
-            // Do nothing.
-        }
-    }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/engine/bitmap_recycle/LruArrayPoolTest.java b/library/src/test/java/com/bumptech/glide/load/engine/bitmap_recycle/LruArrayPoolTest.java
deleted file mode 100644
index 4f6016cf3..000000000
--- a/library/src/test/java/com/bumptech/glide/load/engine/bitmap_recycle/LruArrayPoolTest.java
+++ /dev/null
@@ -1,114 +0,0 @@
-package com.bumptech.glide.load.engine.bitmap_recycle;
-
-import static android.content.ComponentCallbacks2.TRIM_MEMORY_BACKGROUND;
-import static android.content.ComponentCallbacks2.TRIM_MEMORY_COMPLETE;
-import static android.content.ComponentCallbacks2.TRIM_MEMORY_UI_HIDDEN;
-import static org.junit.Assert.assertEquals;
-import static org.junit.Assert.assertNotNull;
-import static org.junit.Assert.assertTrue;
-
-import android.annotation.TargetApi;
-import android.os.Build;
-import java.util.Arrays;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-@TargetApi(Build.VERSION_CODES.ICE_CREAM_SANDWICH)
-public class LruArrayPoolTest {
-  private static final int MAX_SIZE = 10;
-  private static final Class<byte[]> ARRAY_CLASS = byte[].class;
-  private static final ArrayAdapterInterface<byte[]> ADAPTER = new ByteArrayAdapter();
-  private LruArrayPool pool;
-
-  @Before
-  public void setUp() throws Exception {
-    pool = new LruArrayPool(MAX_SIZE);
-  }
-
-  @Test
-  public void testNewPoolIsEmpty() {
-    assertEquals(pool.getCurrentSize(), 0);
-  }
-
-  @Test
-  public void testICanAddAndGetValidArray() {
-    int size = 758;
-    int value = 564;
-    fillPool(pool, size - 1, value);
-    pool.put(createArray(ARRAY_CLASS, size, value), ARRAY_CLASS);
-    Object array = pool.get(size, ARRAY_CLASS);
-    assertNotNull(array);
-    assertTrue(array.getClass() == ARRAY_CLASS);
-    assertTrue(ADAPTER.getArrayLength((byte[]) array) >= size);
-    assertTrue(((byte[]) array)[0] == (byte) 0);
-  }
-
-  @Test
-  public void testItIsSizeLimited() {
-    fillPool(pool, MAX_SIZE / ADAPTER.getElementSizeInBytes() + 1, 1);
-    assertTrue(pool.getCurrentSize() <= MAX_SIZE);
-  }
-
-  @Test
-  public void testArrayLargerThanPoolIsNotAdded() {
-    pool = new LruArrayPool(MAX_SIZE);
-    pool.put(createArray(ARRAY_CLASS, MAX_SIZE / ADAPTER.getElementSizeInBytes() + 1, 0),
-        ARRAY_CLASS);
-    assertEquals(0, pool.getCurrentSize());
-  }
-
-  @Test
-  public void testClearMemoryRemovesAllArrays() {
-    fillPool(pool, MAX_SIZE / ADAPTER.getElementSizeInBytes() + 1, 0);
-    pool.clearMemory();
-    assertEquals(0, pool.getCurrentSize());
-  }
-
-  @Test
-  public void testTrimMemoryUiHiddenOrLessRemovesHalfOfArrays() {
-    testTrimMemory(MAX_SIZE, TRIM_MEMORY_UI_HIDDEN, MAX_SIZE / 2);
-  }
-
-  @Test
-  public void testTrimMemoryUiHiddenOrLessRemovesNoArraysIfPoolLessThanHalfFull() {
-    testTrimMemory(MAX_SIZE / 2, TRIM_MEMORY_UI_HIDDEN, MAX_SIZE / 2);
-  }
-
-  @Test
-  public void testTrimMemoryBackgroundOrGreaterRemovesAllArrays() {
-    for (int trimLevel : new int[] {TRIM_MEMORY_BACKGROUND, TRIM_MEMORY_COMPLETE}) {
-      testTrimMemory(MAX_SIZE, trimLevel, 0);
-    }
-  }
-
-  private void testTrimMemory(int fillSize, int trimLevel, int expectedSize) {
-    pool = new LruArrayPool(MAX_SIZE);
-    fillPool(pool, fillSize / ADAPTER.getElementSizeInBytes(), 1);
-    pool.trimMemory(trimLevel);
-    assertEquals("Failed level=" + trimLevel, expectedSize, pool.getCurrentSize());
-  }
-
-  private void fillPool(LruArrayPool pool, int arrayCount, int arrayLength) {
-    for (int i = 0; i < arrayCount; i++) {
-      pool.put(createArray(ARRAY_CLASS, arrayLength, 10), ARRAY_CLASS);
-    }
-  }
-
-  @SuppressWarnings("unchecked")
-  private static <T> T createArray(Class<T> type, int size, int value) {
-    Object array = null;
-    if (type.equals(int[].class)) {
-      array = new int[size];
-      Arrays.fill((int[]) array, value);
-    } else if (type.equals(byte[].class)) {
-      array = new byte[size];
-      Arrays.fill((byte[]) array, (byte) value);
-    }
-    return (T) array;
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/engine/bitmap_recycle/LruBitmapPoolTest.java b/library/src/test/java/com/bumptech/glide/load/engine/bitmap_recycle/LruBitmapPoolTest.java
deleted file mode 100644
index 2b515c771..000000000
--- a/library/src/test/java/com/bumptech/glide/load/engine/bitmap_recycle/LruBitmapPoolTest.java
+++ /dev/null
@@ -1,269 +0,0 @@
-package com.bumptech.glide.load.engine.bitmap_recycle;
-
-import static android.content.ComponentCallbacks2.TRIM_MEMORY_BACKGROUND;
-import static android.content.ComponentCallbacks2.TRIM_MEMORY_COMPLETE;
-import static android.content.ComponentCallbacks2.TRIM_MEMORY_UI_HIDDEN;
-import static com.google.common.truth.Truth.assertThat;
-import static org.junit.Assert.assertEquals;
-import static org.junit.Assert.assertNotNull;
-import static org.junit.Assert.assertTrue;
-import static org.mockito.Matchers.anyInt;
-import static org.mockito.Matchers.eq;
-import static org.mockito.Mockito.mock;
-import static org.mockito.Mockito.when;
-
-import android.graphics.Bitmap;
-import java.util.ArrayList;
-import java.util.Collections;
-import java.util.LinkedList;
-import java.util.List;
-import java.util.Set;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.Shadows;
-import org.robolectric.annotation.Config;
-import org.robolectric.shadows.ShadowBitmap;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class LruBitmapPoolTest {
-  private static final int MAX_SIZE = 10;
-  private static final Set<Bitmap.Config> ALLOWED_CONFIGS =
-      Collections.singleton(Bitmap.Config.ARGB_8888);
-  private MockStrategy strategy;
-  private LruBitmapPool pool;
-
-  @Before
-  public void setUp() throws Exception {
-    strategy = new MockStrategy();
-    pool = new LruBitmapPool(MAX_SIZE, strategy, ALLOWED_CONFIGS);
-  }
-
-  @Test
-  public void testICanAddAndGetABitmap() {
-    fillPool(pool, 1);
-    pool.put(createMutableBitmap());
-    assertNotNull(pool.get(100, 100, Bitmap.Config.ARGB_8888));
-  }
-
-  @Test
-  public void testImmutableBitmapsAreNotAdded() {
-    Bitmap bitmap = createMutableBitmap();
-    Shadows.shadowOf(bitmap).setMutable(false);
-    pool.put(bitmap);
-    assertThat(strategy.bitmaps).isEmpty();
-  }
-
-  @Test
-  public void testItIsSizeLimited() {
-    fillPool(pool, MAX_SIZE + 2);
-    assertEquals(2, strategy.numRemoves);
-  }
-
-  @Test
-  public void testBitmapLargerThanPoolIsNotAdded() {
-    strategy = new MockStrategy() {
-      @Override
-      public int getSize(Bitmap bitmap) {
-        return 4;
-      }
-    };
-    pool = new LruBitmapPool(3, strategy, ALLOWED_CONFIGS);
-    pool.put(createMutableBitmap());
-    assertEquals(0, strategy.numRemoves);
-    assertEquals(0, strategy.numPuts);
-  }
-
-  @Test
-  public void testClearMemoryRemovesAllBitmaps() {
-    fillPool(pool, MAX_SIZE);
-    pool.clearMemory();
-
-    assertEquals(MAX_SIZE, strategy.numRemoves);
-  }
-
-  @Test
-  public void testEvictedBitmapsAreRecycled() {
-    fillPool(pool, MAX_SIZE);
-    List<Bitmap> bitmaps = new ArrayList<>(MAX_SIZE);
-    for (Bitmap b : strategy.bitmaps) {
-      bitmaps.add(b);
-    }
-
-    pool.clearMemory();
-
-    for (Bitmap b : bitmaps) {
-      assertTrue(b.isRecycled());
-    }
-  }
-
-  @Test
-  public void testTrimMemoryUiHiddenOrLessRemovesHalfOfBitmaps() {
-    testTrimMemory(MAX_SIZE, TRIM_MEMORY_UI_HIDDEN, MAX_SIZE / 2);
-  }
-
-  @Test
-  public void testTrimMemoryUiHiddenOrLessRemovesNoBitmapsIfPoolLessThanHalfFull() {
-    testTrimMemory(MAX_SIZE / 2, TRIM_MEMORY_UI_HIDDEN, 0);
-  }
-
-  @Test
-  public void testTrimMemoryBackgroundOrGreaterRemovesAllBitmaps() {
-    for (int trimLevel : new int[] { TRIM_MEMORY_BACKGROUND, TRIM_MEMORY_COMPLETE }) {
-      testTrimMemory(MAX_SIZE, trimLevel, MAX_SIZE);
-    }
-  }
-
-  @Test
-  public void testPassesArgb888ToStrategyAsConfigForRequestsWithNullConfigsOnGet() {
-    LruPoolStrategy strategy = mock(LruPoolStrategy.class);
-    LruBitmapPool pool = new LruBitmapPool(100, strategy, ALLOWED_CONFIGS);
-
-    Bitmap expected = createMutableBitmap();
-    when(strategy.get(anyInt(), anyInt(), eq(Bitmap.Config.ARGB_8888))).thenReturn(expected);
-    Bitmap result = pool.get(100, 100, null);
-
-    assertEquals(expected, result);
-  }
-
-  @Test
-  public void testPassesArgb8888ToStrategyAsConfigForRequestsWithNullConfigsOnGetDirty() {
-    LruPoolStrategy strategy = mock(LruPoolStrategy.class);
-    LruBitmapPool pool = new LruBitmapPool(100, strategy, ALLOWED_CONFIGS);
-
-    Bitmap expected = createMutableBitmap();
-    when(strategy.get(anyInt(), anyInt(), eq(Bitmap.Config.ARGB_8888))).thenReturn(expected);
-    Bitmap result = pool.getDirty(100, 100, null);
-
-    assertEquals(expected, result);
-  }
-
-  private void testTrimMemory(int fillSize, int trimLevel, int expectedSize) {
-    MockStrategy strategy = new MockStrategy();
-    LruBitmapPool pool = new LruBitmapPool(MAX_SIZE, strategy, ALLOWED_CONFIGS);
-    fillPool(pool, fillSize);
-    pool.trimMemory(trimLevel);
-    assertEquals("Failed level=" + trimLevel, expectedSize, strategy.numRemoves);
-  }
-
-  @Test
-  public void testCanIncreaseSizeDynamically() {
-    int sizeMultiplier = 2;
-    pool.setSizeMultiplier(2);
-    fillPool(pool, MAX_SIZE * sizeMultiplier);
-
-    assertEquals(0, strategy.numRemoves);
-  }
-
-  @Test
-  public void testCanDecreaseSizeDynamically() {
-    fillPool(pool, MAX_SIZE);
-    assertEquals(0, strategy.numRemoves);
-
-    float sizeMultiplier = 0.5f;
-    pool.setSizeMultiplier(sizeMultiplier);
-
-    assertEquals(Math.round(MAX_SIZE * sizeMultiplier), strategy.numRemoves);
-  }
-
-  @Test
-  public void testCanResetSizeDynamically() {
-    int sizeMultiplier = 2;
-    pool.setSizeMultiplier(sizeMultiplier);
-    fillPool(pool, MAX_SIZE * sizeMultiplier);
-
-    pool.setSizeMultiplier(1);
-
-    assertEquals(Math.round(MAX_SIZE * sizeMultiplier) - MAX_SIZE, strategy.numRemoves);
-  }
-
-  @Test
-  public void testCanGetCurrentMaxSize() {
-    assertEquals(MAX_SIZE, pool.getMaxSize());
-  }
-
-  @Test
-  public void testMaxSizeChangesAfterSizeMultiplier() {
-    pool.setSizeMultiplier(2);
-    assertEquals(2 * MAX_SIZE, pool.getMaxSize());
-  }
-
-  @Test
-  public void testBitmapsWithDisallowedConfigsAreIgnored() {
-    pool = new LruBitmapPool(100, strategy, Collections.singleton(Bitmap.Config.ARGB_4444));
-
-    Bitmap bitmap = createMutableBitmap(Bitmap.Config.RGB_565);
-    pool.put(bitmap);
-
-    assertEquals(0, strategy.numPuts);
-  }
-
-  @Test
-  public void testBitmapsWithAllowedNullConfigsAreAllowed() {
-    pool = new LruBitmapPool(100, strategy, Collections.<Bitmap.Config>singleton(null));
-
-    Bitmap bitmap = createMutableBitmap();
-    Shadows.shadowOf(bitmap).setConfig(null);
-
-    pool.put(bitmap);
-
-    assertEquals(1, strategy.numPuts);
-  }
-
-  private void fillPool(LruBitmapPool pool, int fillCount) {
-    for (int i = 0; i < fillCount; i++) {
-      pool.put(createMutableBitmap());
-    }
-  }
-
-  private Bitmap createMutableBitmap() {
-    return createMutableBitmap(Bitmap.Config.ARGB_8888);
-  }
-
-  private Bitmap createMutableBitmap(Bitmap.Config config) {
-    Bitmap bitmap = ShadowBitmap.createBitmap(100, 100, config);
-    Shadows.shadowOf(bitmap).setMutable(true);
-    return bitmap;
-
-  }
-
-  private static class MockStrategy implements LruPoolStrategy {
-    private LinkedList<Bitmap> bitmaps = new LinkedList<>();
-    private int numRemoves;
-    private int numPuts;
-
-    @Override
-    public void put(Bitmap bitmap) {
-      numPuts++;
-      bitmaps.add(bitmap);
-    }
-
-    @Override
-    public Bitmap get(int width, int height, Bitmap.Config config) {
-      return bitmaps.removeLast();
-    }
-
-    @Override
-    public Bitmap removeLast() {
-      numRemoves++;
-      return bitmaps.removeLast();
-    }
-
-    @Override
-    public String logBitmap(Bitmap bitmap) {
-      return null;
-    }
-
-    @Override
-    public String logBitmap(int width, int height, Bitmap.Config config) {
-      return null;
-    }
-
-    @Override
-    public int getSize(Bitmap bitmap) {
-      return 1;
-    }
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/engine/bitmap_recycle/SizeConfigStrategyTest.java b/library/src/test/java/com/bumptech/glide/load/engine/bitmap_recycle/SizeConfigStrategyTest.java
deleted file mode 100644
index 2242dcf03..000000000
--- a/library/src/test/java/com/bumptech/glide/load/engine/bitmap_recycle/SizeConfigStrategyTest.java
+++ /dev/null
@@ -1,41 +0,0 @@
-package com.bumptech.glide.load.engine.bitmap_recycle;
-
-import android.graphics.Bitmap;
-import com.google.common.testing.EqualsTester;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.junit.runners.JUnit4;
-import org.mockito.Mock;
-import org.mockito.MockitoAnnotations;
-
-@RunWith(JUnit4.class)
-public class SizeConfigStrategyTest {
-
-    @Mock SizeConfigStrategy.KeyPool pool;
-
-    @Before
-    public void setUp() {
-        MockitoAnnotations.initMocks(this);
-    }
-
-    @Test
-    public void testKeyEquals() {
-        new EqualsTester()
-                .addEqualityGroup(
-                        new SizeConfigStrategy.Key(pool, 100, Bitmap.Config.ARGB_8888),
-                        new SizeConfigStrategy.Key(pool, 100, Bitmap.Config.ARGB_8888)
-                )
-                .addEqualityGroup(
-                        new SizeConfigStrategy.Key(pool, 101, Bitmap.Config.ARGB_8888)
-                )
-                .addEqualityGroup(
-                        new SizeConfigStrategy.Key(pool, 100, Bitmap.Config.RGB_565)
-                )
-                .addEqualityGroup(
-                        new SizeConfigStrategy.Key(pool, 100, null /*config*/)
-                )
-                .testEquals();
-
-    }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/engine/bitmap_recycle/SizeStrategyKeyTest.java b/library/src/test/java/com/bumptech/glide/load/engine/bitmap_recycle/SizeStrategyKeyTest.java
deleted file mode 100644
index 6175eb2bf..000000000
--- a/library/src/test/java/com/bumptech/glide/load/engine/bitmap_recycle/SizeStrategyKeyTest.java
+++ /dev/null
@@ -1,60 +0,0 @@
-package com.bumptech.glide.load.engine.bitmap_recycle;
-
-import static org.junit.Assert.assertEquals;
-import static org.junit.Assert.assertNotEquals;
-import static org.mockito.Matchers.eq;
-import static org.mockito.Mockito.mock;
-import static org.mockito.Mockito.verify;
-
-import com.bumptech.glide.load.engine.bitmap_recycle.SizeStrategy.Key;
-import com.google.common.testing.EqualsTester;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.junit.runners.JUnit4;
-
-@RunWith(JUnit4.class)
-public class SizeStrategyKeyTest {
-
-  private SizeStrategy.KeyPool keyPool;
-
-  @Before
-  public void setUp() {
-    keyPool = mock(SizeStrategy.KeyPool.class);
-  }
-
-  @Test
-  public void testEquality() {
-    Key first = new Key(keyPool);
-    first.init(100);
-    Key second = new Key(keyPool);
-    second.init(100);
-    Key third = new Key(keyPool);
-    third.init(50);
-
-    new EqualsTester().addEqualityGroup(first, second).addEqualityGroup(third).testEquals();
-  }
-
-  @Test
-  public void testReturnsSelfToPoolOnOffer() {
-    Key key = new Key(keyPool);
-    key.offer();
-
-    verify(keyPool).offer(eq(key));
-  }
-
-  @Test
-  public void testInitSetsSize() {
-    Key key = new Key(keyPool);
-    key.init(100);
-
-    Key other = new Key(keyPool);
-    other.init(200);
-
-    assertNotEquals(key, other);
-
-    key.init(200);
-
-    assertEquals(key, other);
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/engine/cache/DiskLruCacheWrapperTest.java b/library/src/test/java/com/bumptech/glide/load/engine/cache/DiskLruCacheWrapperTest.java
deleted file mode 100644
index 29b03a1ec..000000000
--- a/library/src/test/java/com/bumptech/glide/load/engine/cache/DiskLruCacheWrapperTest.java
+++ /dev/null
@@ -1,124 +0,0 @@
-package com.bumptech.glide.load.engine.cache;
-
-import static org.junit.Assert.assertArrayEquals;
-import static org.junit.Assert.assertNull;
-import static org.junit.Assert.fail;
-
-import com.bumptech.glide.load.Key;
-import com.bumptech.glide.tests.Util;
-import java.io.File;
-import java.io.IOException;
-import java.security.MessageDigest;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.RuntimeEnvironment;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class DiskLruCacheWrapperTest {
-  private DiskLruCacheWrapper cache;
-  private byte[] data;
-  private StringKey key;
-
-  @Before
-  public void setUp() {
-    File dir = RuntimeEnvironment.application.getCacheDir();
-    cache = new DiskLruCacheWrapper(dir, 10 * 1024 * 1024);
-    key = new StringKey("test" + Math.random());
-    data = new byte[] { 1, 2, 3, 4, 5, 6 };
-  }
-
-  @Test
-  public void testCanInsertAndGet() throws IOException {
-    cache.put(key, new DiskCache.Writer() {
-      @Override
-      public boolean write(File file) {
-        try {
-          Util.writeFile(file, data);
-        } catch (IOException e) {
-          fail(e.toString());
-        }
-        return true;
-      }
-    });
-
-    byte[] received = Util.readFile(cache.get(key), data.length);
-
-    assertArrayEquals(data, received);
-  }
-
-  @Test
-  public void testDoesNotCommitIfWriterReturnsFalse() {
-    cache.put(key, new DiskCache.Writer() {
-      @Override
-      public boolean write(File file) {
-        return false;
-      }
-    });
-
-    assertNull(cache.get(key));
-  }
-
-  @Test
-  public void testDoesNotCommitIfWriterWritesButReturnsFalse() {
-    cache.put(key, new DiskCache.Writer() {
-      @Override
-      public boolean write(File file) {
-        try {
-          Util.writeFile(file, data);
-        } catch (IOException e) {
-          fail(e.toString());
-        }
-        return false;
-      }
-    });
-
-    assertNull(cache.get(key));
-  }
-
-  @Test
-  public void testEditIsAbortedIfWriterThrows() throws IOException {
-    try {
-      cache.put(key, new DiskCache.Writer() {
-        @Override
-        public boolean write(File file) {
-          throw new RuntimeException("test");
-        }
-      });
-    } catch (RuntimeException e) {
-      // Expected.
-    }
-
-    cache.put(key, new DiskCache.Writer() {
-      @Override
-      public boolean write(File file) {
-        try {
-          Util.writeFile(file, data);
-        } catch (IOException e) {
-          fail(e.toString());
-        }
-        return true;
-      }
-    });
-
-    byte[] received = Util.readFile(cache.get(key), data.length);
-
-    assertArrayEquals(data, received);
-  }
-
-  private static class StringKey implements Key {
-    private final String key;
-
-    public StringKey(String key) {
-      this.key = key;
-    }
-
-    @Override
-    public void updateDiskCacheKey(MessageDigest messageDigest) {
-      messageDigest.update(key.getBytes());
-    }
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/engine/cache/LruCacheTest.java b/library/src/test/java/com/bumptech/glide/load/engine/cache/LruCacheTest.java
deleted file mode 100644
index 3e3451e81..000000000
--- a/library/src/test/java/com/bumptech/glide/load/engine/cache/LruCacheTest.java
+++ /dev/null
@@ -1,352 +0,0 @@
-package com.bumptech.glide.load.engine.cache;
-
-import static org.junit.Assert.assertEquals;
-import static org.junit.Assert.assertFalse;
-import static org.junit.Assert.assertNull;
-import static org.junit.Assert.assertTrue;
-import static org.mockito.Matchers.any;
-import static org.mockito.Matchers.anyObject;
-import static org.mockito.Matchers.eq;
-import static org.mockito.Mockito.mock;
-import static org.mockito.Mockito.never;
-import static org.mockito.Mockito.times;
-import static org.mockito.Mockito.verify;
-import static org.mockito.Mockito.when;
-
-import com.bumptech.glide.util.LruCache;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.junit.runners.JUnit4;
-
-@RunWith(JUnit4.class)
-public class LruCacheTest {
-  // 1MB
-  private static final int SIZE = 2;
-  private LruCache<String, Object> cache;
-  private CacheListener listener;
-  private String currentKey;
-
-  @Before
-  public void setUp() throws Exception {
-    currentKey = "";
-    listener = mock(CacheListener.class);
-    cache = new TestLruCache(SIZE, listener);
-    when(listener.getSize(anyObject())).thenReturn(1);
-  }
-
-  @Test
-  public void testCanAddAndRetrieveItem() {
-    String key = getKey();
-    Object object = new Object();
-
-    cache.put(key, object);
-
-    assertEquals(object, cache.get(key));
-  }
-
-  @Test
-  public void testCanPutNullItemWithoutChangingSize() {
-    String key = getKey();
-    cache.put(key, null);
-
-    for (int i = 0; i < SIZE; i++) {
-      cache.put(getKey(), new Object());
-    }
-
-    verify(listener, never()).onItemRemoved(anyObject());
-  }
-
-  @Test
-  public void testReplacingNonNullItemWithNullItemDecreasesSize() {
-    String key = getKey();
-    cache.put(key, new Object());
-    cache.put(key, null);
-
-    for (int i = 0; i < SIZE; i++) {
-      cache.put(getKey(), new Object());
-    }
-
-    verify(listener, never()).onItemRemoved(anyObject());
-  }
-
-  @Test
-  public void testReplacingNullItemWIthNullItemIncreasesSize() {
-    String key = getKey();
-    cache.put(key, null);
-    cache.put(key, new Object());
-
-    for (int i = 0; i < SIZE; i++) {
-      cache.put(getKey(), new Object());
-    }
-
-    verify(listener).onItemRemoved(anyObject());
-  }
-
-  @Test
-  public void testReplacingNonNullItemWithNonNullItemUpdatesSize() {
-    String key = getKey();
-    cache.put(key, new Object());
-    cache.put(key, new Object());
-
-    for (int i = 0; i < SIZE; i++) {
-      cache.put(getKey(), new Object());
-    }
-
-    verify(listener).onItemRemoved(anyObject());
-  }
-
-  @Test
-  public void testCacheContainsAddedBitmap() {
-    final String key = getKey();
-    cache.put(key, new Object());
-    assertTrue(cache.contains(key));
-  }
-
-  @Test
-  public void testEmptyCacheDoesNotContainKey() {
-    assertFalse(cache.contains(getKey()));
-  }
-
-  @Test
-  public void testItIsSizeLimited() {
-    for (int i = 0; i < SIZE; i++) {
-      cache.put(getKey(), new Object());
-    }
-    verify(listener, never()).onItemRemoved(anyObject());
-    cache.put(getKey(), new Object());
-    verify(listener).onItemRemoved(anyObject());
-  }
-
-  @Test
-  public void testLeastRecentlyAddKeyEvictedFirstIfGetsAreEqual() {
-    Object first = new Object();
-    cache.put(getKey(), first);
-    cache.put(getKey(), new Object());
-    cache.put(getKey(), new Object());
-
-    verify(listener).onItemRemoved(eq(first));
-    verify(listener, times(1)).onItemRemoved(any(Object.class));
-  }
-
-  @Test
-  public void testLeastRecentlyUsedKeyEvictedFirst() {
-    String mostRecentlyUsedKey = getKey();
-    Object mostRecentlyUsedObject = new Object();
-    String leastRecentlyUsedKey = getKey();
-    Object leastRecentlyUsedObject = new Object();
-
-    cache.put(mostRecentlyUsedKey, mostRecentlyUsedObject);
-    cache.put(leastRecentlyUsedKey, leastRecentlyUsedObject);
-
-    cache.get(mostRecentlyUsedKey);
-    cache.put(getKey(), new Object());
-
-    verify(listener).onItemRemoved(eq(leastRecentlyUsedObject));
-    verify(listener, times(1)).onItemRemoved(any(Object.class));
-  }
-
-  @Test
-  public void testItemLargerThanCacheIsImmediatelyEvicted() {
-    Object tooLarge = new Object();
-    when(listener.getSize(eq(tooLarge))).thenReturn(SIZE + 1);
-    cache.put(getKey(), tooLarge);
-
-    verify(listener).onItemRemoved(eq(tooLarge));
-  }
-
-  @Test
-  public void testItemLargerThanCacheDoesNotCauseAdditionalEvictions() {
-    cache.put(getKey(), new Object());
-
-    Object tooLarge = new Object();
-    when(listener.getSize(eq(tooLarge))).thenReturn(SIZE + 1);
-
-    cache.put(getKey(), tooLarge);
-
-    verify(listener, times(1)).onItemRemoved(anyObject());
-  }
-
-  @Test
-  public void testClearMemoryRemovesAllItems() {
-    String first = getKey();
-    String second = getKey();
-    cache.put(first, new Object());
-    cache.put(second, new Object());
-
-    cache.clearMemory();
-
-    assertFalse(cache.contains(first));
-    assertFalse(cache.contains(second));
-  }
-
-  @Test
-  public void testCanPutSameItemMultipleTimes() {
-    String key = getKey();
-    Object value = new Object();
-    for (int i = 0; i < SIZE * 2; i++) {
-      cache.put(key, value);
-    }
-
-    verify(listener, never()).onItemRemoved(anyObject());
-  }
-
-  @Test
-  public void testCanIncreaseSizeDynamically() {
-    int sizeMultiplier = 2;
-    cache.setSizeMultiplier(sizeMultiplier);
-    for (int i = 0; i < SIZE * sizeMultiplier; i++) {
-      cache.put(getKey(), new Object());
-    }
-
-    verify(listener, never()).onItemRemoved(anyObject());
-  }
-
-  @Test
-  public void testCanDecreaseSizeDynamically() {
-    for (int i = 0; i < SIZE; i++) {
-      cache.put(getKey(), new Object());
-    }
-    verify(listener, never()).onItemRemoved(anyObject());
-
-    cache.setSizeMultiplier(0.5f);
-
-    verify(listener).onItemRemoved(anyObject());
-  }
-
-  @Test
-  public void testCanResetSizeDynamically() {
-    int sizeMultiplier = 2;
-    cache.setSizeMultiplier(sizeMultiplier);
-    for (int i = 0; i < SIZE * sizeMultiplier; i++) {
-      cache.put(getKey(), new Object());
-    }
-
-    cache.setSizeMultiplier(1);
-
-    verify(listener, times(sizeMultiplier)).onItemRemoved(anyObject());
-  }
-
-  @Test(expected = IllegalArgumentException.class)
-  public void testThrowsIfMultiplierLessThanZero() {
-    cache.setSizeMultiplier(-1);
-  }
-
-  @Test
-  public void testCanHandleZeroAsMultiplier() {
-    for (int i = 0; i < SIZE; i++) {
-      cache.put(getKey(), new Object());
-    }
-    cache.setSizeMultiplier(0);
-
-    verify(listener, times(SIZE)).onItemRemoved(anyObject());
-  }
-
-  @Test
-  public void testCanRemoveKeys() {
-    String key = getKey();
-    Object value = new Object();
-    cache.put(key, value);
-    cache.remove(key);
-
-    assertNull(cache.get(key));
-    assertFalse(cache.contains(key));
-  }
-
-  @Test
-  public void testDecreasesSizeWhenRemovesKey() {
-    String key = getKey();
-    Object value = new Object();
-    cache.put(key, value);
-    for (int i = 0; i < SIZE - 1; i++) {
-      cache.put(key, value);
-    }
-    cache.remove(key);
-    cache.put(key, value);
-
-    verify(listener, never()).onItemRemoved(anyObject());
-  }
-
-  @Test
-  public void testDoesNotCallListenerWhenRemovesKey() {
-    String key = getKey();
-    cache.put(key, new Object());
-    cache.remove(key);
-
-    verify(listener, never()).onItemRemoved(anyObject());
-  }
-
-  @Test
-  public void testGetMaxSizeReturnsCurrentMaxSizeOfCache() {
-    assertEquals(SIZE, cache.getMaxSize());
-  }
-
-  @Test
-  public void testGetMaxSizeChangesIfMaxSizeChanges() {
-    int multiplier = 2;
-    cache.setSizeMultiplier(multiplier);
-
-    assertEquals(SIZE * multiplier, cache.getMaxSize());
-  }
-
-  @Test
-  public void getCurrentSizeReturnsZeroForEmptyCache() {
-    assertEquals(0, cache.getCurrentSize());
-  }
-
-  @Test
-  public void testGetCurrentSizeIncreasesAsSizeIncreases() {
-    cache.put(getKey(), new Object());
-    assertEquals(1, cache.getCurrentSize());
-    cache.put(getKey(), new Object());
-    assertEquals(2, cache.getCurrentSize());
-  }
-
-  @Test
-  public void testGetCurrentSizeDoesNotChangeWhenSizeMultiplierChangesIfNoItemsAreEvicted() {
-    cache.put(getKey(), new Object());
-    assertEquals(1, cache.getCurrentSize());
-    cache.setSizeMultiplier(2);
-    assertEquals(1, cache.getCurrentSize());
-  }
-
-  @Test
-  public void testGetCurrentSizeChangesIfItemsAreEvictedWhenSizeMultiplierChanges() {
-    for (int i = 0; i < SIZE; i++) {
-      cache.put(getKey(), new Object());
-    }
-    assertEquals(SIZE, cache.getCurrentSize());
-    cache.setSizeMultiplier(0.5f);
-    assertEquals(SIZE / 2, cache.getCurrentSize());
-  }
-
-  private String getKey() {
-    currentKey += "1";
-    return currentKey;
-  }
-
-  private interface CacheListener {
-    public void onItemRemoved(Object item);
-
-    public int getSize(Object item);
-  }
-
-  private static class TestLruCache extends LruCache<String, Object> {
-    private final CacheListener listener;
-
-    public TestLruCache(int size, CacheListener listener) {
-      super(size);
-      this.listener = listener;
-    }
-
-    @Override
-    protected void onItemEvicted(String key, Object item) {
-      listener.onItemRemoved(item);
-    }
-
-    @Override
-    protected int getSize(Object item) {
-      return listener.getSize(item);
-    }
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/engine/cache/LruResourceCacheTest.java b/library/src/test/java/com/bumptech/glide/load/engine/cache/LruResourceCacheTest.java
deleted file mode 100644
index 00ffc8295..000000000
--- a/library/src/test/java/com/bumptech/glide/load/engine/cache/LruResourceCacheTest.java
+++ /dev/null
@@ -1,120 +0,0 @@
-package com.bumptech.glide.load.engine.cache;
-
-import static com.bumptech.glide.load.engine.cache.MemoryCache.ResourceRemovedListener;
-import static com.bumptech.glide.tests.Util.mockResource;
-import static org.junit.Assert.assertFalse;
-import static org.junit.Assert.assertTrue;
-import static org.mockito.Matchers.eq;
-import static org.mockito.Mockito.mock;
-import static org.mockito.Mockito.never;
-import static org.mockito.Mockito.verify;
-import static org.mockito.Mockito.when;
-
-import android.annotation.TargetApi;
-import android.content.ComponentCallbacks2;
-import android.os.Build;
-import com.bumptech.glide.load.Key;
-import com.bumptech.glide.load.engine.Resource;
-import java.security.MessageDigest;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.junit.runners.JUnit4;
-
-@RunWith(JUnit4.class)
-@TargetApi(Build.VERSION_CODES.ICE_CREAM_SANDWICH)
-public class LruResourceCacheTest {
-  private static class TrimClearMemoryCacheHarness {
-    LruResourceCache resourceCache = new LruResourceCache(100);
-    Resource<?> first = mockResource();
-    Resource<?> second = mockResource();
-
-    ResourceRemovedListener listener = mock(ResourceRemovedListener.class);
-
-    public TrimClearMemoryCacheHarness() {
-      when(first.getSize()).thenReturn(50);
-      when(second.getSize()).thenReturn(50);
-      resourceCache.put(new MockKey(), first);
-      resourceCache.put(new MockKey(), second);
-      resourceCache.setResourceRemovedListener(listener);
-    }
-  }
-
-  @Test
-  public void testTrimMemoryBackground() {
-    TrimClearMemoryCacheHarness harness = new TrimClearMemoryCacheHarness();
-
-    harness.resourceCache.trimMemory(ComponentCallbacks2.TRIM_MEMORY_BACKGROUND);
-
-    verify(harness.listener).onResourceRemoved(eq(harness.first));
-    verify(harness.listener).onResourceRemoved(eq(harness.second));
-  }
-
-  @Test
-  public void testTrimMemoryModerate() {
-    TrimClearMemoryCacheHarness harness = new TrimClearMemoryCacheHarness();
-
-    harness.resourceCache.trimMemory(ComponentCallbacks2.TRIM_MEMORY_MODERATE);
-
-    verify(harness.listener).onResourceRemoved(harness.first);
-    verify(harness.listener).onResourceRemoved(harness.second);
-  }
-
-  @Test
-  public void testTrimMemoryUiHidden() {
-    TrimClearMemoryCacheHarness harness = new TrimClearMemoryCacheHarness();
-
-    harness.resourceCache.trimMemory(ComponentCallbacks2.TRIM_MEMORY_UI_HIDDEN);
-
-    verify(harness.listener).onResourceRemoved(harness.first);
-    verify(harness.listener, never()).onResourceRemoved(harness.second);
-  }
-
-  @Test
-  public void testResourceRemovedListenerIsNotifiedWhenResourceIsRemoved() {
-    LruResourceCache resourceCache = new LruResourceCache(100);
-    Resource<?> resource = mockResource();
-    when(resource.getSize()).thenReturn(200);
-
-    ResourceRemovedListener listener = mock(ResourceRemovedListener.class);
-
-    resourceCache.setResourceRemovedListener(listener);
-    resourceCache.put(new MockKey(), resource);
-
-    verify(listener).onResourceRemoved(eq(resource));
-  }
-
-  @Test
-  public void testSizeIsBasedOnResource() {
-    LruResourceCache resourceCache = new LruResourceCache(100);
-    Resource<?> first = getResource(50);
-    MockKey firstKey = new MockKey();
-    resourceCache.put(firstKey, first);
-    Resource<?> second = getResource(50);
-    MockKey secondKey = new MockKey();
-    resourceCache.put(secondKey, second);
-
-    assertTrue(resourceCache.contains(firstKey));
-    assertTrue(resourceCache.contains(secondKey));
-
-    Resource<?> third = getResource(50);
-    MockKey thirdKey = new MockKey();
-    resourceCache.put(thirdKey, third);
-
-    assertFalse(resourceCache.contains(firstKey));
-    assertTrue(resourceCache.contains(secondKey));
-    assertTrue(resourceCache.contains(thirdKey));
-  }
-
-  private Resource<?> getResource(int size) {
-    Resource<?> resource = mockResource();
-    when(resource.getSize()).thenReturn(size);
-    return resource;
-  }
-
-  private static class MockKey implements Key {
-    @Override
-    public void updateDiskCacheKey(MessageDigest messageDigest) {
-      messageDigest.update(toString().getBytes(CHARSET));
-    }
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/engine/cache/MemorySizeCalculatorTest.java b/library/src/test/java/com/bumptech/glide/load/engine/cache/MemorySizeCalculatorTest.java
deleted file mode 100644
index f2359ad81..000000000
--- a/library/src/test/java/com/bumptech/glide/load/engine/cache/MemorySizeCalculatorTest.java
+++ /dev/null
@@ -1,184 +0,0 @@
-package com.bumptech.glide.load.engine.cache;
-
-import static com.google.common.truth.Truth.assertThat;
-import static org.mockito.Mockito.mock;
-import static org.mockito.Mockito.when;
-
-import android.app.ActivityManager;
-import android.content.Context;
-import android.os.Build;
-import com.bumptech.glide.tests.Util;
-import com.google.common.collect.Range;
-import org.junit.After;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.RuntimeEnvironment;
-import org.robolectric.Shadows;
-import org.robolectric.annotation.Config;
-import org.robolectric.shadows.ShadowActivityManager;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class MemorySizeCalculatorTest {
-  private MemorySizeHarness harness;
-  private int initialSdkVersion;
-
-  @Before
-  public void setUp() {
-    initialSdkVersion = Build.VERSION.SDK_INT;
-    harness = new MemorySizeHarness();
-  }
-
-  @After
-  public void tearDown() {
-    Util.setSdkVersionInt(initialSdkVersion);
-  }
-
-  @Test
-  public void testDefaultMemoryCacheSizeIsTwiceScreenSize() {
-    Shadows.shadowOf(harness.activityManager).setMemoryClass(getLargeEnoughMemoryClass());
-
-    float memoryCacheSize = harness.getCalculator().getMemoryCacheSize();
-
-    assertThat(memoryCacheSize).isEqualTo(harness.getScreenSize() * harness.memoryCacheScreens);
-  }
-
-  @Test
-  public void testCanSetCustomMemoryCacheSize() {
-    harness.memoryCacheScreens = 9.5f;
-    Shadows.shadowOf(harness.activityManager).setMemoryClass(getLargeEnoughMemoryClass());
-
-    float memoryCacheSize = harness.getCalculator().getMemoryCacheSize();
-
-    assertThat(memoryCacheSize).isEqualTo(harness.getScreenSize() * harness.memoryCacheScreens);
-  }
-
-  @Test
-  public void testDefaultMemoryCacheSizeIsLimitedByMemoryClass() {
-    final int memoryClassBytes =
-        Math.round(harness.getScreenSize() * harness.memoryCacheScreens * harness.sizeMultiplier);
-
-    Shadows.shadowOf(harness.activityManager).setMemoryClass(memoryClassBytes / (1024 * 1024));
-
-    float memoryCacheSize = harness.getCalculator().getMemoryCacheSize();
-
-    assertThat((float) memoryCacheSize)
-        .isIn(Range.atMost(memoryClassBytes * harness.sizeMultiplier));
-  }
-
-  @Test
-  public void testDefaultBitmapPoolSize() {
-    Shadows.shadowOf(harness.activityManager).setMemoryClass(getLargeEnoughMemoryClass());
-
-    float bitmapPoolSize = harness.getCalculator().getBitmapPoolSize();
-
-    assertThat(bitmapPoolSize).isEqualTo(harness.getScreenSize() * harness.bitmapPoolScreens);
-  }
-
-  @Test
-  public void testCanSetCustomBitmapPoolSize() {
-    harness.bitmapPoolScreens = 2f;
-    Shadows.shadowOf(harness.activityManager).setMemoryClass(getLargeEnoughMemoryClass());
-
-    float bitmapPoolSize = harness.getCalculator().getBitmapPoolSize();
-
-    assertThat(bitmapPoolSize).isEqualTo(harness.getScreenSize() * harness.bitmapPoolScreens);
-  }
-
-  @Test
-  public void testDefaultBitmapPoolSizeIsLimitedByMemoryClass() {
-    final int memoryClassBytes =
-        Math.round(harness.getScreenSize() * harness.bitmapPoolScreens * harness.sizeMultiplier);
-
-    Shadows.shadowOf(harness.activityManager).setMemoryClass(memoryClassBytes / (1024 * 1024));
-
-    int bitmapPoolSize = harness.getCalculator().getBitmapPoolSize();
-
-    assertThat((float) bitmapPoolSize)
-        .isIn(Range.atMost(memoryClassBytes * harness.sizeMultiplier));
-  }
-
-  @Test
-  public void testCumulativePoolAndMemoryCacheSizeAreLimitedByMemoryClass() {
-    final int memoryClassBytes = Math.round(
-        harness.getScreenSize() * (harness.bitmapPoolScreens + harness.memoryCacheScreens)
-            * harness.sizeMultiplier);
-    Shadows.shadowOf(harness.activityManager).setMemoryClass(memoryClassBytes / (1024 * 1024));
-
-    int memoryCacheSize = harness.getCalculator().getMemoryCacheSize();
-    int bitmapPoolSize = harness.getCalculator().getBitmapPoolSize();
-
-    assertThat((float) memoryCacheSize + bitmapPoolSize)
-        .isIn(Range.atMost(memoryClassBytes * harness.sizeMultiplier));
-  }
-
-  @Test
-  public void testCumulativePoolAndMemoryCacheSizesAreSmallerOnLowMemoryDevices() {
-    Shadows.shadowOf(harness.activityManager).setMemoryClass(getLargeEnoughMemoryClass() / 2);
-    final int normalMemoryCacheSize = harness.getCalculator().getMemoryCacheSize();
-    final int normalBitmapPoolSize = harness.getCalculator().getBitmapPoolSize();
-
-    Util.setSdkVersionInt(10);
-
-    // Keep the bitmap pool size constant, even though normally it would change.
-    harness.byteArrayPoolSizeBytes *= 2;
-    final int smallMemoryCacheSize = harness.getCalculator().getMemoryCacheSize();
-    final int smallBitmapPoolSize = harness.getCalculator().getBitmapPoolSize();
-
-    assertThat(smallMemoryCacheSize).isLessThan(normalMemoryCacheSize);
-    assertThat(smallBitmapPoolSize).isLessThan(normalBitmapPoolSize);
-  }
-
-  @Test
-  public void testByteArrayPoolSize_withLowRamDevice_isHalfTheSpecifiedBytes() {
-    ShadowActivityManager activityManager = Shadows.shadowOf(harness.activityManager);
-    activityManager.setMemoryClass(getLargeEnoughMemoryClass());
-
-    Util.setSdkVersionInt(10);
-
-    int byteArrayPoolSize = harness.getCalculator().getArrayPoolSizeInBytes();
-    assertThat(byteArrayPoolSize).isEqualTo(harness.byteArrayPoolSizeBytes / 2);
-  }
-
-  private int getLargeEnoughMemoryClass() {
-    float totalScreenBytes =
-        harness.getScreenSize() * (harness.bitmapPoolScreens + harness.memoryCacheScreens);
-    float totalBytes = totalScreenBytes + harness.byteArrayPoolSizeBytes;
-    // Memory class is in mb, not bytes!
-    float totalMb = totalBytes / (1024 * 1024);
-    float memoryClassMb = totalMb / harness.sizeMultiplier;
-    return (int) Math.ceil(memoryClassMb);
-  }
-
-  private static class MemorySizeHarness {
-    int pixelSize = 500;
-    int bytesPerPixel = MemorySizeCalculator.BYTES_PER_ARGB_8888_PIXEL;
-    float memoryCacheScreens = MemorySizeCalculator.Builder.MEMORY_CACHE_TARGET_SCREENS;
-    float bitmapPoolScreens = MemorySizeCalculator.Builder.BITMAP_POOL_TARGET_SCREENS;
-    float sizeMultiplier = MemorySizeCalculator.Builder.MAX_SIZE_MULTIPLIER;
-    int byteArrayPoolSizeBytes = MemorySizeCalculator.Builder.ARRAY_POOL_SIZE_BYTES;
-    ActivityManager activityManager =
-        (ActivityManager) RuntimeEnvironment.application.getSystemService(Context.ACTIVITY_SERVICE);
-    MemorySizeCalculator.ScreenDimensions screenDimensions =
-        mock(MemorySizeCalculator.ScreenDimensions.class);
-
-    public MemorySizeCalculator getCalculator() {
-      when(screenDimensions.getWidthPixels()).thenReturn(pixelSize);
-      when(screenDimensions.getHeightPixels()).thenReturn(pixelSize);
-      return new MemorySizeCalculator.Builder(RuntimeEnvironment.application)
-          .setMemoryCacheScreens(memoryCacheScreens)
-          .setBitmapPoolScreens(bitmapPoolScreens)
-          .setMaxSizeMultiplier(sizeMultiplier)
-          .setActivityManager(activityManager)
-          .setScreenDimensions(screenDimensions)
-          .setArrayPoolSize(byteArrayPoolSizeBytes)
-          .build();
-    }
-
-    public int getScreenSize() {
-      return pixelSize * pixelSize * bytesPerPixel;
-    }
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/engine/cache/SafeKeyGeneratorTest.java b/library/src/test/java/com/bumptech/glide/load/engine/cache/SafeKeyGeneratorTest.java
deleted file mode 100644
index 207ccaf9b..000000000
--- a/library/src/test/java/com/bumptech/glide/load/engine/cache/SafeKeyGeneratorTest.java
+++ /dev/null
@@ -1,57 +0,0 @@
-package com.bumptech.glide.load.engine.cache;
-
-import static org.junit.Assert.assertTrue;
-
-import com.bumptech.glide.load.Key;
-import java.security.MessageDigest;
-import java.util.regex.Matcher;
-import java.util.regex.Pattern;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class SafeKeyGeneratorTest {
-  private SafeKeyGenerator keyGenerator;
-  private int nextId;
-
-  @Before
-  public void setUp() throws Exception {
-    nextId = 0;
-    keyGenerator = new SafeKeyGenerator();
-  }
-
-  @Test
-  public void testKeysAreValidForDiskCache() {
-    final Pattern diskCacheRegex = Pattern.compile("[a-z0-9_-]{64}");
-    for (int i = 0; i < 1000; i++) {
-      String key = getRandomKeyFromGenerator();
-      Matcher matcher = diskCacheRegex.matcher(key);
-      assertTrue(key, matcher.matches());
-    }
-  }
-
-  private String getRandomKeyFromGenerator() {
-    return keyGenerator.getSafeKey(new MockKey(getNextId()));
-  }
-
-  private String getNextId() {
-    return String.valueOf(nextId++);
-  }
-
-  private static class MockKey implements Key {
-    private String id;
-
-    public MockKey(String id) {
-      this.id = id;
-    }
-
-    @Override
-    public void updateDiskCacheKey(MessageDigest messageDigest) {
-      messageDigest.update(id.getBytes(CHARSET));
-    }
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/engine/executor/GlideExecutorTest.java b/library/src/test/java/com/bumptech/glide/load/engine/executor/GlideExecutorTest.java
deleted file mode 100644
index fa9dba251..000000000
--- a/library/src/test/java/com/bumptech/glide/load/engine/executor/GlideExecutorTest.java
+++ /dev/null
@@ -1,63 +0,0 @@
-package com.bumptech.glide.load.engine.executor;
-
-import static com.google.common.truth.Truth.assertThat;
-
-import java.util.ArrayList;
-import java.util.Collections;
-import java.util.List;
-import java.util.concurrent.TimeUnit;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class GlideExecutorTest {
-
-  @Test
-  public void testLoadsAreExecutedInOrder() throws InterruptedException {
-    final List<Integer> resultPriorities = Collections.synchronizedList(new ArrayList<Integer>());
-    GlideExecutor executor = GlideExecutor.newDiskCacheExecutor();
-    for (int i = 5; i > 0; i--) {
-      executor.execute(new MockRunnable(i, new MockRunnable.OnRun() {
-        @Override
-        public void onRun(int priority) {
-          resultPriorities.add(priority);
-        }
-      }));
-    }
-
-    executor.shutdown();
-    executor.awaitTermination(500, TimeUnit.MILLISECONDS);
-
-    // Since no jobs are queued, the first item added will be run immediately, regardless of
-    // priority.
-    assertThat(resultPriorities).containsExactly(5, 1, 2, 3, 4).inOrder();
-  }
-
-  private static class MockRunnable implements Runnable,
-      Comparable<MockRunnable> {
-    private final int priority;
-    private final OnRun onRun;
-
-    @Override
-    public int compareTo(MockRunnable another) {
-      return priority - another.priority;
-    }
-
-    public interface OnRun {
-      void onRun(int priority);
-    }
-
-    public MockRunnable(int priority, OnRun onRun) {
-      this.priority = priority;
-      this.onRun = onRun;
-    }
-
-    @Override
-    public void run() {
-      onRun.onRun(priority);
-    }
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/engine/executor/MockGlideExecutor.java b/library/src/test/java/com/bumptech/glide/load/engine/executor/MockGlideExecutor.java
deleted file mode 100644
index af0dce220..000000000
--- a/library/src/test/java/com/bumptech/glide/load/engine/executor/MockGlideExecutor.java
+++ /dev/null
@@ -1,24 +0,0 @@
-package com.bumptech.glide.load.engine.executor;
-
-/**
- * Creates mock {@link GlideExecutor}s.
- */
-public final class MockGlideExecutor {
-
-  private MockGlideExecutor() { }
-
-  public static GlideExecutor newMainThreadExecutor() {
-    return new GlideExecutor(1 /*poolSize*/, "mock-glide-executor",
-        GlideExecutor.UncaughtThrowableStrategy.THROW, false /*preventNetworkOperations*/,
-        true /*runAllOnMainThread*/);
-  }
-
-  public static GlideExecutor newMainThreadUnlimitedExecutor() {
-    return new GlideExecutor(0 /* corePoolSize */,
-        Integer.MAX_VALUE /* maximumPoolSize */,
-        java.util.concurrent.TimeUnit.SECONDS.toMillis(10) /* keepAliveTimeInMs */,
-        "mock-unlimited-glide-executor",
-        GlideExecutor.UncaughtThrowableStrategy.THROW, false /*preventNetworkOperations*/,
-        true /*runAllOnMainThread*/);
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/engine/prefill/BitmapPreFillRunnerTest.java b/library/src/test/java/com/bumptech/glide/load/engine/prefill/BitmapPreFillRunnerTest.java
deleted file mode 100644
index 6c1bafb6f..000000000
--- a/library/src/test/java/com/bumptech/glide/load/engine/prefill/BitmapPreFillRunnerTest.java
+++ /dev/null
@@ -1,332 +0,0 @@
-package com.bumptech.glide.load.engine.prefill;
-
-import static com.bumptech.glide.tests.Util.anyResource;
-import static com.google.common.truth.Truth.assertThat;
-import static org.junit.Assert.assertNotEquals;
-import static org.mockito.Matchers.any;
-import static org.mockito.Matchers.anyInt;
-import static org.mockito.Matchers.anyLong;
-import static org.mockito.Matchers.eq;
-import static org.mockito.Mockito.atLeastOnce;
-import static org.mockito.Mockito.doAnswer;
-import static org.mockito.Mockito.inOrder;
-import static org.mockito.Mockito.never;
-import static org.mockito.Mockito.verify;
-import static org.mockito.Mockito.when;
-
-import android.graphics.Bitmap;
-import android.os.Handler;
-import com.bumptech.glide.load.Key;
-import com.bumptech.glide.load.engine.Resource;
-import com.bumptech.glide.load.engine.bitmap_recycle.BitmapPool;
-import com.bumptech.glide.load.engine.cache.MemoryCache;
-import com.bumptech.glide.load.resource.bitmap.BitmapResource;
-import com.bumptech.glide.tests.Util.CreateBitmap;
-import com.bumptech.glide.util.Util;
-import java.util.ArrayList;
-import java.util.HashMap;
-import java.util.List;
-import java.util.Map;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.mockito.InOrder;
-import org.mockito.Mock;
-import org.mockito.MockitoAnnotations;
-import org.mockito.invocation.InvocationOnMock;
-import org.mockito.stubbing.Answer;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class BitmapPreFillRunnerTest {
-  @Mock BitmapPreFillRunner.Clock clock;
-  @Mock BitmapPool pool;
-  @Mock MemoryCache cache;
-  @Mock Handler mainHandler;
-  private List<Bitmap> addedBitmaps = new ArrayList<>();
-
-  @Before
-  public void setUp() {
-    MockitoAnnotations.initMocks(this);
-
-    doAnswer(new AddBitmapPoolAnswer(addedBitmaps)).when(pool).put(any(Bitmap.class));
-    when(pool.getDirty(anyInt(), anyInt(), any(Bitmap.Config.class)))
-        .thenAnswer(new CreateBitmap());
-    when(cache.put(any(Key.class), anyResource()))
-        .thenAnswer(new AddBitmapCacheAnswer(addedBitmaps));
-  }
-
-  private BitmapPreFillRunner getHandler(Map<PreFillType, Integer> allocationOrder) {
-    return new BitmapPreFillRunner(pool, cache, new PreFillQueue(allocationOrder), clock,
-        mainHandler);
-  }
-
-  @Test
-  public void testAllocatesABitmapPerSizeInAllocationOrder() {
-    PreFillType size = new PreFillType.Builder(100).setConfig(Bitmap.Config.ARGB_8888).build();
-    final int toAdd = 3;
-    Map<PreFillType, Integer> allocationOrder = new HashMap<>();
-    allocationOrder.put(size, toAdd);
-    BitmapPreFillRunner handler = getHandler(allocationOrder);
-    handler.run();
-
-    Bitmap expected = Bitmap.createBitmap(size.getWidth(), size.getHeight(), size.getConfig());
-    // TODO(b/20335397): This code was relying on Bitmap equality which Robolectric removed
-    // assertThat(addedBitmaps).containsExactly(expected, expected, expected);
-  }
-
-  @Test
-  public void testAllocatesBitmapsInOrderGivenByAllocationOrder() {
-    PreFillType smallWidth =
-        new PreFillType.Builder(50, 100).setConfig(Bitmap.Config.ARGB_8888).build();
-    PreFillType smallHeight =
-        new PreFillType.Builder(100, 50).setConfig(Bitmap.Config.RGB_565).build();
-
-    PreFillType[] expectedOrder =
-        new PreFillType[] { smallWidth, smallHeight, smallWidth, smallHeight, };
-
-    HashMap<PreFillType, Integer> allocationOrder = new HashMap<>();
-    allocationOrder.put(smallWidth, 2);
-    allocationOrder.put(smallHeight, 2);
-    BitmapPreFillRunner handler = getHandler(allocationOrder);
-    handler.run();
-
-    Bitmap[] expectedBitmaps = new Bitmap[expectedOrder.length];
-    for (int i = 0; i < expectedBitmaps.length; i++) {
-      PreFillType current = expectedOrder[i];
-      expectedBitmaps[i] =
-          Bitmap.createBitmap(current.getWidth(), current.getHeight(), current.getConfig());
-    }
-
-    Bitmap current = addedBitmaps.get(0);
-    for (int i = 1; i < addedBitmaps.size(); i++) {
-      assertNotEquals(current, addedBitmaps.get(i));
-      current = addedBitmaps.get(i);
-    }
-
-    assertThat(addedBitmaps).hasSize(4);
-  }
-
-  @Test
-  public void testStopsAllocatingBitmapsUntilNextIdleCallIfAllocationsTakeLongerThanLimit() {
-    PreFillType size = new PreFillType.Builder(1).setConfig(Bitmap.Config.ARGB_8888).build();
-    Map<PreFillType, Integer> allocationOrder = new HashMap<>();
-    allocationOrder.put(size, 3);
-    when(clock.now()).thenReturn(0L).thenReturn(0L).thenReturn(BitmapPreFillRunner.MAX_DURATION_MS);
-    BitmapPreFillRunner handler = getHandler(allocationOrder);
-    handler.run();
-
-    assertThat(addedBitmaps).hasSize(1);
-
-    handler.run();
-
-    assertThat(addedBitmaps).hasSize(3);
-  }
-
-  @Test
-  public void testPreFillHandlerDoesNotPostIfHasNoBitmapsToAllocate() {
-    BitmapPreFillRunner handler = getHandler(new HashMap<PreFillType, Integer>());
-    handler.run();
-    verify(mainHandler, never()).postDelayed(any(Runnable.class), anyInt());
-  }
-
-  @Test
-  public void testPreFillHandlerPostsIfHasBitmapsToAllocateAfterRunning() {
-    PreFillType size = new PreFillType.Builder(1).setConfig(Bitmap.Config.ARGB_8888).build();
-    Map<PreFillType, Integer> allocationOrder = new HashMap<>();
-    allocationOrder.put(size, 2);
-    BitmapPreFillRunner handler = getHandler(allocationOrder);
-    when(clock.now()).thenReturn(0L).thenReturn(0L).thenReturn(BitmapPreFillRunner.MAX_DURATION_MS);
-
-    handler.run();
-    verify(mainHandler).postDelayed(eq(handler), anyLong());
-  }
-
-  @Test
-  public void testPreFillHandlerPostsWithBackoffIfHasBitmapsToAllocateAfterRunning() {
-    PreFillType size = new PreFillType.Builder(1).setConfig(Bitmap.Config.ARGB_8888).build();
-    Map<PreFillType, Integer> allocationOrder = new HashMap<>();
-    allocationOrder.put(size, 100);
-
-    BitmapPreFillRunner handler = getHandler(allocationOrder);
-    when(clock.now()).thenReturn(0L).thenReturn(0L).thenReturn(BitmapPreFillRunner.MAX_DURATION_MS);
-
-    handler.run();
-    verify(mainHandler).postDelayed(eq(handler), eq(BitmapPreFillRunner.INITIAL_BACKOFF_MS));
-
-    when(clock.now()).thenReturn(BitmapPreFillRunner.MAX_DURATION_MS).thenReturn(
-        BitmapPreFillRunner.MAX_DURATION_MS
-            + BitmapPreFillRunner.INITIAL_BACKOFF_MS * BitmapPreFillRunner.BACKOFF_RATIO);
-
-    handler.run();
-
-    verify(mainHandler).postDelayed(eq(handler),
-        eq(BitmapPreFillRunner.INITIAL_BACKOFF_MS * BitmapPreFillRunner.BACKOFF_RATIO));
-
-    when(clock.now()).thenReturn(0L).thenReturn(BitmapPreFillRunner.MAX_DURATION_MS);
-    handler.run();
-    when(clock.now()).thenReturn(0L).thenReturn(BitmapPreFillRunner.MAX_DURATION_MS);
-    handler.run();
-    when(clock.now()).thenReturn(0L).thenReturn(BitmapPreFillRunner.MAX_DURATION_MS);
-    handler.run();
-    when(clock.now()).thenReturn(0L).thenReturn(BitmapPreFillRunner.MAX_DURATION_MS);
-    handler.run();
-
-    verify(mainHandler, atLeastOnce())
-        .postDelayed(eq(handler), eq(BitmapPreFillRunner.MAX_BACKOFF_MS));
-  }
-
-  @Test
-  public void testPreFillHandlerDoesNotPostIfHasBitmapsButIsCancelled() {
-    PreFillType size = new PreFillType.Builder(1).setConfig(Bitmap.Config.ARGB_8888).build();
-    Map<PreFillType, Integer> allocationOrder = new HashMap<>();
-    allocationOrder.put(size, 2);
-
-    BitmapPreFillRunner handler = getHandler(allocationOrder);
-    when(clock.now()).thenReturn(0L).thenReturn(0L).thenReturn(BitmapPreFillRunner.MAX_DURATION_MS);
-    handler.cancel();
-    handler.run();
-
-    verify(mainHandler, never()).postDelayed(any(Runnable.class), anyLong());
-  }
-
-  @Test
-  public void testAddsBitmapsToMemoryCacheIfMemoryCacheHasEnoughSpaceRemaining() {
-    Bitmap bitmap = Bitmap.createBitmap(100, 100, Bitmap.Config.ARGB_8888);
-    when(cache.getMaxSize()).thenReturn(Util.getBitmapByteSize(bitmap));
-
-    PreFillType size =
-        new PreFillType.Builder(bitmap.getWidth(), bitmap.getHeight()).setConfig(bitmap.getConfig())
-            .build();
-    Map<PreFillType, Integer> allocationOrder = new HashMap<>();
-    allocationOrder.put(size, 1);
-
-    getHandler(allocationOrder).run();
-
-    verify(cache).put(any(Key.class), anyResource());
-    verify(pool, never()).put(any(Bitmap.class));
-    // TODO(b/20335397): This code was relying on Bitmap equality which Robolectric removed
-    // assertThat(addedBitmaps).containsExactly(bitmap);
-  }
-
-  @Test
-  public void testAddsBitmapsToBitmapPoolIfMemoryCacheIsFull() {
-    Bitmap bitmap = Bitmap.createBitmap(100, 100, Bitmap.Config.ARGB_8888);
-    when(cache.getMaxSize()).thenReturn(0);
-
-    PreFillType size =
-        new PreFillType.Builder(bitmap.getWidth(), bitmap.getHeight()).setConfig(bitmap.getConfig())
-            .build();
-    Map<PreFillType, Integer> allocationOrder = new HashMap<>();
-    allocationOrder.put(size, 1);
-
-    getHandler(allocationOrder).run();
-
-    verify(cache, never()).put(any(Key.class), anyResource());
-    // TODO(b/20335397): This code was relying on Bitmap equality which Robolectric removed
-    // verify(pool).put(eq(bitmap));
-    // assertThat(addedBitmaps).containsExactly(bitmap);
-  }
-
-  @Test
-  public void testAddsBitmapsToPoolIfMemoryCacheIsNotFullButCannotFitBitmap() {
-    Bitmap bitmap = Bitmap.createBitmap(100, 100, Bitmap.Config.ARGB_8888);
-    when(cache.getMaxSize()).thenReturn(Util.getBitmapByteSize(bitmap) / 2);
-
-    PreFillType size =
-        new PreFillType.Builder(bitmap.getWidth(), bitmap.getHeight()).setConfig(bitmap.getConfig())
-            .build();
-    Map<PreFillType, Integer> allocationOrder = new HashMap<>();
-    allocationOrder.put(size, 1);
-
-    getHandler(allocationOrder).run();
-
-    verify(cache, never()).put(any(Key.class), anyResource());
-    // TODO(b/20335397): This code was relying on Bitmap equality which Robolectric removed
-    //verify(pool).put(eq(bitmap));
-    //assertThat(addedBitmaps).containsExactly(bitmap);
-  }
-
-  @Test
-  public void testDoesAGetFromPoolBeforeAddingForEachSize() {
-    Bitmap first = Bitmap.createBitmap(100, 100, Bitmap.Config.ARGB_4444);
-    PreFillType firstSize =
-        new PreFillType.Builder(first.getWidth(), first.getHeight()).setConfig(first.getConfig())
-            .build();
-
-    Bitmap second = Bitmap.createBitmap(200, 200, Bitmap.Config.RGB_565);
-    PreFillType secondSize =
-        new PreFillType.Builder(second.getWidth(), second.getHeight()).setConfig(second.getConfig())
-            .build();
-
-    Map<PreFillType, Integer> allocationOrder = new HashMap<>();
-    allocationOrder.put(firstSize, 1);
-    allocationOrder.put(secondSize, 1);
-
-    getHandler(allocationOrder).run();
-
-    InOrder firstOrder = inOrder(pool);
-    firstOrder.verify(pool).getDirty(eq(first.getWidth()), eq(first.getHeight()),
-        eq(first.getConfig()));
-    // TODO(b/20335397): This code was relying on Bitmap equality which Robolectric removed
-    // firstOrder.verify(pool).put(eq(first));
-
-    InOrder secondOrder = inOrder(pool);
-    secondOrder.verify(pool)
-        .getDirty(eq(second.getWidth()), eq(second.getHeight()), eq(second.getConfig()));
-    // TODO(b/20335397): This code was relying on Bitmap equality which Robolectric removed
-    // secondOrder.verify(pool).put(eq(second));
-  }
-
-  @Test
-  public void testDoesNotGetMoreThanOncePerSize() {
-    Bitmap bitmap = Bitmap.createBitmap(100, 100, Bitmap.Config.ARGB_4444);
-    PreFillType size =
-        new PreFillType.Builder(bitmap.getWidth(), bitmap.getHeight()).setConfig(bitmap.getConfig())
-            .build();
-
-    final int numBitmaps = 5;
-    Map<PreFillType, Integer> allocationOrder = new HashMap<>();
-    allocationOrder.put(size, numBitmaps);
-
-    getHandler(allocationOrder).run();
-
-    InOrder order = inOrder(pool);
-    order.verify(pool).getDirty(eq(bitmap.getWidth()), eq(bitmap.getHeight()),
-        eq(bitmap.getConfig()));
-    // TODO(b/20335397): This code was relying on Bitmap equality which Robolectric removed
-    // order.verify(pool, times(numBitmaps)).put(eq(bitmap));
-  }
-
-  private static class AddBitmapPoolAnswer implements Answer<Void> {
-    private List<Bitmap> bitmaps;
-
-    public AddBitmapPoolAnswer(List<Bitmap> bitmaps) {
-      this.bitmaps = bitmaps;
-    }
-
-    @Override
-    public Void answer(InvocationOnMock invocationOnMock) throws Throwable {
-      Bitmap bitmap = (Bitmap) invocationOnMock.getArguments()[0];
-      bitmaps.add(bitmap);
-      return null;
-    }
-  }
-
-  private static class AddBitmapCacheAnswer implements Answer<Resource<?>> {
-    private List<Bitmap> bitmaps;
-
-    public AddBitmapCacheAnswer(List<Bitmap> bitmaps) {
-      this.bitmaps = bitmaps;
-    }
-
-    @Override
-    public Resource<?> answer(InvocationOnMock invocationOnMock) throws Throwable {
-      BitmapResource resource = (BitmapResource) invocationOnMock.getArguments()[1];
-      bitmaps.add(resource.get());
-      return null;
-    }
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/engine/prefill/BitmapPreFillerTest.java b/library/src/test/java/com/bumptech/glide/load/engine/prefill/BitmapPreFillerTest.java
deleted file mode 100644
index 6349da7e1..000000000
--- a/library/src/test/java/com/bumptech/glide/load/engine/prefill/BitmapPreFillerTest.java
+++ /dev/null
@@ -1,285 +0,0 @@
-package com.bumptech.glide.load.engine.prefill;
-
-import static com.google.common.truth.Truth.assertThat;
-import static org.junit.Assert.assertEquals;
-import static org.junit.Assert.fail;
-import static org.mockito.Matchers.any;
-import static org.mockito.Matchers.anyInt;
-import static org.mockito.Mockito.inOrder;
-import static org.mockito.Mockito.mock;
-import static org.mockito.Mockito.never;
-import static org.mockito.Mockito.verify;
-import static org.mockito.Mockito.when;
-
-import android.graphics.Bitmap;
-import com.bumptech.glide.load.DecodeFormat;
-import com.bumptech.glide.load.engine.bitmap_recycle.BitmapPool;
-import com.bumptech.glide.load.engine.cache.MemoryCache;
-import com.bumptech.glide.tests.Util.CreateBitmap;
-import com.bumptech.glide.util.Util;
-import com.google.common.collect.Range;
-import java.util.ArrayList;
-import java.util.List;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.mockito.InOrder;
-import org.mockito.Mock;
-import org.mockito.MockitoAnnotations;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class BitmapPreFillerTest {
-  private static final int DEFAULT_BITMAP_WIDTH = 100;
-  private static final int DEFAULT_BITMAP_HEIGHT = 50;
-
-  private static final int BITMAPS_IN_POOL = 10;
-  private static final int BITMAPS_IN_CACHE = 10;
-
-  private final Bitmap.Config defaultBitmapConfig = PreFillType.DEFAULT_CONFIG;
-  private final Bitmap defaultBitmap =
-      Bitmap.createBitmap(DEFAULT_BITMAP_WIDTH, DEFAULT_BITMAP_HEIGHT, defaultBitmapConfig);
-  private final int defaultBitmapSize = Util.getBitmapByteSize(defaultBitmap);
-  private final int poolSize = BITMAPS_IN_CACHE * defaultBitmapSize;
-  private final int cacheSize = BITMAPS_IN_POOL * defaultBitmapSize;
-
-  @Mock BitmapPool pool;
-  @Mock MemoryCache cache;
-  private BitmapPreFiller bitmapPreFiller;
-
-  @Before
-  public void setUp() {
-    MockitoAnnotations.initMocks(this);
-    when(pool.getMaxSize()).thenReturn(poolSize);
-    when(pool.getDirty(anyInt(), anyInt(), any(Bitmap.Config.class)))
-        .thenAnswer(new CreateBitmap());
-    when(cache.getMaxSize()).thenReturn(cacheSize);
-
-    bitmapPreFiller = new BitmapPreFiller(cache, pool, DecodeFormat.DEFAULT);
-  }
-
-  @Test
-  public void testAllocationOrderContainsEnoughSizesToFillPoolAndMemoryCache() {
-    PreFillQueue allocationOrder = bitmapPreFiller.generateAllocationOrder(new PreFillType[] {
-        new PreFillType.Builder(DEFAULT_BITMAP_WIDTH, DEFAULT_BITMAP_HEIGHT)
-            .setConfig(defaultBitmapConfig).build() });
-
-    assertEquals(BITMAPS_IN_POOL + BITMAPS_IN_CACHE, allocationOrder.getSize());
-  }
-
-  @Test
-  public void testAllocationOrderThatDoesNotFitExactlyIntoGivenSizeRoundsDown() {
-    PreFillType[] sizes = new PreFillType[] {
-        new PreFillType.Builder(DEFAULT_BITMAP_WIDTH, DEFAULT_BITMAP_HEIGHT)
-            .setConfig(defaultBitmapConfig).build(),
-        new PreFillType.Builder(DEFAULT_BITMAP_WIDTH / 2, DEFAULT_BITMAP_HEIGHT)
-            .setConfig(defaultBitmapConfig).build(),
-        new PreFillType.Builder(DEFAULT_BITMAP_WIDTH, DEFAULT_BITMAP_HEIGHT / 2)
-            .setConfig(defaultBitmapConfig).build(), };
-    PreFillQueue allocationOrder = bitmapPreFiller.generateAllocationOrder(sizes);
-
-    int byteSize = 0;
-    while (!allocationOrder.isEmpty()) {
-      PreFillType current = allocationOrder.remove();
-      byteSize +=
-          Util.getBitmapByteSize(current.getWidth(), current.getHeight(), current.getConfig());
-    }
-
-    int expectedSize = 0;
-    int maxSize = poolSize + cacheSize;
-    for (PreFillType current : sizes) {
-      int currentSize =
-          Util.getBitmapByteSize(current.getWidth(), current.getHeight(), current.getConfig());
-      expectedSize += currentSize * (maxSize / (3 * currentSize));
-    }
-
-    assertEquals(expectedSize, byteSize);
-  }
-
-  @Test
-  public void testAllocationOrderDoesNotOverFillWithMultipleSizes() {
-    PreFillQueue allocationOrder = bitmapPreFiller.generateAllocationOrder(new PreFillType[] {
-        new PreFillType.Builder(DEFAULT_BITMAP_WIDTH, DEFAULT_BITMAP_HEIGHT)
-            .setConfig(defaultBitmapConfig).build(),
-        new PreFillType.Builder(DEFAULT_BITMAP_WIDTH / 2, DEFAULT_BITMAP_HEIGHT)
-            .setConfig(defaultBitmapConfig).build(),
-        new PreFillType.Builder(DEFAULT_BITMAP_WIDTH, DEFAULT_BITMAP_HEIGHT / 2)
-            .setConfig(defaultBitmapConfig).build() });
-
-    int byteSize = 0;
-    while (!allocationOrder.isEmpty()) {
-      PreFillType current = allocationOrder.remove();
-      byteSize +=
-          Util.getBitmapByteSize(current.getWidth(), current.getHeight(), current.getConfig());
-    }
-
-    assertThat(byteSize).isIn(Range.atMost(poolSize + cacheSize));
-  }
-
-  @Test
-  public void testAllocationOrderDoesNotOverFillWithMultipleSizesAndWeights() {
-    PreFillQueue allocationOrder = bitmapPreFiller.generateAllocationOrder(new PreFillType[] {
-        new PreFillType.Builder(DEFAULT_BITMAP_WIDTH, DEFAULT_BITMAP_HEIGHT)
-            .setConfig(defaultBitmapConfig).setWeight(4).build(),
-        new PreFillType.Builder(DEFAULT_BITMAP_WIDTH / 2, DEFAULT_BITMAP_HEIGHT)
-            .setConfig(defaultBitmapConfig).build(),
-        new PreFillType.Builder(DEFAULT_BITMAP_WIDTH, DEFAULT_BITMAP_HEIGHT / 3)
-            .setConfig(defaultBitmapConfig).setWeight(3).build() });
-
-    int byteSize = 0;
-    while (!allocationOrder.isEmpty()) {
-      PreFillType current = allocationOrder.remove();
-      byteSize +=
-          Util.getBitmapByteSize(current.getWidth(), current.getHeight(), current.getConfig());
-    }
-
-    assertThat(byteSize).isIn(Range.atMost(poolSize + cacheSize));
-  }
-
-  @Test
-  public void testAllocationOrderContainsSingleSizeIfSingleSizeIsProvided() {
-    PreFillQueue allocationOrder = bitmapPreFiller.generateAllocationOrder(new PreFillType[] {
-        new PreFillType.Builder(DEFAULT_BITMAP_WIDTH, DEFAULT_BITMAP_HEIGHT)
-            .setConfig(defaultBitmapConfig).build() });
-
-    while (!allocationOrder.isEmpty()) {
-      PreFillType size = allocationOrder.remove();
-      assertEquals(DEFAULT_BITMAP_WIDTH, size.getWidth());
-      assertEquals(DEFAULT_BITMAP_HEIGHT, size.getHeight());
-      assertEquals(defaultBitmapConfig, size.getConfig());
-    }
-  }
-
-  @Test
-  public void testAllocationOrderSplitsEvenlyBetweenEqualSizesWithEqualWeights() {
-    PreFillType smallWidth =
-        new PreFillType.Builder(DEFAULT_BITMAP_WIDTH / 2, DEFAULT_BITMAP_HEIGHT)
-            .setConfig(defaultBitmapConfig).build();
-    PreFillType smallHeight =
-        new PreFillType.Builder(DEFAULT_BITMAP_WIDTH, DEFAULT_BITMAP_HEIGHT / 2)
-            .setConfig(defaultBitmapConfig).build();
-    PreFillQueue allocationOrder =
-        bitmapPreFiller.generateAllocationOrder(new PreFillType[] { smallWidth, smallHeight, });
-
-    int numSmallWidth = 0, numSmallHeight = 0;
-    while (!allocationOrder.isEmpty()) {
-      PreFillType current = allocationOrder.remove();
-      if (smallWidth.equals(current)) {
-        numSmallWidth++;
-      } else if (smallHeight.equals(current)) {
-        numSmallHeight++;
-      } else {
-        fail("Unexpected size, size: " + current);
-      }
-    }
-
-    assertEquals(numSmallWidth, numSmallHeight);
-  }
-
-  @Test
-  public void testAllocationOrderSplitsByteSizeEvenlyBetweenUnEqualSizesWithEqualWeights() {
-    PreFillType smallWidth =
-        new PreFillType.Builder(DEFAULT_BITMAP_WIDTH / 2, DEFAULT_BITMAP_HEIGHT)
-            .setConfig(defaultBitmapConfig).build();
-    PreFillType normal = new PreFillType.Builder(DEFAULT_BITMAP_WIDTH, DEFAULT_BITMAP_HEIGHT)
-        .setConfig(defaultBitmapConfig).build();
-    PreFillQueue allocationOrder =
-        bitmapPreFiller.generateAllocationOrder(new PreFillType[] { smallWidth, normal });
-
-    int numSmallWidth = 0, numNormal = 0;
-    while (!allocationOrder.isEmpty()) {
-      PreFillType current = allocationOrder.remove();
-      if (smallWidth.equals(current)) {
-        numSmallWidth++;
-      } else if (normal.equals(current)) {
-        numNormal++;
-      } else {
-        fail("Unexpected size, size: " + current);
-      }
-    }
-
-    assertEquals(2 * numNormal, numSmallWidth);
-  }
-
-  @Test
-  public void testAllocationOrderSplitsByteSizeUnevenlyBetweenEqualSizesWithUnequalWeights() {
-    PreFillType doubleWeight =
-        new PreFillType.Builder(DEFAULT_BITMAP_WIDTH / 2, DEFAULT_BITMAP_HEIGHT)
-            .setConfig(defaultBitmapConfig).setWeight(2).build();
-    PreFillType normal = new PreFillType.Builder(DEFAULT_BITMAP_WIDTH, DEFAULT_BITMAP_HEIGHT / 2)
-        .setConfig(defaultBitmapConfig).build();
-    PreFillQueue allocationOrder =
-        bitmapPreFiller.generateAllocationOrder(new PreFillType[] { doubleWeight, normal });
-
-    int numDoubleWeight = 0, numNormal = 0;
-    while (!allocationOrder.isEmpty()) {
-      PreFillType current = allocationOrder.remove();
-      if (doubleWeight.equals(current)) {
-        numDoubleWeight++;
-      } else if (normal.equals(current)) {
-        numNormal++;
-      } else {
-        fail("Unexpected size, size: " + current);
-      }
-    }
-
-    assertEquals(2 * numNormal, numDoubleWeight);
-  }
-
-  @Test
-  public void testAllocationOrderRoundRobinsDifferentSizes() {
-    when(pool.getMaxSize()).thenReturn(defaultBitmapSize);
-    when(cache.getMaxSize()).thenReturn(defaultBitmapSize);
-    PreFillType smallWidth =
-        new PreFillType.Builder(DEFAULT_BITMAP_WIDTH / 2, DEFAULT_BITMAP_HEIGHT)
-            .setConfig(defaultBitmapConfig).build();
-    PreFillType smallHeight =
-        new PreFillType.Builder(DEFAULT_BITMAP_WIDTH, DEFAULT_BITMAP_HEIGHT / 2)
-            .setConfig(defaultBitmapConfig).build();
-
-    PreFillQueue allocationOrder =
-        bitmapPreFiller.generateAllocationOrder(new PreFillType[] { smallWidth, smallHeight, });
-
-    List<PreFillType> attributes = new ArrayList<>();
-    while (!allocationOrder.isEmpty()) {
-      attributes.add(allocationOrder.remove());
-    }
-
-    // Either width, height, width, height or height, width, height, width.
-    try {
-      assertThat(attributes).containsExactly(smallWidth, smallHeight, smallWidth, smallHeight)
-          .inOrder();
-    } catch (AssertionError e) {
-      assertThat(attributes).containsExactly(smallHeight, smallWidth, smallHeight, smallWidth)
-          .inOrder();
-    }
-  }
-
-  @Test
-  public void testSetsConfigOnBuildersToDefaultIfNotSet() {
-    PreFillType.Builder builder = mock(PreFillType.Builder.class);
-    when(builder.build())
-        .thenReturn(new PreFillType.Builder(100).setConfig(Bitmap.Config.RGB_565).build());
-
-    bitmapPreFiller.preFill(builder);
-
-    InOrder order = inOrder(builder);
-    order.verify(builder).setConfig(DecodeFormat.DEFAULT == DecodeFormat.PREFER_ARGB_8888
-        ? Bitmap.Config.ARGB_8888 : Bitmap.Config.RGB_565);
-    order.verify(builder).build();
-  }
-
-  @Test
-  public void testDoesNotSetConfigOnBuildersIfConfigIsAlreadySet() {
-    PreFillType.Builder builder = mock(PreFillType.Builder.class);
-
-    when(builder.getConfig()).thenReturn(Bitmap.Config.ARGB_4444);
-    when(builder.build())
-        .thenReturn(new PreFillType.Builder(100).setConfig(Bitmap.Config.ARGB_4444).build());
-    bitmapPreFiller.preFill(builder);
-
-    verify(builder, never()).setConfig(any(Bitmap.Config.class));
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/engine/prefill/PreFillTypeTest.java b/library/src/test/java/com/bumptech/glide/load/engine/prefill/PreFillTypeTest.java
deleted file mode 100644
index bd14089f4..000000000
--- a/library/src/test/java/com/bumptech/glide/load/engine/prefill/PreFillTypeTest.java
+++ /dev/null
@@ -1,74 +0,0 @@
-package com.bumptech.glide.load.engine.prefill;
-
-import static org.junit.Assert.assertEquals;
-
-import android.graphics.Bitmap;
-import com.google.common.testing.EqualsTester;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class PreFillTypeTest {
-
-  @Test(expected = IllegalArgumentException.class)
-  public void testThrowsIfSizeIsZero() {
-    new PreFillType.Builder(0);
-  }
-
-  @Test(expected = IllegalArgumentException.class)
-  public void testThrowsIfWidthIsZero() {
-    new PreFillType.Builder(0, 100);
-  }
-
-  @Test(expected = IllegalArgumentException.class)
-  public void testThrowsIfHeightIsZero() {
-    new PreFillType.Builder(100, 0);
-  }
-
-  @Test(expected = IllegalArgumentException.class)
-  public void testThrowsIfWeightIsZero() {
-    new PreFillType.Builder(100).setWeight(0);
-  }
-
-  @Test(expected = NullPointerException.class)
-  public void testConstructorThrowsIfConfigIsNull() {
-    new PreFillType(100, 100, null, 1);
-  }
-
-  @Test
-  public void testGetWidthReturnsGivenWidth() {
-    int width = 500;
-    assertEquals(width, new PreFillType(width, 100, Bitmap.Config.ARGB_4444, 1).getWidth());
-  }
-
-  @Test
-  public void testGetHeightReturnsGivenHeight() {
-    int height = 123;
-    assertEquals(height, new PreFillType(100, height, Bitmap.Config.ARGB_4444, 1).getHeight());
-  }
-
-  @Test
-  public void testGetConfigReturnsGivenConfig() {
-    Bitmap.Config config = Bitmap.Config.ARGB_8888;
-    assertEquals(config, new PreFillType(100, 100, config, 1).getConfig());
-  }
-
-  @Test
-  public void testGetWeightReturnsGivenWeight() {
-    int weight = 400;
-    assertEquals(weight, new PreFillType(100, 100, Bitmap.Config.ARGB_4444, weight).getWeight());
-  }
-
-  @Test
-  public void testEquality() {
-    new EqualsTester().addEqualityGroup(new PreFillType(100, 100, Bitmap.Config.ARGB_4444, 1),
-        new PreFillType(100, 100, Bitmap.Config.ARGB_4444, 1))
-        .addEqualityGroup(new PreFillType(200, 100, Bitmap.Config.ARGB_4444, 1))
-        .addEqualityGroup(new PreFillType(100, 200, Bitmap.Config.ARGB_4444, 1))
-        .addEqualityGroup(new PreFillType(100, 100, Bitmap.Config.ARGB_8888, 1))
-        .addEqualityGroup(new PreFillType(100, 100, Bitmap.Config.ARGB_4444, 2)).testEquals();
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/model/AssetUriLoaderTest.java b/library/src/test/java/com/bumptech/glide/load/model/AssetUriLoaderTest.java
deleted file mode 100644
index 1dd269502..000000000
--- a/library/src/test/java/com/bumptech/glide/load/model/AssetUriLoaderTest.java
+++ /dev/null
@@ -1,45 +0,0 @@
-package com.bumptech.glide.load.model;
-
-import static org.junit.Assert.assertEquals;
-import static org.junit.Assert.assertTrue;
-import static org.mockito.Matchers.any;
-import static org.mockito.Matchers.eq;
-import static org.mockito.Mockito.when;
-
-import android.content.res.AssetManager;
-import android.net.Uri;
-import com.bumptech.glide.load.Options;
-import com.bumptech.glide.load.data.DataFetcher;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.mockito.Mock;
-import org.mockito.MockitoAnnotations;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.RuntimeEnvironment;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class AssetUriLoaderTest {
-  private static final int IMAGE_SIDE = 10;
-
-  @Mock AssetUriLoader.AssetFetcherFactory<Object> factory;
-  @Mock DataFetcher<Object> fetcher;
-  private AssetUriLoader<Object> loader;
-
-  @Before
-  public void setUp() {
-    MockitoAnnotations.initMocks(this);
-    loader = new AssetUriLoader<>(RuntimeEnvironment.application.getAssets(), factory);
-  }
-
-  @Test
-  public void testHandlesAssetUris() {
-    Uri assetUri = Uri.parse("file:///android_asset/assetName");
-    when(factory.buildFetcher(any(AssetManager.class), eq("assetName"))).thenReturn(fetcher);
-    assertTrue(loader.handles(assetUri));
-    assertEquals(fetcher, loader.buildLoadData(assetUri, IMAGE_SIDE, IMAGE_SIDE,
-        new Options()).fetcher);
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/model/ByteArrayLoaderTest.java b/library/src/test/java/com/bumptech/glide/load/model/ByteArrayLoaderTest.java
deleted file mode 100644
index e17ecc6b9..000000000
--- a/library/src/test/java/com/bumptech/glide/load/model/ByteArrayLoaderTest.java
+++ /dev/null
@@ -1,58 +0,0 @@
-package com.bumptech.glide.load.model;
-
-import static org.junit.Assert.assertEquals;
-import static org.junit.Assert.assertNotNull;
-import static org.mockito.Matchers.eq;
-import static org.mockito.Mockito.verify;
-import static org.mockito.Mockito.when;
-
-import com.bumptech.glide.Priority;
-import com.bumptech.glide.load.Options;
-import com.bumptech.glide.load.data.DataFetcher;
-import java.io.IOException;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.junit.runners.JUnit4;
-import org.mockito.Mock;
-import org.mockito.MockitoAnnotations;
-
-@RunWith(JUnit4.class)
-public class ByteArrayLoaderTest {
-
-  @Mock ByteArrayLoader.Converter<Object> converter;
-  @Mock DataFetcher.DataCallback<Object> callback;
-  private ByteArrayLoader<Object> loader;
-  private Options options;
-
-  @Before
-  public void setUp() {
-    MockitoAnnotations.initMocks(this);
-    loader = new ByteArrayLoader<>(converter);
-    options = new Options();
-  }
-
-  @Test
-  public void testCanHandleByteArray() {
-    byte[] data = new byte[10];
-    DataFetcher<Object> fetcher = loader.buildLoadData(data, -1, -1, options).fetcher;
-    assertNotNull(fetcher);
-  }
-
-  @Test
-  public void testFetcherReturnsObjectReceivedFromConverter() throws IOException {
-    byte[] data = "fake".getBytes();
-    Object expected = new Object();
-    when(converter.convert(eq(data))).thenReturn(expected);
-
-    loader.buildLoadData(data, 10, 10, options).fetcher.loadData(Priority.HIGH, callback);
-    verify(callback).onDataReady(eq(expected));
-  }
-
-  @Test
-  public void testFetcherReturnsDataClassFromConverter() {
-    when(converter.getDataClass()).thenReturn(Object.class);
-    assertEquals(Object.class,
-        loader.buildLoadData(new byte[10], 10, 10, options).fetcher.getDataClass());
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/model/DataUrlLoaderTest.java b/library/src/test/java/com/bumptech/glide/load/model/DataUrlLoaderTest.java
deleted file mode 100644
index 6665f0720..000000000
--- a/library/src/test/java/com/bumptech/glide/load/model/DataUrlLoaderTest.java
+++ /dev/null
@@ -1,135 +0,0 @@
-package com.bumptech.glide.load.model;
-
-import static org.junit.Assert.assertEquals;
-import static org.junit.Assert.assertFalse;
-import static org.junit.Assert.assertNotNull;
-import static org.junit.Assert.assertNull;
-import static org.junit.Assert.assertTrue;
-
-import android.support.annotation.Nullable;
-import android.util.Base64;
-import com.bumptech.glide.Priority;
-import com.bumptech.glide.load.Options;
-import com.bumptech.glide.load.data.DataFetcher;
-import java.io.ByteArrayInputStream;
-import java.io.IOException;
-import java.io.InputStream;
-import java.util.Arrays;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.mockito.Mock;
-import org.mockito.MockitoAnnotations;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.annotation.Config;
-
-/**
- * Tests for the {@link DataUrlLoader} class.
- */
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class DataUrlLoaderTest {
-
-  // A valid base64-encoded PNG (a small "Google" logo).
-  @SuppressWarnings("SpellCheckingInspection")
-  private static final String VALID_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAALCA"
-      + "YAAAAeEY8BAAADFElEQVR42mNgAAK5ig+CiiUfSmUL3mVL5r7PE8t5M1U06027eMYLMQZKQUMDE8eyxGrOJYmdDKtC"
-      + "mTHkFfO/iCsUfTykUPFeASH6n1Es+3WjSM5rKQYqANbFcTmsC2OXYpWUKXw/R67ofQEhQ+5FecnfDnYxPJNmzAp35n"
-      + "8Gxv/7pTT+75PQBrFh4iq5b/lk8z+aiue+tZDKeaPBMC8qh2leFNgB/xkYGO+Eu+ncCnZRAiuWyHv3VDzngxMui0EW"
-      + "Pgpx6n4U4Wx7J8De86aP2blrrgaq//fwCv8/KNT//5CU0f99okn/dwse+b9fQECx9IObQvGHMrn8D66See9eiWa9s2"
-      + "GYE57DMCdi6Qs3N+6HIc4T70a4mtz2t55909u0jkE85+1Tsdx30ciWSuQ+F+VPe6kskPFc4Z6XRcp9H8t2mNxVF72G"
-      + "q066K//vZe//v4cDru//ds7V/7dx1MoXf9gtW/zRFGLO+x7x7DeVDDOBDpgZvvSut3nWXR/LyptuxgG33Axzr7rr2T"
-      + "KIZb1eIpL1ejco3mGGCWe8cRJMf7FVKO1F/y1Xww4gng6Tu+Ko7X7JTvPo/52Mm//vYMqBO2AbU/H/LUwzpQreT5LO"
-      + "f98PEhPLftslkfvGjGF6aA4QL73halh7y9XgwHVnM2G4b0G+FM549Uw440U7Q+h/eCoVSH0+GYjrrjrr2V530n16w1"
-      + "qdFyR+wUYr6YKNRtH/7QzpQHzsfwMDE9gBmxl6/29hcNdu+M8G9HmCWM7bQ6I5bxPBhk0NzmGYErT0mpOe0TVHnY+X"
-      + "HXRMQMKrQhkg9omkvZYUSHvZJ5T+Yh3IUoHUZ/mCqc87BdOe2UB9HXzZQWvCeTuNqPO2GgmghAROgFsZ8oCWtgBxDN"
-      + "ABASC1olmveEQyX/sB8SKRzJcPgbQxw0S/IoaJvksZJvsqXnLQDLhoq7n7nI3GxHOWWs4M1AQ8ic9FhdNf7ZRKeyYC"
-      + "jsrUly7AqDzOQC8glP7SFWjhCVhUKiTc5xBIebaAbg4AWcyf+qxNMPXZKoGU57UCqU+KQKGCTwsAbxBBmvLaD+cAAA"
-      + "AASUVORK5CYII=";
-
-  private static final String INVALID_URL_WRONG_SCHEME1 = "test";
-  private static final String INVALID_URL_WRONG_SCHEME2 = "http://google.com";
-  private static final String INVALID_URL_WRONG_SCHEME3 = "data:text";
-  private static final String INVALID_URL_MISSING_COMMA = "data:image/png;base64=NOT_BASE64";
-  private static final String INVALID_URL_WRONG_ENCODING = "data:image/png;base32,";
-
-  @Mock
-  private MultiModelLoaderFactory multiFactory;
-  private DataUrlLoader<InputStream> dataUrlLoader;
-  private DataFetcher<InputStream> fetcher;
-  private Options options;
-
-  @Before
-  public void setUp() throws Exception {
-    MockitoAnnotations.initMocks(this);
-    DataUrlLoader.StreamFactory factory = new DataUrlLoader.StreamFactory();
-    options = new Options();
-    dataUrlLoader = (DataUrlLoader<InputStream>) factory.build(multiFactory);
-    fetcher = dataUrlLoader.buildLoadData(VALID_PNG, -1, -1, options).fetcher;
-
-  }
-
-  @Test
-  public void testHandleDataUri() {
-    assertTrue(dataUrlLoader.handles(VALID_PNG));
-  }
-
-  @Test
-  public void testHandleFalseDataUri() {
-    assertFalse(dataUrlLoader.handles(INVALID_URL_WRONG_SCHEME1));
-    assertFalse(dataUrlLoader.handles(INVALID_URL_WRONG_SCHEME2));
-    assertFalse(dataUrlLoader.handles(INVALID_URL_WRONG_SCHEME3));
-  }
-
-  @Test
-  public void testDecode() throws IOException {
-    byte[] expected = Base64
-        .decode(VALID_PNG.substring(VALID_PNG.indexOf(',') + 1), Base64.DEFAULT);
-    CallBack callback = new CallBack();
-    fetcher.loadData(Priority.HIGH, callback);
-    byte[] result = new byte[((ByteArrayInputStream) callback.data).available()];
-    assertEquals(result.length, ((ByteArrayInputStream) callback.data).read(result));
-    assertTrue(Arrays.equals(result, expected));
-    assertNull(callback.exception);
-  }
-
-  @Test
-  public void testDecodeInvalidScheme() throws IOException {
-    fetcher = dataUrlLoader.buildLoadData(INVALID_URL_WRONG_SCHEME1, -1, -1, options).fetcher;
-    CallBack callback = new CallBack();
-    fetcher.loadData(Priority.HIGH, callback);
-    assertNotNull(callback.exception);
-  }
-
-  @Test
-  public void testDecodeMissingComma() throws IOException {
-    fetcher = dataUrlLoader.buildLoadData(INVALID_URL_MISSING_COMMA, -1, -1, options).fetcher;
-    CallBack callback = new CallBack();
-    fetcher.loadData(Priority.HIGH, callback);
-    assertNotNull(callback.exception);
-  }
-
-  @Test
-  public void testDecodeWrongEncoding() throws IOException {
-    fetcher = dataUrlLoader.buildLoadData(INVALID_URL_WRONG_ENCODING, -1, -1, options).fetcher;
-    CallBack callback = new CallBack();
-    fetcher.loadData(Priority.HIGH, callback);
-    assertNotNull(callback.exception);
-  }
-
-  private class CallBack implements DataFetcher.DataCallback<Object> {
-
-    public Object data;
-    public Exception exception;
-
-    @Override
-    public void onDataReady(@Nullable Object data) {
-      this.data = data;
-    }
-
-    @Override
-    public void onLoadFailed(Exception e) {
-      this.exception = e;
-    }
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/model/GlideUrlTest.java b/library/src/test/java/com/bumptech/glide/load/model/GlideUrlTest.java
deleted file mode 100644
index 2548b0e59..000000000
--- a/library/src/test/java/com/bumptech/glide/load/model/GlideUrlTest.java
+++ /dev/null
@@ -1,116 +0,0 @@
-package com.bumptech.glide.load.model;
-
-import static org.junit.Assert.assertEquals;
-import static org.mockito.Mockito.mock;
-
-import com.google.common.testing.EqualsTester;
-import java.net.MalformedURLException;
-import java.net.URL;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class GlideUrlTest {
-
-  @Test(expected = NullPointerException.class)
-  public void testThrowsIfGivenURLIsNull() {
-    new GlideUrl((URL) null);
-  }
-
-  @Test(expected = IllegalArgumentException.class)
-  public void testThrowsIfGivenStringUrlIsNull() {
-    new GlideUrl((String) null);
-  }
-
-  @Test(expected = IllegalArgumentException.class)
-  public void testThrowsIfGivenStringURLIsEmpty() {
-    new GlideUrl("");
-  }
-
-  @Test
-  public void testCanCompareGlideUrlsCreatedWithDifferentTypes() throws MalformedURLException {
-    String stringUrl = "http://www.google.com";
-    URL url = new URL(stringUrl);
-
-    assertEquals(new GlideUrl(stringUrl), new GlideUrl(url));
-  }
-
-  @Test
-  public void testCanCompareHashcodeOfGlideUrlsCreatedWithDifferentTypes()
-      throws MalformedURLException {
-    String stringUrl = "http://nytimes.com";
-    URL url = new URL(stringUrl);
-
-    assertEquals(new GlideUrl(stringUrl).hashCode(), new GlideUrl(url).hashCode());
-  }
-
-  @Test
-  public void testProducesEquivalentUrlFromString() throws MalformedURLException {
-    String stringUrl = "http://www.google.com";
-    GlideUrl glideUrl = new GlideUrl(stringUrl);
-
-    URL url = glideUrl.toURL();
-    assertEquals(stringUrl, url.toString());
-  }
-
-  @Test
-  public void testProducesEquivalentStringFromURL() throws MalformedURLException {
-    String expected = "http://www.washingtonpost.com";
-    URL url = new URL(expected);
-    GlideUrl glideUrl = new GlideUrl(url);
-
-    assertEquals(expected, glideUrl.toStringUrl());
-  }
-
-  @Test
-  public void testIssue133() throws MalformedURLException {
-    // u00e0=
-    final String original = "http://www.commitstrip.com/wp-content/uploads/2014/07/"
-        + "Excel-\u00E0-toutes-les-sauces-650-finalenglish.jpg";
-
-    final String escaped = "http://www.commitstrip.com/wp-content/uploads/2014/07/"
-        + "Excel-%C3%A0-toutes-les-sauces-650-finalenglish.jpg";
-
-    GlideUrl glideUrlFromString = new GlideUrl(original);
-    assertEquals(escaped, glideUrlFromString.toURL().toString());
-
-    GlideUrl glideUrlFromEscapedString = new GlideUrl(escaped);
-    assertEquals(escaped, glideUrlFromEscapedString.toURL().toString());
-
-    GlideUrl glideUrlFromUrl = new GlideUrl(new URL(original));
-    assertEquals(escaped, glideUrlFromUrl.toURL().toString());
-
-    GlideUrl glideUrlFromEscapedUrl = new GlideUrl(new URL(escaped));
-    assertEquals(escaped, glideUrlFromEscapedUrl.toURL().toString());
-  }
-
-  @Test
-  public void testEquals() throws MalformedURLException {
-    Headers headers = mock(Headers.class);
-    Headers otherHeaders = mock(Headers.class);
-    String url = "http://www.google.com";
-    String otherUrl = "http://mail.google.com";
-    new EqualsTester()
-        .addEqualityGroup(
-            new GlideUrl(url),
-            new GlideUrl(url),
-            new GlideUrl(new URL(url)),
-            new GlideUrl(new URL(url))
-        )
-        .addEqualityGroup(
-            new GlideUrl(otherUrl),
-            new GlideUrl(new URL(otherUrl))
-        )
-        .addEqualityGroup(
-            new GlideUrl(url, headers),
-            new GlideUrl(new URL(url), headers)
-        )
-        .addEqualityGroup(
-            new GlideUrl(url, otherHeaders),
-            new GlideUrl(new URL(url), otherHeaders)
-        ).testEquals();
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/model/LazyHeadersTest.java b/library/src/test/java/com/bumptech/glide/load/model/LazyHeadersTest.java
deleted file mode 100644
index 907acb6ae..000000000
--- a/library/src/test/java/com/bumptech/glide/load/model/LazyHeadersTest.java
+++ /dev/null
@@ -1,357 +0,0 @@
-package com.bumptech.glide.load.model;
-
-import static com.google.common.truth.Truth.assertThat;
-import static org.mockito.Mockito.mock;
-import static org.mockito.Mockito.when;
-
-import android.support.annotation.Nullable;
-import com.bumptech.glide.load.model.LazyHeaders.Builder;
-import com.google.common.testing.EqualsTester;
-import java.util.Map;
-import org.junit.After;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class LazyHeadersTest {
-  private static final String DEFAULT_USER_AGENT = "default_user_agent";
-  private static final String DEFAULT_USER_AGENT_PROPERTY = "http.agent";
-  private String initialUserAgent;
-
-  @Before
-  public void setUp() {
-    initialUserAgent = System.getProperty(DEFAULT_USER_AGENT_PROPERTY);
-    System.setProperty(DEFAULT_USER_AGENT_PROPERTY, DEFAULT_USER_AGENT);
-  }
-
-  @After
-  public void tearDown() {
-    if (initialUserAgent != null) {
-      System.setProperty(DEFAULT_USER_AGENT_PROPERTY, initialUserAgent);
-    }
-  }
-
-  @Test
-  public void testIncludesEagerHeaders() {
-    Map<String, String> headers = new Builder()
-        .addHeader("key", "value")
-        .build()
-        .getHeaders();
-    assertThat(headers).containsEntry("key", "value");
-  }
-
-  @Test
-  public void testIncludesLazyHeaders() {
-    LazyHeaderFactory factory = mock(LazyHeaderFactory.class);
-    when(factory.buildHeader()).thenReturn("value");
-    Map<String, String> headers = new Builder()
-        .addHeader("key", factory)
-        .build()
-        .getHeaders();
-
-    assertThat(headers).containsEntry("key", "value");
-  }
-
-  @Test
-  public void testMultipleEagerValuesAreSeparatedByCommas() {
-    Map<String, String> headers = new Builder()
-        .addHeader("key", "first")
-        .addHeader("key", "second")
-        .build()
-        .getHeaders();
-
-    assertThat(headers).containsEntry("key", "first,second");
-  }
-
-  @Test
-  public void testMultipleLazyValuesAreSeparatedByCommas() {
-    LazyHeaderFactory first = mock(LazyHeaderFactory.class);
-    when(first.buildHeader()).thenReturn("first");
-    LazyHeaderFactory second = mock(LazyHeaderFactory.class);
-    when(second.buildHeader()).thenReturn("second");
-
-    Map<String, String> headers = new Builder()
-        .addHeader("key", first)
-        .addHeader("key", second)
-        .build()
-        .getHeaders();
-    assertThat(headers).containsEntry("key", "first,second");
-  }
-
-  @Test
-  public void testMixedEagerAndLazyValuesAreIncluded() {
-    LazyHeaderFactory factory = mock(LazyHeaderFactory.class);
-    when(factory.buildHeader()).thenReturn("first");
-    Map<String, String> headers = new Builder()
-        .addHeader("key", factory)
-        .addHeader("key", "second")
-        .build()
-        .getHeaders();
-
-    assertThat(headers).containsEntry("key", "first,second");
-
-    headers = new Builder()
-        .addHeader("key", "second")
-        .addHeader("key", factory)
-        .build()
-        .getHeaders();
-
-    assertThat(headers).containsEntry("key", "second,first");
-  }
-
-  @Test
-  public void testCanAddMultipleKeys() {
-    LazyHeaderFactory factory = mock(LazyHeaderFactory.class);
-    when(factory.buildHeader()).thenReturn("lazy");
-    Map<String, String> headers = new Builder()
-        .addHeader("first", factory)
-        .addHeader("second", "eager")
-        .build()
-        .getHeaders();
-
-    assertThat(headers).containsEntry("first", "lazy");
-    assertThat(headers).containsEntry("second", "eager");
-  }
-
-  @Test
-  public void testUpdatingBuilderAfterBuildingDoesNotModifyOriginalHeaders() {
-    Builder builder = new Builder();
-    builder.addHeader("key", "firstValue");
-    builder.addHeader("otherKey", "otherValue");
-    LazyHeaders first = builder.build();
-
-    LazyHeaderFactory factory = mock(LazyHeaderFactory.class);
-    when(factory.buildHeader()).thenReturn("otherValue");
-    builder.addHeader("key", "secondValue");
-    builder.setHeader("otherKey", factory);
-    LazyHeaders second = builder.build();
-
-    assertThat(first.getHeaders()).isNotEqualTo(second.getHeaders());
-
-    assertThat(first.getHeaders()).containsEntry("key", "firstValue");
-    assertThat(first.getHeaders()).containsEntry("otherKey", "otherValue");
-
-    assertThat(second.getHeaders()).containsEntry("key", "firstValue,secondValue");
-    assertThat(second.getHeaders()).containsEntry("otherKey", "otherValue");
-  }
-
-  @Test
-  public void testSetHeaderReplacesExistingHeaders() {
-    Builder builder = new Builder();
-    builder.addHeader("key", "first")
-        .addHeader("key", "second")
-        .setHeader("key", "third");
-    LazyHeaders headers = builder.build();
-    assertThat(headers.getHeaders()).containsEntry("key", "third");
-  }
-
-  @Test
-  public void testSetHeaderWithNullStringRemovesExistingHeader() {
-    Builder builder = new Builder();
-    builder.addHeader("key", "first")
-        .addHeader("key", "second")
-        .setHeader("key", (String) null);
-    LazyHeaders headers = builder.build();
-    assertThat(headers.getHeaders()).doesNotContainKey("key");
-  }
-
-  @Test
-  public void testSetHeaderWithNullLazyHeaderFactoryRemovesExistingHeader() {
-    Builder builder = new Builder();
-    builder.addHeader("key", "first")
-        .addHeader("key", "second")
-        .setHeader("key", (LazyHeaderFactory) null);
-    LazyHeaders headers = builder.build();
-    assertThat(headers.getHeaders()).doesNotContainKey("key");
-  }
-
-  @Test
-  public void testAddingEncodingHeaderReplacesDefaultThenAppends() {
-    Builder builder = new Builder();
-    builder.addHeader("Accept-Encoding", "false");
-
-    LazyHeaders headers = builder.build();
-    assertThat(headers.getHeaders()).containsEntry("Accept-Encoding", "false");
-
-    builder.addHeader("Accept-Encoding", "true");
-    headers = builder.build();
-    assertThat(headers.getHeaders()).containsEntry("Accept-Encoding", "false,true");
-  }
-
-  @Test
-  public void testRemovingAndAddingEncodingHeaderReplacesDefaultThenAppends() {
-    Builder builder = new Builder();
-    builder.setHeader("Accept-Encoding", (String) null);
-    LazyHeaders headers = builder.build();
-    assertThat(headers.getHeaders()).doesNotContainKey("Accept-Encoding");
-
-    builder.addHeader("Accept-Encoding", "false");
-    headers = builder.build();
-    assertThat(headers.getHeaders()).containsEntry("Accept-Encoding", "false");
-
-    builder.addHeader("Accept-Encoding", "true");
-    headers = builder.build();
-    assertThat(headers.getHeaders()).containsEntry("Accept-Encoding", "false,true");
-  }
-
-  @Test
-  public void testAddingUserAgentHeaderReplacesDefaultThenAppends() {
-    Builder builder = new Builder();
-    builder.addHeader("User-Agent", "false");
-
-    LazyHeaders headers = builder.build();
-    assertThat(headers.getHeaders()).containsEntry("User-Agent", "false");
-
-    builder.addHeader("User-Agent", "true");
-    headers = builder.build();
-    assertThat(headers.getHeaders()).containsEntry("User-Agent", "false,true");
-  }
-
-  @Test
-  public void testRemovingAndAddingUserAgentHeaderReplacesDefaultThenAppends() {
-    Builder builder = new Builder();
-    builder.setHeader("User-Agent", (String) null);
-    LazyHeaders headers = builder.build();
-    assertThat(headers.getHeaders()).doesNotContainKey("User-Agent");
-
-    builder.addHeader("User-Agent", "false");
-    headers = builder.build();
-    assertThat(headers.getHeaders()).containsEntry("User-Agent", "false");
-
-    builder.addHeader("User-Agent", "true");
-    headers = builder.build();
-    assertThat(headers.getHeaders()).containsEntry("User-Agent", "false,true");
-  }
-
-  @Test
-  public void testKeyNotIncludedWithFactoryThatReturnsNullValue() {
-    Builder builder = new Builder();
-    builder.setHeader("test", new LazyHeaderFactory() {
-      @Nullable
-      @Override
-      public String buildHeader() {
-        return null;
-      }
-    });
-    LazyHeaders headers = builder.build();
-    assertThat(headers.getHeaders()).doesNotContainKey("test");
-  }
-
-  @Test
-  public void testKeyNotIncludedWithFactoryThatReturnsEmptyValue() {
-    Builder builder = new Builder();
-    builder.setHeader("test", new LazyHeaderFactory() {
-      @Nullable
-      @Override
-      public String buildHeader() {
-        return "";
-      }
-    });
-    LazyHeaders headers = builder.build();
-    assertThat(headers.getHeaders()).doesNotContainKey("test");
-  }
-
-  @Test
-  public void testKeyIncludedWithOneFactoryThatReturnsNullAndOneFactoryThatDoesNotReturnNull() {
-    Builder builder = new Builder();
-    builder.addHeader("test", new LazyHeaderFactory() {
-      @Nullable
-      @Override
-      public String buildHeader() {
-        return null;
-      }
-    });
-    builder.addHeader("test", new LazyHeaderFactory() {
-      @Nullable
-      @Override
-      public String buildHeader() {
-        return "value";
-      }
-    });
-    LazyHeaders headers = builder.build();
-    assertThat(headers.getHeaders()).containsEntry("test", "value");
-  }
-
-  @Test
-  public void testEquals() {
-    LazyHeaderFactory firstLazyFactory = mock(LazyHeaderFactory.class);
-    LazyHeaderFactory secondLazyFactory = mock(LazyHeaderFactory.class);
-    new EqualsTester()
-        .addEqualityGroup(
-            new Builder().build(),
-            new Builder().build()
-        )
-        .addEqualityGroup(
-            new Builder().addHeader("key", "value").build(),
-            new Builder().addHeader("key", "value").build()
-        )
-        .addEqualityGroup(
-            new Builder().addHeader("key", "value").addHeader("key", "value").build()
-        )
-        .addEqualityGroup(
-            new Builder().addHeader("key", firstLazyFactory).build(),
-            new Builder().addHeader("key", firstLazyFactory).build()
-        )
-        .addEqualityGroup(
-            new Builder()
-                .addHeader("key", firstLazyFactory)
-                .addHeader("key", firstLazyFactory)
-                .build()
-        )
-        .addEqualityGroup(
-            new Builder()
-                .addHeader("firstKey", "value")
-                .addHeader("secondKey", firstLazyFactory)
-                .build(),
-            new Builder()
-                .addHeader("secondKey", firstLazyFactory)
-                .addHeader("firstKey", "value")
-                .build()
-        )
-        .addEqualityGroup(
-            new Builder().addHeader("key", "secondValue")
-        )
-        .addEqualityGroup(
-            new Builder().addHeader("secondKey", "value")
-        )
-        .addEqualityGroup(
-            new Builder().addHeader("key", secondLazyFactory)
-        )
-        .addEqualityGroup(
-            new Builder().addHeader("secondKey", firstLazyFactory)
-        )
-        .addEqualityGroup(
-            new Builder()
-                .addHeader("firstKey", "firstValue")
-                .addHeader("secondKey", "secondValue")
-                .build(),
-            new Builder()
-                .addHeader("firstKey", "firstValue")
-                .addHeader("secondKey", "secondValue")
-                .build(),
-            new Builder()
-                .addHeader("secondKey", "secondValue")
-                .addHeader("firstKey", "firstValue")
-                .build()
-        )
-        .addEqualityGroup(
-            new Builder()
-                .addHeader("firstKey", firstLazyFactory)
-                .addHeader("secondKey", secondLazyFactory)
-                .build(),
-            new Builder()
-                .addHeader("firstKey", firstLazyFactory)
-                .addHeader("secondKey", secondLazyFactory)
-                .build(),
-            new Builder()
-                .addHeader("secondKey", secondLazyFactory)
-                .addHeader("firstKey", firstLazyFactory)
-                .build()
-        )
-        .testEquals();
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/model/ModelCacheTest.java b/library/src/test/java/com/bumptech/glide/load/model/ModelCacheTest.java
deleted file mode 100644
index 041f67992..000000000
--- a/library/src/test/java/com/bumptech/glide/load/model/ModelCacheTest.java
+++ /dev/null
@@ -1,54 +0,0 @@
-package com.bumptech.glide.load.model;
-
-import static org.junit.Assert.assertEquals;
-
-import com.google.common.testing.EqualsTester;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.junit.runners.JUnit4;
-
-@RunWith(JUnit4.class)
-public class ModelCacheTest {
-
-  private ModelCache<Object, Object> cache;
-
-  @Before
-  public void setUp() {
-    cache = new ModelCache<>(10);
-  }
-
-  @Test
-  public void testModelKeyEquivalence() {
-    new EqualsTester().addEqualityGroup(ModelCache.ModelKey.get(14f, 100, 200),
-        ModelCache.ModelKey.get(14f, 100, 200))
-        .addEqualityGroup(ModelCache.ModelKey.get(13f, 100, 200))
-        .addEqualityGroup(ModelCache.ModelKey.get(14f, 200, 200))
-        .addEqualityGroup(ModelCache.ModelKey.get(14f, 100, 300)).testEquals();
-  }
-
-  @Test
-  public void testCanSetAndGetModel() {
-    Object model = new Object();
-    int width = 10;
-    int height = 20;
-    Object result = new Object();
-    cache.put(model, width, height, result);
-    assertEquals(result, cache.get(model, width, height));
-  }
-
-  @Test
-  public void testCanSetAndGetMultipleResultsWithDifferentDimensionsForSameObject() {
-    Object model = new Object();
-    int firstWidth = 10, firstHeight = 20;
-    Object firstResult = new Object();
-    int secondWidth = 30, secondHeight = 40;
-    Object secondResult = new Object();
-
-    cache.put(model, firstWidth, firstHeight, firstResult);
-    cache.put(model, secondWidth, secondHeight, secondResult);
-
-    assertEquals(firstResult, cache.get(model, firstWidth, firstHeight));
-    assertEquals(secondResult, cache.get(model, secondWidth, secondHeight));
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/model/MultiModelLoaderFactoryTest.java b/library/src/test/java/com/bumptech/glide/load/model/MultiModelLoaderFactoryTest.java
deleted file mode 100644
index b6acd775c..000000000
--- a/library/src/test/java/com/bumptech/glide/load/model/MultiModelLoaderFactoryTest.java
+++ /dev/null
@@ -1,307 +0,0 @@
-package com.bumptech.glide.load.model;
-
-import static com.google.common.truth.Truth.assertThat;
-import static org.mockito.Matchers.eq;
-import static org.mockito.Mockito.mock;
-import static org.mockito.Mockito.verify;
-import static org.mockito.Mockito.when;
-
-import android.support.v4.util.Pools.Pool;
-import com.bumptech.glide.Registry.NoModelLoaderAvailableException;
-import com.bumptech.glide.tests.Util;
-import com.bumptech.glide.util.pool.FactoryPools;
-import java.util.ArrayList;
-import java.util.List;
-import org.junit.Before;
-import org.junit.Rule;
-import org.junit.Test;
-import org.junit.rules.ExpectedException;
-import org.junit.runner.RunWith;
-import org.mockito.ArgumentCaptor;
-import org.mockito.Mock;
-import org.mockito.MockitoAnnotations;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class MultiModelLoaderFactoryTest {
-
-  @Mock ModelLoaderFactory<String, String> firstFactory;
-  @Mock ModelLoader<String, String> firstModelLoader;
-  @Mock MultiModelLoaderFactory.Factory multiModelLoaderFactory;
-  @Mock ModelLoaderFactory<String, String> secondFactory;
-  @Mock ModelLoader<String, String> secondModelLoader;
-
-  @Rule public ExpectedException exception = ExpectedException.none();
-
-  private Pool<List<Exception>> exceptionListPool;
-  private MultiModelLoaderFactory multiFactory;
-
-  @Before
-  public void setUp() {
-    MockitoAnnotations.initMocks(this);
-    exceptionListPool = FactoryPools.threadSafeList();
-
-    multiFactory = new MultiModelLoaderFactory(exceptionListPool,
-        multiModelLoaderFactory);
-    when(firstFactory.build(eq(multiFactory))).thenReturn(firstModelLoader);
-    when(secondFactory.build(eq(multiFactory))).thenReturn(secondModelLoader);
-  }
-
-  @Test
-  public void testAppend_addsModelLoaderForModelClass() {
-    multiFactory.append(String.class, String.class, firstFactory);
-
-    List<ModelLoader<String, ?>> modelLoaders = multiFactory.build(String.class);
-    assertThat(modelLoaders).containsExactly(firstModelLoader);
-  }
-
-  @Test
-  public void testAppend_addsModelLoaderForModelAndDataClass() {
-    multiFactory.append(String.class, String.class, firstFactory);
-
-    ModelLoader<String, String> modelLoader = multiFactory.build(String.class, String.class);
-    assertThat(modelLoader).isEqualTo(firstModelLoader);
-  }
-
-  @Test
-  public void testPrepend_addsModelLoaderForModelClass() {
-    multiFactory.prepend(String.class, String.class, firstFactory);
-
-    List<ModelLoader<String, ?>> modelLoaders = multiFactory.build(String.class);
-    assertThat(modelLoaders).containsExactly(firstModelLoader);
-  }
-
-  @Test
-  public void testPrepend_addsModelLoaderForModelAndDataClass() {
-    multiFactory.prepend(String.class, String.class, firstFactory);
-
-    ModelLoader<String, String> modelLoader = multiFactory.build(String.class, String.class);
-    assertThat(modelLoader).isEqualTo(firstModelLoader);
-  }
-
-  @Test
-  public void testReplace_addsModelLoaderForModelClass() {
-    multiFactory.replace(String.class, String.class, firstFactory);
-
-    List<ModelLoader<String, ?>> modelLoaders = multiFactory.build(String.class);
-    assertThat(modelLoaders).containsExactly(firstModelLoader);
-  }
-
-  @Test
-  public void testReplace_addsModelLoaderForModelAndDataClasses() {
-    multiFactory.replace(String.class, String.class, firstFactory);
-
-    ModelLoader<String, String> modelLoader = multiFactory.build(String.class, String.class);
-    assertThat(modelLoader).isEqualTo(firstModelLoader);
-  }
-
-  @Test
-  public void testReplace_returnsPreviouslyRegisteredFactories_withModelAndDataClasses() {
-    ModelLoaderFactory<String, String> firstOtherFactory = mockFactory();
-    ModelLoaderFactory<String, String> secondOtherFactory = mockFactory();
-    multiFactory.append(String.class, String.class, firstOtherFactory);
-    multiFactory.append(String.class, String.class, secondOtherFactory);
-
-    List<ModelLoaderFactory<String, String>> removed =
-        multiFactory.replace(String.class, String.class, firstFactory);
-    assertThat(removed).containsExactly(firstOtherFactory, secondOtherFactory);
-  }
-
-  @Test
-  public void testReplace_removesPreviouslyRegisteredFactories_withModelAndDataClasses() {
-    appendFactoryFor(String.class, String.class);
-    appendFactoryFor(String.class, String.class);
-
-    multiFactory.replace(String.class, String.class, firstFactory);
-
-    List<ModelLoader<String, ?>> modelLoaders = multiFactory.build(String.class);
-    assertThat(modelLoaders).containsExactly(firstModelLoader);
-  }
-
-  @Test
-  public void testRemove_returnsPreviouslyRegisteredFactories_withModelAndDataClasses() {
-    ModelLoaderFactory<String, String> other = mockFactory();
-    multiFactory.append(String.class, String.class, other);
-    multiFactory.append(String.class, String.class, firstFactory);
-
-    List<ModelLoaderFactory<String, String>> removed =
-        multiFactory.remove(String.class, String.class);
-    assertThat(removed).containsExactly(firstFactory, other);
-  }
-
-  @Test
-  public void testRemove_removesPreviouslyRegisteredFactories_withModelAndDataClasses() {
-    appendFactoryFor(String.class, String.class);
-    appendFactoryFor(String.class, String.class);
-
-    multiFactory.remove(String.class, String.class);
-
-    List<ModelLoader<String, ?>> modelLoaders = multiFactory.build(String.class);
-    assertThat(modelLoaders).isEmpty();
-  }
-
-  @Test
-  public void testBuild_withModelClass_returnsMultipleModelLoaders_ofGivenModelAndDataClasses() {
-    ModelLoader<String, String> otherLoader = appendFactoryFor(String.class, String.class);
-    multiFactory.append(String.class, String.class, firstFactory);
-
-    List<ModelLoader<String, ?>> modelLoaders = multiFactory.build(String.class);
-    assertThat(modelLoaders).containsExactly(otherLoader, firstModelLoader);
-  }
-
-  @Test
-  public void
-  testBuild_withModelClass_returnsMultipleModelLoaders_ofGivenModelClassWithDifferentDataClasses() {
-    ModelLoader<String, Integer> otherLoader = appendFactoryFor(String.class, Integer.class);
-    multiFactory.append(String.class, String.class, firstFactory);
-
-    List<ModelLoader<String, ?>> modelLoaders = multiFactory.build(String.class);
-    assertThat(modelLoaders).containsExactly(otherLoader, firstModelLoader);
-  }
-
-  @Test
-  public void testBuild_withModelClass_excludesModelLoadersForOtherModelClasses() {
-    multiFactory.append(String.class, String.class, firstFactory);
-    List<ModelLoader<Integer, ?>> modelLoaders = multiFactory.build(Integer.class);
-    assertThat(modelLoaders).doesNotContain(firstModelLoader);
-  }
-
-  @Test
-  public void
-  testBuild_withModelAndDataClasses_returnsMultipleModelLoaders_ofGivenModelAndDataClasses() {
-    ModelLoader<String, String> otherLoader = appendFactoryFor(String.class, String.class);
-    multiFactory.append(String.class, String.class, firstFactory);
-
-    List<ModelLoader<String, String>> modelLoaders = buildModelLoaders(String.class, String.class);
-    assertThat(modelLoaders).containsExactly(otherLoader, firstModelLoader);
-  }
-
-  @Test
-  public void testBuild_withModelAndDataClasses_excludesModelLoadersForOtherDataClasses() {
-    multiFactory.append(String.class, String.class, firstFactory);
-
-    exception.expect(NoModelLoaderAvailableException.class);
-    multiFactory.build(String.class, Integer.class);
-  }
-
-  @Test
-  public void testBuild_withModelAndDataClasses_excludesModelLoadersForOtherModelClasses() {
-    multiFactory.append(String.class, String.class, firstFactory);
-
-    exception.expect(NoModelLoaderAvailableException.class);
-    multiFactory.build(Integer.class, String.class);
-  }
-
-  @Test
-  public void testBuild_withModelClass_doesNotMatchSubclassesOfModelClass() {
-    ModelLoader<String, Object> subclass = appendFactoryFor(String.class, Object.class);
-    List<ModelLoader<Object, ?>> modelLoaders = multiFactory.build(Object.class);
-    assertThat(modelLoaders).doesNotContain(subclass);
-  }
-
-  @Test
-  public void testBuild_withModelClass_matchesSuperclassesOfModelClass() {
-    ModelLoader<Object, Object> superclass = appendFactoryFor(Object.class, Object.class);
-    List<ModelLoader<String, ?>> modelLoaders = multiFactory.build(String.class);
-    assertThat(modelLoaders).contains(superclass);
-  }
-
-  @Test
-  public void testBuild_withModelAndDataClass_doesNotMatchSubclassesOfModelClass() {
-    appendFactoryFor(String.class, Object.class);
-    exception.expect(NoModelLoaderAvailableException.class);
-    multiFactory.build(Object.class, Object.class);
-  }
-
-  @Test
-  public void testBuild_withModelAndDataClass_doesNotMatchSubclassesOfDataClass() {
-    appendFactoryFor(Object.class, String.class);
-    exception.expect(NoModelLoaderAvailableException.class);
-    multiFactory.build(Object.class, Object.class);
-  }
-
-  @Test
-  public void testBuild_withModelAndDataClass_doesMatchSuperclassesOfModelClass() {
-    ModelLoader<Object, Object> firstSuperClass = appendFactoryFor(Object.class, Object.class);
-    ModelLoader<Object, Object> secondSuperClass = appendFactoryFor(Object.class, Object.class);
-    List<ModelLoader<String, Object>> modelLoaders = buildModelLoaders(String.class, Object.class);
-    assertThat(modelLoaders).containsExactly(firstSuperClass, secondSuperClass);
-  }
-
-  @Test
-  public void testBuild_withModelAndDataClass_matchesSuperclassesOfDataClass() {
-    ModelLoader<Object, Object> firstSuperClass = appendFactoryFor(Object.class, Object.class);
-    ModelLoader<Object, Object> secondSuperClass = appendFactoryFor(Object.class, Object.class);
-    List<ModelLoader<Object, String>> modelLoaders = buildModelLoaders(Object.class, String.class);
-    assertThat(modelLoaders).containsExactly(firstSuperClass, secondSuperClass);
-  }
-
-  @Test
-  public void testBuild_withModelAndDataClass_matchesSuperclassOfModelAndDataClass() {
-    ModelLoader<Object, Object> firstSuperclass = appendFactoryFor(Object.class, Object.class);
-    ModelLoader<Object, Object> secondSuperclass = appendFactoryFor(Object.class, Object.class);
-    List<ModelLoader<String, String>> modelLoaders = buildModelLoaders(String.class, String.class);
-    assertThat(modelLoaders).containsExactly(firstSuperclass, secondSuperclass);
-  }
-
-  @Test
-  public void testBuild_respectsAppendOrder() {
-    ModelLoader<String, String> first = appendFactoryFor(String.class, String.class);
-    ModelLoader<String, String> second = appendFactoryFor(String.class, String.class);
-    ModelLoader<String, String> third = appendFactoryFor(String.class, String.class);
-    List<ModelLoader<String, String>> modelLoaders = buildModelLoaders(String.class, String.class);
-    assertThat(modelLoaders).containsExactly(first, second, third).inOrder();
-  }
-
-  @Test
-  public void testBuild_respectsPrependOrder() {
-    ModelLoader<String, String> first = prependFactoryFor(String.class, String.class);
-    ModelLoader<String, String> second = prependFactoryFor(String.class, String.class);
-    ModelLoader<String, String> third = prependFactoryFor(String.class, String.class);
-    List<ModelLoader<String, String>> modelLoaders = buildModelLoaders(String.class, String.class);
-    assertThat(modelLoaders).containsExactly(third, second, first).inOrder();
-  }
-
-  private <X, Y> List<ModelLoader<X, Y>> buildModelLoaders(Class<X> modelClass,
-      Class<Y> dataClass) {
-    ArgumentCaptor<List<ModelLoader<X, Y>>> captor = Util.cast(ArgumentCaptor.forClass(List.class));
-    multiFactory.build(modelClass, dataClass);
-    verify(multiModelLoaderFactory).build(captor.capture(), eq(exceptionListPool));
-
-    List<ModelLoader<X, Y>> captured = captor.getValue();
-    List<ModelLoader<X, Y>> result = new ArrayList<>(captured.size());
-    for (ModelLoader<X, Y> modelLoader : captured) {
-      result.add(modelLoader);
-    }
-    return result;
-  }
-
-  private <X, Y> ModelLoader<X, Y> appendFactoryFor(Class<X> modelClass, Class<Y> dataClass) {
-    return registerFactoryFor(modelClass, dataClass, true /*append*/);
-  }
-
-  private <X, Y> ModelLoader<X, Y> prependFactoryFor(Class<X> modelClass, Class<Y> dataClass) {
-    return registerFactoryFor(modelClass, dataClass, false /*append*/);
-  }
-
-  private <X, Y> ModelLoader<X, Y> registerFactoryFor(
-      Class<X> modelClass, Class<Y> dataClass, boolean append) {
-    ModelLoaderFactory<X, Y> factory = mockFactory();
-    @SuppressWarnings("unchecked") ModelLoader<X, Y> loader = mock(ModelLoader.class);
-    when(factory.build(eq(multiFactory))).thenReturn(loader);
-    if (append) {
-      multiFactory.append(modelClass, dataClass, factory);
-    } else {
-      multiFactory.prepend(modelClass, dataClass, factory);
-    }
-    return loader;
-  }
-
-  @SuppressWarnings("unchecked")
-  private static <X, Y> ModelLoaderFactory<X, Y> mockFactory() {
-    return mock(ModelLoaderFactory.class);
-  }
-}
-
diff --git a/library/src/test/java/com/bumptech/glide/load/model/ResourceLoaderTest.java b/library/src/test/java/com/bumptech/glide/load/model/ResourceLoaderTest.java
deleted file mode 100644
index a5038c23a..000000000
--- a/library/src/test/java/com/bumptech/glide/load/model/ResourceLoaderTest.java
+++ /dev/null
@@ -1,65 +0,0 @@
-package com.bumptech.glide.load.model;
-
-import static com.google.common.truth.Truth.assertThat;
-import static org.junit.Assert.assertEquals;
-import static org.junit.Assert.assertTrue;
-import static org.mockito.Matchers.any;
-import static org.mockito.Matchers.anyInt;
-import static org.mockito.Matchers.eq;
-import static org.mockito.Mockito.never;
-import static org.mockito.Mockito.verify;
-import static org.mockito.Mockito.when;
-
-import android.net.Uri;
-import com.bumptech.glide.load.Key;
-import com.bumptech.glide.load.Options;
-import com.bumptech.glide.load.data.DataFetcher;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.mockito.Mock;
-import org.mockito.MockitoAnnotations;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.RuntimeEnvironment;
-import org.robolectric.annotation.Config;
-
-/**
- * Tests for the {@link com.bumptech.glide.load.model.ResourceLoader} class.
- */
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class ResourceLoaderTest {
-
-  @Mock ModelLoader<Uri, Object> uriLoader;
-  @Mock DataFetcher<Object> fetcher;
-  @Mock Key key;
-  private Options options;
-
-  private ResourceLoader<Object> loader;
-
-  @Before
-  public void setUp() {
-    MockitoAnnotations.initMocks(this);
-    options = new Options();
-
-    loader = new ResourceLoader<>(RuntimeEnvironment.application.getResources(), uriLoader);
-  }
-
-  @Test
-  public void testCanHandleId() {
-    int id = android.R.drawable.star_off;
-    Uri contentUri = Uri.parse("android.resource://android/drawable/star_off");
-    when(uriLoader.buildLoadData(eq(contentUri), anyInt(), anyInt(), any(Options.class)))
-        .thenReturn(new ModelLoader.LoadData<>(key, fetcher));
-
-    assertTrue(loader.handles(id));
-    assertEquals(fetcher, loader.buildLoadData(id, 100, 100, new Options()).fetcher);
-  }
-
-    @Test
-    public void testDoesNotThrowOnInvalidOrMissingId() {
-      assertThat(loader.buildLoadData(1234, 0, 0, options)).isNull();
-      verify(uriLoader, never()).buildLoadData(any(Uri.class), anyInt(), anyInt(),
-          any(Options.class));
-    }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/model/StreamEncoderTest.java b/library/src/test/java/com/bumptech/glide/load/model/StreamEncoderTest.java
deleted file mode 100644
index 3eecb3718..000000000
--- a/library/src/test/java/com/bumptech/glide/load/model/StreamEncoderTest.java
+++ /dev/null
@@ -1,46 +0,0 @@
-package com.bumptech.glide.load.model;
-
-import static org.junit.Assert.assertEquals;
-
-import com.bumptech.glide.load.Options;
-import com.bumptech.glide.load.engine.bitmap_recycle.LruArrayPool;
-import com.bumptech.glide.util.ByteBufferUtil;
-import java.io.ByteArrayInputStream;
-import java.io.File;
-import java.io.IOException;
-import org.junit.After;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.RuntimeEnvironment;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class StreamEncoderTest {
-  private StreamEncoder encoder;
-  private File file;
-
-  @Before
-  public void setUp() {
-    encoder = new StreamEncoder(new LruArrayPool());
-    file = new File(RuntimeEnvironment.application.getCacheDir(), "test");
-  }
-
-  @After
-  public void tearDown() {
-    file.delete();
-  }
-
-  @Test
-  public void testWritesDataFromInputStreamToOutputStream() throws IOException {
-    String fakeData = "SomeRandomFakeData";
-    ByteArrayInputStream is = new ByteArrayInputStream(fakeData.getBytes());
-    encoder.encode(is, file, new Options());
-
-    byte[] data = ByteBufferUtil.toBytes(ByteBufferUtil.fromFile(file));
-
-    assertEquals(fakeData, new String(data));
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/model/StringLoaderTest.java b/library/src/test/java/com/bumptech/glide/load/model/StringLoaderTest.java
deleted file mode 100644
index 42bc40545..000000000
--- a/library/src/test/java/com/bumptech/glide/load/model/StringLoaderTest.java
+++ /dev/null
@@ -1,149 +0,0 @@
-package com.bumptech.glide.load.model;
-
-import static com.google.common.truth.Truth.assertThat;
-import static org.junit.Assert.assertEquals;
-import static org.junit.Assert.assertTrue;
-import static org.junit.Assume.assumeTrue;
-import static org.mockito.Matchers.any;
-import static org.mockito.Matchers.eq;
-import static org.mockito.Mockito.when;
-
-import android.net.Uri;
-import com.bumptech.glide.load.Key;
-import com.bumptech.glide.load.Options;
-import com.bumptech.glide.load.data.DataFetcher;
-import com.bumptech.glide.tests.Util;
-import java.io.File;
-import java.io.IOException;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.mockito.Mock;
-import org.mockito.MockitoAnnotations;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.RuntimeEnvironment;
-import org.robolectric.annotation.Config;
-
-/**
- * Tests for the {@link com.bumptech.glide.load.model.StringLoader} class.
- */
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class StringLoaderTest {
-  // Not a magic number, just an arbitrary non zero value.
-  private static final int IMAGE_SIDE = 100;
-
-  @Mock ModelLoader<Uri, Object> uriLoader;
-  @Mock DataFetcher<Object> fetcher;
-  @Mock Key key;
-
-  private StringLoader<Object> loader;
-  private Options options;
-
-  @Before
-  public void setUp() throws Exception {
-    MockitoAnnotations.initMocks(this);
-
-    options = new Options();
-    when(uriLoader.handles(any(Uri.class))).thenReturn(true);
-    loader = new StringLoader<>(uriLoader);
-  }
-
-  @Test
-  public void testHandlesPaths() throws IOException {
-    // TODO on windows it will fail with schema being the drive letter (C:\... -> C)
-    assumeTrue(!Util.isWindows());
-
-    File f = RuntimeEnvironment.application.getCacheDir();
-    Uri expected = Uri.fromFile(f);
-    when(uriLoader.buildLoadData(eq(expected), eq(IMAGE_SIDE), eq(IMAGE_SIDE), eq(options)))
-        .thenReturn(new ModelLoader.LoadData<>(key, fetcher));
-
-    assertTrue(loader.handles(f.getAbsolutePath()));
-    assertEquals(fetcher,
-        loader.buildLoadData(f.getAbsolutePath(), IMAGE_SIDE, IMAGE_SIDE, options).fetcher);
-  }
-
-  @Test
-  public void testCanHandleComplexFilePaths() {
-    assumeTrue(!Util.isWindows());
-
-    String testPath =
-        "/storage/emulated/0/DCIM/Camera/IMG_20140520_100001:nopm:.jpg,mimeType=image/jpeg,"
-            + "2448x3264,orientation=0,date=Tue";
-    Uri expected = Uri.fromFile(new File(testPath));
-    when(uriLoader.buildLoadData(eq(expected), eq(IMAGE_SIDE), eq(IMAGE_SIDE), eq(options)))
-        .thenReturn(new ModelLoader.LoadData<>(key, fetcher));
-
-    assertTrue(loader.handles(testPath));
-    assertEquals(fetcher, loader.buildLoadData(testPath, IMAGE_SIDE, IMAGE_SIDE, options).fetcher);
-  }
-
-  @Test
-  public void testHandlesFileUris() throws IOException {
-    File f = RuntimeEnvironment.application.getCacheDir();
-
-    Uri expected = Uri.fromFile(f);
-    when(uriLoader.buildLoadData(eq(expected), eq(IMAGE_SIDE), eq(IMAGE_SIDE), eq(options)))
-        .thenReturn(new ModelLoader.LoadData<>(key, fetcher));
-
-    assertTrue(loader.handles(f.getAbsolutePath()));
-    assertEquals(fetcher,
-        loader.buildLoadData(expected.toString(), IMAGE_SIDE, IMAGE_SIDE, options).fetcher);
-  }
-
-  @Test
-  public void testHandlesResourceUris() throws IOException {
-    Uri resourceUri = Uri.parse("android.resource://com.bumptech.glide.tests/raw/ic_launcher");
-
-    when(uriLoader.buildLoadData(eq(resourceUri), eq(IMAGE_SIDE), eq(IMAGE_SIDE), eq(options)))
-        .thenReturn(new ModelLoader.LoadData<>(key, fetcher));
-
-    assertTrue(loader.handles(resourceUri.toString()));
-    assertEquals(fetcher,
-        loader.buildLoadData(resourceUri.toString(), IMAGE_SIDE, IMAGE_SIDE, options).fetcher);
-  }
-
-  @Test
-  public void testHandlesHttp() {
-    String url = "http://www.google.com";
-
-    Uri expected = Uri.parse(url);
-    when(uriLoader.buildLoadData(eq(expected), eq(IMAGE_SIDE), eq(IMAGE_SIDE), eq(options)))
-        .thenReturn(new ModelLoader.LoadData<>(key, fetcher));
-
-    assertTrue(loader.handles(url));
-    assertEquals(fetcher, loader.buildLoadData(url, IMAGE_SIDE, IMAGE_SIDE, options).fetcher);
-  }
-
-  @Test
-  public void testHandlesHttps() {
-    String url = "https://www.google.com";
-
-    Uri expected = Uri.parse(url);
-    when(uriLoader.buildLoadData(eq(expected), eq(IMAGE_SIDE), eq(IMAGE_SIDE), eq(options)))
-        .thenReturn(new ModelLoader.LoadData<>(key, fetcher));
-
-    assertTrue(loader.handles(url));
-    assertEquals(fetcher, loader.buildLoadData(url, IMAGE_SIDE, IMAGE_SIDE, options).fetcher);
-  }
-
-  @Test
-  public void testHandlesContent() {
-    String content = "content://com.bumptech.glide";
-
-    Uri expected = Uri.parse(content);
-    when(uriLoader.buildLoadData(eq(expected), eq(IMAGE_SIDE), eq(IMAGE_SIDE), eq(options)))
-        .thenReturn(new ModelLoader.LoadData<>(key, fetcher));
-
-    assertTrue(loader.handles(content));
-    assertEquals(fetcher, loader.buildLoadData(content, IMAGE_SIDE, IMAGE_SIDE, options).fetcher);
-  }
-
-  @Test
-  public void testGetResourceFetcher_withEmptyString_returnsNull() {
-    assertThat(loader.buildLoadData("", IMAGE_SIDE, IMAGE_SIDE, options)).isNull();
-    assertThat(loader.buildLoadData("    ", IMAGE_SIDE, IMAGE_SIDE, options)).isNull();
-    assertThat(loader.buildLoadData("  \n", IMAGE_SIDE, IMAGE_SIDE, options)).isNull();
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/model/UriLoaderTest.java b/library/src/test/java/com/bumptech/glide/load/model/UriLoaderTest.java
deleted file mode 100644
index 846ed783c..000000000
--- a/library/src/test/java/com/bumptech/glide/load/model/UriLoaderTest.java
+++ /dev/null
@@ -1,72 +0,0 @@
-package com.bumptech.glide.load.model;
-
-import static org.junit.Assert.assertEquals;
-import static org.junit.Assert.assertTrue;
-import static org.mockito.Matchers.eq;
-import static org.mockito.Mockito.when;
-
-import android.net.Uri;
-import com.bumptech.glide.load.Options;
-import com.bumptech.glide.load.data.DataFetcher;
-import java.io.File;
-import java.io.IOException;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.mockito.Mock;
-import org.mockito.MockitoAnnotations;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.annotation.Config;
-
-/**
- * Tests for the {@link UriLoader} class.
- */
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class UriLoaderTest {
-  // Not a magic number, just arbitrary non zero.
-  private static final int IMAGE_SIDE = 120;
-
-  @Mock DataFetcher<Object> localUriFetcher;
-  @Mock UriLoader.LocalUriFetcherFactory<Object> factory;
-  private UriLoader<Object> loader;
-  private Options options;
-
-  @Before
-  public void setUp() throws Exception {
-    MockitoAnnotations.initMocks(this);
-
-    options = new Options();
-    loader = new UriLoader<>(factory);
-  }
-
-  @Test
-  public void testHandlesFileUris() throws IOException {
-    Uri fileUri = Uri.fromFile(new File("f"));
-    when(factory.build(eq(fileUri))).thenReturn(localUriFetcher);
-
-    assertTrue(loader.handles(fileUri));
-    assertEquals(localUriFetcher,
-        loader.buildLoadData(fileUri, IMAGE_SIDE, IMAGE_SIDE, options).fetcher);
-  }
-
-  @Test
-  public void testHandlesResourceUris() throws IOException {
-    Uri resourceUri = Uri.parse("android.resource://com.bumptech.glide.tests/raw/ic_launcher");
-    when(factory.build(eq(resourceUri))).thenReturn(localUriFetcher);
-
-    assertTrue(loader.handles(resourceUri));
-    assertEquals(localUriFetcher,
-        loader.buildLoadData(resourceUri, IMAGE_SIDE, IMAGE_SIDE, options).fetcher);
-  }
-
-  @Test
-  public void testHandlesContentUris() {
-    Uri contentUri = Uri.parse("content://com.bumptech.glide");
-    when(factory.build(eq(contentUri))).thenReturn(localUriFetcher);
-
-    assertTrue(loader.handles(contentUri));
-    assertEquals(localUriFetcher, loader.buildLoadData(contentUri, IMAGE_SIDE, IMAGE_SIDE,
-        options).fetcher);
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/model/stream/BaseGlideUrlLoaderTest.java b/library/src/test/java/com/bumptech/glide/load/model/stream/BaseGlideUrlLoaderTest.java
deleted file mode 100644
index 0c87d5f1b..000000000
--- a/library/src/test/java/com/bumptech/glide/load/model/stream/BaseGlideUrlLoaderTest.java
+++ /dev/null
@@ -1,148 +0,0 @@
-package com.bumptech.glide.load.model.stream;
-
-import static org.junit.Assert.assertEquals;
-import static org.junit.Assert.assertNull;
-import static org.mockito.Matchers.any;
-import static org.mockito.Matchers.eq;
-import static org.mockito.Mockito.doAnswer;
-import static org.mockito.Mockito.mock;
-import static org.mockito.Mockito.verify;
-import static org.mockito.Mockito.when;
-
-import com.bumptech.glide.load.Key;
-import com.bumptech.glide.load.Options;
-import com.bumptech.glide.load.data.DataFetcher;
-import com.bumptech.glide.load.model.GlideUrl;
-import com.bumptech.glide.load.model.ModelCache;
-import com.bumptech.glide.load.model.ModelLoader;
-import java.io.InputStream;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.mockito.Mock;
-import org.mockito.MockitoAnnotations;
-import org.mockito.invocation.InvocationOnMock;
-import org.mockito.stubbing.Answer;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class BaseGlideUrlLoaderTest {
-
-  @Mock ModelCache<Object, GlideUrl> modelCache;
-  @Mock ModelLoader<GlideUrl, InputStream> wrapped;
-  @Mock DataFetcher<InputStream> fetcher;
-  private TestLoader urlLoader;
-  private Options options;
-
-  @SuppressWarnings("unchecked")
-  @Before
-  public void setUp() {
-    MockitoAnnotations.initMocks(this);
-
-    options = new Options();
-    urlLoader = new TestLoader(wrapped, modelCache);
-  }
-
-  @Test
-  public void testReturnsNullIfUrlIsNull() {
-    urlLoader.resultUrl = null;
-    assertNull(urlLoader.buildLoadData(new Object(), 100, 100, options));
-  }
-
-  @Test
-  public void testReturnsNullIfUrlIsEmpty() {
-    urlLoader.resultUrl = "    ";
-    assertNull(urlLoader.buildLoadData(new Object(), 100, 100, options));
-  }
-
-  @Test
-  public void testReturnsUrlFromCacheIfPresent() {
-    Object model = new Object();
-    int width = 100;
-    int height = 200;
-    GlideUrl expectedUrl = mock(GlideUrl.class);
-    when(modelCache.get(eq(model), eq(width), eq(height))).thenReturn(expectedUrl);
-
-    when(wrapped.buildLoadData(eq(expectedUrl), eq(width), eq(height), eq(options)))
-        .thenReturn(new ModelLoader.LoadData<>(mock(Key.class), fetcher));
-
-    assertEquals(fetcher, urlLoader.buildLoadData(model, width, height, options).fetcher);
-  }
-
-  @Test
-  public void testBuildsNewUrlIfNotPresentInCache() {
-    int width = 10;
-    int height = 11;
-
-    urlLoader.resultUrl = "fakeUrl";
-    when(wrapped.buildLoadData(any(GlideUrl.class), eq(width), eq(height), eq(options)))
-        .thenAnswer(new Answer<ModelLoader.LoadData<InputStream>>() {
-          @Override
-          public ModelLoader.LoadData<InputStream> answer(InvocationOnMock invocationOnMock)
-              throws Throwable {
-            GlideUrl glideUrl = (GlideUrl) invocationOnMock.getArguments()[0];
-            assertEquals(urlLoader.resultUrl, glideUrl.toStringUrl());
-            return new ModelLoader.LoadData<>(mock(Key.class), fetcher);
-
-          }
-        });
-    assertEquals(fetcher,
-        urlLoader.buildLoadData(new GlideUrl(urlLoader.resultUrl), width, height, options).fetcher);
-  }
-
-  @Test
-  public void testAddsNewUrlToCacheIfNotPresentInCache() {
-    urlLoader.resultUrl = "fakeUrl";
-    Object model = new Object();
-    int width = 400;
-    int height = 500;
-
-    doAnswer(new Answer<Void>() {
-      @Override
-      public Void answer(InvocationOnMock invocationOnMock) throws Throwable {
-        GlideUrl glideUrl = (GlideUrl) invocationOnMock.getArguments()[3];
-        assertEquals(urlLoader.resultUrl, glideUrl.toStringUrl());
-        return null;
-      }
-    }).when(modelCache).put(eq(model), eq(width), eq(height), any(GlideUrl.class));
-
-    urlLoader.buildLoadData(model, width, height, options);
-
-    verify(modelCache).put(eq(model), eq(width), eq(height), any(GlideUrl.class));
-  }
-
-  @Test
-  public void testDoesNotInteractWithModelCacheIfNull() {
-    TestLoader urlLoader = new TestLoader(wrapped, null);
-    urlLoader.resultUrl = "fakeUrl";
-
-    int width = 456;
-    int height = 789;
-
-    when(wrapped.buildLoadData(any(GlideUrl.class), eq(width), eq(height), eq(options)))
-        .thenReturn(new ModelLoader.LoadData<>(mock(Key.class), fetcher));
-
-    assertEquals(fetcher, urlLoader.buildLoadData(new Object(), width, height, options).fetcher);
-  }
-
-  private class TestLoader extends BaseGlideUrlLoader<Object> {
-    public String resultUrl;
-
-    public TestLoader(ModelLoader<GlideUrl, InputStream> concreteLoader,
-        ModelCache<Object, GlideUrl> modelCache) {
-      super(concreteLoader, modelCache);
-    }
-
-    @Override
-    protected String getUrl(Object model, int width, int height, Options options) {
-      return resultUrl;
-    }
-
-    @Override
-    public boolean handles(Object model) {
-      return true;
-    }
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/model/stream/HttpGlideUrlLoaderTest.java b/library/src/test/java/com/bumptech/glide/load/model/stream/HttpGlideUrlLoaderTest.java
deleted file mode 100644
index 92efc86ce..000000000
--- a/library/src/test/java/com/bumptech/glide/load/model/stream/HttpGlideUrlLoaderTest.java
+++ /dev/null
@@ -1,35 +0,0 @@
-package com.bumptech.glide.load.model.stream;
-
-import static com.google.common.truth.Truth.assertThat;
-import static org.mockito.Mockito.mock;
-
-import com.bumptech.glide.load.Options;
-import com.bumptech.glide.load.data.DataFetcher;
-import com.bumptech.glide.load.data.HttpUrlFetcher;
-import com.bumptech.glide.load.model.GlideUrl;
-import java.io.InputStream;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE)
-public class HttpGlideUrlLoaderTest {
-  private HttpGlideUrlLoader loader;
-  private GlideUrl model;
-
-  @SuppressWarnings("unchecked")
-  @Before
-  public void setUp() {
-    loader = new HttpGlideUrlLoader();
-    model = mock(GlideUrl.class);
-  }
-
-  @Test
-  public void testReturnsValidFetcher() {
-    DataFetcher<InputStream> result = loader.buildLoadData(model, 100, 100, new Options()).fetcher;
-    assertThat(result).isInstanceOf(HttpUrlFetcher.class);
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/model/stream/HttpUriLoaderTest.java b/library/src/test/java/com/bumptech/glide/load/model/stream/HttpUriLoaderTest.java
deleted file mode 100644
index 92dae6dbb..000000000
--- a/library/src/test/java/com/bumptech/glide/load/model/stream/HttpUriLoaderTest.java
+++ /dev/null
@@ -1,71 +0,0 @@
-package com.bumptech.glide.load.model.stream;
-
-import static org.junit.Assert.assertTrue;
-import static org.mockito.Matchers.eq;
-import static org.mockito.Mockito.verify;
-
-import android.net.Uri;
-import com.bumptech.glide.load.Options;
-import com.bumptech.glide.load.model.GlideUrl;
-import com.bumptech.glide.load.model.ModelLoader;
-import java.io.InputStream;
-import java.net.MalformedURLException;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.mockito.Mock;
-import org.mockito.MockitoAnnotations;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class HttpUriLoaderTest {
-  private static final int IMAGE_SIDE = 100;
-  private static final Options OPTIONS = new Options();
-
-  @Mock ModelLoader<GlideUrl, InputStream> urlLoader;
-  private HttpUriLoader loader;
-
-  @Before
-  public void setUp() {
-    MockitoAnnotations.initMocks(this);
-
-    loader = new HttpUriLoader(urlLoader);
-  }
-
-  @Test
-  public void testHandlesHttpUris() throws MalformedURLException {
-    Uri httpUri = Uri.parse("http://www.google.com");
-    loader.buildLoadData(httpUri, IMAGE_SIDE, IMAGE_SIDE, OPTIONS);
-
-    assertTrue(loader.handles(httpUri));
-    verify(urlLoader)
-        .buildLoadData(eq(new GlideUrl(httpUri.toString())), eq(IMAGE_SIDE), eq(IMAGE_SIDE),
-            eq(OPTIONS));
-  }
-
-  @Test
-  public void testHandlesHttpsUris() throws MalformedURLException {
-    Uri httpsUri = Uri.parse("https://www.google.com");
-    loader.buildLoadData(httpsUri, IMAGE_SIDE, IMAGE_SIDE, OPTIONS);
-
-    assertTrue(loader.handles(httpsUri));
-    verify(urlLoader)
-        .buildLoadData(eq(new GlideUrl(httpsUri.toString())), eq(IMAGE_SIDE), eq(IMAGE_SIDE),
-            eq(OPTIONS));
-  }
-
-  // Test for https://github.com/bumptech/glide/issues/71.
-  @Test
-  public void testHandlesMostlyInvalidHttpUris() {
-    Uri mostlyInvalidHttpUri = Uri.parse(
-        "http://myserver_url.com:80http://myserver_url.com/webapp/images/no_image.png?size=100");
-
-    assertTrue(loader.handles(mostlyInvalidHttpUri));
-    loader.buildLoadData(mostlyInvalidHttpUri, IMAGE_SIDE, IMAGE_SIDE, OPTIONS);
-    verify(urlLoader)
-        .buildLoadData(eq(new GlideUrl(mostlyInvalidHttpUri.toString())), eq(IMAGE_SIDE),
-            eq(IMAGE_SIDE), eq(OPTIONS));
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/resource/SimpleResourceTest.java b/library/src/test/java/com/bumptech/glide/load/resource/SimpleResourceTest.java
deleted file mode 100644
index 78b851f22..000000000
--- a/library/src/test/java/com/bumptech/glide/load/resource/SimpleResourceTest.java
+++ /dev/null
@@ -1,40 +0,0 @@
-package com.bumptech.glide.load.resource;
-
-import static org.junit.Assert.assertEquals;
-
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.junit.runners.JUnit4;
-
-@RunWith(JUnit4.class)
-public class SimpleResourceTest {
-  private Anything object;
-  private SimpleResource<?> resource;
-
-  @Before
-  public void setUp() {
-    object = new Anything();
-    resource = new SimpleResource<>(object);
-  }
-
-  @Test
-  public void testReturnsGivenObject() {
-    assertEquals(object, resource.get());
-  }
-
-  @Test
-  public void testReturnsGivenObjectMultipleTimes() {
-    assertEquals(object, resource.get());
-    assertEquals(object, resource.get());
-    assertEquals(object, resource.get());
-  }
-
-  @Test(expected = NullPointerException.class)
-  public void testThrowsIfGivenNullData() {
-    new SimpleResource<>(null);
-  }
-
-  private static class Anything {
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/resource/UnitTransformationTest.java b/library/src/test/java/com/bumptech/glide/load/resource/UnitTransformationTest.java
deleted file mode 100644
index e2d29159b..000000000
--- a/library/src/test/java/com/bumptech/glide/load/resource/UnitTransformationTest.java
+++ /dev/null
@@ -1,38 +0,0 @@
-package com.bumptech.glide.load.resource;
-
-import static com.bumptech.glide.tests.Util.mockResource;
-import static org.junit.Assert.assertEquals;
-import static org.mockito.Matchers.any;
-import static org.mockito.Mockito.doAnswer;
-import static org.mockito.Mockito.mock;
-
-import com.bumptech.glide.load.Transformation;
-import com.bumptech.glide.load.engine.Resource;
-import com.bumptech.glide.tests.KeyAssertions;
-import com.bumptech.glide.tests.Util;
-import java.security.MessageDigest;
-import java.security.NoSuchAlgorithmException;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.junit.runners.JUnit4;
-
-@RunWith(JUnit4.class)
-public class UnitTransformationTest {
-
-  @Test
-  public void testReturnsGivenResource() {
-    Resource<Object> resource = mockResource();
-    UnitTransformation<Object> transformation = UnitTransformation.get();
-    assertEquals(resource, transformation.transform(resource, 10, 10));
-  }
-
-  @Test
-  public void testEquals() throws NoSuchAlgorithmException {
-    KeyAssertions.assertSame(UnitTransformation.get(), UnitTransformation.get());
-
-    @SuppressWarnings("unchecked") Transformation<Object> other = mock(Transformation.class);
-    doAnswer(new Util.WriteDigest("other")).when(other)
-        .updateDiskCacheKey(any(MessageDigest.class));
-    KeyAssertions.assertDifferent(UnitTransformation.get(), other);
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/resource/bitmap/BitmapDrawableResourceTest.java b/library/src/test/java/com/bumptech/glide/load/resource/bitmap/BitmapDrawableResourceTest.java
deleted file mode 100644
index c65b03707..000000000
--- a/library/src/test/java/com/bumptech/glide/load/resource/bitmap/BitmapDrawableResourceTest.java
+++ /dev/null
@@ -1,65 +0,0 @@
-package com.bumptech.glide.load.resource.bitmap;
-
-import static org.junit.Assert.assertEquals;
-import static org.junit.Assert.assertNotSame;
-import static org.mockito.Matchers.eq;
-import static org.mockito.Mockito.mock;
-import static org.mockito.Mockito.verify;
-
-import android.graphics.Bitmap;
-import android.graphics.drawable.BitmapDrawable;
-import com.bumptech.glide.load.engine.bitmap_recycle.BitmapPool;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.RuntimeEnvironment;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class BitmapDrawableResourceTest {
-  private BitmapDrawableResourceHarness harness;
-
-  @Before
-  public void setUp() {
-    harness = new BitmapDrawableResourceHarness();
-  }
-
-  @Test
-  public void testReturnsGivenBitmapFromGet() {
-    assertEquals(harness.bitmap, harness.create().get().getBitmap());
-  }
-
-  @Test
-  public void testReturnsDifferentDrawableEachTime() {
-    BitmapDrawableResource resource = harness.create();
-    BitmapDrawable first = resource.get();
-    BitmapDrawable second = resource.get();
-
-    assertNotSame(first, second);
-  }
-
-  @Test
-  public void testReturnsSizeFromGivenBitmap() {
-    assertEquals(harness.bitmap.getHeight() * harness.bitmap.getRowBytes(),
-        harness.create().getSize());
-  }
-
-  @Test
-  public void testBitmapIsReturnedToPoolOnRecycle() {
-    harness.create().recycle();
-
-    verify(harness.bitmapPool).put(eq(harness.bitmap));
-  }
-
-  private static class BitmapDrawableResourceHarness {
-    BitmapPool bitmapPool = mock(BitmapPool.class);
-    Bitmap bitmap = Bitmap.createBitmap(100, 100, Bitmap.Config.ARGB_8888);
-
-    public BitmapDrawableResource create() {
-      return new BitmapDrawableResource(
-          new BitmapDrawable(RuntimeEnvironment.application.getResources(), bitmap), bitmapPool);
-    }
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/resource/bitmap/BitmapDrawableTransformationTest.java b/library/src/test/java/com/bumptech/glide/load/resource/bitmap/BitmapDrawableTransformationTest.java
deleted file mode 100644
index 15a9fdfc5..000000000
--- a/library/src/test/java/com/bumptech/glide/load/resource/bitmap/BitmapDrawableTransformationTest.java
+++ /dev/null
@@ -1,122 +0,0 @@
-package com.bumptech.glide.load.resource.bitmap;
-
-import static com.google.common.truth.Truth.assertThat;
-import static org.mockito.Matchers.any;
-import static org.mockito.Matchers.anyInt;
-import static org.mockito.Matchers.eq;
-import static org.mockito.Mockito.doAnswer;
-import static org.mockito.Mockito.mock;
-import static org.mockito.Mockito.verify;
-import static org.mockito.Mockito.when;
-
-import android.graphics.Bitmap;
-import android.graphics.drawable.BitmapDrawable;
-import com.bumptech.glide.load.Transformation;
-import com.bumptech.glide.load.engine.Resource;
-import com.bumptech.glide.load.engine.bitmap_recycle.BitmapPool;
-import com.bumptech.glide.tests.KeyAssertions;
-import com.bumptech.glide.tests.Util;
-import java.security.MessageDigest;
-import java.security.NoSuchAlgorithmException;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.mockito.ArgumentCaptor;
-import org.mockito.Mock;
-import org.mockito.MockitoAnnotations;
-import org.mockito.invocation.InvocationOnMock;
-import org.mockito.stubbing.Answer;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.RuntimeEnvironment;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class BitmapDrawableTransformationTest {
-
-  @Mock BitmapPool bitmapPool;
-  @Mock Transformation<Bitmap> wrapped;
-  @Mock Resource<BitmapDrawable> drawableResourceToTransform;
-  @Mock BitmapDrawable drawableToTransform;
-
-  private BitmapDrawableTransformation transformation;
-  private Bitmap bitmapToTransform;
-
-  @Before
-  public void setUp() {
-    MockitoAnnotations.initMocks(this);
-    bitmapToTransform = Bitmap.createBitmap(100, 100, Bitmap.Config.ARGB_8888);
-
-    when(drawableResourceToTransform.get()).thenReturn(drawableToTransform);
-    when(drawableToTransform.getBitmap()).thenReturn(bitmapToTransform);
-    transformation = new BitmapDrawableTransformation(RuntimeEnvironment.application, bitmapPool,
-        wrapped);
-  }
-
-  @Test
-  public void testReturnsOriginalResourceIfTransformationDoesNotTransform() {
-    int outWidth = 123;
-    int outHeight = 456;
-    when(wrapped.transform(Util.<Bitmap>anyResource(), eq(outWidth), eq(outHeight)))
-        .thenAnswer(new Answer<Object>() {
-          @Override
-          public Object answer(InvocationOnMock invocation) throws Throwable {
-            return invocation.getArguments()[0];
-          }
-        });
-
-    Resource<BitmapDrawable> transformed = transformation.transform(drawableResourceToTransform,
-        outWidth, outHeight);
-
-    assertThat(transformed).isEqualTo(drawableResourceToTransform);
-  }
-
-  @Test
-  public void testReturnsNewResourceIfTransformationDoesTransform() {
-    int outWidth = 999;
-    int outHeight = 555;
-
-    Bitmap transformedBitmap = Bitmap.createBitmap(outWidth, outHeight, Bitmap.Config.RGB_565);
-    Resource<Bitmap> transformedBitmapResource = Util.mockResource();
-    when(transformedBitmapResource.get()).thenReturn(transformedBitmap);
-    when(wrapped.transform(Util.<Bitmap>anyResource(), eq(outWidth), eq(outHeight)))
-        .thenReturn(transformedBitmapResource);
-
-    Resource<BitmapDrawable> transformed =
-        transformation.transform(drawableResourceToTransform, outWidth, outHeight);
-
-    assertThat(transformed.get().getBitmap()).isEqualTo(transformedBitmap);
-  }
-
-  @Test
-  public void testProvidesBitmapFromGivenResourceToWrappedTransformation() {
-    int outWidth = 332;
-    int outHeight = 111;
-    Resource<Bitmap> transformed = Util.mockResource();
-    when(transformed.get())
-        .thenReturn(Bitmap.createBitmap(outWidth, outHeight, Bitmap.Config.ARGB_8888));
-    when(wrapped.transform(Util.<Bitmap>anyResource(), anyInt(), anyInt()))
-        .thenReturn(transformed);
-
-    transformation.transform(drawableResourceToTransform, outWidth, outHeight);
-    ArgumentCaptor<Resource<Bitmap>> captor = Util.cast(ArgumentCaptor.forClass(Resource.class));
-
-    verify(wrapped).transform(captor.capture(), eq(outWidth), eq(outHeight));
-
-    assertThat(captor.getValue().get()).isEqualTo(bitmapToTransform);
-  }
-
-  @Test
-  public void testEquals() throws NoSuchAlgorithmException {
-    doAnswer(new Util.WriteDigest("wrapped")).when(wrapped)
-        .updateDiskCacheKey(any(MessageDigest.class));
-    KeyAssertions.assertSame(transformation,
-        new BitmapDrawableTransformation(RuntimeEnvironment.application, bitmapPool, wrapped));
-
-    @SuppressWarnings("unchecked") Transformation<Bitmap> other = mock(Transformation.class);
-    doAnswer(new Util.WriteDigest("other")).when(other)
-        .updateDiskCacheKey(any(MessageDigest.class));
-    KeyAssertions.assertDifferent(transformation,
-        new BitmapDrawableTransformation(RuntimeEnvironment.application, bitmapPool, other));
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/resource/bitmap/BitmapEncoderTest.java b/library/src/test/java/com/bumptech/glide/load/resource/bitmap/BitmapEncoderTest.java
deleted file mode 100644
index 6d8f6ad43..000000000
--- a/library/src/test/java/com/bumptech/glide/load/resource/bitmap/BitmapEncoderTest.java
+++ /dev/null
@@ -1,137 +0,0 @@
-package com.bumptech.glide.load.resource.bitmap;
-
-import static com.bumptech.glide.tests.Util.mockResource;
-import static com.google.common.truth.Truth.assertThat;
-import static org.junit.Assert.assertEquals;
-import static org.junit.Assert.assertTrue;
-import static org.mockito.Mockito.when;
-
-import android.annotation.TargetApi;
-import android.graphics.Bitmap;
-import android.os.Build;
-import com.bumptech.glide.load.EncodeStrategy;
-import com.bumptech.glide.load.Options;
-import com.bumptech.glide.load.engine.Resource;
-import com.bumptech.glide.util.ByteBufferUtil;
-import java.io.File;
-import java.io.IOException;
-import org.junit.After;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.RuntimeEnvironment;
-import org.robolectric.Shadows;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class BitmapEncoderTest {
-  private EncoderHarness harness;
-
-  @Before
-  public void setUp() {
-    harness = new EncoderHarness();
-  }
-
-  @After
-  public void tearDown() {
-    harness.tearDown();
-  }
-
-  @Test
-  public void testBitmapIsEncoded() throws IOException {
-    String fakeBytes = harness.encode();
-
-    assertContains(fakeBytes, Shadows.shadowOf(harness.bitmap).getDescription());
-  }
-
-  @Test
-  public void testBitmapIsEncodedWithGivenQuality() throws IOException {
-    int quality = 7;
-    harness.setQuality(quality);
-
-    String fakeBytes = harness.encode();
-
-    assertContains(fakeBytes, String.valueOf(quality));
-  }
-
-  @Test
-  @TargetApi(Build.VERSION_CODES.ICE_CREAM_SANDWICH)
-  public void testEncoderObeysNonNullCompressFormat() throws IOException {
-    Bitmap.CompressFormat format = Bitmap.CompressFormat.WEBP;
-    harness.setFormat(format);
-
-    String fakeBytes = harness.encode();
-
-    assertContains(fakeBytes, format.toString());
-  }
-
-  @Test
-  @TargetApi(Build.VERSION_CODES.HONEYCOMB_MR1)
-  public void testEncoderEncodesJpegWithNullFormatAndBitmapWithoutAlpha() throws IOException {
-    harness.setFormat(null);
-    harness.bitmap.setHasAlpha(false);
-
-    String fakeBytes = harness.encode();
-
-    assertContains(fakeBytes, Bitmap.CompressFormat.JPEG.toString());
-  }
-
-  @Test
-  @TargetApi(Build.VERSION_CODES.HONEYCOMB_MR1)
-  public void testEncoderEncodesPngWithNullFormatAndBitmapWithAlpha() throws IOException {
-    harness.setFormat(null);
-    harness.bitmap.setHasAlpha(true);
-
-    String fakeBytes = harness.encode();
-
-    assertContains(fakeBytes, Bitmap.CompressFormat.PNG.toString());
-  }
-
-  @Test
-  public void testReturnsTrueFromWrite() {
-    BitmapEncoder encoder = new BitmapEncoder();
-    assertTrue(encoder.encode(harness.resource, harness.file, harness.options));
-  }
-
-  @Test
-  public void testEncodeStrategy_alwaysReturnsTransformed() {
-    BitmapEncoder encoder = new BitmapEncoder();
-    assertEquals(EncodeStrategy.TRANSFORMED, encoder.getEncodeStrategy(harness.options));
-  }
-
-  private static void assertContains(String string, String expected) {
-    assertThat(string).contains(expected);
-  }
-
-  private static class EncoderHarness {
-    Resource<Bitmap> resource = mockResource();
-    Bitmap bitmap = Bitmap.createBitmap(100, 100, Bitmap.Config.ARGB_8888);
-    Options options = new Options();
-    File file = new File(RuntimeEnvironment.application.getCacheDir(), "test");
-
-    public EncoderHarness() {
-      when(resource.get()).thenReturn(bitmap);
-    }
-
-    public void setQuality(int quality) {
-      options.set(BitmapEncoder.COMPRESSION_QUALITY, quality);
-    }
-
-    public void setFormat(Bitmap.CompressFormat format) {
-      options.set(BitmapEncoder.COMPRESSION_FORMAT, format);
-    }
-
-    public String encode() throws IOException {
-      BitmapEncoder encoder = new BitmapEncoder();
-      encoder.encode(resource, file, options);
-      byte[] data = ByteBufferUtil.toBytes(ByteBufferUtil.fromFile(file));
-      return new String(data);
-    }
-
-    public void tearDown() {
-      file.delete();
-    }
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/resource/bitmap/BitmapResourceTest.java b/library/src/test/java/com/bumptech/glide/load/resource/bitmap/BitmapResourceTest.java
deleted file mode 100644
index cb567b21f..000000000
--- a/library/src/test/java/com/bumptech/glide/load/resource/bitmap/BitmapResourceTest.java
+++ /dev/null
@@ -1,76 +0,0 @@
-package com.bumptech.glide.load.resource.bitmap;
-
-import static org.junit.Assert.assertEquals;
-import static org.mockito.Matchers.eq;
-import static org.mockito.Mockito.mock;
-import static org.mockito.Mockito.verify;
-
-import android.graphics.Bitmap;
-import android.os.Build;
-import com.bumptech.glide.load.engine.bitmap_recycle.BitmapPool;
-import com.bumptech.glide.tests.Util;
-import org.junit.After;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.annotation.Config;
-
-//TODO: add a test for bitmap size using getAllocationByteSize when robolectric supports kitkat.
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class BitmapResourceTest {
-  private int currentBuildVersion;
-  private BitmapResourceHarness harness;
-
-  @Before
-  public void setUp() {
-    currentBuildVersion = Build.VERSION.SDK_INT;
-    harness = new BitmapResourceHarness();
-  }
-
-  @After
-  public void tearDown() {
-    Util.setSdkVersionInt(currentBuildVersion);
-  }
-
-  @Test
-  public void testCanGetBitmap() {
-    assertEquals(harness.bitmap, harness.resource.get());
-  }
-
-  @Test
-  public void testSizeIsBasedOnDimensPreKitKat() {
-    Util.setSdkVersionInt(18);
-    assertEquals(harness.bitmap.getWidth() * harness.bitmap.getHeight() * 4,
-        harness.resource.getSize());
-  }
-
-  @Test
-  public void testPutsBitmapInPoolOnRecycle() {
-    harness.resource.recycle();
-
-    verify(harness.bitmapPool).put(eq(harness.bitmap));
-  }
-
-  @Test(expected = NullPointerException.class)
-  public void testThrowsIfBitmapIsNull() {
-    new BitmapResource(null, mock(BitmapPool.class));
-  }
-
-  @Test(expected = NullPointerException.class)
-  public void testThrowsIfBitmapPoolIsNull() {
-    new BitmapResource(Bitmap.createBitmap(100, 100, Bitmap.Config.RGB_565), null);
-  }
-
-  @Test(expected = NullPointerException.class)
-  public void testThrowsIfBitmapAndBitmapPoolAreNull() {
-    new BitmapResource(null, null);
-  }
-
-  private static class BitmapResourceHarness {
-    Bitmap bitmap = Bitmap.createBitmap(100, 100, Bitmap.Config.ARGB_8888);
-    BitmapPool bitmapPool = mock(BitmapPool.class);
-    BitmapResource resource = new BitmapResource(bitmap, bitmapPool);
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/resource/bitmap/BitmapTransformationTest.java b/library/src/test/java/com/bumptech/glide/load/resource/bitmap/BitmapTransformationTest.java
deleted file mode 100644
index 14a9e4c3c..000000000
--- a/library/src/test/java/com/bumptech/glide/load/resource/bitmap/BitmapTransformationTest.java
+++ /dev/null
@@ -1,192 +0,0 @@
-package com.bumptech.glide.load.resource.bitmap;
-
-import static org.junit.Assert.assertEquals;
-import static org.junit.Assert.assertNotSame;
-import static org.junit.Assert.assertNull;
-import static org.mockito.Mockito.when;
-
-import android.graphics.Bitmap;
-import android.support.annotation.NonNull;
-import com.bumptech.glide.load.engine.Resource;
-import com.bumptech.glide.load.engine.bitmap_recycle.BitmapPool;
-import com.bumptech.glide.request.target.Target;
-import com.bumptech.glide.tests.Util;
-import java.security.MessageDigest;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.mockito.Mock;
-import org.mockito.MockitoAnnotations;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class BitmapTransformationTest {
-
-  @Mock
-  private BitmapPool bitmapPool;
-
-  @Before
-  public void setUp() {
-    MockitoAnnotations.initMocks(this);
-  }
-
-  @Test
-  public void testReturnsGivenResourceWhenBitmapNotTransformed() {
-    BitmapTransformation transformation = new BitmapTransformation(bitmapPool) {
-      @Override
-      public void updateDiskCacheKey(MessageDigest messageDigest) { }
-
-      @Override
-      protected Bitmap transform(@NonNull BitmapPool pool, @NonNull Bitmap toTransform,
-          int outWidth, int outHeight) {
-        return toTransform;
-      }
-    };
-
-    Resource<Bitmap> resource = mockResource(100, 100);
-    assertEquals(resource, transformation.transform(resource, 1, 1));
-  }
-
-  @Test
-  public void testReturnsNewResourceWhenBitmapTransformed() {
-    final Bitmap transformed = Bitmap.createBitmap(100, 100, Bitmap.Config.ARGB_4444);
-    BitmapTransformation transformation = new BitmapTransformation(bitmapPool) {
-      @Override
-      public void updateDiskCacheKey(MessageDigest messageDigest) { }
-
-      @Override
-      protected Bitmap transform(@NonNull BitmapPool pool, @NonNull Bitmap bitmap, int outWidth,
-          int outHeight) {
-        return transformed;
-      }
-    };
-
-    Resource<Bitmap> resource = mockResource(1, 2);
-    assertNotSame(resource, transformation.transform(resource, 100, 100));
-  }
-
-  @Test
-  public void testPassesGivenArgumentsToTransform() {
-    final int expectedWidth = 13;
-    final int expectedHeight = 148;
-    final Resource<Bitmap> resource = mockResource(223, 4123);
-    BitmapTransformation transformation = new BitmapTransformation(bitmapPool) {
-      @Override
-      public void updateDiskCacheKey(MessageDigest messageDigest) { }
-
-      @Override
-      protected Bitmap transform(@NonNull BitmapPool pool, @NonNull Bitmap toTransform,
-          int outWidth, int outHeight) {
-        assertEquals(bitmapPool, pool);
-        assertEquals(resource.get(), toTransform);
-        assertEquals(expectedWidth, outWidth);
-        assertEquals(expectedHeight, outHeight);
-        return resource.get();
-      }
-    };
-
-    transformation.transform(resource, expectedWidth, expectedHeight);
-  }
-
-  @Test(expected = IllegalArgumentException.class)
-  public void testThrowsIfGivenInvalidWidth() {
-    BitmapTransformation transformation = new BitmapTransformation(bitmapPool) {
-
-      @Override
-      public void updateDiskCacheKey(MessageDigest messageDigest) { }
-
-      @Override
-      protected Bitmap transform(@NonNull BitmapPool bitmapPool, @NonNull Bitmap toTransform,
-          int outWidth, int outHeight) {
-        return null;
-      }
-    };
-    transformation.transform(mockResource(1, 1), -1, 100);
-  }
-
-  @Test(expected = IllegalArgumentException.class)
-  public void testThrowsIfGivenInvalidHeight() {
-    BitmapTransformation transformation = new BitmapTransformation(bitmapPool) {
-
-      @Override
-      public void updateDiskCacheKey(MessageDigest messageDigest) { }
-
-      @Override
-      protected Bitmap transform(@NonNull BitmapPool bitmapPool, @NonNull Bitmap toTransform,
-          int outWidth, int outHeight) {
-        return null;
-      }
-
-    };
-    transformation.transform(mockResource(1, 1), 100, -1);
-  }
-
-  @Test
-  public void testReturnsNullIfTransformReturnsNull() {
-    BitmapTransformation transform = new BitmapTransformation(bitmapPool) {
-
-      @Override
-      public void updateDiskCacheKey(MessageDigest messageDigest) {  }
-
-      @Override
-      protected Bitmap transform(@NonNull BitmapPool pool, @NonNull Bitmap toTransform,
-          int outWidth, int outHeight) {
-        return null;
-      }
-    };
-
-    Resource<Bitmap> resource = mockResource(100, 100);
-    assertNull(transform.transform(resource, 100, 100));
-  }
-
-  @Test
-  public void testCallsTransformWithGivenBitmapWidthIfWidthIsSizeOriginal() {
-    SizeTrackingTransform transform = new SizeTrackingTransform();
-
-    int expectedWidth = 200;
-    Resource<Bitmap> resource = mockResource(expectedWidth, 300);
-    transform.transform(resource, Target.SIZE_ORIGINAL, 500);
-
-    assertEquals(expectedWidth, transform.givenWidth);
-  }
-
-  @Test
-  public void testCallsTransformWithGivenBitmapHeightIfHeightIsSizeOriginal() {
-    SizeTrackingTransform transform = new SizeTrackingTransform();
-
-    int expectedHeight = 500;
-    Resource<Bitmap> resource = mockResource(123, expectedHeight);
-    transform.transform(resource, 444, expectedHeight);
-
-    assertEquals(expectedHeight, transform.givenHeight);
-  }
-
-  private Resource<Bitmap> mockResource(int width, int height) {
-    Bitmap bitmap = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
-    Resource<Bitmap> resource = Util.mockResource();
-    when(resource.get()).thenReturn(bitmap);
-    return resource;
-  }
-
-  private class SizeTrackingTransform extends BitmapTransformation {
-    int givenWidth;
-    int givenHeight;
-
-    public SizeTrackingTransform() {
-      super(bitmapPool);
-    }
-
-    @Override
-    protected Bitmap transform(@NonNull BitmapPool pool, @NonNull Bitmap toTransform, int outWidth,
-        int outHeight) {
-      givenWidth = outWidth;
-      givenHeight = outHeight;
-      return null;
-    }
-
-    @Override
-    public void updateDiskCacheKey(MessageDigest messageDigest) { }
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/resource/bitmap/CenterCropTest.java b/library/src/test/java/com/bumptech/glide/load/resource/bitmap/CenterCropTest.java
deleted file mode 100644
index 8d2f4a295..000000000
--- a/library/src/test/java/com/bumptech/glide/load/resource/bitmap/CenterCropTest.java
+++ /dev/null
@@ -1,143 +0,0 @@
-package com.bumptech.glide.load.resource.bitmap;
-
-import static org.junit.Assert.assertEquals;
-import static org.mockito.Matchers.any;
-import static org.mockito.Matchers.anyInt;
-import static org.mockito.Matchers.eq;
-import static org.mockito.Matchers.isNull;
-import static org.mockito.Mockito.doAnswer;
-import static org.mockito.Mockito.never;
-import static org.mockito.Mockito.reset;
-import static org.mockito.Mockito.verify;
-import static org.mockito.Mockito.when;
-
-import android.graphics.Bitmap;
-import com.bumptech.glide.load.Transformation;
-import com.bumptech.glide.load.engine.Resource;
-import com.bumptech.glide.load.engine.bitmap_recycle.BitmapPool;
-import com.bumptech.glide.tests.KeyAssertions;
-import com.bumptech.glide.tests.Util;
-import java.security.MessageDigest;
-import java.security.NoSuchAlgorithmException;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.mockito.Mock;
-import org.mockito.MockitoAnnotations;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.Shadows;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class CenterCropTest {
-  @Mock Resource<Bitmap> resource;
-  @Mock BitmapPool pool;
-  @Mock Transformation<Bitmap> transformation;
-
-  private CenterCrop centerCrop;
-  private int bitmapWidth;
-  private int bitmapHeight;
-  private Bitmap bitmap;
-
-  @Before
-  public void setUp() {
-    MockitoAnnotations.initMocks(this);
-    bitmapWidth = 100;
-    bitmapHeight = 100;
-    bitmap = Bitmap.createBitmap(bitmapWidth, bitmapHeight, Bitmap.Config.ARGB_8888);
-    when(resource.get()).thenReturn(bitmap);
-
-    when(pool.get(anyInt(), anyInt(), any(Bitmap.Config.class)))
-        .thenAnswer(new Util.CreateBitmap());
-
-    centerCrop = new CenterCrop(pool);
-  }
-
-  @Test
-  public void testDoesNotPutNullBitmapAcquiredFromPool() {
-    reset(pool);
-    when(pool.get(anyInt(), anyInt(), any(Bitmap.Config.class))).thenReturn(null);
-
-    centerCrop.transform(resource, 100, 100);
-
-    verify(pool, never()).put(any(Bitmap.class));
-  }
-
-  @Test
-  public void testReturnsGivenResourceIfMatchesSizeExactly() {
-    Resource<Bitmap> result =
-        centerCrop.transform(resource, bitmapWidth, bitmapHeight);
-
-    assertEquals(resource, result);
-  }
-
-  @Test
-  public void testDoesNotRecycleGivenResourceIfMatchesSizeExactly() {
-    centerCrop.transform(resource, bitmapWidth, bitmapHeight);
-
-    verify(resource, never()).recycle();
-  }
-
-  @Test
-  public void testDoesNotRecycleGivenResource() {
-    centerCrop.transform(resource, 50, 50);
-
-    verify(resource, never()).recycle();
-  }
-
-  @Test
-  public void testAsksBitmapPoolForArgb8888IfInConfigIsNull() {
-    Shadows.shadowOf(bitmap).setConfig(null);
-
-    centerCrop.transform(resource, 10, 10);
-
-    verify(pool).get(anyInt(), anyInt(), eq(Bitmap.Config.ARGB_8888));
-    verify(pool, never()).get(anyInt(), anyInt(), (Bitmap.Config) isNull());
-  }
-
-  @Test
-  public void testReturnsBitmapWithExactlyGivenDimensionsIfBitmapIsLargerThanTarget() {
-    int expectedWidth = 75;
-    int expectedHeight = 74;
-
-    for (int[] dimens : new int[][] { new int[] { 800, 200 }, new int[] { 450, 100 },
-        new int[] { 78, 78 } }) {
-      Bitmap toTransform = Bitmap.createBitmap(dimens[0], dimens[1], Bitmap.Config.ARGB_4444);
-      when(resource.get()).thenReturn(toTransform);
-
-      Resource<Bitmap> result =
-          centerCrop.transform(resource, expectedWidth, expectedHeight);
-      Bitmap transformed = result.get();
-      assertEquals(expectedWidth, transformed.getWidth());
-      assertEquals(expectedHeight, transformed.getHeight());
-    }
-  }
-
-  @Test
-  public void testReturnsBitmapWithExactlyGivenDimensionsIfBitmapIsSmallerThanTarget() {
-    int expectedWidth = 100;
-    int expectedHeight = 100;
-
-    for (int[] dimens : new int[][] { new int[] { 50, 90 }, new int[] { 150, 2 },
-        new int[] { 78, 78 } }) {
-      Bitmap toTransform = Bitmap.createBitmap(dimens[0], dimens[1], Bitmap.Config.ARGB_4444);
-      when(resource.get()).thenReturn(toTransform);
-
-      Resource<Bitmap> result =
-          centerCrop.transform(resource, expectedWidth, expectedHeight);
-      Bitmap transformed = result.get();
-      assertEquals(expectedWidth, transformed.getWidth());
-      assertEquals(expectedHeight, transformed.getHeight());
-    }
-  }
-
-  @Test
-  public void testEquals() throws NoSuchAlgorithmException {
-    KeyAssertions.assertSame(centerCrop, new CenterCrop(pool));
-
-    doAnswer(new Util.WriteDigest("other")).when(transformation)
-        .updateDiskCacheKey(any(MessageDigest.class));
-    KeyAssertions.assertDifferent(centerCrop, transformation);
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/resource/bitmap/CenterInsideTest.java b/library/src/test/java/com/bumptech/glide/load/resource/bitmap/CenterInsideTest.java
deleted file mode 100644
index 14a4969d9..000000000
--- a/library/src/test/java/com/bumptech/glide/load/resource/bitmap/CenterInsideTest.java
+++ /dev/null
@@ -1,115 +0,0 @@
-package com.bumptech.glide.load.resource.bitmap;
-
-import static org.junit.Assert.assertEquals;
-import static org.junit.Assert.assertNotEquals;
-import static org.mockito.Matchers.any;
-import static org.mockito.Mockito.doAnswer;
-import static org.mockito.Mockito.never;
-import static org.mockito.Mockito.verify;
-import static org.mockito.Mockito.when;
-
-import android.graphics.Bitmap;
-import android.graphics.Canvas;
-import android.graphics.Matrix;
-import android.graphics.Paint;
-import com.bumptech.glide.load.Transformation;
-import com.bumptech.glide.load.engine.Resource;
-import com.bumptech.glide.load.engine.bitmap_recycle.BitmapPool;
-import com.bumptech.glide.load.engine.bitmap_recycle.BitmapPoolAdapter;
-import com.bumptech.glide.tests.KeyAssertions;
-import com.bumptech.glide.tests.Util;
-import java.security.MessageDigest;
-import java.security.NoSuchAlgorithmException;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.mockito.Mock;
-import org.mockito.MockitoAnnotations;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.annotation.Config;
-import org.robolectric.annotation.Implementation;
-import org.robolectric.annotation.Implements;
-import org.robolectric.shadows.ShadowCanvas;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18, shadows = { CenterInsideTest.DrawNothingCanvas.class })
-public class CenterInsideTest {
-
-  @Mock Resource<Bitmap> resource;
-  @Mock Transformation<Bitmap> transformation;
-  private BitmapPool pool;
-  private CenterInside centerInside;
-  private int bitmapWidth;
-  private int bitmapHeight;
-
-  @Before
-  public void setUp() {
-    MockitoAnnotations.initMocks(this);
-    bitmapWidth = 100;
-    bitmapHeight = 100;
-    Bitmap bitmap = Bitmap.createBitmap(bitmapWidth, bitmapHeight, Bitmap.Config.ARGB_8888);
-    when(resource.get()).thenReturn(bitmap);
-
-    pool = new BitmapPoolAdapter();
-
-    centerInside = new CenterInside(pool);
-  }
-
-  @Test
-  public void testReturnsGivenResourceIfMatchesSizeExactly() {
-    Resource<Bitmap> result =
-            centerInside.transform(resource, bitmapWidth, bitmapHeight);
-
-    assertEquals(resource, result);
-  }
-
-  @Test
-  public void testReturnsGivenResourceIfSmallerThanTarget() {
-    Resource<Bitmap> result =
-        centerInside.transform(resource, 150, 150);
-
-    assertEquals(resource, result);
-  }
-
-  @Test
-  public void testReturnsNewResourceIfLargerThanTarget() {
-    Resource<Bitmap> result =
-        centerInside.transform(resource, 50, 50);
-
-    assertNotEquals(resource, result);
-  }
-
-
-  @Test
-  public void testDoesNotRecycleGivenResourceIfMatchesSizeExactly() {
-    centerInside.transform(resource, bitmapWidth, bitmapHeight);
-
-    verify(resource, never()).recycle();
-  }
-
-  @Test
-  public void testDoesNotRecycleGivenResource() {
-    centerInside.transform(resource, 50, 50);
-
-    verify(resource, never()).recycle();
-  }
-
-  @Test
-  public void testEquals() throws NoSuchAlgorithmException {
-    KeyAssertions.assertSame(centerInside, new CenterInside(pool));
-
-    doAnswer(new Util.WriteDigest("other")).when(transformation)
-        .updateDiskCacheKey(any(MessageDigest.class));
-    KeyAssertions.assertDifferent(centerInside, transformation);
-  }
-
-  @Implements(Canvas.class)
-  public static final class DrawNothingCanvas extends ShadowCanvas {
-
-    @Implementation
-    @Override
-    public void drawBitmap(Bitmap bitmap, Matrix matrix, Paint paint) {
-      // Do nothing.
-    }
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/resource/bitmap/CircleCropTest.java b/library/src/test/java/com/bumptech/glide/load/resource/bitmap/CircleCropTest.java
deleted file mode 100644
index e9dc68063..000000000
--- a/library/src/test/java/com/bumptech/glide/load/resource/bitmap/CircleCropTest.java
+++ /dev/null
@@ -1,115 +0,0 @@
-package com.bumptech.glide.load.resource.bitmap;
-
-import static org.junit.Assert.assertEquals;
-import static org.mockito.Matchers.any;
-import static org.mockito.Matchers.anyInt;
-import static org.mockito.Mockito.when;
-
-import android.annotation.TargetApi;
-import android.graphics.Bitmap;
-import android.graphics.Canvas;
-import android.graphics.Color;
-import android.graphics.Paint;
-import android.graphics.Rect;
-import android.os.Build;
-import com.bumptech.glide.load.engine.bitmap_recycle.BitmapPool;
-import com.bumptech.glide.tests.Util;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.mockito.Mock;
-import org.mockito.MockitoAnnotations;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.RuntimeEnvironment;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE)
-public class CircleCropTest {
-  @Mock private BitmapPool bitmapPool;
-
-  private CircleCrop circleCrop;
-
-  @Before
-  public void setup() {
-    MockitoAnnotations.initMocks(this);
-    when(bitmapPool.get(anyInt(), anyInt(), any(Bitmap.Config.class)))
-        .thenAnswer(new Util.CreateBitmap());
-    circleCrop = new CircleCrop(RuntimeEnvironment.application);
-  }
-
-  @Test
-  public void testTransform_withSquare() {
-    Bitmap redSquare = createSolidRedBitmap(50, 50);
-    Bitmap result = circleCrop.transform(bitmapPool, redSquare, 50, 50);
-    Bitmap expected = createBitmapWithRedCircle(50, 50);
-
-    assertSamePixels(expected, result);
-  }
-
-  @Test
-  public void testTransform_reusesBitmap() {
-    Bitmap toReuse = Bitmap.createBitmap(50, 50, Bitmap.Config.ARGB_8888);
-    when(bitmapPool.get(50, 50, Bitmap.Config.ARGB_8888)).thenReturn(toReuse);
-
-    Bitmap redSquare = createSolidRedBitmap(50, 50);
-    Bitmap result = circleCrop.transform(bitmapPool, redSquare, 50, 50);
-
-    assertEquals(toReuse, result);
-  }
-
-  @Test
-  public void testTransform_withWideRectangle() {
-    Bitmap redWideRectangle = createSolidRedBitmap(100, 50);
-    Bitmap result = circleCrop.transform(bitmapPool, redWideRectangle, 80, 50);
-    Bitmap expected = createBitmapWithRedCircle(80, 50);
-
-    assertSamePixels(expected, result);
-  }
-
-  @Test
-  public void testTransform_withNarrowRectangle() {
-    Bitmap redNarrowRectangle = createSolidRedBitmap(20, 50);
-    Bitmap result = circleCrop.transform(bitmapPool, redNarrowRectangle, 40, 80);
-    Bitmap expected = createBitmapWithRedCircle(40, 80);
-
-    assertSamePixels(expected, result);
-  }
-
-  private void assertSamePixels(Bitmap expected, Bitmap actual) {
-    assertEquals(expected.getWidth(), actual.getWidth());
-    assertEquals(expected.getHeight(), actual.getHeight());
-    assertEquals(expected.getConfig(), actual.getConfig());
-    for (int y = 0; y < expected.getHeight(); y++) {
-      for (int x = 0; x < expected.getWidth(); x++) {
-        assertEquals(expected.getPixel(x, y), actual.getPixel(x, y));
-      }
-    }
-  }
-
-  @TargetApi(Build.VERSION_CODES.HONEYCOMB_MR1)
-  private Bitmap createBitmapWithRedCircle(int width, int height) {
-    int minEdge = Math.min(width, height);
-    float radius = minEdge / 2f;
-
-    Bitmap result = Bitmap.createBitmap(minEdge, minEdge, Bitmap.Config.ARGB_8888);
-    result.setHasAlpha(true);
-    Canvas canvas = new Canvas(result);
-    Paint paint = new Paint();
-    paint.setAntiAlias(true);
-    paint.setColor(Color.RED);
-
-    canvas.drawCircle(radius, radius, radius, paint);
-    return result;
-  }
-
-  private Bitmap createSolidRedBitmap(int width, int height) {
-    Bitmap result = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
-    Canvas canvas = new Canvas(result);
-    Paint paint = new Paint();
-    paint.setColor(Color.RED);
-    Rect rect = new Rect(0, 0, width, height);
-    canvas.drawRect(rect, paint);
-    return result;
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/resource/bitmap/DownsampleStrategyTest.java b/library/src/test/java/com/bumptech/glide/load/resource/bitmap/DownsampleStrategyTest.java
deleted file mode 100644
index c6a624025..000000000
--- a/library/src/test/java/com/bumptech/glide/load/resource/bitmap/DownsampleStrategyTest.java
+++ /dev/null
@@ -1,116 +0,0 @@
-package com.bumptech.glide.load.resource.bitmap;
-
-import static com.google.common.truth.Truth.assertThat;
-
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class DownsampleStrategyTest {
-
-  @Test
-  public void testAtMost_withSourceSmallerInOneDimensions_returnsScaleFactorForLargestDimension() {
-    assertThat(DownsampleStrategy.AT_MOST.getScaleFactor(100, 200, 200, 200)).isEqualTo(1f);
-    assertThat(DownsampleStrategy.AT_MOST.getScaleFactor(200, 100, 200, 200)).isEqualTo(1f);
-    assertThat(DownsampleStrategy.AT_MOST.getScaleFactor(270, 480, 724, 440)).isEqualTo(1 / 2f);
-    assertThat(DownsampleStrategy.AT_MOST.getScaleFactor(400, 200, 200, 200)).isEqualTo(1 / 2f);
-    assertThat(DownsampleStrategy.AT_MOST.getScaleFactor(800, 200, 200, 200)).isEqualTo(1 / 4f);
-  }
-
-  @Test
-  public void testAtMost_withSourceExactlyEqualToRequested_returnsScaleFactorOfOne() {
-    assertThat(DownsampleStrategy.AT_MOST.getScaleFactor(100, 100, 100, 100)).isEqualTo(1f);
-    assertThat(DownsampleStrategy.AT_MOST.getScaleFactor(1234, 452, 1234, 452)).isEqualTo(1f);
-    assertThat(DownsampleStrategy.AT_MOST.getScaleFactor(341, 122, 341, 122)).isEqualTo(1f);
-  }
-
-  @Test
-  public void testAtMost_withSourceLessThanTwiceRequestedSize_returnsScaleFactorOfTwo() {
-    assertThat(DownsampleStrategy.AT_MOST.getScaleFactor(150, 150, 100, 100)).isEqualTo(1 / 2f);
-    assertThat(DownsampleStrategy.AT_MOST.getScaleFactor(101, 101, 100, 100)).isEqualTo(1 / 2f);
-    assertThat(DownsampleStrategy.AT_MOST.getScaleFactor(199, 199, 100, 100)).isEqualTo(1 / 2f);
-  }
-
-  @Test
-  public void testAtMost_withSourceGreaterThanRequestedSize_returnsPowerOfTwoScaleFactor() {
-    assertThat(DownsampleStrategy.AT_MOST.getScaleFactor(200, 200, 100, 100)).isEqualTo(1 / 2f);
-    assertThat(DownsampleStrategy.AT_MOST.getScaleFactor(300, 300, 100, 100)).isEqualTo(1 / 4f);
-    assertThat(DownsampleStrategy.AT_MOST.getScaleFactor(400, 400, 100, 100)).isEqualTo(1 / 4f);
-    assertThat(DownsampleStrategy.AT_MOST.getScaleFactor(1000, 200, 100, 100)).isEqualTo(1 / 16f);
-    assertThat(DownsampleStrategy.AT_MOST.getScaleFactor(1000, 1000, 100, 100)).isEqualTo(1 / 16f);
-  }
-
-  @Test
-  public void testAtMost_withSourceGreaterInOneDimension_returnsScaleFactorOfLargestDimension() {
-    assertThat(DownsampleStrategy.AT_MOST.getScaleFactor(101, 200, 100, 100)).isEqualTo(1 / 2f);
-    assertThat(DownsampleStrategy.AT_MOST.getScaleFactor(199, 200, 100, 100)).isEqualTo(1 / 2f);
-    assertThat(DownsampleStrategy.AT_MOST.getScaleFactor(400, 200, 100, 100)).isEqualTo(1 / 4f);
-    assertThat(DownsampleStrategy.AT_MOST.getScaleFactor(1000, 400, 100, 100)).isEqualTo(1 / 16f);
-  }
-
-  @Test
-  public void testAtLeast_withSourceSmallerInOneDimension_returnsScaleFactorOfOne() {
-    assertThat(DownsampleStrategy.AT_LEAST.getScaleFactor(100, 200, 200, 200)).isEqualTo(1f);
-    assertThat(DownsampleStrategy.AT_LEAST.getScaleFactor(200, 100, 200, 200)).isEqualTo(1f);
-    assertThat(DownsampleStrategy.AT_LEAST.getScaleFactor(270, 480, 724, 440)).isEqualTo(1f);
-  }
-
-  @Test
-  public void testAtLeast_withSourceExactlyEqualToRequested_returnsScaleFactorOfOne() {
-    assertThat(DownsampleStrategy.AT_LEAST.getScaleFactor(100, 100, 100, 100)).isEqualTo(1f);
-    assertThat(DownsampleStrategy.AT_LEAST.getScaleFactor(1234, 452, 1234, 452)).isEqualTo(1f);
-    assertThat(DownsampleStrategy.AT_LEAST.getScaleFactor(341, 122, 341, 122)).isEqualTo(1f);
-  }
-
-  @Test
-  public void testAtLeast_withSourceLessThanTwiceRequestedSize_returnsScaleFactorOfOne() {
-    assertThat(DownsampleStrategy.AT_LEAST.getScaleFactor(150, 150, 100, 100)).isEqualTo(1f);
-    assertThat(DownsampleStrategy.AT_LEAST.getScaleFactor(101, 101, 100, 100)).isEqualTo(1f);
-    assertThat(DownsampleStrategy.AT_LEAST.getScaleFactor(199, 199, 100, 100)).isEqualTo(1f);
-  }
-
-  @Test
-  public void testAtLeast_withSourceGreaterThanRequestedSize_returnsPowerOfTwoScaleFactor() {
-    assertThat(DownsampleStrategy.AT_LEAST.getScaleFactor(200, 200, 100, 100)).isEqualTo(1 / 2f);
-    assertThat(DownsampleStrategy.AT_LEAST.getScaleFactor(300, 300, 100, 100)).isEqualTo(1 / 2f);
-    assertThat(DownsampleStrategy.AT_LEAST.getScaleFactor(400, 400, 100, 100)).isEqualTo(1 / 4f);
-    assertThat(DownsampleStrategy.AT_LEAST.getScaleFactor(1000, 200, 100, 100)).isEqualTo(1 / 2f);
-    assertThat(DownsampleStrategy.AT_LEAST.getScaleFactor(1000, 1000, 100, 100)).isEqualTo(1 / 8f);
-  }
-
-  @Test
-  public void testAtLeast_withSourceGreaterInOneDimension_returnsScaleFactorOfSmallestDimension() {
-    assertThat(DownsampleStrategy.AT_LEAST.getScaleFactor(101, 200, 100, 100)).isEqualTo(1f);
-    assertThat(DownsampleStrategy.AT_LEAST.getScaleFactor(199, 200, 100, 100)).isEqualTo(1f);
-    assertThat(DownsampleStrategy.AT_LEAST.getScaleFactor(400, 200, 100, 100)).isEqualTo(1 / 2f);
-    assertThat(DownsampleStrategy.AT_LEAST.getScaleFactor(1000, 400, 100, 100)).isEqualTo(1 / 4f);
-  }
-
-  @Test
-  public void testCenterInside_scalesImageToFitWithinRequestedBounds() {
-    assertThat(DownsampleStrategy.FIT_CENTER.getScaleFactor(100, 200, 300, 300))
-        .isEqualTo(300 / 200f);
-    assertThat(DownsampleStrategy.FIT_CENTER.getScaleFactor(270, 480, 724, 440))
-        .isEqualTo(440 / 480f);
-    assertThat(DownsampleStrategy.FIT_CENTER.getScaleFactor(100, 100, 100, 100)).isEqualTo(1f);
-  }
-
-  @Test
-  public void testCenterOutside_scalesImageToFitAroundRequestedBounds() {
-    assertThat(DownsampleStrategy.CENTER_OUTSIDE.getScaleFactor(100, 200, 300, 300))
-        .isEqualTo(300 / 100f);
-    assertThat(DownsampleStrategy.CENTER_OUTSIDE.getScaleFactor(270, 480, 724, 440))
-        .isEqualTo(724 / 270f);
-    assertThat(DownsampleStrategy.CENTER_OUTSIDE.getScaleFactor(100, 100, 100, 100)).isEqualTo(1f);
-  }
-
-  @Test
-  public void testNone_alwaysReturnsOne() {
-    assertThat(DownsampleStrategy.NONE.getScaleFactor(100, 100, 100, 100)).isEqualTo(1f);
-    assertThat(DownsampleStrategy.NONE.getScaleFactor(200, 200, 100, 100)).isEqualTo(1f);
-    assertThat(DownsampleStrategy.NONE.getScaleFactor(100, 100, 200, 200)).isEqualTo(1f);
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/resource/bitmap/DownsamplerTest.java b/library/src/test/java/com/bumptech/glide/load/resource/bitmap/DownsamplerTest.java
deleted file mode 100644
index 3bcd69b66..000000000
--- a/library/src/test/java/com/bumptech/glide/load/resource/bitmap/DownsamplerTest.java
+++ /dev/null
@@ -1,228 +0,0 @@
-package com.bumptech.glide.load.resource.bitmap;
-
-import static com.google.common.collect.Range.closed;
-import static com.google.common.truth.Truth.assertThat;
-import static org.junit.Assert.assertEquals;
-import static org.mockito.Matchers.anyInt;
-import static org.mockito.Mockito.when;
-
-import android.graphics.Bitmap;
-import android.graphics.BitmapFactory;
-import android.os.Build;
-import android.util.DisplayMetrics;
-import com.bumptech.glide.load.DecodeFormat;
-import com.bumptech.glide.load.Options;
-import com.bumptech.glide.load.engine.Resource;
-import com.bumptech.glide.load.engine.bitmap_recycle.ArrayPool;
-import com.bumptech.glide.load.engine.bitmap_recycle.BitmapPool;
-import com.bumptech.glide.load.resource.bitmap.DownsamplerTest.AllocationSizeBitmap;
-import com.bumptech.glide.tests.Util;
-import java.io.ByteArrayInputStream;
-import java.io.ByteArrayOutputStream;
-import java.io.FileNotFoundException;
-import java.io.IOException;
-import java.io.InputStream;
-import org.junit.After;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.mockito.Matchers;
-import org.mockito.Mock;
-import org.mockito.MockitoAnnotations;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.RuntimeEnvironment;
-import org.robolectric.annotation.Config;
-import org.robolectric.annotation.Implementation;
-import org.robolectric.annotation.Implements;
-import org.robolectric.shadows.ShadowBitmap;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 19, shadows = AllocationSizeBitmap.class)
-public class DownsamplerTest {
-  @Mock private BitmapPool bitmapPool;
-  @Mock private ArrayPool byteArrayPool;
-  private Downsampler downsampler;
-  private Options options;
-  private int initialSdkVersion;
-
-  @Before
-  public void setUp() throws Exception {
-    MockitoAnnotations.initMocks(this);
-    options = new Options();
-    DisplayMetrics displayMetrics =
-        RuntimeEnvironment.application.getResources().getDisplayMetrics();
-    when(byteArrayPool.get(anyInt(), Matchers.eq(byte[].class)))
-        .thenReturn(new byte[ArrayPool.STANDARD_BUFFER_SIZE_BYTES]);
-    downsampler = new Downsampler(displayMetrics, bitmapPool, byteArrayPool);
-
-    initialSdkVersion = Build.VERSION.SDK_INT;
-  }
-
-  @After
-  public void tearDown() {
-    Util.setSdkVersionInt(initialSdkVersion);
-  }
-
-  @Test
-  public void testAlwaysArgb8888() throws IOException {
-    Bitmap rgb565 = Bitmap.createBitmap(100, 100, Bitmap.Config.RGB_565);
-    InputStream stream = compressBitmap(rgb565, Bitmap.CompressFormat.JPEG);
-
-    options.set(Downsampler.DECODE_FORMAT, DecodeFormat.PREFER_ARGB_8888);
-    Resource<Bitmap> result = downsampler.decode(stream, 100, 100, options);
-    assertEquals(Bitmap.Config.ARGB_8888, result.get().getConfig());
-  }
-
-  @Test
-  public void testPreferRgb565() throws IOException {
-    Bitmap rgb565 = Bitmap.createBitmap(100, 100, Bitmap.Config.ARGB_8888);
-    InputStream stream = compressBitmap(rgb565, Bitmap.CompressFormat.JPEG);
-
-    options.set(Downsampler.DECODE_FORMAT, DecodeFormat.PREFER_RGB_565);
-    Resource<Bitmap> result = downsampler.decode(stream, 100, 100, options);
-    assertEquals(Bitmap.Config.RGB_565, result.get().getConfig());
-  }
-
-  @Test
-  public void testCalculateScaling_withInvalidSourceSizes_doesNotCrash() {
-    runScaleTest(0, 0, 100, 100, DownsampleStrategy.AT_MOST, 0, 0);
-    runScaleTest(-1, -1, 100, 100, DownsampleStrategy.AT_MOST, -1, -1);
-    runScaleTest(0, 0, 100, 100, DownsampleStrategy.AT_LEAST, 0, 0);
-    runScaleTest(-1, -1, 100, 100, DownsampleStrategy.CENTER_OUTSIDE, -1, -1);
-  }
-
-  @Test
-  public void testCalculateScaling_withAtMost() {
-    DownsampleStrategy strategy = DownsampleStrategy.AT_MOST;
-    runScaleTest(100, 100, 100, 100, strategy, 100, 100);
-    runScaleTest(200, 200, 100, 100, strategy, 100, 100);
-    runScaleTest(400, 400, 100, 100, strategy, 100, 100);
-    runScaleTest(300, 300, 100, 100, strategy, 75, 75);
-    runScaleTest(799, 100, 100, 100, strategy, 100, 13);
-    runScaleTest(800, 100, 100, 100, strategy, 100, 13);
-    runScaleTest(801, 100, 100, 100, strategy, 50, 6);
-    runScaleTest(100, 800, 100, 100, strategy, 13, 100);
-    runScaleTest(87, 78, 100, 100, strategy, 87, 78);
-  }
-
-  @Test
-  public void testCalculateScaling_withAtLeast() {
-    DownsampleStrategy strategy = DownsampleStrategy.AT_LEAST;
-    runScaleTest(100, 100, 100, 100, strategy, 100, 100);
-    runScaleTest(200, 200, 100, 100, strategy, 100, 100);
-    runScaleTest(400, 400, 100, 100, strategy, 100, 100);
-    runScaleTest(300, 300, 100, 100, strategy, 150, 150);
-    runScaleTest(799, 100, 100, 100, strategy, 799, 100);
-    runScaleTest(800, 100, 100, 100, strategy, 800, 100);
-    runScaleTest(801, 100, 100, 100, strategy, 801, 100);
-    runScaleTest(100, 800, 100, 100, strategy, 100, 800);
-    runScaleTest(87, 78, 100, 100, strategy, 87, 78);
-  }
-
-  @Test
-  public void testCalculateScaling_withCenterInside() {
-    DownsampleStrategy strategy = DownsampleStrategy.FIT_CENTER;
-    runScaleTest(100, 100, 100, 100, strategy, 100, 100);
-    runScaleTest(200, 200, 100, 100, strategy, 100, 100);
-    runScaleTest(400, 400, 100, 100, strategy, 100, 100);
-    runScaleTest(300, 300, 100, 100, strategy, 100, 100);
-    runScaleTest(799, 100, 100, 100, strategy, 100, 13);
-    runScaleTest(800, 100, 100, 100, strategy, 100, 13);
-    runScaleTest(801, 100, 100, 100, strategy, 100, 13);
-    runScaleTest(100, 800, 100, 100, strategy, 13, 100);
-    runScaleTest(87, 78, 100, 100, strategy, 100, 90);
-  }
-
-  @Test
-  public void testCalculateScaling_withCenterOutside() {
-    DownsampleStrategy strategy = DownsampleStrategy.CENTER_OUTSIDE;
-    runScaleTest(100, 100, 100, 100, strategy, 100, 100);
-    runScaleTest(200, 200, 100, 100, strategy, 100, 100);
-    runScaleTest(400, 400, 100, 100, strategy, 100, 100);
-    runScaleTest(300, 300, 100, 100, strategy, 100, 100);
-    runScaleTest(799, 100, 100, 100, strategy, 799, 100);
-    runScaleTest(800, 100, 100, 100, strategy, 800, 100);
-    runScaleTest(801, 100, 100, 100, strategy, 801, 100);
-    runScaleTest(100, 800, 100, 100, strategy, 100, 800);
-    runScaleTest(87, 78, 100, 100, strategy, 112, 100);
-  }
-
-  @Test
-  public void testCalculateScaling_withNone() {
-    DownsampleStrategy strategy = DownsampleStrategy.NONE;
-    runScaleTest(100, 100, 100, 100, strategy, 100, 100);
-    runScaleTest(200, 200, 100, 100, strategy, 200, 200);
-    runScaleTest(400, 400, 100, 100, strategy, 400, 400);
-    runScaleTest(300, 300, 100, 100, strategy, 300, 300);
-    runScaleTest(799, 100, 100, 100, strategy, 799, 100);
-    runScaleTest(800, 100, 100, 100, strategy, 800, 100);
-    runScaleTest(801, 100, 100, 100, strategy, 801, 100);
-    runScaleTest(100, 800, 100, 100, strategy, 100, 800);
-    runScaleTest(87, 78, 100, 100, strategy, 87, 78);
-  }
-
-  // BitmapFactory does not support downsampling wbmp files on platforms <=M. See b/27305903.
-  @Test
-  public void testCalculateScaling_withWbmp() {
-    Util.setSdkVersionInt(23);
-    DownsampleStrategy strategy = DownsampleStrategy.FIT_CENTER;
-    BitmapFactory.Options options = new BitmapFactory.Options();
-
-    options.outMimeType = "image/vnd.wap.wbmp";
-    runScaleTest(100, 100, 100, 100, strategy, 100, 100, options);
-    runScaleTest(200, 200, 100, 100, strategy, 100, 100, options);
-    runScaleTest(400, 400, 100, 100, strategy, 100, 100, options);
-    runScaleTest(300, 300, 100, 100, strategy, 100, 100, options);
-    runScaleTest(799, 100, 100, 100, strategy, 100, 13, options);
-    runScaleTest(800, 100, 100, 100, strategy, 100, 13, options);
-    runScaleTest(801, 100, 100, 100, strategy, 100, 13, options);
-    runScaleTest(100, 800, 100, 100, strategy, 13, 100, options);
-    runScaleTest(87, 78, 100, 100, strategy, 100, 90, options);
-  }
-
-  private static void runScaleTest(int sourceWidth, int sourceHeight, int targetWidth,
-      int targetHeight, DownsampleStrategy strategy, int expectedWidth, int expectedHeight) {
-    runScaleTest(sourceWidth, sourceHeight, targetWidth, targetHeight, strategy, expectedWidth,
-        expectedHeight, new BitmapFactory.Options());
-  }
-
-  private static void runScaleTest(int sourceWidth, int sourceHeight, int targetWidth,
-      int targetHeight, DownsampleStrategy strategy, int expectedWidth, int expectedHeight,
-      BitmapFactory.Options options) {
-    Downsampler.calculateScaling(strategy, 0, sourceWidth, sourceHeight, targetWidth, targetHeight,
-        options);
-    assertSize(sourceWidth, sourceHeight, expectedWidth, expectedHeight, options);
-  }
-
-  private static void assertSize(int sourceWidth, int sourceHeight, int expectedWidth,
-      int expectedHeight, BitmapFactory.Options options) {
-    float sampleSize = Math.max(1, options.inSampleSize);
-    int downsampledWidth = (int) ((sourceWidth / sampleSize) + 0.5f);
-    int downsampledHeight = (int) ((sourceHeight / sampleSize) + 0.5f);
-
-    float scaleFactor = options.inScaled && options.inTargetDensity > 0 && options.inDensity > 0
-        ? options.inTargetDensity / (float) options.inDensity : 1f;
-    int scaledWidth = (int) Math.ceil(downsampledWidth * scaleFactor);
-    int scaledHeight = (int) Math.ceil(downsampledHeight * scaleFactor);
-
-    assertThat(scaledWidth).isIn(closed(expectedWidth, expectedWidth + 1));
-    assertThat(scaledHeight).isIn(closed(expectedHeight, expectedHeight + 1));
-  }
-
-  private InputStream compressBitmap(Bitmap bitmap, Bitmap.CompressFormat compressFormat)
-      throws FileNotFoundException {
-    ByteArrayOutputStream os = new ByteArrayOutputStream();
-    bitmap.compress(compressFormat, 100, os);
-    return new ByteArrayInputStream(os.toByteArray());
-  }
-
-  // Robolectric doesn't implement getAllocationByteCount correctly.
-  @Implements(Bitmap.class)
-  public static class AllocationSizeBitmap extends ShadowBitmap {
-
-    @Implementation
-    public int getAllocationByteCount() {
-      return getWidth() * getHeight() * (getConfig() == Bitmap.Config.ARGB_8888 ? 4 : 2);
-    }
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/resource/bitmap/FitCenterTest.java b/library/src/test/java/com/bumptech/glide/load/resource/bitmap/FitCenterTest.java
deleted file mode 100644
index 9a18ecbdb..000000000
--- a/library/src/test/java/com/bumptech/glide/load/resource/bitmap/FitCenterTest.java
+++ /dev/null
@@ -1,97 +0,0 @@
-package com.bumptech.glide.load.resource.bitmap;
-
-import static org.junit.Assert.assertEquals;
-import static org.mockito.Matchers.any;
-import static org.mockito.Mockito.doAnswer;
-import static org.mockito.Mockito.never;
-import static org.mockito.Mockito.verify;
-import static org.mockito.Mockito.when;
-
-import android.graphics.Bitmap;
-import android.graphics.Canvas;
-import android.graphics.Matrix;
-import android.graphics.Paint;
-import com.bumptech.glide.load.Transformation;
-import com.bumptech.glide.load.engine.Resource;
-import com.bumptech.glide.load.engine.bitmap_recycle.BitmapPool;
-import com.bumptech.glide.load.engine.bitmap_recycle.BitmapPoolAdapter;
-import com.bumptech.glide.tests.KeyAssertions;
-import com.bumptech.glide.tests.Util;
-import java.security.MessageDigest;
-import java.security.NoSuchAlgorithmException;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.mockito.Mock;
-import org.mockito.MockitoAnnotations;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.annotation.Config;
-import org.robolectric.annotation.Implementation;
-import org.robolectric.annotation.Implements;
-import org.robolectric.shadows.ShadowCanvas;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18, shadows = { FitCenterTest.DrawNothingCanvas.class })
-public class FitCenterTest {
-
-  @Mock Resource<Bitmap> resource;
-  @Mock Transformation<Bitmap> transformation;
-  private BitmapPool pool;
-  private FitCenter fitCenter;
-  private int bitmapWidth;
-  private int bitmapHeight;
-
-  @Before
-  public void setUp() {
-    MockitoAnnotations.initMocks(this);
-    bitmapWidth = 100;
-    bitmapHeight = 100;
-    Bitmap bitmap = Bitmap.createBitmap(bitmapWidth, bitmapHeight, Bitmap.Config.ARGB_8888);
-    when(resource.get()).thenReturn(bitmap);
-
-    pool = new BitmapPoolAdapter();
-
-    fitCenter = new FitCenter(pool);
-  }
-
-  @Test
-  public void testReturnsGivenResourceIfMatchesSizeExactly() {
-    Resource<Bitmap> result =
-        fitCenter.transform(resource, bitmapWidth, bitmapHeight);
-
-    assertEquals(resource, result);
-  }
-
-  @Test
-  public void testDoesNotRecycleGivenResourceIfMatchesSizeExactly() {
-    fitCenter.transform(resource, bitmapWidth, bitmapHeight);
-
-    verify(resource, never()).recycle();
-  }
-
-  @Test
-  public void testDoesNotRecycleGivenResource() {
-    fitCenter.transform(resource, 50, 50);
-
-    verify(resource, never()).recycle();
-  }
-
-  @Test
-  public void testEquals() throws NoSuchAlgorithmException {
-    KeyAssertions.assertSame(fitCenter, new FitCenter(pool));
-
-    doAnswer(new Util.WriteDigest("other")).when(transformation)
-        .updateDiskCacheKey(any(MessageDigest.class));
-    KeyAssertions.assertDifferent(fitCenter, transformation);
-  }
-
-  @Implements(Canvas.class)
-  public static final class DrawNothingCanvas extends ShadowCanvas {
-
-    @Implementation
-    @Override
-    public void drawBitmap(Bitmap bitmap, Matrix matrix, Paint paint) {
-      // Do nothing.
-    }
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/resource/bitmap/ImageHeaderParserTest.java b/library/src/test/java/com/bumptech/glide/load/resource/bitmap/ImageHeaderParserTest.java
deleted file mode 100644
index ed6b2c680..000000000
--- a/library/src/test/java/com/bumptech/glide/load/resource/bitmap/ImageHeaderParserTest.java
+++ /dev/null
@@ -1,254 +0,0 @@
-package com.bumptech.glide.load.resource.bitmap;
-
-import static com.google.common.truth.Truth.assertThat;
-import static org.junit.Assert.assertEquals;
-
-import com.bumptech.glide.load.engine.bitmap_recycle.ArrayPool;
-import com.bumptech.glide.load.engine.bitmap_recycle.LruArrayPool;
-import com.bumptech.glide.load.resource.bitmap.ImageHeaderParser.ImageType;
-import com.bumptech.glide.testutil.TestResourceUtil;
-import java.io.ByteArrayInputStream;
-import java.io.FilterInputStream;
-import java.io.IOException;
-import java.io.InputStream;
-import java.nio.ByteBuffer;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.annotation.Config;
-import org.robolectric.util.Util;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class ImageHeaderParserTest {
-
-  private static final byte[] PNG_HEADER_WITH_IHDR_CHUNK =
-      new byte[] { (byte) 0x89, 0x50, 0x4e, 0x47, 0xd, 0xa, 0x1a, 0xa, 0x0, 0x0, 0x0, 0xd, 0x49,
-          0x48, 0x44, 0x52, 0x0, 0x0, 0x1, (byte) 0x90, 0x0, 0x0, 0x1, 0x2c, 0x8, 0x6 };
-
-  private ArrayPool byteArrayPool;
-
-  @Before
-  public void setUp() {
-    byteArrayPool = new LruArrayPool();
-  }
-
-  @Test
-  public void testCanParsePngType() throws IOException {
-    // PNG magic number from: http://en.wikipedia.org/wiki/Portable_Network_Graphics.
-    byte[] data = new byte[] { (byte) 0x89, 0x50, 0x4e, 0x47, 0x0d, 0x0a, 0x1a, 0x0a };
-    runTest(data, new ParserTestCase() {
-      @Override
-      public void run(ImageHeaderParser parser) throws IOException {
-        assertEquals(ImageType.PNG, parser.getType());
-      }
-    });
-  }
-
-  @Test
-  public void testCanParsePngWithAlpha() throws IOException {
-    for (int i = 3; i <= 6; i++) {
-      byte[] pngHeaderWithIhdrChunk = generatePngHeaderWithIhdr(i);
-      runTest(pngHeaderWithIhdrChunk, new ParserTestCase() {
-        @Override
-        public void run(ImageHeaderParser parser) throws IOException {
-          assertEquals(ImageType.PNG_A, parser.getType());
-        }
-      });
-    }
-  }
-
-  @Test
-  public void testCanParsePngWithoutAlpha() throws IOException {
-    for (int i = 0; i < 3; i++) {
-      byte[] pngHeaderWithIhdrChunk = generatePngHeaderWithIhdr(i);
-      runTest(pngHeaderWithIhdrChunk, new ParserTestCase() {
-        @Override
-        public void run(ImageHeaderParser parser) throws IOException {
-          assertEquals(ImageType.PNG, parser.getType());
-        }
-      });
-    }
-  }
-
-  @Test
-  public void testCanParseJpegType() throws IOException {
-    byte[] data = new byte[] { (byte) 0xFF, (byte) 0xD8 };
-    runTest(data, new ParserTestCase() {
-      @Override
-      public void run(ImageHeaderParser parser) throws IOException {
-        assertEquals(ImageType.JPEG, parser.getType());
-      }
-    });
-  }
-
-  @Test
-  public void testCanParseGifType() throws IOException {
-    byte[] data = new byte[] { 'G', 'I', 'F' };
-    runTest(data, new ParserTestCase() {
-      @Override
-      public void run(ImageHeaderParser parser) throws IOException {
-        assertEquals(ImageType.GIF, parser.getType());
-      }
-    });
-  }
-
-  @Test
-  public void testCanParseWebpWithAlpha() throws IOException {
-    byte[] data = new byte[] { 0x52, 0x49, 0x46, 0x46, 0x3c, 0x50, 0x00, 0x00, 0x57, 0x45, 0x42,
-        0x50, 0x56, 0x50, 0x38, 0x4c, 0x30, 0x50, 0x00, 0x00, 0x2f, (byte) 0xef, (byte) 0x80, 0x15,
-        0x10, (byte) 0x8d, 0x30, 0x68, 0x1b, (byte) 0xc9, (byte) 0x91, (byte) 0xb2 };
-    runTest(data, new ParserTestCase() {
-      @Override
-      public void run(ImageHeaderParser parser) throws IOException {
-        assertEquals(ImageType.WEBP_A, parser.getType());
-      }
-    });
-  }
-
-  @Test
-  public void testCanParseWebpWithoutAlpha() throws IOException {
-    byte[] data = new byte[] { 0x52, 0x49, 0x46, 0x46, 0x72, 0x1c, 0x00, 0x00, 0x57, 0x45, 0x42,
-        0x50, 0x56, 0x50, 0x38, 0x20, 0x66, 0x1c, 0x00, 0x00, 0x30, 0x3c, 0x01, (byte) 0x9d, 0x01,
-        0x2a, 0x52, 0x02, (byte) 0x94, 0x03, 0x00, (byte) 0xc7 };
-    runTest(data, new ParserTestCase() {
-      @Override
-      public void run(ImageHeaderParser parser) throws IOException {
-        assertEquals(ImageType.WEBP, parser.getType());
-      }
-    });
-  }
-
-  @Test
-  public void testReturnsUnknownTypeForUnknownImageHeaders() throws IOException {
-    byte[] data = new byte[] { 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0 };
-    runTest(data, new ParserTestCase() {
-      @Override
-      public void run(ImageHeaderParser parser) throws IOException {
-        assertEquals(ImageType.UNKNOWN, parser.getType());
-      }
-    });
-  }
-
-  // Test for #286.
-  @Test
-  public void testHandlesParsingOrientationWithMinimalExifSegment() throws IOException {
-    byte[] data =
-        Util.readBytes(TestResourceUtil.openResource(getClass(), "short_exif_sample.jpg"));
-    runTest(data, new ParserTestCase() {
-      @Override
-      public void run(ImageHeaderParser parser) throws IOException {
-        assertEquals(-1, parser.getOrientation());
-      }
-    });
-  }
-
-  @Test
-  public void testReturnsUnknownForEmptyData() throws IOException {
-    runTest(new byte[0], new ParserTestCase() {
-      @Override
-      public void run(ImageHeaderParser parser) throws IOException {
-        assertEquals(ImageType.UNKNOWN, parser.getType());
-      }
-    });
-  }
-
-  // Test for #387.
-  @Test
-  public void testHandlesPartialReads() throws IOException {
-    InputStream is = TestResourceUtil.openResource(getClass(), "issue387_rotated_jpeg.jpg");
-    ImageHeaderParser parser = new ImageHeaderParser(new PartialReadInputStream(is), byteArrayPool);
-    assertThat(parser.getOrientation()).isEqualTo(6);
-  }
-
-  // Test for #387.
-  @Test
-  public void testHandlesPartialSkips() throws IOException {
-    InputStream is = TestResourceUtil.openResource(getClass(), "issue387_rotated_jpeg.jpg");
-    ImageHeaderParser parser = new ImageHeaderParser(new PartialSkipInputStream(is), byteArrayPool);
-    assertThat(parser.getOrientation()).isEqualTo(6);
-  }
-
-  @Test
-  public void testHandlesSometimesZeroSkips() throws IOException {
-    InputStream is = new ByteArrayInputStream(
-        new byte[] { (byte) 0x89, 0x50, 0x4e, 0x47, 0x0d, 0x0a, 0x1a, 0x0a });
-    ImageHeaderParser parser =
-        new ImageHeaderParser(new SometimesZeroSkipInputStream(is), byteArrayPool);
-    assertEquals(ImageType.PNG, parser.getType());
-  }
-
-  private interface ParserTestCase {
-    void run(ImageHeaderParser parser) throws IOException;
-  }
-
-  private static void runTest(byte[] data, ParserTestCase test) throws IOException {
-    InputStream is = new ByteArrayInputStream(data);
-    ImageHeaderParser parser = new ImageHeaderParser(is, new LruArrayPool());
-    test.run(parser);
-
-    ByteBuffer buffer = ByteBuffer.wrap(data);
-    parser = new ImageHeaderParser(buffer, new LruArrayPool());
-    test.run(parser);
-  }
-
-  private static byte[] generatePngHeaderWithIhdr(int bitDepth) {
-    byte[] result = new byte[PNG_HEADER_WITH_IHDR_CHUNK.length];
-    System.arraycopy(PNG_HEADER_WITH_IHDR_CHUNK, 0, result, 0, PNG_HEADER_WITH_IHDR_CHUNK.length);
-    result[result.length - 1] = (byte) bitDepth;
-    return result;
-  }
-
-  private static class SometimesZeroSkipInputStream extends FilterInputStream {
-    boolean returnZeroFlag = true;
-
-    protected SometimesZeroSkipInputStream(InputStream in) {
-        super(in);
-    }
-
-    @Override
-    public long skip(long byteCount) throws IOException {
-      final long result;
-      if (returnZeroFlag) {
-        result = 0;
-      } else {
-        result = super.skip(byteCount);
-      }
-      returnZeroFlag = !returnZeroFlag;
-      return result;
-    }
-  }
-
-  private static class PartialSkipInputStream extends FilterInputStream {
-
-    protected PartialSkipInputStream(InputStream in) {
-        super(in);
-    }
-
-    @Override
-    public long skip(long byteCount) throws IOException {
-        long toActuallySkip = byteCount / 2;
-        if (byteCount == 1) {
-            toActuallySkip = 1;
-        }
-        return super.skip(toActuallySkip);
-    }
-  }
-
-  private static class PartialReadInputStream extends FilterInputStream {
-
-    protected PartialReadInputStream(InputStream in) {
-        super(in);
-    }
-
-    @Override
-    public int read(byte[] buffer, int byteOffset, int byteCount) throws IOException {
-        int toActuallyRead = byteCount / 2;
-        if (byteCount == 1) {
-            toActuallyRead = 1;
-        }
-        return super.read(buffer, byteOffset, toActuallyRead);
-    }
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/resource/bitmap/RecyclableBufferedInputStreamTest.java b/library/src/test/java/com/bumptech/glide/load/resource/bitmap/RecyclableBufferedInputStreamTest.java
deleted file mode 100644
index 3260f51ae..000000000
--- a/library/src/test/java/com/bumptech/glide/load/resource/bitmap/RecyclableBufferedInputStreamTest.java
+++ /dev/null
@@ -1,290 +0,0 @@
-package com.bumptech.glide.load.resource.bitmap;
-
-import static org.junit.Assert.assertEquals;
-import static org.junit.Assert.assertTrue;
-import static org.mockito.Mockito.doThrow;
-import static org.mockito.Mockito.mock;
-import static org.mockito.Mockito.times;
-import static org.mockito.Mockito.verify;
-
-import com.bumptech.glide.load.engine.bitmap_recycle.ArrayPool;
-import com.bumptech.glide.load.engine.bitmap_recycle.LruArrayPool;
-import java.io.ByteArrayInputStream;
-import java.io.IOException;
-import java.io.InputStream;
-import java.util.Arrays;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class RecyclableBufferedInputStreamTest {
-
-  private static final int DATA_SIZE = 30;
-  private static final int BUFFER_SIZE = 10;
-
-  private RecyclableBufferedInputStream stream;
-  private byte[] data;
-  private ArrayPool byteArrayPool;
-
-  @Before
-  public void setUp() {
-    data = new byte[DATA_SIZE];
-    for (int i = 0; i < DATA_SIZE; i++) {
-      data[i] = (byte) i;
-    }
-
-    byteArrayPool = new LruArrayPool();
-    InputStream wrapped = new ByteArrayInputStream(data);
-    stream = new RecyclableBufferedInputStream(wrapped, byteArrayPool, BUFFER_SIZE);
-  }
-
-  @Test
-  public void testReturnsTrueForMarkSupported() {
-    assertTrue(stream.markSupported());
-  }
-
-  @Test
-  public void testCanReadIndividualBytes() throws IOException {
-    for (int i = 0; i < data.length; i++) {
-      assertEquals(i, stream.read());
-    }
-    assertEquals(-1, stream.read());
-  }
-
-  @Test
-  public void testCanReadBytesInBulkLargerThanBufferSize() throws IOException {
-    byte[] buffer = new byte[DATA_SIZE];
-    assertEquals(DATA_SIZE, stream.read(buffer, 0, DATA_SIZE));
-    for (int i = 0; i < DATA_SIZE; i++) {
-      assertEquals(i, buffer[i]);
-    }
-  }
-
-  @Test
-  public void testCanReadBytesInBulkSmallerThanBufferSize() throws IOException {
-    int toRead = BUFFER_SIZE / 2;
-    byte[] buffer = new byte[toRead];
-    assertEquals(toRead, stream.read(buffer, 0, toRead));
-    for (int i = 0; i < toRead; i++) {
-      assertEquals(i, buffer[i]);
-    }
-  }
-
-  @Test
-  public void testReadingZeroBytesIntoBufferReadsZeroBytes() throws IOException {
-    // Make sure the next value is not 0.
-    stream.read();
-    byte[] buffer = new byte[BUFFER_SIZE];
-    assertEquals(0, stream.read(buffer, 0, 0));
-
-    for (int i = 0; i < BUFFER_SIZE; i++) {
-      assertEquals(0, buffer[i]);
-    }
-  }
-
-  @Test
-  public void testCanReadIntoBufferLargerThanDataSize() throws IOException {
-    int toRead = DATA_SIZE * 2;
-    byte[] buffer = new byte[toRead];
-    assertEquals(DATA_SIZE, stream.read(buffer, 0, toRead));
-    for (int i = 0; i < DATA_SIZE; i++) {
-      assertEquals(i, buffer[i]);
-    }
-    for (int i = DATA_SIZE; i < toRead; i++) {
-      assertEquals(0, buffer[i]);
-    }
-  }
-
-  @Test
-  public void testCanReadBytesInBulkWithLimit() throws IOException {
-    int toRead = BUFFER_SIZE / 2;
-    byte[] buffer = new byte[BUFFER_SIZE];
-    assertEquals(toRead, stream.read(buffer, 0, toRead));
-
-    // 0, 1, 2, 3, 4, 0, 0, 0, 0, 0
-    for (int i = 0; i < toRead; i++) {
-      assertEquals(i, buffer[i]);
-    }
-    for (int i = toRead; i < BUFFER_SIZE; i++) {
-      assertEquals(0, buffer[i]);
-    }
-  }
-
-  @Test
-  public void testCanReadBytesInBulkWithOffset() throws IOException {
-    int toRead = BUFFER_SIZE / 2;
-    byte[] buffer = new byte[BUFFER_SIZE];
-    assertEquals(toRead, stream.read(buffer, BUFFER_SIZE - toRead, toRead));
-    // 0, 0, 0, 0, 0, 0, 1, 2, 3, 4
-    for (int i = 0; i < toRead; i++) {
-      assertEquals(0, buffer[i]);
-    }
-    for (int i = toRead; i < BUFFER_SIZE; i++) {
-      assertEquals(i - toRead, buffer[i]);
-    }
-  }
-
-  @Test
-  public void testCanReadBytesInBulkWhenSomeButNotAllBytesAreInBuffer() throws IOException {
-    stream.read();
-    byte[] buffer = new byte[BUFFER_SIZE];
-    assertEquals(BUFFER_SIZE, stream.read(buffer, 0, BUFFER_SIZE));
-    for (int i = 1; i < BUFFER_SIZE + 1; i++) {
-      assertEquals(i, buffer[i - 1]);
-    }
-  }
-
-  @Test
-  public void testCanSkipBytes() throws IOException {
-    int toSkip = data.length / 2;
-    assertEquals(toSkip, stream.skip(toSkip));
-    for (int i = toSkip; i < data.length; i++) {
-      assertEquals(i, stream.read());
-    }
-    assertEquals(-1, stream.read());
-  }
-
-  @Test
-  public void testSkipReturnsZeroIfSkipByteCountIsZero() throws IOException {
-    assertEquals(0, stream.skip(0));
-    assertEquals(0, stream.read());
-  }
-
-  @Test
-  public void testSkipReturnsZeroIfSkipByteCountIsNegative() throws IOException {
-    assertEquals(0, stream.skip(-13));
-    assertEquals(0, stream.read());
-  }
-
-  @Test
-  public void testCloseClosesWrappedStream() throws IOException {
-    InputStream wrapped = mock(InputStream.class);
-    stream = new RecyclableBufferedInputStream(wrapped, byteArrayPool);
-    stream.close();
-    verify(wrapped).close();
-  }
-
-  @Test
-  public void testCanSafelyBeClosedMultipleTimes() throws IOException {
-    InputStream wrapped = mock(InputStream.class);
-    stream = new RecyclableBufferedInputStream(wrapped, byteArrayPool);
-    stream.close();
-    stream.close();
-    stream.close();
-
-    verify(wrapped, times(1)).close();
-  }
-
-  @Test
-  public void testCanMarkAndReset() throws IOException {
-    byte[] buffer = new byte[BUFFER_SIZE];
-    stream.mark(BUFFER_SIZE);
-    assertEquals(BUFFER_SIZE, stream.read(buffer, 0, BUFFER_SIZE));
-    for (int i = 0; i < BUFFER_SIZE; i++) {
-      assertEquals(i, buffer[i]);
-    }
-    Arrays.fill(buffer, (byte) 0);
-    stream.reset();
-
-    assertEquals(BUFFER_SIZE, stream.read(buffer, 0, BUFFER_SIZE));
-    for (int i = 0; i < BUFFER_SIZE; i++) {
-      assertEquals(i, buffer[i]);
-    }
-  }
-
-  @Test
-  public void testCanResetRepeatedlyAfterMarking() throws IOException {
-    byte[] buffer = new byte[BUFFER_SIZE];
-    stream.mark(BUFFER_SIZE);
-    for (int repeat = 0; repeat < 10; repeat++) {
-      assertEquals(BUFFER_SIZE, stream.read(buffer, 0, BUFFER_SIZE));
-      for (int i = 0; i < BUFFER_SIZE; i++) {
-        assertEquals(i, buffer[i]);
-      }
-      stream.reset();
-    }
-  }
-
-  @Test
-  public void testCanMarkInMiddleOfBufferAndStillReadUpToBufferLengthBeforeResetting()
-      throws IOException {
-    int markPos = BUFFER_SIZE / 2;
-    for (int i = 0; i < markPos; i++) {
-      stream.read();
-    }
-    stream.mark(BUFFER_SIZE);
-
-    for (int i = 0; i < BUFFER_SIZE; i++) {
-      stream.read();
-    }
-
-    stream.reset();
-    assertEquals(markPos, stream.read());
-  }
-
-  @Test
-  public void testAvailableReturnsWrappedAvailableIfNoBytesRead() throws IOException {
-    assertEquals(DATA_SIZE, stream.available());
-  }
-
-  @Test
-  public void testAvailableIncludesDataInBufferAndWrappedAvailableIfBytesRead() throws IOException {
-    stream.read();
-    assertEquals(DATA_SIZE - 1, stream.available());
-  }
-
-  @Test(expected = IOException.class)
-  public void testCloseThrowsIfWrappedStreamThrowsOnClose() throws IOException {
-    InputStream wrapped = mock(InputStream.class);
-    doThrow(new IOException()).when(wrapped).close();
-    stream = new RecyclableBufferedInputStream(wrapped, byteArrayPool);
-    stream.close();
-  }
-
-  @Test(expected = IOException.class)
-  public void testAvailableThrowsIfStreamIsClosed() throws IOException {
-    stream.close();
-    stream.available();
-  }
-
-  @Test(expected = IOException.class)
-  public void testReadThrowsIfStreamIsClosed() throws IOException {
-    stream.close();
-    stream.read();
-  }
-
-  @Test(expected = IOException.class)
-  public void testReadBulkThrowsIfStreamIsClosed() throws IOException {
-    stream.close();
-    stream.read(new byte[1], 0, 1);
-  }
-
-  @Test(expected = IOException.class)
-  public void testResetThrowsIfStreamIsClosed() throws IOException {
-    stream.close();
-    stream.reset();
-  }
-
-  @Test(expected = IOException.class)
-  public void testSkipThrowsIfStreamIsClosed() throws IOException {
-    stream.close();
-    stream.skip(10);
-  }
-
-  @Test(expected = RecyclableBufferedInputStream.InvalidMarkException.class)
-  public void testResetThrowsIfMarkNotSet() throws IOException {
-    stream.reset();
-  }
-
-  @Test(expected = RecyclableBufferedInputStream.InvalidMarkException.class)
-  public void testResetThrowsIfMarkIsInvalid() throws IOException {
-    stream.mark(1);
-    stream.read(new byte[BUFFER_SIZE], 0, BUFFER_SIZE);
-    stream.read();
-    stream.reset();
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/resource/bitmap/TransformationUtilsTest.java b/library/src/test/java/com/bumptech/glide/load/resource/bitmap/TransformationUtilsTest.java
deleted file mode 100644
index c4b9c51c1..000000000
--- a/library/src/test/java/com/bumptech/glide/load/resource/bitmap/TransformationUtilsTest.java
+++ /dev/null
@@ -1,453 +0,0 @@
-package com.bumptech.glide.load.resource.bitmap;
-
-import static com.google.common.truth.Truth.assertThat;
-import static org.junit.Assert.assertEquals;
-import static org.junit.Assert.assertFalse;
-import static org.junit.Assert.assertTrue;
-import static org.mockito.Matchers.any;
-import static org.mockito.Matchers.anyInt;
-import static org.mockito.Matchers.eq;
-import static org.mockito.Mockito.mock;
-import static org.mockito.Mockito.reset;
-import static org.mockito.Mockito.verify;
-import static org.mockito.Mockito.when;
-
-import android.annotation.TargetApi;
-import android.graphics.Bitmap;
-import android.graphics.Matrix;
-import android.media.ExifInterface;
-import android.os.Build;
-import com.bumptech.glide.load.engine.bitmap_recycle.BitmapPool;
-import com.bumptech.glide.tests.Util;
-import com.bumptech.glide.util.Preconditions;
-import com.google.common.collect.Range;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.mockito.Mock;
-import org.mockito.MockitoAnnotations;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.Shadows;
-import org.robolectric.annotation.Config;
-import org.robolectric.annotation.Implementation;
-import org.robolectric.annotation.Implements;
-import org.robolectric.shadows.ShadowBitmap;
-
-@TargetApi(Build.VERSION_CODES.HONEYCOMB_MR1)
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18, shadows = {
-    TransformationUtilsTest.AlphaShadowBitmap.class })
-public class TransformationUtilsTest {
-
-  @Mock BitmapPool bitmapPool;
-
-  @Before
-  public void setUp() {
-    MockitoAnnotations.initMocks(this);
-    when(bitmapPool.get(anyInt(), anyInt(), any(Bitmap.Config.class)))
-        .thenAnswer(new Util.CreateBitmap());
-  }
-
-  @Test
-  public void testFitCenterWithWideBitmap() {
-    final int maxSide = 500;
-
-    Bitmap wide = Bitmap.createBitmap(2000, 100, Bitmap.Config.ARGB_8888);
-
-    Bitmap transformed = TransformationUtils.fitCenter(bitmapPool, wide, maxSide, maxSide);
-
-    assertHasOriginalAspectRatio(wide, transformed);
-    assertBitmapFitsExactlyWithinBounds(maxSide, transformed);
-  }
-
-  @Test
-  public void testFitCenterWithSmallWideBitmap() {
-    final int maxSide = 500;
-
-    Bitmap smallWide = Bitmap.createBitmap(400, 40, Bitmap.Config.ARGB_8888);
-
-    Bitmap transformed = TransformationUtils.fitCenter(bitmapPool, smallWide, maxSide, maxSide);
-
-    assertHasOriginalAspectRatio(smallWide, transformed);
-    assertBitmapFitsExactlyWithinBounds(maxSide, transformed);
-  }
-
-  @Test
-  public void testFitCenterWithTallBitmap() {
-    final int maxSide = 500;
-
-    Bitmap tall = Bitmap.createBitmap(65, 3000, Bitmap.Config.ARGB_8888);
-
-    Bitmap transformed = TransformationUtils.fitCenter(bitmapPool, tall, maxSide, maxSide);
-
-    assertHasOriginalAspectRatio(tall, transformed);
-    assertBitmapFitsExactlyWithinBounds(maxSide, transformed);
-  }
-
-  @Test
-  public void testFitCenterWithSmallTallBitmap() {
-    final int maxSide = 500;
-
-    Bitmap smallTall = Bitmap.createBitmap(10, 400, Bitmap.Config.ARGB_8888);
-
-    Bitmap transformed = TransformationUtils.fitCenter(bitmapPool, smallTall, maxSide, maxSide);
-
-    assertHasOriginalAspectRatio(smallTall, transformed);
-    assertBitmapFitsExactlyWithinBounds(maxSide, transformed);
-  }
-
-  @Test
-  public void testFitCenterWithSquareBitmap() {
-    final int maxSide = 500;
-
-    Bitmap square = Bitmap.createBitmap(600, 600, Bitmap.Config.ARGB_8888);
-    Bitmap transformed = TransformationUtils.fitCenter(bitmapPool, square, maxSide, maxSide);
-
-    assertHasOriginalAspectRatio(square, transformed);
-    assertBitmapFitsExactlyWithinBounds(maxSide, transformed);
-  }
-
-  @Test
-  public void testFitCenterWithTooSmallSquareBitmap() {
-    final int maxSide = 500;
-
-    Bitmap smallSquare = Bitmap.createBitmap(100, 100, Bitmap.Config.ARGB_8888);
-
-    Bitmap transformed = TransformationUtils.fitCenter(bitmapPool, smallSquare, maxSide, maxSide);
-
-    assertHasOriginalAspectRatio(smallSquare, transformed);
-    assertBitmapFitsExactlyWithinBounds(maxSide, transformed);
-  }
-
-  // Test for Issue #195.
-  @Test
-  public void testFitCenterUsesFloorInsteadOfRoundingForOutputBitmapSize() {
-    Bitmap toTransform = Bitmap.createBitmap(1230, 1640, Bitmap.Config.RGB_565);
-
-    Bitmap transformed = TransformationUtils.fitCenter(bitmapPool, toTransform, 1075, 1366);
-
-    assertEquals(1024, transformed.getWidth());
-    assertEquals(1366, transformed.getHeight());
-  }
-
-  @Test
-  public void testFitCenterReturnsGivenBitmapIfGivenBitmapMatchesExactly() {
-    Bitmap toFit = Bitmap.createBitmap(100, 200, Bitmap.Config.ARGB_4444);
-    Bitmap transformed = TransformationUtils.fitCenter(bitmapPool, toFit, toFit.getWidth(),
-        toFit.getHeight());
-    assertTrue(toFit == transformed);
-  }
-
-  @Test
-  public void testFitCenterReturnsGivenBitmapIfGivenBitmapWidthMatchesExactly() {
-    Bitmap toFit = Bitmap.createBitmap(100, 200, Bitmap.Config.ARGB_4444);
-    Bitmap transformed =
-        TransformationUtils.fitCenter(bitmapPool, toFit, toFit.getWidth(), toFit.getHeight() * 2);
-    assertTrue(toFit == transformed);
-  }
-
-  @Test
-  public void testFitCenterReturnsGivenBitmapIfGivenBitmapHeightMatchesExactly() {
-    Bitmap toFit = Bitmap.createBitmap(100, 200, Bitmap.Config.ARGB_4444);
-    Bitmap transformed =
-        TransformationUtils.fitCenter(bitmapPool, toFit, toFit.getWidth() * 2, toFit.getHeight());
-    assertTrue(toFit == transformed);
-  }
-
-  @Test
-  public void testCenterCropReturnsGivenBitmapIfGivenBitmapExactlyMatchesGivenDimensions() {
-    Bitmap toCrop = Bitmap.createBitmap(200, 300, Bitmap.Config.ARGB_8888);
-    Bitmap transformed = TransformationUtils
-        .centerCrop(bitmapPool, toCrop, toCrop.getWidth(), toCrop.getHeight());
-
-    // Robolectric incorrectly implements equals() for Bitmaps, we want the original object not
-    // just an equivalent.
-    assertTrue(toCrop == transformed);
-  }
-
-  @Test
-  public void testFitCenterHandlesBitmapsWithNullConfigs() {
-    Bitmap toFit = Bitmap.createBitmap(100, 100, Bitmap.Config.RGB_565);
-    Shadows.shadowOf(toFit).setConfig(null);
-    Bitmap transformed = TransformationUtils.fitCenter(bitmapPool, toFit, 50, 50);
-    assertEquals(Bitmap.Config.ARGB_8888, transformed.getConfig());
-  }
-
-  @Test
-  public void testCenterCropSetsOutBitmapToHaveAlphaIfInBitmapHasAlphaAndOutBitmapIsReused() {
-    Bitmap toTransform = Bitmap.createBitmap(100, 100, Bitmap.Config.ARGB_8888);
-
-    Bitmap toReuse = Bitmap.createBitmap(50, 50, Bitmap.Config.ARGB_8888);
-    reset(bitmapPool);
-    when(bitmapPool.get(eq(50), eq(50), eq(Bitmap.Config.ARGB_8888)))
-        .thenReturn(toReuse);
-
-    toReuse.setHasAlpha(false);
-    toTransform.setHasAlpha(true);
-
-    Bitmap result = TransformationUtils.centerCrop(bitmapPool, toTransform, toReuse.getWidth(),
-        toReuse.getHeight());
-
-    assertEquals(toReuse, result);
-    assertTrue(result.hasAlpha());
-  }
-
-  @Test
-  public void
-  testCenterCropSetsOutBitmapToNotHaveAlphaIfInBitmapDoesNotHaveAlphaAndOutBitmapIsReused() {
-    Bitmap toTransform = Bitmap.createBitmap(100, 100, Bitmap.Config.ARGB_8888);
-
-    Bitmap toReuse = Bitmap.createBitmap(50, 50, Bitmap.Config.ARGB_8888);
-    reset(bitmapPool);
-    when(bitmapPool.get(eq(50), eq(50), eq(Bitmap.Config.ARGB_8888))).thenReturn(toReuse);
-
-    toReuse.setHasAlpha(true);
-    toTransform.setHasAlpha(false);
-
-    Bitmap result = TransformationUtils.centerCrop(bitmapPool, toTransform, toReuse.getWidth(),
-        toReuse.getHeight());
-
-    assertEquals(toReuse, result);
-    assertFalse(result.hasAlpha());
-  }
-
-  @Test
-  public void testCenterCropSetsOutBitmapToHaveAlphaIfInBitmapHasAlpha() {
-    Bitmap toTransform = Bitmap.createBitmap(100, 100, Bitmap.Config.ARGB_8888);
-
-    toTransform.setHasAlpha(true);
-
-    Bitmap result = TransformationUtils.centerCrop(bitmapPool, toTransform,
-        toTransform.getWidth() / 2, toTransform.getHeight() / 2);
-
-    assertTrue(result.hasAlpha());
-  }
-
-  @Test
-  public void testCenterCropHandlesBitmapsWithNullConfigs() {
-    Bitmap toTransform = Bitmap.createBitmap(100, 100, Bitmap.Config.RGB_565);
-    Shadows.shadowOf(toTransform).setConfig(null);
-
-    Bitmap transformed = TransformationUtils.centerCrop(bitmapPool, toTransform, 50, 50);
-
-    assertEquals(Bitmap.Config.ARGB_8888, transformed.getConfig());
-  }
-
-  @Test
-  public void testCenterCropSetsOutBitmapToNotHaveAlphaIfInBitmapDoesNotHaveAlpha() {
-    Bitmap toTransform = Bitmap.createBitmap(100, 100, Bitmap.Config.ARGB_8888);
-
-    toTransform.setHasAlpha(false);
-
-    Bitmap result = TransformationUtils.centerCrop(bitmapPool, toTransform,
-        toTransform.getWidth() / 2, toTransform.getHeight() / 2);
-
-    assertFalse(result.hasAlpha());
-  }
-
-  @Test
-  public void testFitCenterSetsOutBitmapToHaveAlphaIfInBitmapHasAlphaAndOutBitmapIsReused() {
-    Bitmap toTransform = Bitmap.createBitmap(100, 100, Bitmap.Config.ARGB_8888);
-
-    Bitmap toReuse = Bitmap.createBitmap(50, 50, Bitmap.Config.ARGB_8888);
-    reset(bitmapPool);
-    when(bitmapPool.get(eq(toReuse.getWidth()), eq(toReuse.getHeight()), eq(toReuse.getConfig())))
-        .thenReturn(toReuse);
-
-    toReuse.setHasAlpha(false);
-    toTransform.setHasAlpha(true);
-
-    Bitmap result = TransformationUtils.fitCenter(bitmapPool, toTransform, toReuse.getWidth(),
-        toReuse.getHeight());
-
-    assertEquals(toReuse, result);
-    assertTrue(result.hasAlpha());
-  }
-
-  @Test
-  public void
-  testFitCenterSetsOutBitmapToNotHaveAlphaIfInBitmapDoesNotHaveAlphaAndOutBitmapIsReused() {
-    Bitmap toTransform = Bitmap.createBitmap(100, 100, Bitmap.Config.ARGB_8888);
-
-    Bitmap toReuse = Bitmap.createBitmap(50, 50, Bitmap.Config.ARGB_8888);
-    reset(bitmapPool);
-    when(bitmapPool.get(eq(toReuse.getWidth()), eq(toReuse.getHeight()), eq(toReuse.getConfig())))
-        .thenReturn(toReuse);
-
-    toReuse.setHasAlpha(true);
-    toTransform.setHasAlpha(false);
-
-    Bitmap result = TransformationUtils.fitCenter(bitmapPool, toTransform, toReuse.getWidth(),
-        toReuse.getHeight());
-
-    assertEquals(toReuse, result);
-    assertFalse(result.hasAlpha());
-  }
-
-  @Test
-  public void testFitCenterSetsOutBitmapToHaveAlphaIfInBitmapHasAlpha() {
-    Bitmap toTransform = Bitmap.createBitmap(100, 100, Bitmap.Config.ARGB_8888);
-
-    toTransform.setHasAlpha(true);
-
-    Bitmap result = TransformationUtils.fitCenter(bitmapPool, toTransform,
-        toTransform.getWidth() / 2, toTransform.getHeight() / 2);
-
-    assertTrue(result.hasAlpha());
-  }
-
-  @Test
-  public void testFitCenterSetsOutBitmapToNotHaveAlphaIfInBitmapDoesNotHaveAlpha() {
-    Bitmap toTransform = Bitmap.createBitmap(100, 100, Bitmap.Config.ARGB_8888);
-
-    toTransform.setHasAlpha(false);
-
-    Bitmap result = TransformationUtils.fitCenter(bitmapPool, toTransform,
-        toTransform.getWidth() / 2, toTransform.getHeight() / 2);
-
-    assertFalse(result.hasAlpha());
-  }
-
-  private static void assertHasOriginalAspectRatio(Bitmap original, Bitmap transformed) {
-    double originalAspectRatio = (double) original.getWidth() / (double) original.getHeight();
-    double transformedAspectRatio =
-        (double) transformed.getWidth() / (double) transformed.getHeight();
-
-    assertThat(transformedAspectRatio)
-        .isIn(Range.open(originalAspectRatio - 0.05f, originalAspectRatio + 0.05f));
-  }
-
-  private static void assertBitmapFitsExactlyWithinBounds(int maxSide, Bitmap bitmap) {
-    final int width = bitmap.getWidth();
-    final int height = bitmap.getHeight();
-
-    assertThat(width).isIn(Range.atMost(maxSide));
-    assertThat(height).isIn(Range.atMost(maxSide));
-
-    assertTrue("one side must match maxSide", width == maxSide || height == maxSide);
-  }
-
-  @Test
-  public void testGetExifOrientationDegrees() {
-    assertEquals(0,
-        TransformationUtils.getExifOrientationDegrees(ExifInterface.ORIENTATION_NORMAL));
-    assertEquals(90,
-        TransformationUtils.getExifOrientationDegrees(ExifInterface.ORIENTATION_TRANSPOSE));
-    assertEquals(90,
-        TransformationUtils.getExifOrientationDegrees(ExifInterface.ORIENTATION_ROTATE_90));
-    assertEquals(180,
-        TransformationUtils.getExifOrientationDegrees(ExifInterface.ORIENTATION_ROTATE_180));
-    assertEquals(180,
-        TransformationUtils.getExifOrientationDegrees(ExifInterface.ORIENTATION_FLIP_VERTICAL));
-    assertEquals(270,
-        TransformationUtils.getExifOrientationDegrees(ExifInterface.ORIENTATION_TRANSVERSE));
-    assertEquals(270,
-        TransformationUtils.getExifOrientationDegrees(ExifInterface.ORIENTATION_ROTATE_270));
-  }
-
-  @Test
-  public void testRotateImage() {
-    Bitmap toRotate = Bitmap.createBitmap(2, 2, Bitmap.Config.ARGB_8888);
-
-    Bitmap zero = TransformationUtils.rotateImage(toRotate, 0);
-    assertTrue(toRotate == zero);
-
-    Bitmap ninety = TransformationUtils.rotateImage(toRotate, 90);
-    assertTrue(Shadows.shadowOf(ninety).getDescription().contains("rotate=90.0"));
-    assertEquals(toRotate.getWidth(), toRotate.getHeight());
-  }
-
-  @Test
-  public void testRotateImageExifReturnsGivenBitmapIfRotationIsNormal() {
-    Bitmap toRotate = Bitmap.createBitmap(100, 200, Bitmap.Config.ARGB_4444);
-    // Use assertTrue because Robolectric incorrectly implements equality for Bitmaps. We want
-    // not just an identical Bitmap, but our original Bitmap object back.
-    Bitmap rotated =
-        TransformationUtils.rotateImageExif(bitmapPool, toRotate, ExifInterface.ORIENTATION_NORMAL);
-    assertTrue(toRotate == rotated);
-  }
-
-  @Test
-  public void testRotateImageExifReturnsGivenBitmapIfRotationIsUndefined() {
-    Bitmap toRotate = Bitmap.createBitmap(100, 100, Bitmap.Config.RGB_565);
-    // Use assertTrue because Robolectric incorrectly implements equality for Bitmaps. We want
-    // not just an identical Bitmap, but our original Bitmap object back.
-    Bitmap rotated = TransformationUtils.rotateImageExif(bitmapPool, toRotate,
-        ExifInterface.ORIENTATION_UNDEFINED);
-    assertTrue(toRotate == rotated);
-  }
-
-  @Test
-  public void testRotateImageExifReturnsGivenBitmapIfOrientationIsInvalid() {
-    Bitmap toRotate = Bitmap.createBitmap(200, 100, Bitmap.Config.ARGB_8888);
-    // Use assertTrue because Robolectric incorrectly implements equality for Bitmaps. We want
-    // not just an identical Bitmap, but our original Bitmap object back.
-    Bitmap rotated = TransformationUtils.rotateImageExif(bitmapPool, toRotate, -1);
-    assertTrue(toRotate == rotated);
-  }
-
-  @Test
-  public void testRotateImageExifHandlesBitmapsWithNullConfigs() {
-    Bitmap toRotate = Bitmap.createBitmap(100, 100, Bitmap.Config.RGB_565);
-    Shadows.shadowOf(toRotate).setConfig(null);
-    Bitmap rotated = TransformationUtils.rotateImageExif(bitmapPool, toRotate,
-        ExifInterface.ORIENTATION_ROTATE_180);
-    assertEquals(Bitmap.Config.ARGB_8888, rotated.getConfig());
-  }
-
-  @Test
-  public void testInitializeMatrixSetsScaleIfFlipHorizontal() {
-    Matrix matrix = mock(Matrix.class);
-    TransformationUtils
-        .initializeMatrixForRotation(ExifInterface.ORIENTATION_FLIP_HORIZONTAL, matrix);
-    verify(matrix).setScale(-1, 1);
-  }
-
-  @Test
-  public void testInitializeMatrixSetsScaleAndRotateIfFlipVertical() {
-    Matrix matrix = mock(Matrix.class);
-    TransformationUtils
-        .initializeMatrixForRotation(ExifInterface.ORIENTATION_FLIP_VERTICAL, matrix);
-    verify(matrix).setRotate(180);
-    verify(matrix).postScale(-1, 1);
-  }
-
-  @Test
-  public void testInitializeMatrixSetsScaleAndRotateIfTranspose() {
-    Matrix matrix = mock(Matrix.class);
-    TransformationUtils.initializeMatrixForRotation(ExifInterface.ORIENTATION_TRANSPOSE, matrix);
-    verify(matrix).setRotate(90);
-    verify(matrix).postScale(-1, 1);
-  }
-
-  @Test
-  public void testInitializeMatrixSetsScaleAndRotateIfTransverse() {
-    Matrix matrix = mock(Matrix.class);
-    TransformationUtils.initializeMatrixForRotation(ExifInterface.ORIENTATION_TRANSVERSE, matrix);
-    verify(matrix).setRotate(-90);
-    verify(matrix).postScale(-1, 1);
-  }
-
-  @Test
-  public void testInitializeMatrixSetsRotateOnRotation() {
-    Matrix matrix = mock(Matrix.class);
-    TransformationUtils.initializeMatrixForRotation(ExifInterface.ORIENTATION_ROTATE_90, matrix);
-    verify(matrix).setRotate(90);
-    TransformationUtils.initializeMatrixForRotation(ExifInterface.ORIENTATION_ROTATE_180, matrix);
-    verify(matrix).setRotate(180);
-    TransformationUtils.initializeMatrixForRotation(ExifInterface.ORIENTATION_ROTATE_270, matrix);
-    verify(matrix).setRotate(-90);
-  }
-
-  @Implements(Bitmap.class)
-  public static class AlphaShadowBitmap extends ShadowBitmap {
-
-    @Implementation
-    public static Bitmap createBitmap(int width, int height, Bitmap.Config config) {
-      // Robolectric doesn't match the framework behavior with null configs, so we have to do so
-      // here.
-      Preconditions.checkNotNull("Config must not be null");
-      return ShadowBitmap.createBitmap(width, height, config);
-    }
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/resource/bitmap/VideoBitmapDecoderTest.java b/library/src/test/java/com/bumptech/glide/load/resource/bitmap/VideoBitmapDecoderTest.java
deleted file mode 100644
index 4b034d2fc..000000000
--- a/library/src/test/java/com/bumptech/glide/load/resource/bitmap/VideoBitmapDecoderTest.java
+++ /dev/null
@@ -1,97 +0,0 @@
-package com.bumptech.glide.load.resource.bitmap;
-
-import static org.junit.Assert.assertEquals;
-import static org.mockito.Matchers.anyLong;
-import static org.mockito.Matchers.eq;
-import static org.mockito.Mockito.never;
-import static org.mockito.Mockito.verify;
-import static org.mockito.Mockito.when;
-
-import android.graphics.Bitmap;
-import android.media.MediaMetadataRetriever;
-import android.os.ParcelFileDescriptor;
-import com.bumptech.glide.load.Options;
-import com.bumptech.glide.load.engine.Resource;
-import com.bumptech.glide.load.engine.bitmap_recycle.BitmapPool;
-import java.io.FileDescriptor;
-import java.io.IOException;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.mockito.Mock;
-import org.mockito.MockitoAnnotations;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class VideoBitmapDecoderTest {
-  @Mock private ParcelFileDescriptor resource;
-  @Mock private VideoBitmapDecoder.MediaMetadataRetrieverFactory factory;
-  @Mock private MediaMetadataRetriever retriever;
-  @Mock private BitmapPool bitmapPool;
-  private VideoBitmapDecoder decoder;
-  private Options options;
-
-  @Before
-  public void setup() {
-    MockitoAnnotations.initMocks(this);
-    when(factory.build()).thenReturn(retriever);
-    decoder = new VideoBitmapDecoder(bitmapPool, factory);
-    options = new Options();
-  }
-
-  @Test
-  public void testReturnsRetrievedFrameForResource() throws IOException {
-    Bitmap expected = Bitmap.createBitmap(100, 100, Bitmap.Config.ARGB_8888);
-    when(retriever.getFrameAtTime()).thenReturn(expected);
-
-    FileDescriptor toSet = FileDescriptor.in;
-    when(resource.getFileDescriptor()).thenReturn(toSet);
-    Resource<Bitmap> result = decoder.decode(resource, 100, 100, options);
-
-    verify(retriever).setDataSource(eq(toSet));
-    assertEquals(expected, result.get());
-  }
-
-  @Test
-  public void testReleasesMediaMetadataRetriever() throws IOException {
-    decoder.decode(resource, 1, 2, options);
-
-    verify(retriever).release();
-  }
-
-  @Test
-  public void testClosesResource() throws IOException {
-    decoder.decode(resource, 1, 2, options);
-
-    verify(resource).close();
-  }
-
-  @Test(expected = IllegalArgumentException.class)
-  public void testThrowsExceptionIfCalledWithInvalidFrame() throws IOException {
-    options.set(VideoBitmapDecoder.TARGET_FRAME, -5L);
-    new VideoBitmapDecoder(bitmapPool, factory).decode(resource, 100, 100, options);
-  }
-
-  @Test
-  public void testSpecifiesThumbnailFrameIfICalledWithFrameNumber() throws IOException {
-    long frame = 5;
-    options.set(VideoBitmapDecoder.TARGET_FRAME, frame);
-    decoder = new VideoBitmapDecoder(bitmapPool, factory);
-
-    decoder.decode(resource, 100, 100, options);
-
-    verify(retriever).getFrameAtTime(frame);
-    verify(retriever, never()).getFrameAtTime();
-  }
-
-  @Test
-  public void testDoesNotSpecifyThumbnailFrameIfCalledWithoutFrameNumber() throws IOException {
-    decoder = new VideoBitmapDecoder(bitmapPool, factory);
-    decoder.decode(resource, 100, 100, options);
-
-    verify(retriever).getFrameAtTime();
-    verify(retriever, never()).getFrameAtTime(anyLong());
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/resource/bytes/BytesResourceTest.java b/library/src/test/java/com/bumptech/glide/load/resource/bytes/BytesResourceTest.java
deleted file mode 100644
index 012e4a8f9..000000000
--- a/library/src/test/java/com/bumptech/glide/load/resource/bytes/BytesResourceTest.java
+++ /dev/null
@@ -1,33 +0,0 @@
-package com.bumptech.glide.load.resource.bytes;
-
-import static org.junit.Assert.assertEquals;
-
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.junit.runners.JUnit4;
-
-@RunWith(JUnit4.class)
-public class BytesResourceTest {
-
-  @Test
-  public void testReturnsGivenBytes() {
-    byte[] bytes = new byte[0];
-    BytesResource resource = new BytesResource(bytes);
-
-    assertEquals(bytes, resource.get());
-  }
-
-  @Test
-  public void testReturnsSizeOfGivenBytes() {
-    byte[] bytes = new byte[123];
-    BytesResource resource = new BytesResource(bytes);
-
-    assertEquals(bytes.length, resource.getSize());
-  }
-
-  @Test(expected = NullPointerException.class)
-  public void testThrowsIfGivenNullBytes() {
-    new BytesResource(null);
-  }
-
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/resource/drawable/DrawableResourceTest.java b/library/src/test/java/com/bumptech/glide/load/resource/drawable/DrawableResourceTest.java
deleted file mode 100644
index 6537c6d43..000000000
--- a/library/src/test/java/com/bumptech/glide/load/resource/drawable/DrawableResourceTest.java
+++ /dev/null
@@ -1,108 +0,0 @@
-package com.bumptech.glide.load.resource.drawable;
-
-import static org.junit.Assert.assertEquals;
-import static org.junit.Assert.assertNotEquals;
-import static org.mockito.Mockito.mock;
-import static org.mockito.Mockito.verify;
-import static org.mockito.Mockito.when;
-
-import android.graphics.Canvas;
-import android.graphics.ColorFilter;
-import android.graphics.drawable.Drawable;
-import com.bumptech.glide.load.resource.gif.GifDrawable;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class DrawableResourceTest {
-  private TestDrawable drawable;
-  private DrawableResource<TestDrawable> resource;
-
-  @Before
-  public void setUp() {
-    drawable = mock(TestDrawable.class);
-    resource = new DrawableResource<TestDrawable>(drawable) {
-      @Override
-      public Class<TestDrawable> getResourceClass() {
-        return TestDrawable.class;
-      }
-
-      @Override
-      public int getSize() {
-        return 0;
-      }
-
-      @Override
-      public void recycle() {
-      }
-    };
-  }
-
-  @Test
-  public void testDoesNotReturnOriginalDrawableOnGet() {
-    when(drawable.getConstantState()).thenReturn(mock(Drawable.ConstantState.class));
-    assertNotEquals(drawable, resource.get());
-  }
-
-  @Test
-  public void testReturnsNewDrawableOnGet() {
-    GifDrawable expected = mock(GifDrawable.class);
-    Drawable.ConstantState constantState = mock(Drawable.ConstantState.class);
-    when(constantState.newDrawable()).thenReturn(expected);
-    when(drawable.getConstantState()).thenReturn(constantState);
-
-    assertEquals(expected, resource.get());
-
-    verify(drawable).getConstantState();
-    verify(constantState).newDrawable();
-  }
-
-  @Test(expected = NullPointerException.class)
-  public void testThrowsIfDrawableIsNull() {
-    new DrawableResource<TestDrawable>(null) {
-      @Override
-      public Class<TestDrawable> getResourceClass() {
-        return TestDrawable.class;
-      }
-
-      @Override
-      public int getSize() {
-        return 0;
-      }
-
-      @Override
-      public void recycle() {
-
-      }
-    };
-  }
-
-  /**
-   * Just to have a type to test with which is not directly Drawable
-   */
-  private static class TestDrawable extends Drawable {
-    @Override
-    public void draw(Canvas canvas) {
-
-    }
-
-    @Override
-    public void setAlpha(int alpha) {
-
-    }
-
-    @Override
-    public void setColorFilter(ColorFilter cf) {
-
-    }
-
-    @Override
-    public int getOpacity() {
-      return 0;
-    }
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/resource/file/FileDecoderTest.java b/library/src/test/java/com/bumptech/glide/load/resource/file/FileDecoderTest.java
deleted file mode 100644
index b1b5f3130..000000000
--- a/library/src/test/java/com/bumptech/glide/load/resource/file/FileDecoderTest.java
+++ /dev/null
@@ -1,33 +0,0 @@
-package com.bumptech.glide.load.resource.file;
-
-import static org.junit.Assert.assertEquals;
-
-import com.bumptech.glide.load.Options;
-import com.bumptech.glide.load.engine.Resource;
-import java.io.File;
-import java.io.IOException;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.junit.runners.JUnit4;
-
-@RunWith(JUnit4.class)
-public class FileDecoderTest {
-
-  private FileDecoder decoder;
-  private Options options;
-
-  @Before
-  public void setUp() {
-    decoder = new FileDecoder();
-    options = new Options();
-  }
-
-  @Test
-  public void testReturnsGivenFileAsResource() throws IOException {
-    File expected = new File("testFile");
-    Resource<File> decoded = decoder.decode(expected, 1, 1, options);
-
-    assertEquals(expected, decoded.get());
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/resource/file/FileResourceTest.java b/library/src/test/java/com/bumptech/glide/load/resource/file/FileResourceTest.java
deleted file mode 100644
index 6cc0c5775..000000000
--- a/library/src/test/java/com/bumptech/glide/load/resource/file/FileResourceTest.java
+++ /dev/null
@@ -1,27 +0,0 @@
-package com.bumptech.glide.load.resource.file;
-
-import static org.junit.Assert.assertEquals;
-
-import java.io.File;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.junit.runners.JUnit4;
-
-@RunWith(JUnit4.class)
-public class FileResourceTest {
-
-  private File file;
-  private FileResource resource;
-
-  @Before
-  public void setUp() {
-    file = new File("Test");
-    resource = new FileResource(file);
-  }
-
-  @Test
-  public void testReturnsGivenFile() {
-    assertEquals(file, resource.get());
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/resource/gif/ByteBufferGifDecoderTest.java b/library/src/test/java/com/bumptech/glide/load/resource/gif/ByteBufferGifDecoderTest.java
deleted file mode 100644
index 718e0f1c1..000000000
--- a/library/src/test/java/com/bumptech/glide/load/resource/gif/ByteBufferGifDecoderTest.java
+++ /dev/null
@@ -1,139 +0,0 @@
-package com.bumptech.glide.load.resource.gif;
-
-import static com.google.common.truth.Truth.assertThat;
-import static org.junit.Assert.assertNull;
-import static org.junit.Assert.fail;
-import static org.mockito.Matchers.anyInt;
-import static org.mockito.Matchers.eq;
-import static org.mockito.Matchers.isA;
-import static org.mockito.Mockito.verify;
-import static org.mockito.Mockito.when;
-
-import com.bumptech.glide.gifdecoder.GifDecoder;
-import com.bumptech.glide.gifdecoder.GifHeader;
-import com.bumptech.glide.gifdecoder.GifHeaderParser;
-import com.bumptech.glide.load.Options;
-import com.bumptech.glide.load.engine.bitmap_recycle.BitmapPool;
-import com.bumptech.glide.load.engine.bitmap_recycle.LruArrayPool;
-import com.bumptech.glide.tests.GlideShadowLooper;
-import java.io.IOException;
-import java.nio.ByteBuffer;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.mockito.Mock;
-import org.mockito.Mockito;
-import org.mockito.MockitoAnnotations;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.RuntimeEnvironment;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18, shadows = GlideShadowLooper.class)
-public class ByteBufferGifDecoderTest {
-  private static final byte[] GIF_HEADER = new byte[] { 0x47, 0x49, 0x46 };
-  static final int ARRAY_POOL_SIZE_BYTES = 4 * 1024 * 1024;
-
-  private ByteBufferGifDecoder decoder;
-  private GifHeader gifHeader;
-  private Options options;
-
-  @Mock BitmapPool bitmapPool;
-  @Mock GifHeaderParser parser;
-  @Mock GifDecoder gifDecoder;
-  @Mock ByteBufferGifDecoder.GifHeaderParserPool parserPool;
-  @Mock ByteBufferGifDecoder.GifDecoderFactory decoderFactory;
-
-  @Before
-  public void setUp() {
-    MockitoAnnotations.initMocks(this);
-
-    gifHeader = Mockito.spy(new GifHeader());
-    when(parser.parseHeader()).thenReturn(gifHeader);
-    when(parserPool.obtain(isA(ByteBuffer.class))).thenReturn(parser);
-
-    when(decoderFactory.build(isA(GifDecoder.BitmapProvider.class),
-        eq(gifHeader), isA(ByteBuffer.class), anyInt()))
-        .thenReturn(gifDecoder);
-
-    options = new Options();
-    decoder =
-        new ByteBufferGifDecoder(
-            RuntimeEnvironment.application,
-            bitmapPool,
-            new LruArrayPool(ARRAY_POOL_SIZE_BYTES),
-            parserPool,
-            decoderFactory);
-  }
-
-  @Test
-  public void testDoesNotHandleStreamIfEnabledButNotAGif() throws IOException {
-    assertThat(decoder.handles(ByteBuffer.allocate(0), options)).isFalse();
-  }
-
-  @Test
-  public void testHandlesStreamIfContainsGifHeaderAndDisabledIsNotSet() throws IOException {
-    assertThat(decoder.handles(ByteBuffer.wrap(GIF_HEADER), options)).isTrue();
-  }
-
-  @Test
-  public void testHandlesStreamIfContainsGifHeaderAndDisabledIsFalse() throws IOException {
-    options.set(ByteBufferGifDecoder.DISABLE_ANIMATION, false);
-    assertThat(decoder.handles(ByteBuffer.wrap(GIF_HEADER), options)).isTrue();
-  }
-
-  @Test
-  public void testDoesNotHandleStreamIfDisabled() throws IOException {
-    options.set(ByteBufferGifDecoder.DISABLE_ANIMATION, true);
-    assertThat(decoder.handles(ByteBuffer.wrap(GIF_HEADER), options)).isFalse();
-  }
-
-  @Test
-  public void testReturnsNullIfParsedHeaderHasZeroFrames() throws IOException {
-    when(gifHeader.getNumFrames()).thenReturn(0);
-
-    assertNull(decoder.decode(ByteBuffer.allocate(10), 100, 100, options));
-  }
-
-  @Test
-  public void testReturnsNullIfParsedHeaderHasFormatError() {
-    when(gifHeader.getStatus()).thenReturn(GifDecoder.STATUS_FORMAT_ERROR);
-
-    assertNull(decoder.decode(ByteBuffer.allocate(10), 100, 100, options));
-  }
-
-  @Test
-  public void testReturnsNullIfParsedHeaderHasOpenError() {
-    when(gifHeader.getStatus()).thenReturn(GifDecoder.STATUS_OPEN_ERROR);
-
-    assertNull(decoder.decode(ByteBuffer.allocate(10), 100, 100, options));
-  }
-
-  @Test
-  public void testReturnsParserToPool() throws IOException {
-    decoder.decode(ByteBuffer.allocate(10), 100, 100, options);
-    verify(parserPool).release(eq(parser));
-  }
-
-  @Test
-  public void testReturnsParserToPoolWhenParserThrows() {
-    when(parser.parseHeader()).thenThrow(new RuntimeException("Test"));
-    try {
-      decoder.decode(ByteBuffer.allocate(10), 100, 100, options);
-      fail("Failed to receive expected exception");
-    } catch (RuntimeException e) {
-      // Expected.
-    }
-
-    verify(parserPool).release(eq(parser));
-  }
-
-  @Test
-  public void testReturnsNullIfGifDecoderFailsToDecodeFirstFrame() {
-    when(gifHeader.getNumFrames()).thenReturn(1);
-    when(gifHeader.getStatus()).thenReturn(GifDecoder.STATUS_OK);
-    when(gifDecoder.getNextFrame()).thenReturn(null);
-
-    assertNull(decoder.decode(ByteBuffer.allocate(10), 100, 100, options));
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/resource/gif/GifDrawableResourceTest.java b/library/src/test/java/com/bumptech/glide/load/resource/gif/GifDrawableResourceTest.java
deleted file mode 100644
index c83dd1740..000000000
--- a/library/src/test/java/com/bumptech/glide/load/resource/gif/GifDrawableResourceTest.java
+++ /dev/null
@@ -1,44 +0,0 @@
-package com.bumptech.glide.load.resource.gif;
-
-import static org.junit.Assert.assertEquals;
-import static org.mockito.Mockito.inOrder;
-import static org.mockito.Mockito.mock;
-import static org.mockito.Mockito.when;
-
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.mockito.InOrder;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class GifDrawableResourceTest {
-  private GifDrawable drawable;
-  private GifDrawableResource resource;
-
-  @Before
-  public void setUp() {
-    drawable = mock(GifDrawable.class);
-    resource = new GifDrawableResource(drawable);
-  }
-
-  @Test
-  public void testReturnsSizeFromDrawable() {
-    final int size = 2134;
-    when(drawable.getSize()).thenReturn(size);
-
-    assertEquals(size, resource.getSize());
-  }
-
-  @Test
-  public void testStopsAndThenRecyclesDrawableWhenRecycled() {
-    resource.recycle();
-
-    InOrder inOrder = inOrder(drawable);
-    inOrder.verify(drawable).stop();
-    inOrder.verify(drawable).recycle();
-  }
-
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/resource/gif/GifDrawableTest.java b/library/src/test/java/com/bumptech/glide/load/resource/gif/GifDrawableTest.java
deleted file mode 100644
index ee0fc5a3d..000000000
--- a/library/src/test/java/com/bumptech/glide/load/resource/gif/GifDrawableTest.java
+++ /dev/null
@@ -1,586 +0,0 @@
-package com.bumptech.glide.load.resource.gif;
-
-import static com.google.common.truth.Truth.assertThat;
-import static org.junit.Assert.assertEquals;
-import static org.junit.Assert.assertFalse;
-import static org.junit.Assert.assertNotNull;
-import static org.junit.Assert.assertTrue;
-import static org.mockito.Matchers.eq;
-import static org.mockito.Matchers.isA;
-import static org.mockito.Matchers.isNull;
-import static org.mockito.Mockito.mock;
-import static org.mockito.Mockito.never;
-import static org.mockito.Mockito.times;
-import static org.mockito.Mockito.verify;
-import static org.mockito.Mockito.when;
-
-import android.graphics.Bitmap;
-import android.graphics.Canvas;
-import android.graphics.ColorFilter;
-import android.graphics.Paint;
-import android.graphics.PixelFormat;
-import android.graphics.Rect;
-import android.graphics.drawable.Drawable;
-import android.os.Build;
-import com.bumptech.glide.gifdecoder.GifDecoder;
-import com.bumptech.glide.load.Transformation;
-import com.bumptech.glide.load.engine.bitmap_recycle.BitmapPool;
-import com.bumptech.glide.load.resource.gif.GifDrawableTest.BitmapTrackingShadowCanvas;
-import com.bumptech.glide.tests.GlideShadowLooper;
-import com.bumptech.glide.tests.Util;
-import java.util.HashSet;
-import java.util.Set;
-import org.junit.After;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.mockito.Mock;
-import org.mockito.MockitoAnnotations;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.RuntimeEnvironment;
-import org.robolectric.annotation.Config;
-import org.robolectric.annotation.Implementation;
-import org.robolectric.annotation.Implements;
-import org.robolectric.internal.ShadowExtractor;
-import org.robolectric.shadows.ShadowCanvas;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18,
-    shadows = { GlideShadowLooper.class, BitmapTrackingShadowCanvas.class })
-public class GifDrawableTest {
-  private GifDrawable drawable;
-  private int frameHeight;
-  private int frameWidth;
-  private Bitmap firstFrame;
-  private int initialSdkVersion;
-
-  @Mock private Drawable.Callback cb;
-  @Mock private BitmapPool bitmapPool;
-  @Mock private GifFrameLoader frameLoader;
-  @Mock private Paint paint;
-  @Mock private Transformation<Bitmap> transformation;
-
-  private static Paint isAPaint() {
-    return isA(Paint.class);
-  }
-
-  private static Rect isARect() {
-    return isA(Rect.class);
-  }
-
-  @Before
-  public void setUp() {
-    MockitoAnnotations.initMocks(this);
-    frameWidth = 120;
-    frameHeight = 450;
-    firstFrame = Bitmap.createBitmap(frameWidth, frameHeight, Bitmap.Config.RGB_565);
-    drawable = new GifDrawable(frameLoader, bitmapPool, paint);
-    when(frameLoader.getWidth()).thenReturn(frameWidth);
-    when(frameLoader.getHeight()).thenReturn(frameHeight);
-    when(frameLoader.getCurrentFrame()).thenReturn(firstFrame);
-    when(frameLoader.getCurrentIndex()).thenReturn(0);
-    drawable.setCallback(cb);
-    initialSdkVersion = Build.VERSION.SDK_INT;
-  }
-
-  @After
-  public void tearDown() {
-    Util.setSdkVersionInt(initialSdkVersion);
-  }
-
-  @Test
-  public void testShouldDrawFirstFrameBeforeAnyFrameRead() {
-    Canvas canvas = new Canvas();
-    drawable.draw(canvas);
-
-    BitmapTrackingShadowCanvas shadowCanvas =
-        (BitmapTrackingShadowCanvas) ShadowExtractor.extract(canvas);
-    assertThat(shadowCanvas.getDrawnBitmaps()).containsExactly(firstFrame);
-  }
-
-  @Test
-  public void testDoesDrawCurrentFrameIfOneIsAvailable() {
-    Canvas canvas = mock(Canvas.class);
-    Bitmap currentFrame = Bitmap.createBitmap(100, 100, Bitmap.Config.ARGB_4444);
-    when(frameLoader.getCurrentFrame()).thenReturn(currentFrame);
-
-    drawable.draw(canvas);
-    verify(canvas).drawBitmap(eq(currentFrame), (Rect) isNull(), isARect(), isAPaint());
-    verify(canvas, never()).drawBitmap(eq(firstFrame), (Rect) isNull(), isARect(), isAPaint());
-  }
-
-  @Test
-  public void testRequestsNextFrameOnStart() {
-    drawable.setVisible(true, true);
-    drawable.start();
-
-    verify(frameLoader).subscribe(eq(drawable));
-  }
-
-  @Test
-  public void testRequestsNextFrameOnStartWithoutCallToSetVisible() {
-    drawable.start();
-
-    verify(frameLoader).subscribe(eq(drawable));
-  }
-
-  @Test
-  public void testDoesNotRequestNextFrameOnStartIfGotCallToSetVisibleWithVisibleFalse() {
-    drawable.setVisible(false, false);
-    drawable.start();
-
-    verify(frameLoader, never()).subscribe(eq(drawable));
-  }
-
-  @Test
-  public void testDoesNotRequestNextFrameOnStartIfHasSingleFrame() {
-    when(frameLoader.getFrameCount()).thenReturn(1);
-    drawable.setVisible(true, false);
-    drawable.start();
-
-    verify(frameLoader, never()).subscribe(eq(drawable));
-  }
-
-  @Test
-  public void testInvalidatesSelfOnStartIfHasSingleFrame() {
-    when(frameLoader.getFrameCount()).thenReturn(1);
-    drawable.setVisible(true, false);
-    drawable.start();
-
-    verify(cb).invalidateDrawable(eq(drawable));
-  }
-
-  @Test
-  public void testShouldInvalidateSelfOnRun() {
-    drawable.setVisible(true, true);
-    drawable.start();
-
-    verify(cb).invalidateDrawable(eq(drawable));
-  }
-
-  @Test
-  public void testShouldNotScheduleItselfIfAlreadyRunning() {
-    drawable.setVisible(true, true);
-    drawable.start();
-    drawable.start();
-
-    verify(frameLoader, times(1)).subscribe(eq(drawable));
-  }
-
-  @Test
-  public void testReturnsFalseFromIsRunningWhenNotRunning() {
-    assertFalse(drawable.isRunning());
-  }
-
-  @Test
-  public void testReturnsTrueFromIsRunningWhenRunning() {
-    drawable.setVisible(true, true);
-    drawable.start();
-
-    assertTrue(drawable.isRunning());
-  }
-
-  @Test
-  public void testInvalidatesSelfWhenFrameReady() {
-    drawable.setIsRunning(true);
-    drawable.onFrameReady();
-
-    verify(cb).invalidateDrawable(eq(drawable));
-  }
-
-  @Test
-  public void testDoesNotStartLoadingNextFrameWhenCurrentFinishesIfHasNoCallback() {
-    drawable.setIsRunning(true);
-    drawable.setCallback(null);
-    drawable.onFrameReady();
-
-    verify(frameLoader).unsubscribe(eq(drawable));
-  }
-
-  @Test
-  public void testStopsWhenCurrentFrameFinishesIfHasNoCallbackAndIsAtLeastAtHoneycomb() {
-    drawable.setIsRunning(true);
-    drawable.setCallback(null);
-    drawable.onFrameReady();
-
-    assertFalse(drawable.isRunning());
-  }
-
-  @Test
-  public void testDoesNotStopWhenCurrentFrameFinishesIfHasNoCallbackAndIsPreHoneycomb() {
-    Util.setSdkVersionInt(10);
-
-    drawable.setIsRunning(true);
-    drawable.setCallback(null);
-    drawable.onFrameReady();
-
-    assertTrue(drawable.isRunning());
-  }
-
-  @Test
-  public void testUnsubscribesWhenCurrentFinishesIfHasNoCallbackAndIsAtLeastAtHoneycomb() {
-    drawable.setIsRunning(true);
-    drawable.setCallback(null);
-    drawable.onFrameReady();
-
-    verify(frameLoader).unsubscribe(eq(drawable));
-  }
-
-  @Test
-  public void testSetsIsRunningFalseOnStop() {
-    drawable.start();
-    drawable.stop();
-
-    assertFalse(drawable.isRunning());
-  }
-
-  @Test
-  public void testStopsOnSetVisibleFalse() {
-    drawable.start();
-
-    drawable.setVisible(false, true);
-
-    assertFalse(drawable.isRunning());
-  }
-
-  @Test
-  public void testStartsOnSetVisibleTrueIfRunning() {
-    drawable.start();
-    drawable.setVisible(false, false);
-    drawable.setVisible(true, true);
-
-    assertTrue(drawable.isRunning());
-  }
-
-  @Test
-  public void testDoesNotStartOnVisibleTrueIfNotRunning() {
-    drawable.setVisible(true, true);
-
-    assertFalse(drawable.isRunning());
-  }
-
-  @Test
-  public void testDoesNotStartOnSetVisibleIfStartedAndStopped() {
-    drawable.start();
-    drawable.stop();
-    drawable.setVisible(true, true);
-
-    assertFalse(drawable.isRunning());
-  }
-
-  @Test
-  public void testDoesNotImmediatelyRunIfStartedWhileNotVisible() {
-    drawable.setVisible(false, false);
-    drawable.start();
-
-    assertFalse(drawable.isRunning());
-  }
-
-  @Test
-  public void testGetOpacityReturnsTransparent() {
-    assertEquals(PixelFormat.TRANSPARENT, drawable.getOpacity());
-  }
-
-  @Test
-  public void testReturnsFrameCountFromDecoder() {
-    int expected = 4;
-    when(frameLoader.getFrameCount()).thenReturn(expected);
-
-    assertEquals(expected, drawable.getFrameCount());
-  }
-
-  @Test
-  public void testReturnsDefaultFrameIndex() {
-    final int expected = -1;
-
-    when(frameLoader.getCurrentIndex()).thenReturn(expected);
-
-    assertEquals(expected, drawable.getFrameIndex());
-  }
-
-  @Test
-  public void testReturnsNonDefaultFrameIndex() {
-    final int expected = 100;
-
-    when(frameLoader.getCurrentIndex()).thenReturn(expected);
-
-    assertEquals(expected, drawable.getFrameIndex());
-  }
-
-  @Test
-  public void testRecycleCallsClearOnFrameManager() {
-    drawable.recycle();
-
-    verify(frameLoader).clear();
-  }
-
-  @Test
-  public void testIsNotRecycledIfNotRecycled() {
-    assertFalse(drawable.isRecycled());
-  }
-
-  @Test
-  public void testIsRecycledAfterRecycled() {
-    drawable.recycle();
-
-    assertTrue(drawable.isRecycled());
-  }
-
-  @Test
-  public void testReturnsNonNullConstantState() {
-    assertNotNull(drawable.getConstantState());
-  }
-
-  @Test
-  public void testReturnsSizeFromFrameLoader() {
-    int size = 1243;
-    when(frameLoader.getSize()).thenReturn(size);
-
-    assertThat(drawable.getSize()).isEqualTo(size);
-  }
-
-  @Test
-  public void testReturnsNewDrawableFromConstantState() {
-    Bitmap firstFrame = Bitmap.createBitmap(100, 100, Bitmap.Config.ARGB_8888);
-    drawable =
-        new GifDrawable(RuntimeEnvironment.application, mock(GifDecoder.class), bitmapPool,
-            transformation, 100, 100, firstFrame);
-
-    assertNotNull(drawable.getConstantState().newDrawable());
-    assertNotNull(
-        drawable.getConstantState().newDrawable(RuntimeEnvironment.application.getResources()));
-  }
-
-  @Test
-  public void testReturnsFrameWidthAndHeightForIntrinsicDimensions() {
-    assertEquals(frameWidth, drawable.getIntrinsicWidth());
-    assertEquals(frameHeight, drawable.getIntrinsicHeight());
-  }
-
-  @Test
-  public void testLoopsASingleTimeIfLoopCountIsSetToOne() {
-    final int loopCount = 1;
-    final int frameCount = 2;
-    when(frameLoader.getFrameCount()).thenReturn(frameCount);
-    drawable.setLoopCount(loopCount);
-    drawable.setVisible(true, true);
-    drawable.start();
-
-    runLoops(loopCount, frameCount);
-
-    verifyRanLoops(loopCount, frameCount);
-    assertFalse(drawable.isRunning());
-  }
-
-  @Test
-  public void testLoopsForeverIfLoopCountIsSetToLoopForever() {
-    final int loopCount = 40;
-    final int frameCount = 2;
-
-    when(frameLoader.getFrameCount()).thenReturn(frameCount);
-    drawable.setLoopCount(GifDrawable.LOOP_FOREVER);
-    drawable.setVisible(true, true);
-    drawable.start();
-
-    runLoops(loopCount, frameCount);
-
-    verifyRanLoops(loopCount, frameCount);
-  }
-
-  @Test
-  public void testLoopsOnceIfLoopCountIsSetToOneWithThreeFrames() {
-    final int loopCount = 1;
-    final int frameCount = 3;
-
-    when(frameLoader.getFrameCount()).thenReturn(frameCount);
-    drawable.setLoopCount(loopCount);
-    drawable.setVisible(true, true);
-    drawable.start();
-
-    runLoops(loopCount, frameCount);
-
-    verifyRanLoops(loopCount, frameCount);
-    assertFalse(drawable.isRunning());
-  }
-
-  @Test
-  public void testLoopsThreeTimesIfLoopCountIsSetToThree() {
-    final int loopCount = 3;
-    final int frameCount = 2;
-
-    when(frameLoader.getFrameCount()).thenReturn(frameCount);
-    drawable.setLoopCount(loopCount);
-    drawable.setVisible(true, true);
-    drawable.start();
-
-    runLoops(loopCount, frameCount);
-
-    verifyRanLoops(loopCount, frameCount);
-    assertFalse(drawable.isRunning());
-  }
-
-  @Test
-  public void testCallingStartResetsLoopCounter() {
-    when(frameLoader.getFrameCount()).thenReturn(2);
-    drawable.setLoopCount(1);
-    drawable.setVisible(true, true);
-    drawable.start();
-
-    drawable.onFrameReady();
-    when(frameLoader.getCurrentIndex()).thenReturn(1);
-    drawable.onFrameReady();
-
-    drawable.start();
-
-    when(frameLoader.getCurrentIndex()).thenReturn(0);
-    drawable.onFrameReady();
-    when(frameLoader.getCurrentIndex()).thenReturn(1);
-    drawable.onFrameReady();
-
-    // 4 onFrameReady(), 2 start()
-    verify(cb, times(4 + 2)).invalidateDrawable(eq(drawable));
-    assertFalse(drawable.isRunning());
-  }
-
-  @Test
-  public void testChangingTheLoopCountAfterHittingTheMaxLoopCount() {
-    final int initialLoopCount = 1;
-    final int frameCount = 2;
-
-    when(frameLoader.getFrameCount()).thenReturn(frameCount);
-    drawable.setLoopCount(initialLoopCount);
-    drawable.setVisible(true, true);
-    drawable.start();
-
-    runLoops(initialLoopCount, frameCount);
-
-    final int newLoopCount = 2;
-
-    drawable.setLoopCount(newLoopCount);
-    drawable.start();
-
-    runLoops(newLoopCount, frameCount);
-
-    int numStarts = 2;
-    int expectedFrames = (initialLoopCount + newLoopCount) * frameCount + numStarts;
-    verify(cb, times(expectedFrames)).invalidateDrawable(eq(drawable));
-  }
-
-  @Test(expected = IllegalArgumentException.class)
-  public void testThrowsIfGivenLoopCountLessThanZeroAndNotInfinite() {
-    drawable.setLoopCount(-2);
-  }
-
-  @Test
-  public void testUsesDecoderNetscapeLoopCountIfLoopCountIsLoopIntrinsic() {
-    final int frameCount = 3;
-    final int loopCount = 2;
-    when(frameLoader.getLoopCount()).thenReturn(loopCount);
-    when(frameLoader.getFrameCount()).thenReturn(frameCount);
-    drawable.setLoopCount(GifDrawable.LOOP_INTRINSIC);
-    drawable.setVisible(true, true);
-    drawable.start();
-
-    runLoops(loopCount, frameCount);
-
-    verifyRanLoops(loopCount, frameCount);
-  }
-
-  @Test
-  public void testDoesNotDrawFrameAfterRecycle() {
-    Bitmap bitmap = Bitmap.createBitmap(100, 112341, Bitmap.Config.RGB_565);
-    drawable.setVisible(true, true);
-    drawable.start();
-    when(frameLoader.getCurrentFrame()).thenReturn(bitmap);
-    drawable.onFrameReady();
-    drawable.recycle();
-    Canvas canvas = mock(Canvas.class);
-    drawable.draw(canvas);
-    verify(canvas, never()).drawBitmap(eq(bitmap), isARect(), isARect(), isAPaint());
-  }
-
-  @Test
-  public void testSetsFrameTransformationOnFrameManager() {
-    Bitmap bitmap = Bitmap.createBitmap(100, 100, Bitmap.Config.ARGB_8888);
-    drawable.setFrameTransformation(transformation, bitmap);
-
-    verify(frameLoader).setFrameTransformation(eq(transformation), eq(bitmap));
-  }
-
-  @Test(expected = NullPointerException.class)
-  public void testThrowsIfConstructedWithNullFirstFrame() {
-    new GifDrawable(RuntimeEnvironment.application, mock(GifDecoder.class), bitmapPool,
-        transformation, 100, 100, null);
-  }
-
-  @Test
-  public void testAppliesGravityOnDrawAfterBoundsChange() {
-    Rect bounds = new Rect(0, 0, frameWidth * 2, frameHeight * 2);
-    drawable.setBounds(bounds);
-
-    Canvas canvas = mock(Canvas.class);
-    drawable.draw(canvas);
-
-    verify(canvas).drawBitmap(isA(Bitmap.class), (Rect) isNull(), eq(bounds), eq(paint));
-  }
-
-  @Test
-  public void testSetAlphaSetsAlphaOnPaint() {
-    int alpha = 100;
-    drawable.setAlpha(alpha);
-    verify(paint).setAlpha(eq(alpha));
-  }
-
-  @Test
-  public void testSetColorFilterSetsColorFilterOnPaint() {
-    ColorFilter colorFilter = new ColorFilter();
-    drawable.setColorFilter(colorFilter);
-    verify(paint).setColorFilter(eq(colorFilter));
-  }
-
-  @Test
-  public void testReturnsCurrentTransformationInGetFrameTransformation() {
-    @SuppressWarnings("unchecked")
-    Transformation<Bitmap> newTransformation = mock(Transformation.class);
-    Bitmap bitmap = Bitmap.createBitmap(100, 100, Bitmap.Config.ARGB_8888);
-    drawable.setFrameTransformation(newTransformation, bitmap);
-
-    verify(frameLoader).setFrameTransformation(eq(newTransformation), eq(bitmap));
-  }
-
-  @Test(expected = NullPointerException.class)
-  public void testThrowsIfCreatedWithNullState() {
-    new GifDrawable(null);
-  }
-
-  private void verifyRanLoops(int loopCount, int frameCount) {
-    // 1 for invalidate in start().
-    verify(cb, times(1 + loopCount * frameCount)).invalidateDrawable(eq(drawable));
-  }
-
-  private void runLoops(int loopCount, int frameCount) {
-    for (int loop = 0; loop < loopCount; loop++) {
-      for (int frame = 0; frame < frameCount; frame++) {
-        when(frameLoader.getCurrentIndex()).thenReturn(frame);
-        drawable.onFrameReady();
-      }
-    }
-  }
-
-  /**
-   * Keeps track of the set of Bitmaps drawn to the canvas.
-   */
-  @Implements(Canvas.class)
-  public static class BitmapTrackingShadowCanvas extends ShadowCanvas {
-    private final Set<Bitmap> drawnBitmaps = new HashSet<>();
-
-    @Implementation
-    public void drawBitmap(Bitmap bitmap, Rect src, Rect dst, Paint paint) {
-      drawnBitmaps.add(bitmap);
-    }
-
-    public Iterable<Bitmap> getDrawnBitmaps() {
-      return drawnBitmaps;
-    }
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/resource/gif/GifDrawableTransformationTest.java b/library/src/test/java/com/bumptech/glide/load/resource/gif/GifDrawableTransformationTest.java
deleted file mode 100644
index d9f0992c6..000000000
--- a/library/src/test/java/com/bumptech/glide/load/resource/gif/GifDrawableTransformationTest.java
+++ /dev/null
@@ -1,81 +0,0 @@
-package com.bumptech.glide.load.resource.gif;
-
-import static com.bumptech.glide.tests.Util.mockResource;
-import static org.mockito.Matchers.anyInt;
-import static org.mockito.Matchers.eq;
-import static org.mockito.Matchers.isA;
-import static org.mockito.Mockito.doAnswer;
-import static org.mockito.Mockito.mock;
-import static org.mockito.Mockito.verify;
-import static org.mockito.Mockito.when;
-
-import android.graphics.Bitmap;
-import com.bumptech.glide.load.Transformation;
-import com.bumptech.glide.load.engine.Resource;
-import com.bumptech.glide.load.engine.bitmap_recycle.BitmapPool;
-import com.bumptech.glide.load.resource.UnitTransformation;
-import com.bumptech.glide.tests.KeyAssertions;
-import com.bumptech.glide.tests.Util;
-import java.security.MessageDigest;
-import java.security.NoSuchAlgorithmException;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.mockito.Mock;
-import org.mockito.MockitoAnnotations;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class GifDrawableTransformationTest {
-  @Mock Transformation<Bitmap> wrapped;
-  @Mock BitmapPool bitmapPool;
-
-  private GifDrawableTransformation transformation;
-
-  @Before
-  public void setUp() {
-    MockitoAnnotations.initMocks(this);
-    transformation = new GifDrawableTransformation(wrapped, bitmapPool);
-  }
-
-  @Test
-  @SuppressWarnings("unchecked")
-  public void testSetsTransformationAsFrameTransformation() {
-    Resource<GifDrawable> resource = mockResource();
-    GifDrawable gifDrawable = mock(GifDrawable.class);
-    Transformation<Bitmap> unitTransformation = UnitTransformation.get();
-    when(gifDrawable.getFrameTransformation()).thenReturn(unitTransformation);
-    when(gifDrawable.getIntrinsicWidth()).thenReturn(500);
-    when(gifDrawable.getIntrinsicHeight()).thenReturn(500);
-    when(resource.get()).thenReturn(gifDrawable);
-
-    Bitmap firstFrame = Bitmap.createBitmap(100, 100, Bitmap.Config.ARGB_8888);
-    when(gifDrawable.getFirstFrame()).thenReturn(firstFrame);
-
-    final int width = 123;
-    final int height = 456;
-    Bitmap expectedBitmap = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
-    Resource<Bitmap> expectedResource = mockResource();
-    when(expectedResource.get()).thenReturn(expectedBitmap);
-    when(wrapped.transform(Util.<Bitmap>anyResource(), anyInt(), anyInt()))
-        .thenReturn(expectedResource);
-
-    transformation.transform(resource, width, height);
-
-    verify(gifDrawable).setFrameTransformation(isA(Transformation.class), eq(expectedBitmap));
-  }
-
-  @Test
-  public void testEquals() throws NoSuchAlgorithmException {
-    doAnswer(new Util.WriteDigest("first")).when(wrapped)
-        .updateDiskCacheKey(isA(MessageDigest.class));
-    KeyAssertions.assertSame(transformation, new GifDrawableTransformation(wrapped, bitmapPool));
-
-    @SuppressWarnings("unchecked") Transformation<Bitmap> other = mock(Transformation.class);
-    doAnswer(new Util.WriteDigest("other")).when(other)
-        .updateDiskCacheKey(isA(MessageDigest.class));
-    KeyAssertions.assertDifferent(transformation, new GifDrawableTransformation(other, bitmapPool));
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/resource/gif/GifFrameLoaderTest.java b/library/src/test/java/com/bumptech/glide/load/resource/gif/GifFrameLoaderTest.java
deleted file mode 100644
index 35e3b2365..000000000
--- a/library/src/test/java/com/bumptech/glide/load/resource/gif/GifFrameLoaderTest.java
+++ /dev/null
@@ -1,288 +0,0 @@
-package com.bumptech.glide.load.resource.gif;
-
-import static com.google.common.truth.Truth.assertThat;
-import static org.junit.Assert.assertEquals;
-import static org.junit.Assert.assertNull;
-import static org.mockito.Matchers.anyInt;
-import static org.mockito.Matchers.eq;
-import static org.mockito.Matchers.isA;
-import static org.mockito.Mockito.inOrder;
-import static org.mockito.Mockito.mock;
-import static org.mockito.Mockito.never;
-import static org.mockito.Mockito.times;
-import static org.mockito.Mockito.verify;
-import static org.mockito.Mockito.when;
-
-import android.graphics.Bitmap;
-import android.os.Handler;
-import android.os.Message;
-import android.support.annotation.NonNull;
-import com.bumptech.glide.Glide;
-import com.bumptech.glide.RequestBuilder;
-import com.bumptech.glide.RequestManager;
-import com.bumptech.glide.gifdecoder.GifDecoder;
-import com.bumptech.glide.load.Transformation;
-import com.bumptech.glide.load.resource.gif.GifFrameLoader.DelayTarget;
-import com.bumptech.glide.load.resource.gif.GifFrameLoader.FrameCallback;
-import com.bumptech.glide.request.BaseRequestOptions;
-import com.bumptech.glide.request.Request;
-import com.bumptech.glide.request.RequestOptions;
-import com.bumptech.glide.request.target.Target;
-import com.bumptech.glide.tests.Util.ReturnsSelfAnswer;
-import com.bumptech.glide.util.Util;
-import com.google.common.testing.EqualsTester;
-import java.nio.ByteBuffer;
-import java.util.UUID;
-import org.junit.After;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.mockito.InOrder;
-import org.mockito.Mock;
-import org.mockito.MockitoAnnotations;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.RuntimeEnvironment;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class GifFrameLoaderTest {
-
-  @Mock GifFrameLoader.FrameCallback callback;
-  @Mock GifDecoder gifDecoder;
-  @Mock Handler handler;
-  @Mock Transformation<Bitmap> transformation;
-  @Mock RequestManager requestManager;
-  private GifFrameLoader loader;
-  private RequestBuilder<Bitmap> requestBuilder;
-  private Bitmap firstFrame;
-
-  @SuppressWarnings("unchecked")
-  @Before
-  public void setUp() {
-    MockitoAnnotations.initMocks(this);
-    when(handler.obtainMessage(anyInt(), isA(DelayTarget.class))).thenReturn(mock(Message.class));
-
-    firstFrame = Bitmap.createBitmap(100, 100, Bitmap.Config.ARGB_8888);
-
-    ByteBuffer byteBuffer = ByteBuffer.allocate(10);
-    when(gifDecoder.getData()).thenReturn(byteBuffer);
-
-    requestBuilder = mock(RequestBuilder.class, new ReturnsSelfAnswer());
-
-    loader = createGifFrameLoader(handler);
-  }
-
-  @After
-  public void tearDown() {
-    Glide.tearDown();
-  }
-
-  @NonNull
-  private GifFrameLoader createGifFrameLoader(Handler handler) {
-    Glide glide = getGlideSingleton();
-    return new GifFrameLoader(
-        glide.getContext(),
-        glide.getBitmapPool(),
-        requestManager,
-        gifDecoder,
-        handler,
-        requestBuilder,
-        transformation,
-        firstFrame);
-  }
-
-  private static Glide getGlideSingleton() {
-    return Glide.get(RuntimeEnvironment.application);
-  }
-
-  @SuppressWarnings("unchecked")
-  @Test
-  public void testSetFrameTransformationSetsTransformationOnRequestBuilder() {
-    Transformation<Bitmap> transformation = mock(Transformation.class);
-    loader.setFrameTransformation(transformation, firstFrame);
-
-    verify(requestBuilder, times(2)).apply(isA(RequestOptions.class));
-  }
-
-  @Test(expected = NullPointerException.class)
-  public void testSetFrameTransformationThrowsIfGivenNullTransformation() {
-    loader.setFrameTransformation(null, null);
-  }
-
-  @Test
-  public void testReturnsSizeFromGifDecoderAndCurrentFrame() {
-    int decoderByteSize = 123456;
-    when(gifDecoder.getByteSize()).thenReturn(decoderByteSize);
-    assertThat(loader.getSize()).isEqualTo(decoderByteSize + Util.getBitmapByteSize(firstFrame));
-  }
-
-  @Test
-  public void testStartGetsNextFrameIfNotStartedAndWithNoLoadPending() {
-    loader.subscribe(callback);
-
-    verify(requestBuilder).into(aTarget());
-  }
-
-  @Test
-  public void testGetNextFrameIncrementsSignatureAndAdvancesDecoderBeforeStartingLoad() {
-    loader.subscribe(callback);
-
-    InOrder order = inOrder(gifDecoder, requestBuilder);
-    order.verify(gifDecoder).advance();
-    order.verify(requestBuilder).apply(isA(BaseRequestOptions.class));
-    order.verify(requestBuilder).into(aTarget());
-  }
-
-  @Test
-  public void testGetCurrentFrameReturnsFirstFrameWHenNoLoadHasCompleted() {
-    assertThat(loader.getCurrentFrame()).isEqualTo(firstFrame);
-  }
-
-  @Test
-  public void testGetCurrentFrameReturnsCurrentBitmapAfterLoadHasCompleted() {
-    final Bitmap result = Bitmap.createBitmap(100, 200, Bitmap.Config.ARGB_8888);
-    DelayTarget target = mock(DelayTarget.class);
-    when(target.getResource()).thenReturn(result);
-    loader.onFrameReady(target);
-
-    assertEquals(result, loader.getCurrentFrame());
-  }
-
-  @Test
-  public void testStartDoesNotStartIfAlreadyRunning() {
-    loader.subscribe(callback);
-    loader.subscribe(mock(FrameCallback.class));
-
-    verify(requestBuilder, times(1)).into(aTarget());
-  }
-
-  @Test
-  public void testGetNextFrameDoesNotStartLoadIfLoaderIsNotRunning() {
-    loader.onFrameReady(mock(DelayTarget.class));
-
-    verify(requestBuilder, never()).into(aTarget());
-  }
-
-  @Test
-  public void testGetNextFrameDoesNotStartLoadIfLoadIsInProgress() {
-    loader.subscribe(callback);
-    loader.unsubscribe(callback);
-    loader.subscribe(callback);
-
-    verify(requestBuilder, times(1)).into(aTarget());
-  }
-
-  @Test
-  public void testGetNextFrameDoesStartLoadIfRestartedAndNoLoadIsInProgress() {
-    loader.subscribe(callback);
-    loader.unsubscribe(callback);
-
-    loader.onFrameReady(mock(DelayTarget.class));
-    loader.subscribe(callback);
-
-    verify(requestBuilder, times(2)).into(aTarget());
-  }
-
-  @Test
-  public void testGetNextFrameDoesStartLoadAfterLoadCompletesIfStarted() {
-    loader.subscribe(callback);
-    loader.onFrameReady(mock(DelayTarget.class));
-
-    verify(requestBuilder, times(2)).into(aTarget());
-  }
-
-  @Test
-  public void testOnFrameReadyClearsPreviousFrame() {
-    // Force the loader to create a real Handler.
-    loader = createGifFrameLoader(null);
-
-    DelayTarget previous = mock(DelayTarget.class);
-    Request previousRequest = mock(Request.class);
-    when(previous.getRequest()).thenReturn(previousRequest);
-    when(previous.getResource()).thenReturn(Bitmap.createBitmap(100, 100, Bitmap.Config.ARGB_8888));
-
-    DelayTarget current = mock(DelayTarget.class);
-    when(current.getResource()).thenReturn(Bitmap.createBitmap(100, 100, Bitmap.Config.RGB_565));
-    loader.onFrameReady(previous);
-    loader.onFrameReady(current);
-
-    verify(requestManager).clear(eq(previous));
-  }
-
-  @Test
-  public void testOnFrameReadyWithNullResourceDoesNotClearPreviousFrame() {
-    // Force the loader to create a real Handler by passing null.
-    loader = createGifFrameLoader(null);
-
-    DelayTarget previous = mock(DelayTarget.class);
-    Request previousRequest = mock(Request.class);
-    when(previous.getRequest()).thenReturn(previousRequest);
-    when(previous.getResource()).thenReturn(Bitmap.createBitmap(100, 100, Bitmap.Config.ARGB_8888));
-
-    DelayTarget current = mock(DelayTarget.class);
-    when(current.getResource()).thenReturn(null);
-    loader.onFrameReady(previous);
-    loader.onFrameReady(current);
-
-    verify(previousRequest, never()).clear();
-  }
-
-  @Test
-  public void testDelayTargetSendsMessageWithHandlerDelayed() {
-    long targetTime = 1234;
-    DelayTarget delayTarget = new DelayTarget(handler, 1, targetTime);
-    delayTarget.onResourceReady(Bitmap.createBitmap(100, 100, Bitmap.Config.ARGB_8888), null
-    /*glideAnimation*/);
-    verify(handler).sendMessageAtTime(isA(Message.class), eq(targetTime));
-  }
-
-  @Test
-  public void testDelayTargetSetsResourceOnResourceReady() {
-    DelayTarget delayTarget = new DelayTarget(handler, 1, 1);
-    Bitmap expected = Bitmap.createBitmap(100, 200, Bitmap.Config.RGB_565);
-    delayTarget.onResourceReady(expected, null /*glideAnimation*/);
-
-    assertEquals(expected, delayTarget.getResource());
-  }
-
-  @Test
-  public void testClearsCompletedLoadOnFrameReadyIfCleared() {
-    // Force the loader to create a real Handler by passing null;
-    loader = createGifFrameLoader(null);
-    loader.clear();
-    DelayTarget delayTarget = mock(DelayTarget.class);
-    Request request = mock(Request.class);
-    when(delayTarget.getRequest()).thenReturn(request);
-
-    loader.onFrameReady(delayTarget);
-
-    verify(requestManager).clear(eq(delayTarget));
-  }
-
-  @Test
-  public void
-  testDoesNotReturnResourceForCompletedFrameInGetCurrentFrameIfLoadCompletesWhileCleared() {
-    loader.clear();
-    DelayTarget delayTarget = mock(DelayTarget.class);
-    Bitmap bitmap = Bitmap.createBitmap(100, 100, Bitmap.Config.ARGB_8888);
-    when(delayTarget.getResource()).thenReturn(bitmap);
-
-    loader.onFrameReady(delayTarget);
-
-    assertNull(loader.getCurrentFrame());
-  }
-
-  @Test
-  public void testFrameSignatureEquality() {
-    UUID first = UUID.randomUUID();
-    new EqualsTester().addEqualityGroup(new GifFrameLoader.FrameSignature(first),
-        new GifFrameLoader.FrameSignature(first))
-        .addEqualityGroup(new GifFrameLoader.FrameSignature()).testEquals();
-  }
-
-  @SuppressWarnings("unchecked")
-  private static Target<Bitmap> aTarget() {
-    return isA(Target.class);
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/resource/gif/GifFrameResourceDecoderTest.java b/library/src/test/java/com/bumptech/glide/load/resource/gif/GifFrameResourceDecoderTest.java
deleted file mode 100644
index 18c379433..000000000
--- a/library/src/test/java/com/bumptech/glide/load/resource/gif/GifFrameResourceDecoderTest.java
+++ /dev/null
@@ -1,47 +0,0 @@
-package com.bumptech.glide.load.resource.gif;
-
-import static org.junit.Assert.assertEquals;
-import static org.junit.Assert.assertNull;
-import static org.mockito.Mockito.mock;
-import static org.mockito.Mockito.when;
-
-import android.graphics.Bitmap;
-import com.bumptech.glide.gifdecoder.GifDecoder;
-import com.bumptech.glide.load.Options;
-import com.bumptech.glide.load.engine.bitmap_recycle.BitmapPool;
-import java.io.IOException;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class GifFrameResourceDecoderTest {
-  private GifDecoder gifDecoder;
-  private GifFrameResourceDecoder resourceDecoder;
-  private Options options;
-
-  @Before
-  public void setUp() {
-    gifDecoder = mock(GifDecoder.class);
-    resourceDecoder = new GifFrameResourceDecoder(mock(BitmapPool.class));
-    options = new Options();
-  }
-
-  @Test
-  public void testReturnsFrameFromGifDecoder() throws IOException {
-    Bitmap expected = Bitmap.createBitmap(100, 100, Bitmap.Config.ARGB_4444);
-    when(gifDecoder.getNextFrame()).thenReturn(expected);
-
-    assertEquals(expected, resourceDecoder.decode(gifDecoder, 100, 100, options).get());
-  }
-
-  @Test
-  public void testReturnsNullIfGifDecoderReturnsNullFrame() {
-    when(gifDecoder.getNextFrame()).thenReturn(null);
-
-    assertNull(resourceDecoder.decode(gifDecoder, 100, 100, options));
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/resource/gif/StreamGifDecoderTest.java b/library/src/test/java/com/bumptech/glide/load/resource/gif/StreamGifDecoderTest.java
deleted file mode 100644
index 085014881..000000000
--- a/library/src/test/java/com/bumptech/glide/load/resource/gif/StreamGifDecoderTest.java
+++ /dev/null
@@ -1,58 +0,0 @@
-package com.bumptech.glide.load.resource.gif;
-
-import static com.google.common.truth.Truth.assertThat;
-
-import com.bumptech.glide.load.Options;
-import com.bumptech.glide.load.ResourceDecoder;
-import com.bumptech.glide.load.engine.bitmap_recycle.LruArrayPool;
-import java.io.ByteArrayInputStream;
-import java.io.IOException;
-import java.nio.ByteBuffer;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.mockito.Mock;
-import org.mockito.MockitoAnnotations;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class StreamGifDecoderTest {
-  private static final byte[] GIF_HEADER = new byte[] { 0x47, 0x49, 0x46 };
-
-  @Mock
-  ResourceDecoder<ByteBuffer, GifDrawable> byteBufferDecoder;
-  private StreamGifDecoder decoder;
-  private Options options;
-
-  @Before
-  public void setUp() {
-    MockitoAnnotations.initMocks(this);
-
-    decoder = new StreamGifDecoder(byteBufferDecoder, new LruArrayPool());
-    options = new Options();
-  }
-
-  @Test
-  public void testDoesNotHandleStreamIfEnabledButNotAGif() throws IOException {
-    assertThat(decoder.handles(new ByteArrayInputStream(new byte[0]), options)).isFalse();
-  }
-
-  @Test
-  public void testHandlesStreamIfContainsGifHeaderAndDisabledIsNotSet() throws IOException {
-    assertThat(decoder.handles(new ByteArrayInputStream(GIF_HEADER), options)).isTrue();
-  }
-
-  @Test
-  public void testHandlesStreamIfContainsGifHeaderAndDisabledIsFalse() throws IOException {
-    options.set(StreamGifDecoder.DISABLE_ANIMATION, false);
-    assertThat(decoder.handles(new ByteArrayInputStream(GIF_HEADER), options)).isTrue();
-  }
-
-  @Test
-  public void testDoesNotHandleStreamIfDisabled() throws IOException {
-    options.set(StreamGifDecoder.DISABLE_ANIMATION, true);
-    assertThat(decoder.handles(new ByteArrayInputStream(GIF_HEADER), options)).isFalse();
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/resource/transcode/BitmapBytesTranscoderTest.java b/library/src/test/java/com/bumptech/glide/load/resource/transcode/BitmapBytesTranscoderTest.java
deleted file mode 100644
index 9d8e2b1b1..000000000
--- a/library/src/test/java/com/bumptech/glide/load/resource/transcode/BitmapBytesTranscoderTest.java
+++ /dev/null
@@ -1,75 +0,0 @@
-package com.bumptech.glide.load.resource.transcode;
-
-import static com.bumptech.glide.tests.Util.mockResource;
-import static com.google.common.truth.Truth.assertThat;
-import static org.mockito.Mockito.verify;
-import static org.mockito.Mockito.when;
-
-import android.graphics.Bitmap;
-import com.bumptech.glide.load.engine.Resource;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.Shadows;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class BitmapBytesTranscoderTest {
-  private BitmapBytesTranscoderHarness harness;
-
-  @Before()
-  public void setUp() {
-    harness = new BitmapBytesTranscoderHarness();
-  }
-
-  @Test
-  public void testReturnsBytesOfGivenBitmap() {
-    String transcodedDescription = harness.getTranscodedDescription();
-    assertThat(transcodedDescription).startsWith(harness.description);
-  }
-
-  @Test
-  public void testUsesGivenQuality() {
-    harness.quality = 66;
-    String transcodedDescription = harness.getTranscodedDescription();
-    assertThat(transcodedDescription).contains(String.valueOf(harness.quality));
-  }
-
-  @Test
-  public void testUsesGivenFormat() {
-    for (Bitmap.CompressFormat format : Bitmap.CompressFormat.values()) {
-      harness.compressFormat = format;
-      String transcodedDescription = harness.getTranscodedDescription();
-      assertThat(transcodedDescription).contains(format.name());
-    }
-  }
-
-  @Test
-  public void testBitmapResourceIsRecycled() {
-    harness.getTranscodedDescription();
-
-    verify(harness.bitmapResource).recycle();
-  }
-
-  private static class BitmapBytesTranscoderHarness {
-    Bitmap.CompressFormat compressFormat = Bitmap.CompressFormat.JPEG;
-    int quality = 100;
-    final String description = "TestDescription";
-    Bitmap bitmap = Bitmap.createBitmap(100, 100, Bitmap.Config.ALPHA_8);
-    Resource<Bitmap> bitmapResource = mockResource();
-
-    public BitmapBytesTranscoderHarness() {
-      when(bitmapResource.get()).thenReturn(bitmap);
-      Shadows.shadowOf(bitmap).setDescription(description);
-    }
-
-    public String getTranscodedDescription() {
-      BitmapBytesTranscoder transcoder = new BitmapBytesTranscoder(compressFormat, quality);
-      Resource<byte[]> bytesResource = transcoder.transcode(bitmapResource);
-
-      return new String(bytesResource.get());
-    }
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/resource/transcode/BitmapDrawableTranscoderTest.java b/library/src/test/java/com/bumptech/glide/load/resource/transcode/BitmapDrawableTranscoderTest.java
deleted file mode 100644
index 62689518a..000000000
--- a/library/src/test/java/com/bumptech/glide/load/resource/transcode/BitmapDrawableTranscoderTest.java
+++ /dev/null
@@ -1,40 +0,0 @@
-package com.bumptech.glide.load.resource.transcode;
-
-import static com.bumptech.glide.tests.Util.mockResource;
-import static org.junit.Assert.assertEquals;
-import static org.mockito.Mockito.mock;
-import static org.mockito.Mockito.when;
-
-import android.graphics.Bitmap;
-import android.graphics.drawable.BitmapDrawable;
-import com.bumptech.glide.load.engine.Resource;
-import com.bumptech.glide.load.engine.bitmap_recycle.BitmapPool;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.RuntimeEnvironment;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class BitmapDrawableTranscoderTest {
-  private BitmapDrawableTranscoder transcoder;
-
-  @Before
-  public void setUp() {
-    transcoder = new BitmapDrawableTranscoder(RuntimeEnvironment.application.getResources(),
-        mock(BitmapPool.class));
-  }
-
-  @Test
-  public void testReturnsBitmapDrawableResourceContainingGivenBitmap() {
-    Bitmap expected = Bitmap.createBitmap(100, 100, Bitmap.Config.ARGB_8888);
-    Resource<Bitmap> resource = mockResource();
-    when(resource.get()).thenReturn(expected);
-
-    Resource<BitmapDrawable> transcoded = transcoder.transcode(resource);
-
-    assertEquals(expected, transcoded.get().getBitmap());
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/resource/transcode/GifDrawableBytesTranscoderTest.java b/library/src/test/java/com/bumptech/glide/load/resource/transcode/GifDrawableBytesTranscoderTest.java
deleted file mode 100644
index 1f6d4fd8f..000000000
--- a/library/src/test/java/com/bumptech/glide/load/resource/transcode/GifDrawableBytesTranscoderTest.java
+++ /dev/null
@@ -1,41 +0,0 @@
-package com.bumptech.glide.load.resource.transcode;
-
-import static com.bumptech.glide.tests.Util.mockResource;
-import static org.junit.Assert.assertArrayEquals;
-import static org.mockito.Mockito.mock;
-import static org.mockito.Mockito.when;
-
-import com.bumptech.glide.load.engine.Resource;
-import com.bumptech.glide.load.resource.gif.GifDrawable;
-import java.nio.ByteBuffer;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.junit.runners.JUnit4;
-
-@RunWith(JUnit4.class)
-public class GifDrawableBytesTranscoderTest {
-  private GifDrawableBytesTranscoder transcoder;
-  private GifDrawable gifDrawable;
-  private Resource<GifDrawable> resource;
-
-  @Before
-  public void setUp() {
-    gifDrawable = mock(GifDrawable.class);
-    resource = mockResource();
-    when(resource.get()).thenReturn(gifDrawable);
-    transcoder = new GifDrawableBytesTranscoder();
-  }
-
-  @Test
-  public void testReturnsBytesOfGivenGifDrawable() {
-    for (String fakeData : new String[] { "test", "1235asfklaw3", "@$@#" }) {
-      ByteBuffer expected = ByteBuffer.wrap(fakeData.getBytes());
-      when(gifDrawable.getBuffer()).thenReturn(expected);
-
-      Resource<byte[]> transcoded = transcoder.transcode(resource);
-
-      assertArrayEquals(expected.array(), transcoded.get());
-    }
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/resource/transcode/TranscoderRegistryTest.java b/library/src/test/java/com/bumptech/glide/load/resource/transcode/TranscoderRegistryTest.java
deleted file mode 100644
index 28db86bbe..000000000
--- a/library/src/test/java/com/bumptech/glide/load/resource/transcode/TranscoderRegistryTest.java
+++ /dev/null
@@ -1,48 +0,0 @@
-package com.bumptech.glide.load.resource.transcode;
-
-import static org.junit.Assert.assertEquals;
-import static org.junit.Assert.assertNotNull;
-import static org.mockito.Mockito.mock;
-
-import java.io.File;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.junit.runners.JUnit4;
-
-@RunWith(JUnit4.class)
-public class TranscoderRegistryTest {
-  private TranscoderRegistry factories;
-
-  @Before
-  public void setUp() {
-    factories = new TranscoderRegistry();
-  }
-
-  @Test
-  public void testReturnsUnitDecoderIfClassesAreIdentical() {
-    assertEquals(UnitTranscoder.get(), factories.get(Object.class, Object.class));
-  }
-
-  @Test
-  public void testCanRegisterAndRetrieveResourceTranscoder() {
-    @SuppressWarnings("unchecked")
-    ResourceTranscoder<File, String> transcoder = mock(ResourceTranscoder.class);
-    factories.register(File.class, String.class, transcoder);
-
-    assertEquals(transcoder, factories.get(File.class, String.class));
-  }
-
-  @Test
-  public void testDoesNotThrowIfRequestCanBeSatisfiedByUnitTranscoder() {
-    // Assignable from.
-    assertNotNull(factories.get(Integer.class, Number.class));
-    // Equal to.
-    assertNotNull(factories.get(Integer.class, Integer.class));
-  }
-
-  @Test(expected = IllegalArgumentException.class)
-  public void testThrowsIfNoTranscoderRegistered() {
-    factories.get(File.class, Integer.class);
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/load/resource/transcode/UnitTranscoderTest.java b/library/src/test/java/com/bumptech/glide/load/resource/transcode/UnitTranscoderTest.java
deleted file mode 100644
index a1d8eb507..000000000
--- a/library/src/test/java/com/bumptech/glide/load/resource/transcode/UnitTranscoderTest.java
+++ /dev/null
@@ -1,21 +0,0 @@
-package com.bumptech.glide.load.resource.transcode;
-
-import static com.bumptech.glide.tests.Util.mockResource;
-import static org.junit.Assert.assertEquals;
-
-import com.bumptech.glide.load.engine.Resource;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.junit.runners.JUnit4;
-
-@RunWith(JUnit4.class)
-public class UnitTranscoderTest {
-
-  @Test
-  public void testReturnsTheGivenResource() {
-    Resource<Object> resource = mockResource();
-    ResourceTranscoder<Object, Object> unitTranscoder = UnitTranscoder.get();
-
-    assertEquals(resource, unitTranscoder.transcode(resource));
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/manager/DefaultConnectivityMonitorFactoryTest.java b/library/src/test/java/com/bumptech/glide/manager/DefaultConnectivityMonitorFactoryTest.java
deleted file mode 100644
index e78445533..000000000
--- a/library/src/test/java/com/bumptech/glide/manager/DefaultConnectivityMonitorFactoryTest.java
+++ /dev/null
@@ -1,38 +0,0 @@
-package com.bumptech.glide.manager;
-
-import static com.google.common.truth.Truth.assertThat;
-import static org.mockito.Mockito.mock;
-
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.RuntimeEnvironment;
-import org.robolectric.annotation.Config;
-import org.robolectric.shadows.ShadowApplication;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class DefaultConnectivityMonitorFactoryTest {
-  private ConnectivityMonitorFactory factory;
-
-  @Before
-  public void setUp() {
-    factory = new DefaultConnectivityMonitorFactory();
-  }
-
-  @Test
-  public void testReturnsDefaultConnectivityMonitorWhenHasPermission() {
-    ShadowApplication.getInstance().grantPermissions("android.permission.ACCESS_NETWORK_STATE");
-    ConnectivityMonitor connectivityMonitor = factory.build(RuntimeEnvironment.application,
-        mock(ConnectivityMonitor.ConnectivityListener.class));
-    assertThat(connectivityMonitor).isInstanceOf(DefaultConnectivityMonitor.class);
-  }
-
-  @Test
-  public void testReturnsNullConnectivityMonitorWhenDoesNotHavePermission() {
-    ConnectivityMonitor connectivityMonitor = factory.build(RuntimeEnvironment.application,
-        mock(ConnectivityMonitor.ConnectivityListener.class));
-    assertThat(connectivityMonitor).isInstanceOf(NullConnectivityMonitor.class);
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/manager/DefaultConnectivityMonitorTest.java b/library/src/test/java/com/bumptech/glide/manager/DefaultConnectivityMonitorTest.java
deleted file mode 100644
index 32fa7111b..000000000
--- a/library/src/test/java/com/bumptech/glide/manager/DefaultConnectivityMonitorTest.java
+++ /dev/null
@@ -1,147 +0,0 @@
-package com.bumptech.glide.manager;
-
-import static com.google.common.truth.Truth.assertThat;
-import static org.mockito.Matchers.anyBoolean;
-import static org.mockito.Matchers.eq;
-import static org.mockito.Mockito.mock;
-import static org.mockito.Mockito.never;
-import static org.mockito.Mockito.verify;
-
-import android.content.BroadcastReceiver;
-import android.content.Context;
-import android.content.Intent;
-import android.net.ConnectivityManager;
-import android.net.NetworkInfo;
-import java.util.List;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.RuntimeEnvironment;
-import org.robolectric.Shadows;
-import org.robolectric.annotation.Config;
-import org.robolectric.shadows.ShadowApplication;
-import org.robolectric.shadows.ShadowConnectivityManager;
-import org.robolectric.shadows.ShadowNetworkInfo;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class DefaultConnectivityMonitorTest {
-  private ConnectivityMonitor.ConnectivityListener listener;
-  private DefaultConnectivityMonitor monitor;
-
-  @Before
-  public void setUp() {
-    listener = mock(ConnectivityMonitor.ConnectivityListener.class);
-    monitor = new DefaultConnectivityMonitor(RuntimeEnvironment.application, listener);
-  }
-
-  @Test
-  public void testRegistersReceiverOnStart() {
-    monitor.onStart();
-
-    assertThat(getConnectivityReceivers()).hasSize(1);
-  }
-
-  @Test
-  public void testDoesNotRegisterTwiceOnStart() {
-    monitor.onStart();
-    monitor.onStart();
-
-    assertThat(getConnectivityReceivers()).hasSize(1);
-  }
-
-  @Test
-  public void testUnregistersReceiverOnStop() {
-    monitor.onStart();
-    monitor.onStop();
-
-    assertThat(getConnectivityReceivers()).isEmpty();
-  }
-
-  @Test
-  public void testHandlesUnregisteringTwiceInARow() {
-    monitor.onStop();
-    monitor.onStop();
-
-    assertThat(getConnectivityReceivers()).isEmpty();
-  }
-
-  @Test
-  public void testDoesNotNotifyListenerIfConnectedAndBecomesConnected() {
-    ConnectivityHarness harness = new ConnectivityHarness();
-    harness.connect();
-
-    monitor.onStart();
-    harness.broadcast();
-
-    verify(listener, never()).onConnectivityChanged(anyBoolean());
-  }
-
-  @Test
-  public void testNotifiesListenerIfConnectedAndBecomesDisconnected() {
-    ConnectivityHarness harness = new ConnectivityHarness();
-    harness.connect();
-
-    monitor.onStart();
-    harness.disconnect();
-    harness.broadcast();
-
-    verify(listener).onConnectivityChanged(eq(false));
-  }
-
-  @Test
-  public void testNotifiesListenerIfDisconnectedAndBecomesConnected() {
-    ConnectivityHarness harness = new ConnectivityHarness();
-    harness.disconnect();
-
-    monitor.onStart();
-    harness.connect();
-    harness.broadcast();
-
-    verify(listener).onConnectivityChanged(eq(true));
-  }
-
-  @Test
-  public void testDoesNotNotifyListenerWhenNotRegistered() {
-    ConnectivityHarness harness = new ConnectivityHarness();
-    harness.disconnect();
-
-    monitor.onStart();
-    monitor.onStop();
-    harness.connect();
-    harness.broadcast();
-
-    verify(listener, never()).onConnectivityChanged(anyBoolean());
-  }
-
-  private List<BroadcastReceiver> getConnectivityReceivers() {
-    Intent connectivity = new Intent(ConnectivityManager.CONNECTIVITY_ACTION);
-    return ShadowApplication.getInstance().getReceiversForIntent(connectivity);
-  }
-
-  private static class ConnectivityHarness {
-    private final ShadowConnectivityManager shadowConnectivityManager;
-
-    public ConnectivityHarness() {
-      ConnectivityManager connectivityManager = (ConnectivityManager) RuntimeEnvironment.application
-          .getSystemService(Context.CONNECTIVITY_SERVICE);
-      shadowConnectivityManager = Shadows.shadowOf(connectivityManager);
-    }
-
-    public void disconnect() {
-      shadowConnectivityManager.setActiveNetworkInfo(null);
-    }
-
-    public void connect() {
-      NetworkInfo networkInfo =
-          ShadowNetworkInfo.newInstance(NetworkInfo.DetailedState.CONNECTED, 0, 0, true, true);
-      shadowConnectivityManager.setActiveNetworkInfo(networkInfo);
-    }
-
-    public void broadcast() {
-      Intent connected = new Intent(ConnectivityManager.CONNECTIVITY_ACTION);
-      ShadowApplication.getInstance().sendBroadcast(connected);
-    }
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/manager/Issue117Activity.java b/library/src/test/java/com/bumptech/glide/manager/Issue117Activity.java
deleted file mode 100644
index 570026f5d..000000000
--- a/library/src/test/java/com/bumptech/glide/manager/Issue117Activity.java
+++ /dev/null
@@ -1,71 +0,0 @@
-package com.bumptech.glide.manager;
-
-import static android.view.ViewGroup.LayoutParams.MATCH_PARENT;
-
-import android.annotation.TargetApi;
-import android.content.Context;
-import android.os.Build;
-import android.os.Bundle;
-import android.support.v4.app.Fragment;
-import android.support.v4.app.FragmentActivity;
-import android.support.v4.app.FragmentManager;
-import android.support.v4.app.FragmentPagerAdapter;
-import android.support.v4.view.ViewPager;
-import android.view.LayoutInflater;
-import android.view.View;
-import android.view.ViewGroup;
-import android.widget.ImageView;
-import com.bumptech.glide.Glide;
-
-/**
- * A test activity to reproduce Issue #117: https://github.com/bumptech/glide/issues/117.
- */
-@TargetApi(Build.VERSION_CODES.JELLY_BEAN_MR1)
-class Issue117Activity extends FragmentActivity {
-  @Override
-  protected void onCreate(Bundle savedInstanceState) {
-    super.onCreate(savedInstanceState);
-    ViewPager viewPager = new ViewPager(this);
-    viewPager.setId(View.generateViewId());
-    setContentView(viewPager, new ViewGroup.LayoutParams(MATCH_PARENT, MATCH_PARENT));
-    viewPager.setAdapter(new Issue117Adapter(getSupportFragmentManager()));
-  }
-
-  private static class Issue117Adapter extends FragmentPagerAdapter {
-
-    public Issue117Adapter(FragmentManager fm) {
-      super(fm);
-    }
-
-    @Override
-    public Fragment getItem(int position) {
-      return new Issue117Fragment();
-    }
-
-    @Override
-    public int getCount() {
-      return 1;
-    }
-  }
-
-  public static class Issue117Fragment extends Fragment {
-    @Override
-    public View onCreateView(LayoutInflater inflater, ViewGroup container,
-        Bundle savedInstanceState) {
-      return new Issue117ImageView(getActivity());
-    }
-  }
-
-  public static class Issue117ImageView extends ImageView {
-    public Issue117ImageView(Context context) {
-      super(context);
-    }
-
-    @Override
-    protected void onAttachedToWindow() {
-      super.onAttachedToWindow();
-      Glide.with(getContext()).asDrawable().load(android.R.drawable.ic_menu_rotate).into(this);
-    }
-  }
-}
-
diff --git a/library/src/test/java/com/bumptech/glide/manager/LifecycleTest.java b/library/src/test/java/com/bumptech/glide/manager/LifecycleTest.java
deleted file mode 100644
index df8bce1ae..000000000
--- a/library/src/test/java/com/bumptech/glide/manager/LifecycleTest.java
+++ /dev/null
@@ -1,125 +0,0 @@
-package com.bumptech.glide.manager;
-
-import static org.mockito.Mockito.mock;
-import static org.mockito.Mockito.never;
-import static org.mockito.Mockito.verify;
-
-import java.util.ArrayList;
-import java.util.List;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class LifecycleTest {
-
-  private ActivityFragmentLifecycle lifecycle;
-  private LifecycleListener listener;
-
-  @Before
-  public void setUp() {
-    lifecycle = new ActivityFragmentLifecycle();
-    listener = mock(LifecycleListener.class);
-  }
-
-  @Test
-  public void testNotifiesAddedListenerOnStart() {
-    lifecycle.addListener(listener);
-    lifecycle.onStart();
-    verify(listener).onStart();
-  }
-
-  @Test
-  public void testNotifiesAddedListenerOfStartIfStarted() {
-    lifecycle.onStart();
-    lifecycle.addListener(listener);
-    verify(listener).onStart();
-  }
-
-  @Test
-  public void testDoesNotNotifyAddedListenerOfStartIfDestroyed() {
-    lifecycle.onStart();
-    lifecycle.onStop();
-    lifecycle.onDestroy();
-    lifecycle.addListener(listener);
-
-    verify(listener, never()).onStart();
-  }
-
-  @Test
-  public void testDoesNotNotifyListenerOfStartIfStartedThenStopped() {
-    lifecycle.onStart();
-    lifecycle.onStop();
-    lifecycle.addListener(listener);
-    verify(listener, never()).onStart();
-  }
-
-  @Test
-  public void testNotifiesAddedListenerOnStop() {
-    lifecycle.onStart();
-    lifecycle.addListener(listener);
-    lifecycle.onStop();
-    verify(listener).onStop();
-  }
-
-  @Test
-  public void testNotifiesAddedListenerOfStopIfStopped() {
-    lifecycle.onStop();
-    lifecycle.addListener(listener);
-    verify(listener).onStop();
-  }
-
-  @Test
-  public void testDoesNotNotifyAddedListenerOfStopIfDestroyed() {
-    lifecycle.onStart();
-    lifecycle.onStop();
-    lifecycle.onDestroy();
-    lifecycle.addListener(listener);
-    verify(listener, never()).onStop();
-  }
-
-  @Test
-  public void testDoesNotNotifyListenerOfStopIfStoppedThenStarted() {
-    lifecycle.onStop();
-    lifecycle.onStart();
-    lifecycle.addListener(listener);
-    verify(listener, never()).onStop();
-  }
-
-  @Test
-  public void testNotifiesAddedListenerOnDestroy() {
-    lifecycle.addListener(listener);
-    lifecycle.onDestroy();
-    verify(listener).onDestroy();
-  }
-
-  @Test
-  public void testNotifiesAddedListenerOfDestroyIfDestroyed() {
-    lifecycle.onDestroy();
-    lifecycle.addListener(listener);
-    verify(listener).onDestroy();
-  }
-
-  @Test
-  public void testNotifiesMultipleListeners() {
-    lifecycle.onStart();
-    int toNotify = 20;
-    List<LifecycleListener> listeners = new ArrayList<>();
-    for (int i = 0; i < toNotify; i++) {
-      listeners.add(mock(LifecycleListener.class));
-    }
-    for (LifecycleListener lifecycleListener : listeners) {
-      lifecycle.addListener(lifecycleListener);
-    }
-    lifecycle.onStop();
-    lifecycle.onDestroy();
-    for (LifecycleListener lifecycleListener : listeners) {
-      verify(lifecycleListener).onStart();
-      verify(lifecycleListener).onStop();
-      verify(lifecycleListener).onDestroy();
-    }
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/manager/RequestManagerFragmentTest.java b/library/src/test/java/com/bumptech/glide/manager/RequestManagerFragmentTest.java
deleted file mode 100644
index 6b3207ffc..000000000
--- a/library/src/test/java/com/bumptech/glide/manager/RequestManagerFragmentTest.java
+++ /dev/null
@@ -1,294 +0,0 @@
-package com.bumptech.glide.manager;
-
-import static org.junit.Assert.assertEquals;
-import static org.mockito.Matchers.any;
-import static org.mockito.Matchers.eq;
-import static org.mockito.Mockito.mock;
-import static org.mockito.Mockito.never;
-import static org.mockito.Mockito.verify;
-
-import android.annotation.TargetApi;
-import android.app.Activity;
-import android.os.Build;
-import android.support.v4.app.FragmentActivity;
-import com.bumptech.glide.RequestManager;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.mockito.exceptions.base.MockitoAssertionError;
-import org.robolectric.Robolectric;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.annotation.Config;
-import org.robolectric.util.ActivityController;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-@TargetApi(Build.VERSION_CODES.HONEYCOMB)
-public class RequestManagerFragmentTest {
-  private static final String TAG = "tag";
-  private Harness[] harnesses;
-
-  @Before
-  public void setUp() {
-    harnesses = new Harness[] { new RequestManagerHarness(), new SupportRequestManagerHarness() };
-  }
-
-  @Test
-  public void testSupportCanSetAndGetRequestManager() {
-    runTest(new TestCase() {
-      @Override
-      public void runTest(Harness harness) {
-        RequestManager manager = mock(RequestManager.class);
-        harness.setRequestManager(manager);
-        assertEquals(manager, harness.getManager());
-      }
-    });
-  }
-
-  @Test
-  public void testReturnsLifecycle() {
-    runTest(new TestCase() {
-      @Override
-      public void runTest(Harness harness) {
-        assertEquals(harness.getHarnessLifecycle(), harness.getFragmentLifecycle());
-      }
-    });
-  }
-
-  @Test
-  public void testDoesNotAddNullRequestManagerToLifecycleWhenSet() {
-    runTest(new TestCase() {
-      @Override
-      public void runTest(Harness harness) {
-        harness.setRequestManager(null);
-        verify(harness.getHarnessLifecycle(), never()).addListener(any(LifecycleListener.class));
-      }
-    });
-  }
-
-  @Test
-  public void testCallsLifecycleStart() {
-    runTest(new TestCase() {
-      @Override
-      public void runTest(Harness harness) {
-        harness.getController().start();
-
-        verify(harness.getHarnessLifecycle()).onStart();
-      }
-    });
-  }
-
-  @Test
-  public void testCallsRequestManagerStop() {
-    runTest(new TestCase() {
-      @Override
-      public void runTest(Harness harness) {
-        harness.getController().start().resume().pause().stop();
-
-        verify(harness.getHarnessLifecycle()).onStop();
-      }
-    });
-  }
-
-  @Test
-  public void testCallsRequestManagerDestroy() {
-    runTest(new TestCase() {
-      @Override
-      public void runTest(Harness harness) {
-        harness.getController().start().resume().pause().stop().destroy();
-
-        verify(harness.getHarnessLifecycle()).onDestroy();
-      }
-    });
-  }
-
-  @Test
-  public void testCallsRequestManagerOnLowMemory() {
-    runTest(new TestCase() {
-      @Override
-      public void runTest(Harness harness) {
-        RequestManager requestManager = mock(RequestManager.class);
-        harness.setRequestManager(requestManager);
-        harness.onLowMemory();
-        verify(requestManager).onLowMemory();
-      }
-    });
-  }
-
-  @Test
-  public void testNonSupportFragmentCallsOnTrimMemory() {
-    RequestManagerHarness requestManagerHarness = new RequestManagerHarness();
-    int level = 100;
-    RequestManager requestManager = mock(RequestManager.class);
-    requestManagerHarness.setRequestManager(requestManager);
-    requestManagerHarness.onTrimMemory(level);
-    verify(requestManager).onTrimMemory(eq(level));
-  }
-
-  @Test
-  public void testOnLowMemoryCallOnNullRequestManagerDoesNotCrash() {
-    runTest(new TestCase() {
-      @Override
-      public void runTest(Harness harness) {
-        harness.onLowMemory();
-      }
-    });
-  }
-
-  @Test
-  public void testOnTrimMemoryCallOnNullRequestManagerDoesNotCrash() {
-    runTest(new TestCase() {
-      @Override
-      public void runTest(Harness harness) {
-        harness.onTrimMemory(100 /*level*/);
-      }
-    });
-  }
-
-  private void runTest(TestCase testCase) {
-    for (Harness harness : harnesses) {
-      try {
-        testCase.runTest(harness);
-      } catch (MockitoAssertionError e) {
-        throw new Error("Failed to get expected call on " + harness, e);
-      }
-    }
-  }
-
-  private interface TestCase {
-    public void runTest(Harness harness);
-  }
-
-  private interface Harness {
-    RequestManager getManager();
-
-    void setRequestManager(RequestManager manager);
-
-    ActivityFragmentLifecycle getHarnessLifecycle();
-
-    ActivityFragmentLifecycle getFragmentLifecycle();
-
-    ActivityController<?> getController();
-
-    void onLowMemory();
-
-    void onTrimMemory(int level);
-  }
-
-  private static class RequestManagerHarness implements Harness {
-    private final ActivityController<Activity> controller;
-    private final RequestManagerFragment fragment;
-    private final ActivityFragmentLifecycle lifecycle = mock(ActivityFragmentLifecycle.class);
-
-    public RequestManagerHarness() {
-      fragment = new RequestManagerFragment(lifecycle);
-      controller = Robolectric.buildActivity(Activity.class).create();
-      controller.get()
-          .getFragmentManager()
-          .beginTransaction()
-          .add(fragment, TAG)
-          .commit();
-      controller.get()
-          .getFragmentManager()
-          .executePendingTransactions();
-    }
-
-    @Override
-    public String toString() {
-      return "DefaultHarness";
-    }
-
-    @Override
-    public RequestManager getManager() {
-      return fragment.getRequestManager();
-    }
-
-    @Override
-    public void setRequestManager(RequestManager requestManager) {
-      fragment.setRequestManager(requestManager);
-    }
-
-    @Override
-    public ActivityFragmentLifecycle getHarnessLifecycle() {
-      return lifecycle;
-    }
-
-    @Override
-    public ActivityFragmentLifecycle getFragmentLifecycle() {
-      return fragment.getLifecycle();
-    }
-
-    @Override
-    public ActivityController<?> getController() {
-      return controller;
-    }
-
-    @Override
-    public void onLowMemory() {
-      fragment.onLowMemory();
-    }
-
-    @Override
-    public void onTrimMemory(int level) {
-      fragment.onTrimMemory(level);
-    }
-  }
-
-  private static class SupportRequestManagerHarness implements Harness {
-    private final SupportRequestManagerFragment supportFragment;
-    private final ActivityController<FragmentActivity> supportController;
-    private final ActivityFragmentLifecycle lifecycle = mock(ActivityFragmentLifecycle.class);
-
-    public SupportRequestManagerHarness() {
-      supportFragment = new SupportRequestManagerFragment(lifecycle);
-      supportController = Robolectric.buildActivity(FragmentActivity.class).create();
-
-      supportController.get()
-          .getSupportFragmentManager()
-          .beginTransaction()
-          .add(supportFragment, TAG)
-          .commit();
-      supportController.get().getSupportFragmentManager().executePendingTransactions();
-    }
-
-    @Override
-    public String toString() {
-      return "SupportHarness";
-    }
-
-    @Override
-    public RequestManager getManager() {
-      return supportFragment.getRequestManager();
-    }
-
-    @Override
-    public void setRequestManager(RequestManager manager) {
-      supportFragment.setRequestManager(manager);
-    }
-
-    @Override
-    public ActivityFragmentLifecycle getHarnessLifecycle() {
-      return lifecycle;
-    }
-
-    @Override
-    public ActivityFragmentLifecycle getFragmentLifecycle() {
-      return supportFragment.getLifecycle();
-    }
-
-    @Override
-    public ActivityController<?> getController() {
-      return supportController;
-    }
-
-    @Override
-    public void onLowMemory() {
-      supportFragment.onLowMemory();
-    }
-
-    @Override
-    public void onTrimMemory(int level) {
-      // Do nothing.
-    }
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/manager/RequestManagerRetrieverTest.java b/library/src/test/java/com/bumptech/glide/manager/RequestManagerRetrieverTest.java
deleted file mode 100644
index 40a403cbe..000000000
--- a/library/src/test/java/com/bumptech/glide/manager/RequestManagerRetrieverTest.java
+++ /dev/null
@@ -1,451 +0,0 @@
-package com.bumptech.glide.manager;
-
-import static com.bumptech.glide.tests.BackgroundUtil.testInBackground;
-import static com.google.common.truth.Truth.assertThat;
-import static org.junit.Assert.assertEquals;
-import static org.junit.Assert.assertFalse;
-import static org.junit.Assert.assertNotNull;
-import static org.junit.Assert.assertTrue;
-import static org.mockito.Mockito.mock;
-import static org.mockito.Mockito.when;
-
-import android.annotation.TargetApi;
-import android.app.Activity;
-import android.content.Context;
-import android.content.ContextWrapper;
-import android.os.Build;
-import android.os.Looper;
-import android.support.v4.app.Fragment;
-import android.support.v4.app.FragmentActivity;
-import com.bumptech.glide.RequestManager;
-import com.bumptech.glide.tests.BackgroundUtil;
-import com.bumptech.glide.tests.GlideShadowLooper;
-import com.bumptech.glide.tests.Util;
-import org.junit.After;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.mockito.Mockito;
-import org.robolectric.Robolectric;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.RuntimeEnvironment;
-import org.robolectric.Shadows;
-import org.robolectric.annotation.Config;
-import org.robolectric.util.ActivityController;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18, shadows = GlideShadowLooper.class)
-@TargetApi(Build.VERSION_CODES.HONEYCOMB)
-public class RequestManagerRetrieverTest {
-  private static final String PARENT_TAG = "parent";
-  private RetrieverHarness[] harnesses;
-  private RequestManagerRetriever retriever;
-  private int initialSdkVersion;
-
-  @Before
-  public void setUp() {
-    retriever = new RequestManagerRetriever();
-
-    harnesses =
-        new RetrieverHarness[] { new DefaultRetrieverHarness(), new SupportRetrieverHarness() };
-
-    initialSdkVersion = Build.VERSION.SDK_INT;
-    Util.setSdkVersionInt(18);
-  }
-
-  @After
-  public void tearDown() {
-    Util.setSdkVersionInt(initialSdkVersion);
-
-    Shadows.shadowOf(Looper.getMainLooper()).runToEndOfTasks();
-    assertThat(retriever.pendingRequestManagerFragments).isEmpty();
-    assertThat(retriever.pendingSupportRequestManagerFragments).isEmpty();
-  }
-
-  @Test
-  public void testCreatesNewFragmentIfNoneExists() {
-    for (RetrieverHarness harness : harnesses) {
-      harness.doGet();
-
-      Shadows.shadowOf(Looper.getMainLooper()).runToEndOfTasks();
-      assertTrue(harness.hasFragmentWithTag(RequestManagerRetriever.FRAGMENT_TAG));
-    }
-  }
-
-  @Test
-  public void testReturnsNewManagerIfNoneExists() {
-    for (RetrieverHarness harness : harnesses) {
-      assertNotNull(harness.doGet());
-    }
-  }
-
-  @Test
-  public void testReturnsExistingRequestManagerIfExists() {
-    for (RetrieverHarness harness : harnesses) {
-      RequestManager requestManager = mock(RequestManager.class);
-
-      harness.addFragmentWithTag(RequestManagerRetriever.FRAGMENT_TAG, requestManager);
-
-      assertEquals(requestManager, harness.doGet());
-    }
-  }
-
-  @Test
-  public void testReturnsNewRequestManagerIfFragmentExistsButHasNoRequestManager() {
-    for (RetrieverHarness harness : harnesses) {
-      harness.addFragmentWithTag(RequestManagerRetriever.FRAGMENT_TAG, null);
-
-      assertNotNull(harness.doGet());
-    }
-  }
-
-  @Test
-  public void testSavesNewRequestManagerToFragmentIfCreatesRequestManagerForExistingFragment() {
-    for (RetrieverHarness harness : harnesses) {
-      harness.addFragmentWithTag(RequestManagerRetriever.FRAGMENT_TAG, null);
-      RequestManager first = harness.doGet();
-      RequestManager second = harness.doGet();
-
-      assertEquals(first, second);
-    }
-  }
-
-  @Test
-  public void testHasValidTag() {
-    assertEquals(RequestManagerRetriever.class.getPackage().getName(),
-        RequestManagerRetriever.FRAGMENT_TAG);
-  }
-
-  @Test
-  public void testCanGetRequestManagerFromActivity() {
-    Activity activity = Robolectric.buildActivity(Activity.class).create().start().get();
-    RequestManager manager = retriever.get(activity);
-    assertEquals(manager, retriever.get(activity));
-  }
-
-  @Test
-  public void testSupportCanGetRequestManagerFromActivity() {
-    FragmentActivity fragmentActivity =
-        Robolectric.buildActivity(FragmentActivity.class).create().start().get();
-    RequestManager manager = retriever.get(fragmentActivity);
-    assertEquals(manager, retriever.get(fragmentActivity));
-  }
-
-  @Test
-  public void testCanGetRequestManagerFromFragment() {
-    Activity activity = Robolectric.buildActivity(Activity.class).create().start().resume().get();
-    android.app.Fragment fragment = new android.app.Fragment();
-    activity.getFragmentManager().beginTransaction().add(fragment, PARENT_TAG).commit();
-    activity.getFragmentManager().executePendingTransactions();
-
-    RequestManager manager = retriever.get(fragment);
-    assertEquals(manager, retriever.get(fragment));
-  }
-
-  @Test
-  public void testSupportCanGetRequestManagerFromFragment() {
-    FragmentActivity activity =
-        Robolectric.buildActivity(FragmentActivity.class).create().start().resume().get();
-    Fragment fragment = new Fragment();
-    activity.getSupportFragmentManager().beginTransaction().add(fragment, PARENT_TAG).commit();
-    activity.getSupportFragmentManager().executePendingTransactions();
-
-    RequestManager manager = retriever.get(fragment);
-    assertEquals(manager, retriever.get(fragment));
-  }
-
-  @Test
-  public void testCanGetRequestManagerFromDetachedFragment() {
-    helpTestCanGetRequestManagerFromDetachedFragment();
-  }
-
-  @Test
-  public void testCanGetRequestManagerFromDetachedFragment_PreJellyBeanMr1() {
-    Util.setSdkVersionInt(Build.VERSION_CODES.JELLY_BEAN);
-    helpTestCanGetRequestManagerFromDetachedFragment();
-  }
-
-  @TargetApi(Build.VERSION_CODES.HONEYCOMB_MR2)
-  private void helpTestCanGetRequestManagerFromDetachedFragment() {
-    Activity activity = Robolectric.buildActivity(Activity.class).create().start().resume().get();
-    android.app.Fragment fragment = new android.app.Fragment();
-    activity.getFragmentManager().beginTransaction().add(fragment, PARENT_TAG).detach(fragment)
-        .commit();
-    activity.getFragmentManager().executePendingTransactions();
-
-    assertTrue(fragment.isDetached());
-    retriever.get(fragment);
-  }
-
-  @Test
-  public void testSupportCanGetRequestManagerFromDetachedFragment() {
-    helpTestSupportCanGetRequestManagerFromDetachedFragment();
-  }
-
-  @Test
-  public void testSupportCanGetRequestManagerFromDetachedFragment_PreJellyBeanMr1() {
-    Util.setSdkVersionInt(Build.VERSION_CODES.JELLY_BEAN);
-    helpTestSupportCanGetRequestManagerFromDetachedFragment();
-  }
-
-  private void helpTestSupportCanGetRequestManagerFromDetachedFragment() {
-    FragmentActivity activity =
-        Robolectric.buildActivity(FragmentActivity.class).create().start().resume().get();
-    Fragment fragment = new Fragment();
-    activity.getSupportFragmentManager().beginTransaction().add(fragment, PARENT_TAG)
-        .detach(fragment).commit();
-    activity.getSupportFragmentManager().executePendingTransactions();
-
-    assertTrue(fragment.isDetached());
-    retriever.get(fragment);
-  }
-
-  @Test(expected = IllegalArgumentException.class)
-  public void testThrowsIfFragmentNotAttached() {
-    android.app.Fragment fragment = new android.app.Fragment();
-    retriever.get(fragment);
-  }
-
-  @Test(expected = IllegalArgumentException.class)
-  public void testThrowsIfSupportFragmentNotAttached() {
-    Fragment fragment = new Fragment();
-    retriever.get(fragment);
-  }
-
-  @Test(expected = IllegalArgumentException.class)
-  public void testThrowsIfActivityDestroyed() {
-    RetrieverHarness harness = new DefaultRetrieverHarness();
-    harness.getController().pause().stop().destroy();
-    harness.doGet();
-  }
-
-  @Test(expected = IllegalArgumentException.class)
-  public void testThrowsIfFragmentActivityDestroyed() {
-    RetrieverHarness harness = new SupportRetrieverHarness();
-    harness.getController().pause().stop().destroy();
-    harness.doGet();
-  }
-
-  @Test(expected = IllegalArgumentException.class)
-  public void testThrowsIfGivenNullContext() {
-    retriever.get((Context) null);
-  }
-
-  @Test
-  public void testChecksIfContextIsFragmentActivity() {
-    RetrieverHarness harness = new SupportRetrieverHarness();
-    RequestManager requestManager = harness.doGet();
-
-    assertEquals(requestManager, retriever.get((Context) harness.getController().get()));
-  }
-
-  @Test
-  public void testChecksIfContextIsActivity() {
-    RetrieverHarness harness = new DefaultRetrieverHarness();
-    RequestManager requestManager = harness.doGet();
-
-    assertEquals(requestManager, retriever.get((Context) harness.getController().get()));
-  }
-
-  @Test
-  public void testHandlesContextWrappersForActivities() {
-    RetrieverHarness harness = new DefaultRetrieverHarness();
-    RequestManager requestManager = harness.doGet();
-    ContextWrapper contextWrapper = new ContextWrapper(harness.getController().get());
-
-    assertEquals(requestManager, retriever.get(contextWrapper));
-  }
-
-  @Test
-  public void testHandlesContextWrappersForApplication() {
-    ContextWrapper contextWrapper = new ContextWrapper(RuntimeEnvironment.application);
-    RequestManager requestManager = retriever.get(RuntimeEnvironment.application);
-
-    assertEquals(requestManager, retriever.get(contextWrapper));
-  }
-
-  @Test
-  public void testReturnsNonNullManagerIfGivenApplicationContext() {
-    assertNotNull(retriever.get(RuntimeEnvironment.application));
-  }
-
-  @Test
-  public void testApplicationRequestManagerIsNotPausedWhenRetrieved() {
-    RequestManager manager = retriever.get(RuntimeEnvironment.application);
-    assertFalse(manager.isPaused());
-  }
-
-  @Test
-  public void testApplicationRequestManagerIsNotReResumedAfterFirstRetrieval() {
-    RequestManager manager = retriever.get(RuntimeEnvironment.application);
-    manager.pauseRequests();
-    manager = retriever.get(RuntimeEnvironment.application);
-    assertTrue(manager.isPaused());
-  }
-
-  @Test
-  public void testDoesNotThrowWhenGetWithContextCalledFromBackgroundThread()
-      throws InterruptedException {
-    testInBackground(new BackgroundUtil.BackgroundTester() {
-      @Override
-      public void runTest() throws Exception {
-        retriever.get(RuntimeEnvironment.application);
-      }
-    });
-  }
-
-  // See Issue #117: https://github.com/bumptech/glide/issues/117.
-  @Test
-  public void testCanCallGetInOnAttachToWindowInFragmentInViewPager() {
-    // Robolectric by default runs messages posted to the main looper synchronously, the
-    // framework does not. We post
-    // to the main thread here to work around an issue caused by a recursive method call so we
-    // need (and reasonably
-    // expect) our message to not run immediately
-    Shadows.shadowOf(Looper.getMainLooper()).pause();
-    Robolectric.buildActivity(Issue117Activity.class).create().start().resume().visible();
-  }
-
-  @Test
-  public void testDoesNotThrowIfAskedToGetManagerForActivityPreHoneycomb() {
-    Util.setSdkVersionInt(Build.VERSION_CODES.GINGERBREAD_MR1);
-    Activity activity = mock(Activity.class);
-    when(activity.getApplicationContext()).thenReturn(RuntimeEnvironment.application);
-    when(activity.getFragmentManager()).thenThrow(new NoSuchMethodError());
-
-    assertNotNull(retriever.get(activity));
-  }
-
-  @Test
-  @TargetApi(Build.VERSION_CODES.JELLY_BEAN_MR1)
-  public void testDoesNotThrowIfAskedToGetManagerForActivityPreJellYBeanMr1() {
-    Util.setSdkVersionInt(Build.VERSION_CODES.JELLY_BEAN);
-    Activity activity = Robolectric.buildActivity(Activity.class).create().start().resume().get();
-    Activity spyActivity = Mockito.spy(activity);
-    when(spyActivity.isDestroyed()).thenThrow(new NoSuchMethodError());
-
-    assertNotNull(retriever.get(spyActivity));
-  }
-
-  @Test
-  @TargetApi(Build.VERSION_CODES.HONEYCOMB_MR2)
-  public void testDoesNotThrowIfAskedToGetManagerForFragmentPreHoneyCombMr2() {
-    Util.setSdkVersionInt(Build.VERSION_CODES.HONEYCOMB_MR1);
-    Activity activity = Robolectric.buildActivity(Activity.class).create().start().resume().get();
-    android.app.Fragment fragment = new android.app.Fragment();
-
-    activity.getFragmentManager().beginTransaction().add(fragment, "test").commit();
-    android.app.Fragment spyFragment = Mockito.spy(fragment);
-    when(spyFragment.isDetached()).thenThrow(new NoSuchMethodError());
-
-    assertNotNull(retriever.get(spyFragment));
-  }
-
-  @Test
-  @TargetApi(Build.VERSION_CODES.JELLY_BEAN_MR1)
-  public void testDoesNotThrowIfAskedToGetManagerForFragmentPreJellyBeanMr1() {
-    Util.setSdkVersionInt(Build.VERSION_CODES.JELLY_BEAN);
-    Activity activity = Robolectric.buildActivity(Activity.class).create().start().resume().get();
-    android.app.Fragment fragment = new android.app.Fragment();
-
-    activity.getFragmentManager().beginTransaction().add(fragment, "test").commit();
-    android.app.Fragment spyFragment = Mockito.spy(fragment);
-    when(spyFragment.getChildFragmentManager()).thenThrow(new NoSuchMethodError());
-
-    assertNotNull(retriever.get(spyFragment));
-  }
-
-  private interface RetrieverHarness {
-    ActivityController<?> getController();
-
-    RequestManager doGet();
-
-    boolean hasFragmentWithTag(String tag);
-
-    void addFragmentWithTag(String tag, RequestManager manager);
-  }
-
-  public class DefaultRetrieverHarness implements RetrieverHarness {
-    private final ActivityController<Activity> controller =
-        Robolectric.buildActivity(Activity.class);
-    private final android.app.Fragment parent;
-
-    public DefaultRetrieverHarness() {
-      this.parent = new android.app.Fragment();
-
-      controller.create();
-      controller.get().getFragmentManager().beginTransaction().add(parent, PARENT_TAG)
-          .commitAllowingStateLoss();
-      controller.get().getFragmentManager().executePendingTransactions();
-      controller.start().resume();
-    }
-
-    @Override
-    public ActivityController<?> getController() {
-      return controller;
-    }
-
-    @Override
-    public RequestManager doGet() {
-      return retriever.get(controller.get());
-    }
-
-    @Override
-    public boolean hasFragmentWithTag(String tag) {
-      return null != controller
-          .get()
-          .getFragmentManager()
-          .findFragmentByTag(RequestManagerRetriever.FRAGMENT_TAG);
-    }
-
-    @Override
-    public void addFragmentWithTag(String tag, RequestManager requestManager) {
-      RequestManagerFragment fragment = new RequestManagerFragment();
-      fragment.setRequestManager(requestManager);
-      controller.get().getFragmentManager().beginTransaction()
-          .add(fragment, RequestManagerRetriever.FRAGMENT_TAG).commitAllowingStateLoss();
-      controller.get().getFragmentManager().executePendingTransactions();
-    }
-  }
-
-  public class SupportRetrieverHarness implements RetrieverHarness {
-    private final ActivityController<FragmentActivity> controller =
-        Robolectric.buildActivity(FragmentActivity.class);
-    private final Fragment parent;
-
-    public SupportRetrieverHarness() {
-      this.parent = new Fragment();
-
-      controller.create();
-      controller.get().getSupportFragmentManager().beginTransaction().add(parent, PARENT_TAG)
-          .commitAllowingStateLoss();
-      controller.get().getSupportFragmentManager().executePendingTransactions();
-      controller.start().resume();
-    }
-
-    @Override
-    public ActivityController<?> getController() {
-      return controller;
-    }
-
-    @Override
-    public RequestManager doGet() {
-      return retriever.get(controller.get());
-    }
-
-    @Override
-    public boolean hasFragmentWithTag(String tag) {
-      return controller.get().getSupportFragmentManager()
-          .findFragmentByTag(RequestManagerRetriever.FRAGMENT_TAG) != null;
-    }
-
-    @Override
-    public void addFragmentWithTag(String tag, RequestManager manager) {
-      SupportRequestManagerFragment fragment = new SupportRequestManagerFragment();
-      fragment.setRequestManager(manager);
-      controller.get().getSupportFragmentManager().beginTransaction()
-          .add(fragment, RequestManagerRetriever.FRAGMENT_TAG).commitAllowingStateLoss();
-      controller.get().getSupportFragmentManager().executePendingTransactions();
-    }
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/manager/RequestTrackerTest.java b/library/src/test/java/com/bumptech/glide/manager/RequestTrackerTest.java
deleted file mode 100644
index 889cd2ba2..000000000
--- a/library/src/test/java/com/bumptech/glide/manager/RequestTrackerTest.java
+++ /dev/null
@@ -1,357 +0,0 @@
-package com.bumptech.glide.manager;
-
-import static com.google.common.truth.Truth.assertThat;
-import static org.junit.Assert.assertFalse;
-import static org.junit.Assert.assertTrue;
-import static org.mockito.Mockito.doAnswer;
-import static org.mockito.Mockito.mock;
-import static org.mockito.Mockito.never;
-import static org.mockito.Mockito.times;
-import static org.mockito.Mockito.verify;
-import static org.mockito.Mockito.when;
-
-import com.bumptech.glide.request.Request;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.junit.runners.JUnit4;
-import org.mockito.invocation.InvocationOnMock;
-import org.mockito.stubbing.Answer;
-
-@RunWith(JUnit4.class)
-public class RequestTrackerTest {
-  private RequestTracker tracker;
-
-  @Before
-  public void setUp() {
-    tracker = new RequestTracker();
-  }
-
-  @Test
-  public void testClearsAddedRequestsOnDestroy() {
-    Request request = mock(Request.class);
-    tracker.addRequest(request);
-
-    tracker.clearRequests();
-
-    verify(request).clear();
-    verify(request).recycle();
-  }
-
-  @Test
-  public void testClearRemoveAndRecycle_withNullRequest_doesNothingAndReturnsFalse() {
-    assertThat(tracker.clearRemoveAndRecycle(null)).isFalse();
-  }
-
-  @Test
-  public void testClearRemoveAndRecycle_withUnTrackedRequest_doesNothingAndReturnsFalse() {
-    Request request = mock(Request.class);
-
-    assertThat(tracker.clearRemoveAndRecycle(request)).isFalse();
-
-    verify(request, never()).clear();
-    verify(request, never()).recycle();
-  }
-
-  @Test
-  public void testClearRemoveAndRecycle_withTrackedRequest_clearsRecyclesAndReturnsTrue() {
-    Request request = mock(Request.class);
-    tracker.addRequest(request);
-
-    assertThat(tracker.clearRemoveAndRecycle(request)).isTrue();
-    verify(request).clear();
-    verify(request).recycle();
-  }
-
-  @Test
-  public void testClearRemoveAndRecycle_withAlreadyRemovedRequest_doesNothingAndReturnsFalse() {
-    Request request = mock(Request.class);
-    tracker.addRequest(request);
-    tracker.clearRemoveAndRecycle(request);
-    assertThat(tracker.clearRemoveAndRecycle(request)).isFalse();
-
-    verify(request, times(1)).clear();
-    verify(request, times(1)).recycle();
-  }
-
-  @Test
-  public void testCanAddAndRemoveRequest() {
-    Request request = mock(Request.class);
-    tracker.addRequest(request);
-    tracker.clearRemoveAndRecycle(request);
-
-    tracker.clearRequests();
-
-    verify(request, times(1)).clear();
-  }
-
-  @Test
-  public void testCanAddMultipleRequests() {
-    Request first = mock(Request.class);
-    Request second = mock(Request.class);
-    tracker.addRequest(first);
-    tracker.addRequest(second);
-
-    tracker.clearRequests();
-
-    verify(first).clear();
-    verify(second).clear();
-  }
-
-  @Test
-  public void testPausesInProgressRequestsWhenPaused() {
-    Request request = mock(Request.class);
-    when(request.isRunning()).thenReturn(true);
-    tracker.addRequest(request);
-
-    tracker.pauseRequests();
-
-    verify(request).pause();
-  }
-
-  @Test
-  public void testDoesNotClearCompleteRequestsWhenPaused() {
-    Request request = mock(Request.class);
-    tracker.addRequest(request);
-
-    when(request.isComplete()).thenReturn(true);
-    tracker.pauseRequests();
-
-    verify(request, never()).clear();
-  }
-
-  @Test
-  public void testStartsRequestOnRun() {
-    Request request = mock(Request.class);
-    tracker.runRequest(request);
-
-    verify(request).begin();
-  }
-
-  @Test
-  public void testDoesNotStartRequestOnRunIfPaused() {
-    Request request = mock(Request.class);
-    tracker.pauseRequests();
-    tracker.runRequest(request);
-
-    verify(request, never()).begin();
-  }
-
-  @Test
-  public void testStartsRequestAddedWhenPausedWhenResumed() {
-    Request request = mock(Request.class);
-    tracker.pauseRequests();
-    tracker.runRequest(request);
-    tracker.resumeRequests();
-
-    verify(request).begin();
-  }
-
-  @Test
-  public void testDoesNotClearFailedRequestsWhenPaused() {
-    Request request = mock(Request.class);
-    when(request.isFailed()).thenReturn(true);
-    tracker.addRequest(request);
-
-    tracker.pauseRequests();
-
-    verify(request, never()).clear();
-  }
-
-  @Test
-  public void testRestartsStoppedRequestWhenResumed() {
-    Request request = mock(Request.class);
-    tracker.addRequest(request);
-
-    tracker.resumeRequests();
-
-    verify(request).begin();
-  }
-
-  @Test
-  public void testDoesNotRestartCompletedRequestsWhenResumed() {
-    Request request = mock(Request.class);
-    when(request.isComplete()).thenReturn(true);
-    tracker.addRequest(request);
-
-    tracker.resumeRequests();
-
-    verify(request, never()).begin();
-  }
-
-  @Test
-  public void testDoesRestartFailedRequestsWhenResumed() {
-    Request request = mock(Request.class);
-    when(request.isFailed()).thenReturn(true);
-    tracker.addRequest(request);
-
-    tracker.resumeRequests();
-
-    verify(request).begin();
-  }
-
-  @Test
-  public void testDoesNotStartStartedRequestsWhenResumed() {
-    Request request = mock(Request.class);
-    when(request.isRunning()).thenReturn(true);
-    tracker.addRequest(request);
-
-    tracker.resumeRequests();
-
-    verify(request, never()).begin();
-  }
-
-  @Test
-  public void testAvoidsConcurrentModificationWhenResuming() {
-    Request first = mock(Request.class);
-    Request second = mock(Request.class);
-
-    doAnswer(new ClearAndRemoveRequest(second)).when(first).begin();
-
-    tracker.addRequest(mock(Request.class));
-    tracker.addRequest(first);
-    tracker.addRequest(second);
-
-    tracker.resumeRequests();
-  }
-
-  @Test
-  public void testAvoidsConcurrentModificationWhenPausing() {
-    Request first = mock(Request.class);
-    Request second = mock(Request.class);
-
-    when(first.isRunning()).thenReturn(true);
-    doAnswer(new ClearAndRemoveRequest(second)).when(first).pause();
-
-    tracker.addRequest(mock(Request.class));
-    tracker.addRequest(first);
-    tracker.addRequest(second);
-
-    tracker.pauseRequests();
-  }
-
-  @Test
-  public void testAvoidsConcurrentModificationWhenClearing() {
-    Request first = mock(Request.class);
-    Request second = mock(Request.class);
-
-    doAnswer(new ClearAndRemoveRequest(second)).when(first).clear();
-
-    tracker.addRequest(mock(Request.class));
-    tracker.addRequest(first);
-    tracker.addRequest(second);
-
-    tracker.clearRequests();
-  }
-
-  @Test
-  public void testAvoidsConcurrentModificationWhenRestarting() {
-    Request first = mock(Request.class);
-    Request second = mock(Request.class);
-
-    doAnswer(new ClearAndRemoveRequest(second)).when(first).pause();
-
-    tracker.addRequest(mock(Request.class));
-    tracker.addRequest(first);
-    tracker.addRequest(second);
-
-    tracker.restartRequests();
-  }
-
-  @Test
-  public void testRestartsFailedRequestRestart() {
-    Request request = mock(Request.class);
-    when(request.isFailed()).thenReturn(true);
-    tracker.addRequest(request);
-
-    tracker.restartRequests();
-
-    verify(request).begin();
-  }
-
-  @Test
-  public void testPausesAndRestartsNotYetFinishedRequestsOnRestart() {
-    Request request = mock(Request.class);
-    when(request.isComplete()).thenReturn(false);
-    tracker.addRequest(request);
-
-    tracker.restartRequests();
-
-    verify(request).pause();
-    verify(request).begin();
-  }
-
-  @Test
-  public void testDoesNotBeginFailedRequestOnRestartIfPaused() {
-    Request request = mock(Request.class);
-    when(request.isFailed()).thenReturn(true);
-    tracker.pauseRequests();
-    tracker.addRequest(request);
-
-    tracker.restartRequests();
-
-    verify(request, never()).begin();
-  }
-
-  @Test
-  public void testPausesFailedRequestOnRestartIfPaused() {
-    Request request = mock(Request.class);
-    when(request.isFailed()).thenReturn(true);
-    tracker.pauseRequests();
-    tracker.addRequest(request);
-
-    tracker.restartRequests();
-    verify(request).pause();
-  }
-
-  @Test
-  public void testDoesNotBeginIncompleteRequestsOnRestartIfPaused() {
-    Request request = mock(Request.class);
-    when(request.isFailed()).thenReturn(false);
-    when(request.isComplete()).thenReturn(false);
-    tracker.pauseRequests();
-    tracker.addRequest(request);
-    tracker.restartRequests();
-
-    verify(request, never()).begin();
-  }
-
-  @Test
-  public void testPausesIncompleteRequestsOnRestartIfPaused() {
-    Request request = mock(Request.class);
-    when(request.isFailed()).thenReturn(false);
-    when(request.isComplete()).thenReturn(false);
-    tracker.pauseRequests();
-    tracker.addRequest(request);
-    tracker.restartRequests();
-
-    verify(request).pause();
-  }
-
-  @Test
-  public void testReturnsTrueFromIsPausedWhenPaused() {
-    tracker.pauseRequests();
-    assertTrue(tracker.isPaused());
-  }
-
-  @Test
-  public void testReturnsFalseFromIsPausedWhenResumed() {
-    tracker.resumeRequests();
-    assertFalse(tracker.isPaused());
-  }
-
-  private class ClearAndRemoveRequest implements Answer<Void> {
-
-    private Request toRemove;
-
-    public ClearAndRemoveRequest(Request toRemove) {
-      this.toRemove = toRemove;
-    }
-
-    @Override
-    public Void answer(InvocationOnMock invocationOnMock) throws Throwable {
-      tracker.clearRemoveAndRecycle(toRemove);
-      return null;
-    }
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/module/ManifestParserTest.java b/library/src/test/java/com/bumptech/glide/module/ManifestParserTest.java
deleted file mode 100644
index 3f6eed8d0..000000000
--- a/library/src/test/java/com/bumptech/glide/module/ManifestParserTest.java
+++ /dev/null
@@ -1,155 +0,0 @@
-package com.bumptech.glide.module;
-
-import static com.google.common.truth.Truth.assertThat;
-import static org.mockito.Matchers.eq;
-import static org.mockito.Mockito.mock;
-import static org.mockito.Mockito.when;
-
-import android.content.Context;
-import android.content.pm.ApplicationInfo;
-import android.content.pm.PackageManager;
-import android.os.Bundle;
-import com.bumptech.glide.GlideBuilder;
-import com.bumptech.glide.Registry;
-import java.util.List;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.mockito.Mock;
-import org.mockito.MockitoAnnotations;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class ManifestParserTest {
-  private static final String MODULE_VALUE = "GlideModule";
-
-  @Mock
-  Context context;
-  private ManifestParser parser;
-  private ApplicationInfo applicationInfo;
-
-  @Before
-  public void setUp() throws PackageManager.NameNotFoundException {
-    MockitoAnnotations.initMocks(this);
-    applicationInfo = new ApplicationInfo();
-    applicationInfo.metaData = new Bundle();
-
-    String packageName = "com.bumptech.test";
-    when(context.getPackageName()).thenReturn(packageName);
-
-    PackageManager pm = mock(PackageManager.class);
-    when(pm.getApplicationInfo(eq(packageName), eq(PackageManager.GET_META_DATA)))
-        .thenReturn(applicationInfo);
-    when(context.getPackageManager()).thenReturn(pm);
-
-    parser = new ManifestParser(context);
-  }
-
-  @Test
-  public void testParse_returnsEmptyListIfNoModulesListed() {
-    assertThat(parser.parse()).isEmpty();
-  }
-
-  @Test
-  public void testParse_withSingleValidModuleName_returnsListContainingModule() {
-    addModuleToManifest(TestModule1.class);
-
-    List<GlideModule> modules = parser.parse();
-    assertThat(modules).hasSize(1);
-    assertThat(modules.get(0)).isInstanceOf(TestModule1.class);
-  }
-
-  @Test
-  public void testParse_withMultipleValidModuleNames_returnsListContainingModules() {
-    addModuleToManifest(TestModule1.class);
-    addModuleToManifest(TestModule2.class);
-
-    List<GlideModule> modules = parser.parse();
-    assertThat(modules).hasSize(2);
-
-    assertThat(modules).contains(new TestModule1());
-    assertThat(modules).contains(new TestModule2());
-  }
-
-  @Test
-  public void testParse_withValidModuleName_ignoresMetadataWithoutGlideModuleValue() {
-    applicationInfo.metaData.putString(TestModule1.class.getName(), MODULE_VALUE + "test");
-
-    assertThat(parser.parse()).isEmpty();
-  }
-
-  @Test(expected = RuntimeException.class)
-  public void testThrows_whenModuleNameNotFound() {
-    addToManifest("fakeClassName");
-
-    parser.parse();
-  }
-
-  @Test(expected = RuntimeException.class)
-  public void testThrows_whenClassInManifestIsNotAModule() {
-    addModuleToManifest(InvalidClass.class);
-
-    parser.parse();
-  }
-
-  @Test(expected = RuntimeException.class)
-  public void testThrows_whenPackageNameNotFound() {
-    when(context.getPackageName()).thenReturn("fakePackageName");
-
-    parser.parse();
-  }
-
-  private void addModuleToManifest(Class<?> moduleClass) {
-    addToManifest(moduleClass.getName());
-  }
-
-  private void addToManifest(String key) {
-    applicationInfo.metaData.putString(key, MODULE_VALUE);
-  }
-
-  public static class InvalidClass {
-  }
-
-  public static class TestModule1 implements GlideModule {
-    @Override
-    public void applyOptions(Context context, GlideBuilder builder) {
-    }
-
-    @Override
-    public void registerComponents(Context context, Registry registry) {
-    }
-
-    @Override
-    public boolean equals(Object o) {
-      return o instanceof TestModule1;
-    }
-
-    @Override
-    public int hashCode() {
-      return super.hashCode();
-    }
-  }
-
-  public static class TestModule2 implements GlideModule {
-
-    @Override
-    public void applyOptions(Context context, GlideBuilder builder) {
-    }
-
-    @Override
-    public void registerComponents(Context context, Registry registry) {
-    }
-
-    @Override
-    public boolean equals(Object o) {
-      return o instanceof TestModule2;
-    }
-
-    @Override
-    public int hashCode() {
-      return super.hashCode();
-    }
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/request/BaseRequestOptionsTest.java b/library/src/test/java/com/bumptech/glide/request/BaseRequestOptionsTest.java
deleted file mode 100644
index 368dba22f..000000000
--- a/library/src/test/java/com/bumptech/glide/request/BaseRequestOptionsTest.java
+++ /dev/null
@@ -1,140 +0,0 @@
-package com.bumptech.glide.request;
-
-import static com.google.common.truth.Truth.assertThat;
-
-import android.graphics.Bitmap;
-import com.bumptech.glide.load.Transformation;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.mockito.Mock;
-import org.mockito.MockitoAnnotations;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.RuntimeEnvironment;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE)
-public class BaseRequestOptionsTest {
-
-  private TestOptions options;
-  @Mock private Transformation<Bitmap> transformation;
-
-  @Before
-  public void setUp() {
-    MockitoAnnotations.initMocks(this);
-    options = new TestOptions();
-  }
-
-  @Test
-  public void testIsTransformationRequired_byDefault_isFalse() {
-    assertThat(options.isTransformationRequired()).isFalse();
-  }
-
-  @Test
-  public void testIsTransformationSet_byDefault_isFalse() {
-    assertThat(options.isTransformationSet()).isFalse();
-  }
-
-  @Test
-  public void testIsTransformationAllowed_byDefault_isTrue() {
-    assertThat(options.isTransformationAllowed()).isTrue();
-  }
-
-  @Test
-  public void testIsTransformationSet_afterApplyingOptionsWithTransform_isTrue() {
-    TestOptions other = new TestOptions();
-    other.transform(Bitmap.class, transformation);
-    options.apply(other);
-    assertThat(options.isTransformationSet()).isTrue();
-  }
-
-  @Test
-  public void testIsTransformationSet_afterDontTransform_isFalse() {
-    options.dontTransform();
-    assertThat(options.isTransformationSet()).isFalse();
-  }
-
-  @Test
-  public void testIsTransformationAllowed_afterDontTransform_isFalse() {
-    options.dontTransform();
-    assertThat(options.isTransformationAllowed()).isFalse();
-  }
-
-  @Test
-  public void testIsTransformationRequired_afterDontTransform_isFalse() {
-    options.dontTransform();
-    assertThat(options.isTransformationRequired()).isFalse();
-  }
-
-  @Test
-  public void testApplyingDontTransform_overridesTransformations() {
-    options.transform(RuntimeEnvironment.application, transformation);
-    options.dontTransform();
-    assertThat(options.isTransformationSet()).isFalse();
-    assertThat(options.isTransformationRequired()).isFalse();
-    assertThat(options.getTransformations()).isEmpty();
-  }
-
-  @Test
-  public void testApplyingTransformation_overridesDontTransform() {
-    options.dontTransform();
-    options.transform(RuntimeEnvironment.application, transformation);
-
-    assertThat(options.isTransformationAllowed()).isTrue();
-    assertThat(options.isTransformationRequired()).isTrue();
-    assertThat(options.getTransformations()).containsEntry(Bitmap.class, transformation);
-  }
-
-  @Test
-  public void testApplyingOptions_withDontTransform_overridesTransformations() {
-    options.transform(RuntimeEnvironment.application, transformation);
-    TestOptions other = new TestOptions();
-    other.dontTransform();
-
-    options.apply(other);
-
-    assertThat(options.isTransformationAllowed()).isFalse();
-    assertThat(options.isTransformationSet()).isFalse();
-    assertThat(options.isTransformationRequired()).isFalse();
-    assertThat(options.getTransformations()).isEmpty();
-  }
-
-  @Test
-  public void testApplyingOptions_withTransformation_overridesDontTransform() {
-    options.dontTransform();
-    TestOptions other = new TestOptions();
-    other.transform(RuntimeEnvironment.application, transformation);
-
-    options.apply(other);
-
-    assertThat(options.isTransformationAllowed()).isTrue();
-    assertThat(options.isTransformationSet()).isTrue();
-    assertThat(options.isTransformationRequired()).isTrue();
-    assertThat(options.getTransformations()).containsEntry(Bitmap.class, transformation);
-  }
-
-  @Test
-  public void testApplyingDefaultOptions_withDontTransform_retainsDontTransform() {
-    options.dontTransform();
-    options.apply(new TestOptions());
-
-    assertThat(options.isTransformationAllowed()).isFalse();
-    assertThat(options.isTransformationRequired()).isFalse();
-    assertThat(options.getTransformations()).isEmpty();
-  }
-
-  @Test
-  public void testApplyingDefaultOptions_withTransform_retrainsTransform() {
-    options.transform(RuntimeEnvironment.application, transformation);
-    options.apply(new TestOptions());
-
-    assertThat(options.isTransformationAllowed()).isTrue();
-    assertThat(options.isTransformationRequired()).isTrue();
-    assertThat(options.getTransformations()).containsEntry(Bitmap.class, transformation);
-  }
-
-  private static class TestOptions extends BaseRequestOptions<TestOptions> {
-    // Empty.
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/request/RequestFutureTargetTest.java b/library/src/test/java/com/bumptech/glide/request/RequestFutureTargetTest.java
deleted file mode 100644
index 792a81c06..000000000
--- a/library/src/test/java/com/bumptech/glide/request/RequestFutureTargetTest.java
+++ /dev/null
@@ -1,359 +0,0 @@
-package com.bumptech.glide.request;
-
-import static org.junit.Assert.assertEquals;
-import static org.junit.Assert.assertFalse;
-import static org.junit.Assert.assertTrue;
-import static org.mockito.Matchers.any;
-import static org.mockito.Matchers.anyLong;
-import static org.mockito.Matchers.eq;
-import static org.mockito.Mockito.doAnswer;
-import static org.mockito.Mockito.mock;
-import static org.mockito.Mockito.never;
-import static org.mockito.Mockito.times;
-import static org.mockito.Mockito.verify;
-
-import android.os.Handler;
-import com.bumptech.glide.request.target.SizeReadyCallback;
-import java.util.concurrent.CancellationException;
-import java.util.concurrent.ExecutionException;
-import java.util.concurrent.TimeUnit;
-import java.util.concurrent.TimeoutException;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.mockito.invocation.InvocationOnMock;
-import org.mockito.stubbing.Answer;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class RequestFutureTargetTest {
-  private int width;
-  private int height;
-  private RequestFutureTarget<Object> future;
-  private Request request;
-  private Handler handler;
-  private RequestFutureTarget.Waiter waiter;
-
-  @Before
-  public void setUp() {
-    width = 100;
-    height = 100;
-    handler = mock(Handler.class);
-    waiter = mock(RequestFutureTarget.Waiter.class);
-    future = new RequestFutureTarget<>(handler, width, height, false, waiter);
-    request = mock(Request.class);
-    future.setRequest(request);
-  }
-
-  @Test
-  public void testCallsSizeReadyCallbackOnGetSize() {
-    SizeReadyCallback cb = mock(SizeReadyCallback.class);
-    future.getSize(cb);
-    verify(cb).onSizeReady(eq(width), eq(height));
-  }
-
-  @Test
-  public void testReturnsFalseForDoneBeforeDone() {
-    assertFalse(future.isDone());
-  }
-
-  @Test
-  public void testReturnsTrueFromIsDoneIfDone() {
-    future.onResourceReady(new Object(), null);
-    assertTrue(future.isDone());
-  }
-
-  @Test
-  public void testReturnsFalseForIsCancelledBeforeCancelled() {
-    assertFalse(future.isCancelled());
-  }
-
-  @Test
-  public void testReturnsTrueFromCancelIfNotYetDone() {
-    assertTrue(future.cancel(false));
-  }
-
-  @Test
-  public void testClearsRequestOnMainThreadIfNotYetDoneOnCancel() {
-    future.cancel(true);
-
-    verify(handler).post(eq(future));
-  }
-
-  @Test
-  public void testClearsOnMainThreadWhenClearCalled() {
-    future.cancel(false);
-
-    verify(handler).post(eq(future));
-  }
-
-  @Test
-  public void testDoesNotRepeatedlyClearRequestOnMainThreadIfCancelledRepeatedly() {
-    future.cancel(true);
-    future.cancel(true);
-
-    verify(handler, times(1)).post(any(Runnable.class));
-  }
-
-  @Test
-  public void testClearsRequestOnRun() {
-    future.run();
-
-    verify(request).clear();
-  }
-
-  @Test
-  public void testDoesNotClearRequestIfCancelledAfterDone() {
-    future.onResourceReady(new Object(), null);
-    future.cancel(true);
-
-    verify(request, never()).clear();
-  }
-
-  @Test
-  public void testReturnsTrueFromDoneIfCancelled() {
-    future.cancel(true);
-    assertTrue(future.isDone());
-  }
-
-  @Test
-  public void testReturnsFalseFromIsCancelledIfCancelledAfterDone() {
-    future.onResourceReady(new Object(), null);
-    future.cancel(true);
-
-    assertFalse(future.isCancelled());
-  }
-
-  @Test
-  public void testReturnsTrueFromCancelIfCancelled() {
-    future.cancel(true);
-    assertTrue(future.isCancelled());
-  }
-
-  @Test
-  public void testReturnsFalseFromCancelIfDone() {
-    future.onResourceReady(new Object(), null);
-    assertFalse(future.cancel(true));
-  }
-
-  @Test
-  public void testReturnsResourceOnGetIfAlreadyDone()
-      throws ExecutionException, InterruptedException {
-    Object expected = new Object();
-    future.onResourceReady(expected, null);
-
-    assertEquals(expected, future.get());
-  }
-
-  @Test
-  public void testReturnsResourceOnGetWithTimeoutIfAlreadyDone()
-      throws InterruptedException, ExecutionException, TimeoutException {
-    Object expected = new Object();
-    future.onResourceReady(expected, null);
-
-    assertEquals(expected, future.get(100, TimeUnit.MILLISECONDS));
-  }
-
-  @Test(expected = CancellationException.class)
-  public void testThrowsCancellationExceptionIfCancelledBeforeGet()
-      throws ExecutionException, InterruptedException {
-    future.cancel(true);
-    future.get();
-  }
-
-  @Test(expected = CancellationException.class)
-  public void testThrowsCancellationExceptionIfCancelledBeforeGetWithTimeout()
-      throws InterruptedException, ExecutionException, TimeoutException {
-    future.cancel(true);
-    future.get(100, TimeUnit.MILLISECONDS);
-  }
-
-  @Test(expected = ExecutionException.class)
-  public void testThrowsExecutionExceptionOnGetIfExceptionBeforeGet()
-      throws ExecutionException, InterruptedException {
-    future.onLoadFailed(null);
-    future.get();
-  }
-
-  @Test(expected = ExecutionException.class)
-  public void testThrowsExecutionExceptionOnGetIfExceptionWithNullValueBeforeGet()
-      throws ExecutionException, InterruptedException, TimeoutException {
-    future.onLoadFailed(null);
-    future.get(100, TimeUnit.MILLISECONDS);
-  }
-
-  @Test(expected = ExecutionException.class)
-  public void testThrowsExecutionExceptionOnGetIfExceptionBeforeGetWithTimeout()
-      throws ExecutionException, InterruptedException, TimeoutException {
-    future.onLoadFailed(null);
-    future.get(100, TimeUnit.MILLISECONDS);
-  }
-
-  @Test(expected = TimeoutException.class)
-  public void testThrowsTimeoutExceptionOnGetIfFailedToReceiveResourceInTime()
-      throws InterruptedException, ExecutionException, TimeoutException {
-    future.get(1, TimeUnit.MILLISECONDS);
-  }
-
-  @Test(expected = IllegalArgumentException.class)
-  public void testThrowsExceptionIfGetCalledOnMainThread()
-      throws ExecutionException, InterruptedException {
-    future = new RequestFutureTarget<>(handler, width, height, true, waiter);
-    future.get();
-  }
-
-  @Test
-  public void testGetSucceedsOnMainThreadIfDone()
-      throws ExecutionException, InterruptedException {
-    future = new RequestFutureTarget<>(handler, width, height, true, waiter);
-    future.onResourceReady(new Object(), null);
-    future.get();
-  }
-
-  @Test(expected = InterruptedException.class)
-  public void testThrowsInterruptedExceptionIfThreadInterruptedWhenDoneWaiting()
-      throws InterruptedException, ExecutionException {
-    doAnswer(new Answer<Void>() {
-      @Override
-      public Void answer(InvocationOnMock invocationOnMock) throws Throwable {
-        Thread.currentThread().interrupt();
-        return null;
-      }
-    }).when(waiter).waitForTimeout(eq(future), anyLong());
-
-    future.get();
-  }
-
-  @Test(expected = ExecutionException.class)
-  public void testThrowsExecutionExceptionIfLoadFailsWhileWaiting()
-      throws ExecutionException, InterruptedException {
-    doAnswer(new Answer<Void>() {
-      @Override
-      public Void answer(InvocationOnMock invocationOnMock) throws Throwable {
-        future.onLoadFailed(null);
-        return null;
-      }
-    }).when(waiter).waitForTimeout(eq(future), anyLong());
-    future.get();
-  }
-
-  @Test(expected = CancellationException.class)
-  public void testThrowsCancellationExceptionIfCancelledWhileWaiting()
-      throws ExecutionException, InterruptedException {
-    doAnswer(new Answer<Void>() {
-      @Override
-      public Void answer(InvocationOnMock invocationOnMock) throws Throwable {
-        future.cancel(false);
-        return null;
-      }
-    }).when(waiter).waitForTimeout(eq(future), anyLong());
-    future.get();
-  }
-
-  @Test(expected = TimeoutException.class)
-  public void testThrowsTimeoutExceptionIfFinishesWaitingWithTimeoutAndDoesNotReceiveResult()
-      throws ExecutionException, InterruptedException, TimeoutException {
-    future.get(1, TimeUnit.MILLISECONDS);
-  }
-
-  @Test(expected = AssertionError.class)
-  public void testThrowsAssertionErrorIfFinishesWaitingWithoutTimeoutAndDoesNotReceiveResult()
-      throws ExecutionException, InterruptedException {
-    future.get();
-  }
-
-  @Test
-  public void testNotifiesAllWhenLoadFails() {
-    future.onLoadFailed(null);
-    verify(waiter).notifyAll(eq(future));
-  }
-
-  @Test
-  public void testNotifiesAllWhenResourceReady() {
-    future.onResourceReady(null, null);
-    verify(waiter).notifyAll(eq(future));
-  }
-
-  @Test
-  public void testNotifiesAllOnCancelIfNotCancelled() {
-    future.cancel(false);
-    verify(waiter).notifyAll(eq(future));
-  }
-
-  @Test
-  public void testDoesNotNotifyAllOnSecondCancel() {
-    future.cancel(true);
-    verify(waiter).notifyAll(eq(future));
-    future.cancel(true);
-    verify(waiter, times(1)).notifyAll(eq(future));
-  }
-
-  @Test
-  public void testReturnsResourceIfReceivedWhileWaiting()
-      throws ExecutionException, InterruptedException {
-    final Object expected = new Object();
-    doAnswer(new Answer<Void>() {
-      @Override
-      public Void answer(InvocationOnMock invocationOnMock) throws Throwable {
-        future.onResourceReady(expected, null);
-        return null;
-      }
-    }).when(waiter).waitForTimeout(eq(future), anyLong());
-    assertEquals(expected, future.get());
-  }
-
-  @Test
-  public void testWaitsForeverIfNoTimeoutSet() throws InterruptedException {
-    try {
-      future.get();
-    } catch (ExecutionException e) {
-      throw new RuntimeException(e);
-    } catch (AssertionError e) {
-      // Expected.
-    }
-    verify(waiter).waitForTimeout(eq(future), eq(0L));
-  }
-
-  @Test
-  public void testWaitsForGivenTimeoutMillisIfTimeoutSet() throws InterruptedException {
-    long timeout = 1234;
-    try {
-      future.get(1234, TimeUnit.MILLISECONDS);
-    } catch (InterruptedException | ExecutionException e) {
-      throw new RuntimeException(e);
-    } catch (TimeoutException e) {
-      // Expected.
-    }
-
-    verify(waiter).waitForTimeout(eq(future), eq(timeout));
-  }
-
-  @Test
-  public void testConvertsOtherTimeUnitsToMillisForWaiter() throws InterruptedException {
-    long timeoutSeconds = 10;
-    try {
-      future.get(timeoutSeconds, TimeUnit.SECONDS);
-    } catch (InterruptedException | ExecutionException e) {
-      throw new RuntimeException(e);
-    } catch (TimeoutException e) {
-      // Expected.
-    }
-
-    verify(waiter).waitForTimeout(eq(future), eq(TimeUnit.SECONDS.toMillis(timeoutSeconds)));
-  }
-
-  @Test
-  public void testDoesNotWaitIfGivenTimeOutEqualToZero() throws InterruptedException {
-    try {
-      future.get(0, TimeUnit.MILLISECONDS);
-    } catch (InterruptedException | ExecutionException e) {
-      throw new RuntimeException(e);
-    } catch (TimeoutException e) {
-      // Expected.
-    }
-
-    verify(waiter, never()).waitForTimeout(eq(future), anyLong());
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/request/SingleRequestTest.java b/library/src/test/java/com/bumptech/glide/request/SingleRequestTest.java
deleted file mode 100644
index 723fc3631..000000000
--- a/library/src/test/java/com/bumptech/glide/request/SingleRequestTest.java
+++ /dev/null
@@ -1,856 +0,0 @@
-package com.bumptech.glide.request;
-
-import static com.bumptech.glide.tests.Util.isADataSource;
-import static com.bumptech.glide.tests.Util.mockResource;
-import static org.junit.Assert.assertEquals;
-import static org.junit.Assert.assertFalse;
-import static org.junit.Assert.assertTrue;
-import static org.mockito.Matchers.any;
-import static org.mockito.Matchers.anyBoolean;
-import static org.mockito.Matchers.anyInt;
-import static org.mockito.Matchers.eq;
-import static org.mockito.Matchers.isA;
-import static org.mockito.Mockito.doAnswer;
-import static org.mockito.Mockito.mock;
-import static org.mockito.Mockito.never;
-import static org.mockito.Mockito.times;
-import static org.mockito.Mockito.verify;
-import static org.mockito.Mockito.when;
-
-import android.graphics.Color;
-import android.graphics.drawable.ColorDrawable;
-import android.graphics.drawable.Drawable;
-import com.bumptech.glide.GlideContext;
-import com.bumptech.glide.Priority;
-import com.bumptech.glide.load.DataSource;
-import com.bumptech.glide.load.Key;
-import com.bumptech.glide.load.Options;
-import com.bumptech.glide.load.Transformation;
-import com.bumptech.glide.load.engine.DiskCacheStrategy;
-import com.bumptech.glide.load.engine.Engine;
-import com.bumptech.glide.load.engine.GlideException;
-import com.bumptech.glide.load.engine.Resource;
-import com.bumptech.glide.request.target.SizeReadyCallback;
-import com.bumptech.glide.request.target.Target;
-import com.bumptech.glide.request.transition.Transition;
-import com.bumptech.glide.request.transition.TransitionFactory;
-import java.util.ArrayList;
-import java.util.HashMap;
-import java.util.List;
-import java.util.Map;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.mockito.invocation.InvocationOnMock;
-import org.mockito.stubbing.Answer;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-@SuppressWarnings("rawtypes")
-public class SingleRequestTest {
-  private RequestHarness harness;
-
-  /**
-   * {@link Number} and {@link List} are arbitrarily chosen types to test some type safety as well.
-   * Both are in the middle of the hierarchy having multiple descendants and ancestors.
-   */
-  private static class RequestHarness {
-    Engine engine = mock(Engine.class);
-    Number model = 123456;
-    @SuppressWarnings("unchecked")
-    Target<List> target = mock(Target.class);
-    Resource<List> resource = mockResource();
-    RequestCoordinator requestCoordinator = mock(RequestCoordinator.class);
-    Drawable placeholderDrawable = null;
-    Drawable errorDrawable = null;
-    Drawable fallbackDrawable = null;
-    @SuppressWarnings("unchecked")
-    RequestListener<List> requestListener = mock(RequestListener.class);
-    @SuppressWarnings("unchecked")
-    TransitionFactory<List> factory = mock(TransitionFactory.class);
-    int overrideWidth = -1;
-    int overrideHeight = -1;
-    List<?> result = new ArrayList<>();
-    GlideContext glideContext = mock(GlideContext.class);
-    Key signature = mock(Key.class);
-    Priority priority = Priority.HIGH;
-    boolean useUnlimitedSourceGeneratorsPool = false;
-
-    Map<Class<?>, Transformation<?>>  transformations = new HashMap<>();
-
-    public RequestHarness() {
-      when(requestCoordinator.canSetImage(any(Request.class))).thenReturn(true);
-      when(requestCoordinator.canNotifyStatusChanged(any(Request.class))).thenReturn(true);
-      when(resource.get()).thenReturn(result);
-    }
-
-    public SingleRequest<List> getRequest() {
-       RequestOptions requestOptions = new RequestOptions()
-        .error(errorDrawable)
-        .placeholder(placeholderDrawable)
-        .fallback(fallbackDrawable)
-        .override(overrideWidth, overrideHeight)
-        .priority(priority)
-        .signature(signature)
-        .useUnlimitedSourceGeneratorsPool(useUnlimitedSourceGeneratorsPool);
-      return SingleRequest
-          .obtain(glideContext, model, List.class, requestOptions, overrideWidth, overrideHeight,
-              priority, target, requestListener, requestCoordinator, engine, factory);
-    }
-  }
-
-  @Before
-  public void setUp() {
-    harness = new RequestHarness();
-  }
-
-  @Test
-  public void testIsNotCompleteBeforeReceivingResource() {
-    SingleRequest<List> request = harness.getRequest();
-
-    assertFalse(request.isComplete());
-  }
-
-  @Test
-  public void testCanHandleNullResources() {
-    SingleRequest<List> request = harness.getRequest();
-
-    request.onResourceReady(null, DataSource.LOCAL);
-
-    assertTrue(request.isFailed());
-    verify(harness.requestListener).onLoadFailed(isAGlideException(), isA(Number.class),
-        eq(harness.target), anyBoolean());
-  }
-
-  @Test
-  public void testCanHandleEmptyResources() {
-    SingleRequest<List> request = harness.getRequest();
-    when(harness.resource.get()).thenReturn(null);
-
-    request.onResourceReady(harness.resource, DataSource.REMOTE);
-
-    assertTrue(request.isFailed());
-    verify(harness.engine).release(eq(harness.resource));
-    verify(harness.requestListener).onLoadFailed(isAGlideException(), any(Number.class),
-        eq(harness.target), anyBoolean());
-  }
-
-  @Test
-  public void testCanHandleNonConformingResources() {
-    SingleRequest<List> request = harness.getRequest();
-    when(((Resource) (harness.resource)).get())
-        .thenReturn("Invalid mocked String, this should be a List");
-
-    request.onResourceReady(harness.resource, DataSource.DATA_DISK_CACHE);
-
-    assertTrue(request.isFailed());
-    verify(harness.engine).release(eq(harness.resource));
-    verify(harness.requestListener).onLoadFailed(isAGlideException(), any(Number.class),
-        eq(harness.target), anyBoolean());
-  }
-
-  @Test
-  public void testIsNotFailedAfterClear() {
-    SingleRequest<List> request = harness.getRequest();
-
-    request.onResourceReady(null, DataSource.DATA_DISK_CACHE);
-    request.clear();
-
-    assertFalse(request.isFailed());
-  }
-
-  @Test
-  public void testIsPausedAfterPause() {
-    SingleRequest<List> request = harness.getRequest();
-    request.pause();
-
-    assertTrue(request.isPaused());
-  }
-
-  @Test
-  public void testIsNotCancelledAfterPause() {
-    SingleRequest<List> request = harness.getRequest();
-    request.pause();
-
-    assertFalse(request.isCancelled());
-  }
-
-  @Test
-  public void testIsNotPausedAfterBeginningWhilePaused() {
-    SingleRequest<List> request = harness.getRequest();
-    request.pause();
-    request.begin();
-
-    assertFalse(request.isPaused());
-    assertTrue(request.isRunning());
-  }
-
-  @Test
-  public void testIsNotFailedAfterBegin() {
-    SingleRequest<List> request = harness.getRequest();
-
-    request.onResourceReady(null, DataSource.DATA_DISK_CACHE);
-    request.begin();
-
-    assertFalse(request.isFailed());
-  }
-
-  @Test
-  public void testIsCompleteAfterReceivingResource() {
-    SingleRequest<List> request = harness.getRequest();
-
-    request.onResourceReady(harness.resource, DataSource.LOCAL);
-
-    assertTrue(request.isComplete());
-  }
-
-  @Test
-  public void testIsNotCompleteAfterClear() {
-    SingleRequest<List> request = harness.getRequest();
-    request.onResourceReady(harness.resource, DataSource.REMOTE);
-    request.clear();
-
-    assertFalse(request.isComplete());
-  }
-
-  @Test
-  public void testIsCancelledAfterClear() {
-    SingleRequest<List> request = harness.getRequest();
-    request.clear();
-
-    assertTrue(request.isCancelled());
-  }
-
-  @Test
-  public void testDoesNotNotifyTargetTwiceIfClearedTwiceInARow() {
-    SingleRequest<List> request = harness.getRequest();
-    request.clear();
-    request.clear();
-
-    verify(harness.target, times(1)).onLoadCleared(any(Drawable.class));
-  }
-
-  @Test
-  public void testResourceIsNotCompleteWhenAskingCoordinatorIfCanSetImage() {
-    RequestCoordinator requestCoordinator = mock(RequestCoordinator.class);
-    doAnswer(new Answer() {
-      @Override
-      public Object answer(InvocationOnMock invocation) throws Throwable {
-        Request request = (Request) invocation.getArguments()[0];
-        assertFalse(request.isComplete());
-        return true;
-      }
-    }).when(requestCoordinator).canSetImage(any(Request.class));
-
-    harness.requestCoordinator = requestCoordinator;
-    SingleRequest<List> request = harness.getRequest();
-
-    request.onResourceReady(harness.resource, DataSource.DATA_DISK_CACHE);
-
-    verify(requestCoordinator).canSetImage(eq(request));
-  }
-
-  @Test
-  public void testIsNotFailedWithoutException() {
-    SingleRequest<List> request = harness.getRequest();
-
-    assertFalse(request.isFailed());
-  }
-
-  @Test
-  public void testIsFailedAfterException() {
-    SingleRequest<List> request = harness.getRequest();
-
-    request.onLoadFailed(new GlideException("test"));
-    assertTrue(request.isFailed());
-  }
-
-  @Test
-  public void testIgnoresOnSizeReadyIfNotWaitingForSize() {
-    SingleRequest<List> request = harness.getRequest();
-    request.begin();
-    request.onSizeReady(100, 100);
-    request.onSizeReady(100, 100);
-
-    verify(harness.engine, times(1))
-        .load(eq(harness.glideContext), eq(harness.model), eq(harness.signature), eq(100), eq(100),
-            eq(Object.class), eq(List.class), any(Priority.class), any(DiskCacheStrategy.class),
-            eq(harness.transformations), anyBoolean(), any(Options.class),
-            anyBoolean(), anyBoolean(), any(ResourceCallback.class));
-  }
-
-  @Test
-  public void testIsFailedAfterNoResultAndNullException() {
-    SingleRequest<List> request = harness.getRequest();
-
-    request.onLoadFailed(new GlideException("test"));
-    assertTrue(request.isFailed());
-  }
-
-  @Test
-  public void testEngineLoadCancelledOnCancel() {
-    Engine.LoadStatus loadStatus = mock(Engine.LoadStatus.class);
-
-    when(harness.engine
-       .load(eq(harness.glideContext), eq(harness.model), eq(harness.signature), anyInt(), anyInt(),
-          eq(Object.class), eq(List.class), any(Priority.class), any(DiskCacheStrategy.class),
-          eq(harness.transformations), anyBoolean(), any(Options.class),
-          anyBoolean(), anyBoolean(), any(ResourceCallback.class)))
-        .thenReturn(loadStatus);
-
-    SingleRequest<List> request = harness.getRequest();
-    request.begin();
-
-    request.onSizeReady(100, 100);
-    request.cancel();
-
-    verify(loadStatus).cancel();
-  }
-
-  @Test
-  public void testResourceIsRecycledOnClear() {
-    SingleRequest<List> request = harness.getRequest();
-
-    request.onResourceReady(harness.resource, DataSource.REMOTE);
-    request.clear();
-
-    verify(harness.engine).release(eq(harness.resource));
-  }
-
-  @Test
-  public void testPlaceholderDrawableIsSet() {
-    Drawable expected = new ColorDrawable(Color.RED);
-
-    MockTarget target = new MockTarget();
-
-    harness.placeholderDrawable = expected;
-    harness.target = target;
-    SingleRequest<List> request = harness.getRequest();
-    request.begin();
-
-    assertEquals(expected, target.currentPlaceholder);
-  }
-
-  @Test
-  public void testErrorDrawableIsSetOnLoadFailed() {
-    Drawable expected = new ColorDrawable(Color.RED);
-
-    MockTarget target = new MockTarget();
-
-    harness.errorDrawable = expected;
-    harness.target = target;
-    SingleRequest<List> request = harness.getRequest();
-
-    request.onLoadFailed(new GlideException("test"));
-
-    assertEquals(expected, target.currentPlaceholder);
-  }
-
-  @Test
-  public void testPlaceholderDrawableSetOnNullModelWithNoErrorDrawable() {
-    Drawable placeholder = new ColorDrawable(Color.RED);
-
-    MockTarget target = new MockTarget();
-
-    harness.placeholderDrawable = placeholder;
-    harness.target = target;
-    harness.model = null;
-    SingleRequest<List> request = harness.getRequest();
-
-    request.begin();
-
-    assertEquals(placeholder, target.currentPlaceholder);
-  }
-
-  @Test
-  public void testErrorDrawableSetOnNullModelWithErrorDrawable() {
-    Drawable placeholder = new ColorDrawable(Color.RED);
-    Drawable errorPlaceholder = new ColorDrawable(Color.GREEN);
-
-    MockTarget target = new MockTarget();
-
-    harness.placeholderDrawable = placeholder;
-    harness.errorDrawable = errorPlaceholder;
-    harness.target = target;
-    harness.model = null;
-    SingleRequest<List> request = harness.getRequest();
-
-    request.begin();
-
-    assertEquals(errorPlaceholder, target.currentPlaceholder);
-  }
-
-
-  @Test
-  public void testFallbackDrawableSetOnNullModelWithErrorAndFallbackDrawables() {
-    Drawable placeholder = new ColorDrawable(Color.RED);
-    Drawable errorPlaceholder = new ColorDrawable(Color.GREEN);
-    Drawable fallback = new ColorDrawable(Color.BLUE);
-
-    MockTarget target = new MockTarget();
-    harness.placeholderDrawable = placeholder;
-    harness.errorDrawable = errorPlaceholder;
-    harness.fallbackDrawable = fallback;
-    harness.target = target;
-    harness.model = null;
-    SingleRequest<List> request = harness.getRequest();
-    request.begin();
-    assertEquals(fallback, target.currentPlaceholder);
-  }
-
-
-  @Test
-  public void testIsNotRunningBeforeRunCalled() {
-    assertFalse(harness.getRequest().isRunning());
-  }
-
-  @Test
-  public void testIsRunningAfterRunCalled() {
-    Request request = harness.getRequest();
-    request.begin();
-    assertTrue(request.isRunning());
-  }
-
-  @Test
-  public void testIsNotRunningAfterComplete() {
-    SingleRequest<List> request = harness.getRequest();
-    request.begin();
-    request.onResourceReady(harness.resource, DataSource.REMOTE);
-
-    assertFalse(request.isRunning());
-  }
-
-  @Test
-  public void testIsNotRunningAfterFailing() {
-    SingleRequest<List> request = harness.getRequest();
-    request.begin();
-    request.onLoadFailed(new GlideException("test"));
-
-    assertFalse(request.isRunning());
-  }
-
-  @Test
-  public void testIsNotRunningAfterClear() {
-    SingleRequest<List> request = harness.getRequest();
-    request.begin();
-    request.clear();
-
-    assertFalse(request.isRunning());
-  }
-
-  @Test
-  public void testCallsTargetOnResourceReadyIfNoRequestListener() {
-    harness.requestListener = null;
-    SingleRequest<List> request = harness.getRequest();
-    request.onResourceReady(harness.resource, DataSource.LOCAL);
-
-    verify(harness.target).onResourceReady(eq(harness.result), anyTransition());
-  }
-
-  @Test
-  public void testCallsTargetOnResourceReadyIfRequestListenerReturnsFalse() {
-    SingleRequest<List> request = harness.getRequest();
-    when(harness.requestListener
-        .onResourceReady(any(List.class), any(Number.class), eq(harness.target), isADataSource(),
-            anyBoolean())).thenReturn(false);
-    request.onResourceReady(harness.resource, DataSource.LOCAL);
-
-    verify(harness.target).onResourceReady(eq(harness.result), anyTransition());
-  }
-
-  @Test
-  public void testDoesNotCallTargetOnResourceReadyIfRequestListenerReturnsTrue() {
-    SingleRequest<List> request = harness.getRequest();
-    when(harness.requestListener
-        .onResourceReady(any(List.class), any(Number.class), eq(harness.target), isADataSource(),
-            anyBoolean())).thenReturn(true);
-    request.onResourceReady(harness.resource, DataSource.REMOTE);
-
-    verify(harness.target, never()).onResourceReady(any(List.class), anyTransition());
-  }
-
-  @Test
-  public void testCallsTargetOnExceptionIfNoRequestListener() {
-    harness.requestListener = null;
-    SingleRequest<List> request = harness.getRequest();
-    request.onLoadFailed(new GlideException("test"));
-
-    verify(harness.target).onLoadFailed(eq(harness.errorDrawable));
-  }
-
-  @Test
-  public void testCallsTargetOnExceptionIfRequestListenerReturnsFalse() {
-    SingleRequest<List> request = harness.getRequest();
-    when(harness.requestListener.onLoadFailed(isAGlideException(), any(Number.class),
-        eq(harness.target), anyBoolean()))
-        .thenReturn(false);
-    request.onLoadFailed(new GlideException("test"));
-
-    verify(harness.target).onLoadFailed(eq(harness.errorDrawable));
-  }
-
-  @Test
-  public void testDoesNotCallTargetOnExceptionIfRequestListenerReturnsTrue() {
-    SingleRequest<List> request = harness.getRequest();
-    when(harness.requestListener.onLoadFailed(isAGlideException(), any(Number.class),
-        eq(harness.target), anyBoolean()))
-        .thenReturn(true);
-
-    request.onLoadFailed(new GlideException("test"));
-
-    verify(harness.target, never()).onLoadFailed(any(Drawable.class));
-  }
-
-  @Test
-  public void testRequestListenerIsCalledWithResourceResult() {
-    SingleRequest<List> request = harness.getRequest();
-    request.onResourceReady(harness.resource, DataSource.DATA_DISK_CACHE);
-
-    verify(harness.requestListener)
-        .onResourceReady(eq(harness.result), any(Number.class), isAListTarget(), isADataSource(),
-            anyBoolean());
-  }
-
-  @Test
-  public void testRequestListenerIsCalledWithModel() {
-    SingleRequest<List> request = harness.getRequest();
-    request.onResourceReady(harness.resource, DataSource.DATA_DISK_CACHE);
-
-    verify(harness.requestListener)
-        .onResourceReady(any(List.class), eq(harness.model), isAListTarget(), isADataSource(),
-            anyBoolean());
-  }
-
-  @Test
-  public void testRequestListenerIsCalledWithTarget() {
-    SingleRequest<List> request = harness.getRequest();
-    request.onResourceReady(harness.resource, DataSource.DATA_DISK_CACHE);
-
-    verify(harness.requestListener)
-        .onResourceReady(any(List.class), any(Number.class), eq(harness.target), isADataSource(),
-            anyBoolean());
-  }
-
-  @Test
-  public void testRequestListenerIsCalledWithLoadedFromMemoryIfLoadCompletesSynchronously() {
-    final SingleRequest<List> request = harness.getRequest();
-
-    when(harness.engine
-        .load(eq(harness.glideContext), eq(harness.model), eq(harness.signature), anyInt(),
-            anyInt(), eq(Object.class), eq(List.class), any(Priority.class),
-            any(DiskCacheStrategy.class), eq(harness.transformations), anyBoolean(),
-            any(Options.class), anyBoolean(), anyBoolean(), any(ResourceCallback.class)))
-        .thenAnswer(new Answer<Object>() {
-          @Override
-          public Object answer(InvocationOnMock invocation) throws Throwable {
-            request.onResourceReady(harness.resource, DataSource.MEMORY_CACHE);
-            return null;
-          }
-        });
-
-    request.begin();
-    request.onSizeReady(100, 100);
-    verify(harness.requestListener)
-        .onResourceReady(eq(harness.result), any(Number.class), isAListTarget(),
-            eq(DataSource.MEMORY_CACHE), anyBoolean());
-  }
-
-  @Test
-  public void
-  testRequestListenerIsCalledWithNotLoadedFromMemoryCacheIfLoadCompletesAsynchronously() {
-    SingleRequest<List> request = harness.getRequest();
-    request.onSizeReady(100, 100);
-    request.onResourceReady(harness.resource, DataSource.LOCAL);
-
-    verify(harness.requestListener)
-        .onResourceReady(eq(harness.result), any(Number.class), isAListTarget(),
-            eq(DataSource.LOCAL), anyBoolean());
-  }
-
-  @Test
-  public void testRequestListenerIsCalledWithIsFirstResourceIfNoRequestCoordinator() {
-    harness.requestCoordinator = null;
-    SingleRequest<List> request = harness.getRequest();
-    request.onResourceReady(harness.resource, DataSource.DATA_DISK_CACHE);
-
-    verify(harness.requestListener)
-        .onResourceReady(eq(harness.result), any(Number.class), isAListTarget(), isADataSource(),
-            eq(true));
-  }
-
-  @Test
-  public void testRequestListenerIsCalledWithFirstImageIfRequestCoordinatorReturnsNoResourceSet() {
-    SingleRequest<List> request = harness.getRequest();
-    when(harness.requestCoordinator.isAnyResourceSet()).thenReturn(false);
-    request.onResourceReady(harness.resource, DataSource.DATA_DISK_CACHE);
-
-    verify(harness.requestListener)
-        .onResourceReady(eq(harness.result), any(Number.class), isAListTarget(), isADataSource(),
-            eq(true));
-  }
-
-  @Test
-  public void
-  testRequestListenerIsCalledWithNotIsFirstRequestIfRequestCoordinatorReturnsResourceSet() {
-    SingleRequest<List> request = harness.getRequest();
-    when(harness.requestCoordinator.isAnyResourceSet()).thenReturn(true);
-    request.onResourceReady(harness.resource, DataSource.DATA_DISK_CACHE);
-
-    verify(harness.requestListener)
-        .onResourceReady(eq(harness.result), any(Number.class), isAListTarget(),
-            isADataSource(), eq(false));
-  }
-
-  @Test
-  public void testTargetIsCalledWithAnimationFromFactory() {
-    SingleRequest<List> request = harness.getRequest();
-    Transition<List> transition = mockTransition();
-    when(harness.factory.build(any(DataSource.class), anyBoolean())).thenReturn(transition);
-    request.onResourceReady(harness.resource, DataSource.DATA_DISK_CACHE);
-
-    verify(harness.target).onResourceReady(eq(harness.result), eq(transition));
-  }
-
-  @Test
-  public void testCallsGetSizeIfOverrideWidthIsLessThanZero() {
-    harness.overrideWidth = -1;
-    harness.overrideHeight = 100;
-    SingleRequest<List> request = harness.getRequest();
-    request.begin();
-
-    verify(harness.target).getSize(any(SizeReadyCallback.class));
-  }
-
-  @Test
-  public void testCallsGetSizeIfOverrideHeightIsLessThanZero() {
-    harness.overrideHeight = -1;
-    harness.overrideWidth = 100;
-    SingleRequest<List> request = harness.getRequest();
-    request.begin();
-
-    verify(harness.target).getSize(any(SizeReadyCallback.class));
-  }
-
-  @Test
-  public void testDoesNotCallGetSizeIfOverrideWidthAndHeightAreSet() {
-    harness.overrideWidth = 100;
-    harness.overrideHeight = 100;
-    SingleRequest<List> request = harness.getRequest();
-    request.begin();
-
-    verify(harness.target, never()).getSize(any(SizeReadyCallback.class));
-  }
-
-  @Test
-  public void testCallsEngineWithOverrideWidthAndHeightIfSet() {
-    harness.overrideWidth = 1;
-    harness.overrideHeight = 2;
-
-    SingleRequest<List> request = harness.getRequest();
-    request.begin();
-
-    verify(harness.engine)
-        .load(eq(harness.glideContext), eq(harness.model), eq(harness.signature), anyInt(),
-            anyInt(), eq(Object.class), eq(List.class), any(Priority.class),
-            any(DiskCacheStrategy.class), eq(harness.transformations), anyBoolean(),
-            any(Options.class), anyBoolean(), anyBoolean(), any(ResourceCallback.class));
-  }
-
-  @Test
-  public void testDoesNotSetErrorDrawableIfRequestCoordinatorDoesntAllowIt() {
-    harness.errorDrawable = new ColorDrawable(Color.RED);
-    SingleRequest<List> request = harness.getRequest();
-    when(harness.requestCoordinator.canNotifyStatusChanged(any(Request.class))).thenReturn(false);
-    request.onLoadFailed(new GlideException("test"));
-
-    verify(harness.target, never()).onLoadFailed(any(Drawable.class));
-  }
-
-  @Test
-  public void testCanReRunCancelledRequests() {
-    doAnswer(new CallSizeReady(100, 100)).when(harness.target)
-        .getSize(any(SizeReadyCallback.class));
-
-    when(harness.engine
-        .load(eq(harness.glideContext), eq(harness.model), eq(harness.signature), eq(100), eq(100),
-            eq(Object.class), eq(List.class), any(Priority.class), any(DiskCacheStrategy.class),
-            eq(harness.transformations), anyBoolean(), any(Options.class),
-            anyBoolean(), anyBoolean(), any(ResourceCallback.class)))
-        .thenAnswer(new CallResourceCallback(harness.resource));
-    SingleRequest<List> request = harness.getRequest();
-
-    request.begin();
-    request.cancel();
-    request.begin();
-
-    verify(harness.target, times(2)).onResourceReady(eq(harness.result), anyTransition());
-  }
-
-  @Test
-  public void testResourceOnlyReceivesOneGetOnResourceReady() {
-    SingleRequest<List> request = harness.getRequest();
-    request.onResourceReady(harness.resource, DataSource.LOCAL);
-
-    verify(harness.resource, times(1)).get();
-  }
-
-  @Test
-  public void testDoesNotStartALoadIfOnSizeReadyIsCalledAfterCancel() {
-    SingleRequest<List> request = harness.getRequest();
-    request.cancel();
-    request.onSizeReady(100, 100);
-
-    verify(harness.engine, never())
-        .load(eq(harness.glideContext), eq(harness.model), eq(harness.signature), anyInt(),
-            anyInt(), eq(Object.class), eq(List.class), any(Priority.class),
-            any(DiskCacheStrategy.class), eq(harness.transformations), anyBoolean(),
-            any(Options.class), anyBoolean(), anyBoolean(), any(ResourceCallback.class));
-  }
-
-
-  @Test
-  public void testCallsSourceUnlimitedExecutorEngineIfOptionsIsSet() {
-    doAnswer(new CallSizeReady(100, 100)).when(harness.target)
-        .getSize(any(SizeReadyCallback.class));
-
-    harness.useUnlimitedSourceGeneratorsPool = true;
-
-    SingleRequest<List> request = harness.getRequest();
-    request.begin();
-
-    verify(harness.engine)
-        .load(eq(harness.glideContext), eq(harness.model), eq(harness.signature), anyInt(),
-            anyInt(), eq(Object.class), eq(List.class), any(Priority.class),
-            any(DiskCacheStrategy.class), eq(harness.transformations), anyBoolean(),
-            any(Options.class), anyBoolean(), eq(Boolean.TRUE), any(ResourceCallback.class));
-  }
-
-  @Test
-  public void testCallsSourceExecutorEngineIfOptionsIsSet() {
-    doAnswer(new CallSizeReady(100, 100)).when(harness.target)
-        .getSize(any(SizeReadyCallback.class));
-
-    harness.useUnlimitedSourceGeneratorsPool = false;
-
-    SingleRequest<List> request = harness.getRequest();
-    request.begin();
-
-    verify(harness.engine)
-        .load(eq(harness.glideContext), eq(harness.model), eq(harness.signature), anyInt(),
-            anyInt(), eq(Object.class), eq(List.class), any(Priority.class),
-            any(DiskCacheStrategy.class), eq(harness.transformations), anyBoolean(),
-            any(Options.class), anyBoolean(), eq(Boolean.FALSE), any(ResourceCallback.class));
-  }
-
-  // TODO do we want to move these to Util?
-  @SuppressWarnings("unchecked")
-  private static <T> Transition<T> mockTransition() {
-    return mock(Transition.class);
-  }
-
-  @SuppressWarnings("unchecked")
-  private static Target<List> isAListTarget() {
-    return isA(Target.class);
-  }
-
-  private static GlideException isAGlideException() {
-    return isA(GlideException.class);
-  }
-
-  @SuppressWarnings("unchecked")
-  private static <T> Transition<T> anyTransition() {
-    return any(Transition.class);
-  }
-
-  private static class CallResourceCallback implements Answer {
-
-    private Resource resource;
-
-    public CallResourceCallback(Resource resource) {
-      this.resource = resource;
-    }
-
-    @Override
-    public Object answer(InvocationOnMock invocationOnMock) throws Throwable {
-      ResourceCallback cb =
-          (ResourceCallback) invocationOnMock.getArguments()[invocationOnMock.getArguments().length
-              - 1];
-      cb.onResourceReady(resource, DataSource.REMOTE);
-      return null;
-    }
-  }
-
-  private static class CallSizeReady implements Answer {
-
-    private int width;
-    private int height;
-
-    public CallSizeReady(int width, int height) {
-      this.width = width;
-      this.height = height;
-    }
-
-    @Override
-    public Object answer(InvocationOnMock invocationOnMock) throws Throwable {
-      SizeReadyCallback cb = (SizeReadyCallback) invocationOnMock.getArguments()[0];
-      cb.onSizeReady(width, height);
-      return null;
-    }
-  }
-
-  private static class MockTarget implements Target<List> {
-    private Drawable currentPlaceholder;
-
-    @Override
-    public void onLoadCleared(Drawable placeholder) {
-      currentPlaceholder = placeholder;
-    }
-
-    @Override
-    public void onLoadStarted(Drawable placeholder) {
-      currentPlaceholder = placeholder;
-
-    }
-
-    @Override
-    public void onLoadFailed(Drawable errorDrawable) {
-      currentPlaceholder = errorDrawable;
-
-    }
-
-    @Override
-    public void onResourceReady(List resource, Transition<? super List> transition) {
-      currentPlaceholder = null;
-    }
-
-
-    @Override
-    public void getSize(SizeReadyCallback cb) {
-    }
-
-    @Override
-    public void setRequest(Request request) {
-    }
-
-    @Override
-    public Request getRequest() {
-      return null;
-    }
-
-    @Override
-    public void onStart() {
-    }
-
-    @Override
-    public void onStop() {
-
-    }
-
-    @Override
-    public void onDestroy() {
-
-    }
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/request/ThumbnailRequestCoordinatorTest.java b/library/src/test/java/com/bumptech/glide/request/ThumbnailRequestCoordinatorTest.java
deleted file mode 100644
index 0b982933f..000000000
--- a/library/src/test/java/com/bumptech/glide/request/ThumbnailRequestCoordinatorTest.java
+++ /dev/null
@@ -1,333 +0,0 @@
-package com.bumptech.glide.request;
-
-import static org.junit.Assert.assertFalse;
-import static org.junit.Assert.assertTrue;
-import static org.mockito.Matchers.any;
-import static org.mockito.Matchers.eq;
-import static org.mockito.Mockito.doAnswer;
-import static org.mockito.Mockito.inOrder;
-import static org.mockito.Mockito.mock;
-import static org.mockito.Mockito.never;
-import static org.mockito.Mockito.verify;
-import static org.mockito.Mockito.when;
-
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.junit.runners.JUnit4;
-import org.mockito.InOrder;
-import org.mockito.invocation.InvocationOnMock;
-import org.mockito.stubbing.Answer;
-
-@RunWith(JUnit4.class)
-public class ThumbnailRequestCoordinatorTest {
-  private Request full;
-  private Request thumb;
-  private ThumbnailRequestCoordinator coordinator;
-  private RequestCoordinator parent;
-
-  @Before
-  public void setUp() {
-    full = mock(Request.class);
-    thumb = mock(Request.class);
-    parent = mock(RequestCoordinator.class);
-    coordinator = new ThumbnailRequestCoordinator();
-    coordinator.setRequests(full, thumb);
-  }
-
-  @Test
-  public void testIsRunningIsFalseIfNeitherRequestIsRunning() {
-    assertFalse(coordinator.isRunning());
-  }
-
-  @Test
-  public void testIsRunningIsTrueIfFullIsRunning() {
-    when(full.isRunning()).thenReturn(true);
-    assertTrue(coordinator.isRunning());
-  }
-
-  @Test
-  public void testIsNotRunningIfFullIsNotRunningButThumbIs() {
-    when(full.isRunning()).thenReturn(false);
-    when(thumb.isRunning()).thenReturn(true);
-    assertFalse(coordinator.isRunning());
-  }
-
-  @Test
-  public void testStartsFullOnRunIfNotRunning() {
-    when(full.isRunning()).thenReturn(false);
-    coordinator.begin();
-
-    verify(full).begin();
-  }
-
-  @Test
-  public void testStartsThumbOnRunIfNotRunning() {
-    when(thumb.isRunning()).thenReturn(false);
-    coordinator.begin();
-
-    verify(thumb).begin();
-  }
-
-  @Test
-  public void testDoesNotStartFullOnRunIfRunning() {
-    when(full.isRunning()).thenReturn(true);
-    coordinator.begin();
-
-    verify(full, never()).begin();
-  }
-
-  @Test
-  public void testDoesNotStartThumbOnRunIfRunning() {
-    when(thumb.isRunning()).thenReturn(true);
-    coordinator.begin();
-
-    verify(thumb, never()).begin();
-  }
-
-  @Test
-  public void testDoesNotStartFullIfClearedByThumb() {
-    doAnswer(new Answer<Void>() {
-      @Override
-      public Void answer(InvocationOnMock invocation) throws Throwable {
-        coordinator.clear();
-
-        return null;
-      }
-    }).when(thumb).begin();
-
-    coordinator.begin();
-
-    verify(full, never()).begin();
-  }
-
-  @Test
-  public void testCallsClearOnRequestsWhenCleared() {
-    coordinator.clear();
-    InOrder order = inOrder(thumb, full);
-    order.verify(thumb).clear();
-    order.verify(full).clear();
-  }
-
-  @Test
-  public void testRecyclesRequestsWhenRecycled() {
-    coordinator.recycle();
-    verify(thumb).recycle();
-    verify(full).recycle();
-  }
-
-  @Test
-  public void testIsPausedWhenFullIsPaused() {
-    when(full.isPaused()).thenReturn(true);
-    assertTrue(coordinator.isPaused());
-  }
-
-  @Test
-  public void testPausesBothRequestsWhenPaused() {
-    coordinator.pause();
-    verify(full).pause();
-    verify(thumb).pause();
-  }
-
-  @Test
-  public void testCanSetImageReturnsTrueForFullRequestIfCoordinatorIsNull() {
-    coordinator = new ThumbnailRequestCoordinator();
-    coordinator.setRequests(full, thumb);
-    assertTrue(coordinator.canSetImage(full));
-  }
-
-  @Test
-  public void testCanSetImageReturnsTrueForFullRequestIfParentAllowsSetImage() {
-    coordinator = new ThumbnailRequestCoordinator(parent);
-    coordinator.setRequests(full, thumb);
-    when(parent.canSetImage(eq(coordinator))).thenReturn(true);
-    assertTrue(coordinator.canSetImage(full));
-  }
-
-  @Test
-  public void testCanSetImageReturnsFalseForFullRequestIfParentDoesNotAllowSetImage() {
-    coordinator = new ThumbnailRequestCoordinator(parent);
-    coordinator.setRequests(full, thumb);
-    when(parent.canSetImage(eq(coordinator))).thenReturn(false);
-    assertFalse(coordinator.canSetImage(full));
-  }
-
-  @Test
-  public void
-  testCanSetImageReturnsTrueForThumbRequestIfParentIsNullAndFullDoesNotHaveResourceSet() {
-    when(full.isResourceSet()).thenReturn(false);
-    assertTrue(coordinator.canSetImage(thumb));
-  }
-
-  @Test
-  public void testCanSetImageReturnsFalseForThumbRequestIfParentIsNullAndFullHasResourceSet() {
-    when(full.isResourceSet()).thenReturn(true);
-    assertFalse(coordinator.canSetImage(thumb));
-  }
-
-  @Test
-  public void testCanNotSetImageForThumbIfNotAllowedByParentAndFullDoesNotHaveResourceSet() {
-    coordinator = new ThumbnailRequestCoordinator(parent);
-    coordinator.setRequests(full, thumb);
-    when(parent.canSetImage(eq(coordinator))).thenReturn(false);
-    when(full.isResourceSet()).thenReturn(false);
-    assertFalse(coordinator.canSetImage(thumb));
-  }
-
-  @Test
-  public void testCanNotifyStatusChangedIfFullAndNoRequestsAreComplete() {
-    assertTrue(coordinator.canNotifyStatusChanged(full));
-  }
-
-  @Test
-  public void testCanNotNotifyStatusChangedIfThumb() {
-    assertFalse(coordinator.canNotifyStatusChanged(thumb));
-  }
-
-  @Test
-  public void testCanNotNotifyStatusChangedIfFullHasResourceSet() {
-    when(full.isResourceSet()).thenReturn(true);
-    assertFalse(coordinator.canNotifyStatusChanged(full));
-  }
-
-  @Test
-  public void testCanNotNotifyStatusChangedIfThumbHasResourceSet() {
-    when(thumb.isResourceSet()).thenReturn(true);
-    assertFalse(coordinator.canNotifyStatusChanged(full));
-  }
-
-  @Test
-  public void testCanNotNotifyStatusChangedIfParentHasResourceSet() {
-    coordinator = new ThumbnailRequestCoordinator(parent);
-    coordinator.setRequests(full, thumb);
-    when(parent.isAnyResourceSet()).thenReturn(true);
-    assertFalse(coordinator.canNotifyStatusChanged(full));
-  }
-
-  @Test
-  public void testCanNotifyStatusChangedIfParentAllowsNotify() {
-    coordinator = new ThumbnailRequestCoordinator(parent);
-    coordinator.setRequests(full, thumb);
-    when(parent.canNotifyStatusChanged(eq(coordinator))).thenReturn(true);
-    assertTrue(coordinator.canNotifyStatusChanged(full));
-  }
-
-  @Test
-  public void testCanNotNotifyStatusChangedIfParentDoesNotAllowNotify() {
-    coordinator = new ThumbnailRequestCoordinator(parent);
-    coordinator.setRequests(full, thumb);
-    when(parent.canNotifyStatusChanged(eq(coordinator))).thenReturn(false);
-    assertFalse(coordinator.canNotifyStatusChanged(full));
-  }
-
-  @Test
-  public void testIsAnyResourceSetIsFalseIfNeitherRequestHasResourceSet() {
-    when(full.isResourceSet()).thenReturn(false);
-    when(thumb.isResourceSet()).thenReturn(false);
-    assertFalse(coordinator.isAnyResourceSet());
-  }
-
-  @Test
-  public void testIsAnyResourceSetIsTrueIfFullHasResourceSet() {
-    when(full.isResourceSet()).thenReturn(true);
-    when(thumb.isResourceSet()).thenReturn(false);
-    assertTrue(coordinator.isAnyResourceSet());
-  }
-
-  @Test
-  public void testIsAnyResourceSetIsTrueIfThumbHasResourceSet() {
-    when(full.isResourceSet()).thenReturn(false);
-    when(thumb.isResourceSet()).thenReturn(true);
-    assertTrue(coordinator.isAnyResourceSet());
-  }
-
-  @Test
-  public void testIsAnyResourceSetIsTrueIfParentIsNonNullAndParentHasResourceSet() {
-    coordinator = new ThumbnailRequestCoordinator(parent);
-    coordinator.setRequests(full, thumb);
-
-    when(parent.isAnyResourceSet()).thenReturn(true);
-    when(full.isResourceSet()).thenReturn(false);
-    when(thumb.isResourceSet()).thenReturn(false);
-
-    assertTrue(coordinator.isAnyResourceSet());
-  }
-
-  @Test
-  public void testIsNotCompleteIfNeitherRequestIsComplete() {
-    assertFalse(coordinator.isComplete());
-  }
-
-  @Test
-  public void testIsCompleteIfFullIsComplete() {
-    when(full.isComplete()).thenReturn(true);
-    assertTrue(coordinator.isComplete());
-  }
-
-  @Test
-  public void testIsCompleteIfThumbIsComplete() {
-    when(thumb.isComplete()).thenReturn(true);
-    assertTrue(coordinator.isComplete());
-  }
-
-  @Test
-  public void testIsResourceSetIsFalseIfNeitherRequestHasResourceSet() {
-    assertFalse(coordinator.isResourceSet());
-  }
-
-  @Test
-  public void testIsResourceSetIsTrueIfFullRequestHasResourceSet() {
-    when(full.isResourceSet()).thenReturn(true);
-    assertTrue(coordinator.isResourceSet());
-  }
-
-  @Test
-  public void testIsResourceSetIsTrueIfThumbRequestHasResourceSet() {
-    when(thumb.isResourceSet()).thenReturn(true);
-    assertTrue(coordinator.isResourceSet());
-  }
-
-  @Test
-  public void testClearsThumbRequestOnFullRequestComplete_withNullParent() {
-    coordinator.onRequestSuccess(full);
-    verify(thumb).clear();
-  }
-
-  @Test
-  public void testNotifiesParentOnFullRequestComplete_withNonNullParent() {
-    coordinator = new ThumbnailRequestCoordinator(parent);
-    coordinator.setRequests(full, thumb);
-    coordinator.onRequestSuccess(full);
-    verify(parent).onRequestSuccess(eq(coordinator));
-  }
-
-  @Test
-  public void testClearsThumbRequestOnFullRequestComplete_withNonNullParent() {
-    coordinator = new ThumbnailRequestCoordinator(parent);
-    coordinator.setRequests(full, thumb);
-    coordinator.onRequestSuccess(full);
-    verify(thumb).clear();
-  }
-
-  @Test
-  public void testDoesNotClearThumbOnThumbRequestComplete() {
-    coordinator.onRequestSuccess(thumb);
-    verify(thumb, never()).clear();
-  }
-
-  @Test
-  public void testDoesNotClearThumbOnFullComplete_whenThumbIsComplete() {
-      when(thumb.isComplete()).thenReturn(true);
-      coordinator.onRequestSuccess(full);
-      verify(thumb, never()).clear();
-  }
-
-  @Test
-  public void testDoesNotNotifyParentOnThumbRequestComplete() {
-    coordinator = new ThumbnailRequestCoordinator(parent);
-    coordinator.setRequests(full, thumb);
-    coordinator.onRequestSuccess(thumb);
-
-    verify(parent, never()).onRequestSuccess(any(Request.class));
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/request/target/AppWidgetTargetTest.java b/library/src/test/java/com/bumptech/glide/request/target/AppWidgetTargetTest.java
deleted file mode 100644
index 4fe6bf3d6..000000000
--- a/library/src/test/java/com/bumptech/glide/request/target/AppWidgetTargetTest.java
+++ /dev/null
@@ -1,145 +0,0 @@
-package com.bumptech.glide.request.target;
-
-import static com.google.common.truth.Truth.assertThat;
-import static org.junit.Assert.assertEquals;
-import static org.mockito.Matchers.eq;
-import static org.mockito.Mockito.mock;
-import static org.mockito.Mockito.verify;
-
-import android.appwidget.AppWidgetManager;
-import android.content.ComponentName;
-import android.graphics.Bitmap;
-import android.widget.RemoteViews;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.RuntimeEnvironment;
-import org.robolectric.annotation.Config;
-import org.robolectric.annotation.Implementation;
-import org.robolectric.annotation.Implements;
-import org.robolectric.internal.ShadowExtractor;
-import org.robolectric.shadows.ShadowAppWidgetManager;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18, shadows = AppWidgetTargetTest
-    .UpdateShadowAppWidgetManager.class)
-public class AppWidgetTargetTest {
-  private UpdateShadowAppWidgetManager shadowManager;
-  private RemoteViews views;
-  private int viewId;
-
-  @Before
-  public void setUp() {
-    shadowManager = (UpdateShadowAppWidgetManager) ShadowExtractor
-        .extract(AppWidgetManager.getInstance(RuntimeEnvironment.application));
-    viewId = 1234;
-    views = mock(RemoteViews.class);
-  }
-
-  @Test
-  public void testSetsBitmapOnRemoteViewsWithViewIdWhenCreatedWithComponentName() {
-    ComponentName componentName = mock(ComponentName.class);
-    AppWidgetTarget target =
-        new AppWidgetTarget(RuntimeEnvironment.application, viewId, views, componentName);
-
-    Bitmap bitmap = Bitmap.createBitmap(100, 100, Bitmap.Config.ARGB_8888);
-    target.onResourceReady(bitmap, null /*glideAnimation*/);
-
-    verify(views).setImageViewBitmap(eq(viewId), eq(bitmap));
-  }
-
-  @Test
-  public void testUpdatesAppWidgetWhenCreatedWithComponentName() {
-    ComponentName componentName = mock(ComponentName.class);
-    AppWidgetTarget target =
-        new AppWidgetTarget(RuntimeEnvironment.application, viewId, views, componentName);
-
-    target.onResourceReady(Bitmap.createBitmap(100, 100, Bitmap.Config.ARGB_8888), null
-    /*glideAnimation*/);
-
-    assertEquals(componentName, shadowManager.updatedComponentName);
-    assertEquals(views, shadowManager.updatedRemoteViews);
-  }
-
-  @Test
-  public void testSetsBitmapOnRemoteViewsWithViewIdWhenCreatedWithWidgetIds() {
-    int[] widgetIds = new int[] { 1 };
-    AppWidgetTarget target =
-        new AppWidgetTarget(RuntimeEnvironment.application, viewId, views, widgetIds);
-
-    Bitmap bitmap = Bitmap.createBitmap(100, 200, Bitmap.Config.RGB_565);
-    target.onResourceReady(bitmap, null /*glideAnimation*/);
-
-    verify(views).setImageViewBitmap(eq(viewId), eq(bitmap));
-  }
-
-  @Test
-  public void testUpdatesAppWidgetWhenCreatedWithWidgetIds() {
-    int[] widgetIds = new int[] { 1 };
-    AppWidgetTarget target =
-        new AppWidgetTarget(RuntimeEnvironment.application, viewId, views, widgetIds);
-
-    target.onResourceReady(Bitmap.createBitmap(200, 100, Bitmap.Config.ARGB_8888), null
-    /*glideAnimation*/);
-
-    assertThat(widgetIds).isEqualTo(shadowManager.updatedWidgetIds);
-    assertEquals(views, shadowManager.updatedRemoteViews);
-  }
-
-  @Test(expected = NullPointerException.class)
-  public void testThrowsWhenGivenNullContextWithWidgetIds() {
-    new AppWidgetTarget(null /*context*/, 1234 /*viewId*/, views, 1 /*widgetIds*/);
-  }
-
-  @Test(expected = NullPointerException.class)
-  public void testThrowsWhenGivenNullContextWithComponentName() {
-    new AppWidgetTarget(null /*context*/, 1234 /*viewId*/, views, mock(ComponentName.class));
-  }
-
-  @Test(expected = NullPointerException.class)
-  public void testThrowsWhenGivenNullRemoteViewsWithWidgetIds() {
-    new AppWidgetTarget(RuntimeEnvironment.application,
-        viewId, null /*remoteViews*/, 1 /*widgetIds*/);
-  }
-
-  @Test(expected = NullPointerException.class)
-  public void testThrowsWhenGivenNullRemoteViewsWithComponentName() {
-    new AppWidgetTarget(RuntimeEnvironment.application,
-        viewId, null /*remoteViews*/, mock(ComponentName.class));
-  }
-
-  @Test(expected = NullPointerException.class)
-  public void testThrowsWhenGivenNullWidgetIds() {
-    new AppWidgetTarget(RuntimeEnvironment.application, viewId, views, (int[]) null /*widgetIds*/);
-  }
-
-  @Test(expected = IllegalArgumentException.class)
-  public void testThrowsWhenGivenEmptyWidgetIds() {
-    new AppWidgetTarget(RuntimeEnvironment.application, viewId, views);
-  }
-
-  @Test(expected = NullPointerException.class)
-  public void testThrowsWhenGivenNullComponentName() {
-    new AppWidgetTarget(RuntimeEnvironment.application, viewId, views, (ComponentName) null);
-  }
-
-  @Implements(AppWidgetManager.class)
-  public static class UpdateShadowAppWidgetManager extends ShadowAppWidgetManager {
-    public int[] updatedWidgetIds;
-    public RemoteViews updatedRemoteViews;
-    public ComponentName updatedComponentName;
-
-    @Implementation
-    public void updateAppWidget(int[] appWidgetIds, RemoteViews views) {
-      updatedWidgetIds = appWidgetIds;
-      updatedRemoteViews = views;
-    }
-
-    @Implementation
-    public void updateAppWidget(ComponentName componentName, RemoteViews views) {
-      updatedComponentName = componentName;
-      updatedRemoteViews = views;
-    }
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/request/target/BitmapImageViewTargetTest.java b/library/src/test/java/com/bumptech/glide/request/target/BitmapImageViewTargetTest.java
deleted file mode 100644
index 31e0bb5c6..000000000
--- a/library/src/test/java/com/bumptech/glide/request/target/BitmapImageViewTargetTest.java
+++ /dev/null
@@ -1,34 +0,0 @@
-package com.bumptech.glide.request.target;
-
-import static org.junit.Assert.assertEquals;
-
-import android.graphics.Bitmap;
-import android.graphics.drawable.BitmapDrawable;
-import android.widget.ImageView;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.RuntimeEnvironment;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class BitmapImageViewTargetTest {
-
-  private ImageView view;
-  private BitmapImageViewTarget target;
-
-  @Before
-  public void setUp() {
-    view = new ImageView(RuntimeEnvironment.application);
-    target = new BitmapImageViewTarget(view);
-  }
-
-  @Test
-  public void testSetsBitmapOnViewInSetResource() {
-    Bitmap bitmap = Bitmap.createBitmap(100, 75, Bitmap.Config.RGB_565);
-    target.setResource(bitmap);
-    assertEquals(bitmap, ((BitmapDrawable) view.getDrawable()).getBitmap());
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/request/target/ImageViewTargetFactoryTest.java b/library/src/test/java/com/bumptech/glide/request/target/ImageViewTargetFactoryTest.java
deleted file mode 100644
index d0967ce08..000000000
--- a/library/src/test/java/com/bumptech/glide/request/target/ImageViewTargetFactoryTest.java
+++ /dev/null
@@ -1,59 +0,0 @@
-package com.bumptech.glide.request.target;
-
-import static com.google.common.truth.Truth.assertThat;
-
-import android.graphics.Bitmap;
-import android.graphics.Color;
-import android.graphics.drawable.BitmapDrawable;
-import android.graphics.drawable.ColorDrawable;
-import android.graphics.drawable.Drawable;
-import android.widget.ImageView;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.RuntimeEnvironment;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class ImageViewTargetFactoryTest {
-  private ImageViewTargetFactory factory;
-  private ImageView view;
-
-  @Before
-  public void setUp() {
-    factory = new ImageViewTargetFactory();
-    view = new ImageView(RuntimeEnvironment.application);
-  }
-
-  @Test
-  public void testReturnsTargetForBitmaps() {
-    Bitmap bitmap = Bitmap.createBitmap(50, 50, Bitmap.Config.ARGB_8888);
-    Target<Bitmap> target = factory.buildTarget(view, Bitmap.class);
-    target.onResourceReady(bitmap, null);
-    assertThat(target).isInstanceOf(BitmapImageViewTarget.class);
-  }
-
-  @Test
-  public void testReturnsTargetForBitmapDrawables() {
-    BitmapDrawable drawable = new BitmapDrawable(RuntimeEnvironment.application.getResources(),
-        Bitmap.createBitmap(100, 100, Bitmap.Config.ARGB_4444));
-
-    Target<BitmapDrawable> target = factory.buildTarget(view, BitmapDrawable.class);
-    target.onResourceReady(drawable, null);
-    assertThat(target).isInstanceOf(DrawableImageViewTarget.class);
-  }
-
-  @Test
-  public void testReturnsTargetForDrawables() {
-    Target<Drawable> target = factory.buildTarget(view, Drawable.class);
-    target.onResourceReady(new ColorDrawable(Color.RED), null);
-    assertThat(target).isInstanceOf(DrawableImageViewTarget.class);
-  }
-
-  @Test(expected = IllegalArgumentException.class)
-  public void testThrowsForUnknownType() {
-    factory.buildTarget(view, Object.class);
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/request/target/ImageViewTargetTest.java b/library/src/test/java/com/bumptech/glide/request/target/ImageViewTargetTest.java
deleted file mode 100644
index eeb0b1fcf..000000000
--- a/library/src/test/java/com/bumptech/glide/request/target/ImageViewTargetTest.java
+++ /dev/null
@@ -1,117 +0,0 @@
-package com.bumptech.glide.request.target;
-
-import static org.junit.Assert.assertEquals;
-import static org.junit.Assert.assertNull;
-import static org.mockito.Matchers.any;
-import static org.mockito.Matchers.eq;
-import static org.mockito.Mockito.mock;
-import static org.mockito.Mockito.verify;
-import static org.mockito.Mockito.when;
-
-import android.graphics.Color;
-import android.graphics.drawable.ColorDrawable;
-import android.graphics.drawable.Drawable;
-import android.widget.ImageView;
-import com.bumptech.glide.request.transition.Transition;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.RuntimeEnvironment;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class ImageViewTargetTest {
-
-  private ImageView view;
-  private TestTarget target;
-  private ColorDrawable drawable;
-
-  @Before
-  public void setUp() {
-    view = new ImageView(RuntimeEnvironment.application);
-    target = new TestTarget(view);
-    drawable = new ColorDrawable(Color.RED);
-  }
-
-  @Test
-  public void testReturnsCurrentDrawable() {
-    view.setImageDrawable(drawable);
-
-    assertEquals(drawable, target.getCurrentDrawable());
-  }
-
-  @Test
-  public void testSetsDrawableSetsDrawableOnView() {
-    target.setDrawable(drawable);
-
-    assertEquals(drawable, view.getDrawable());
-  }
-
-  @Test
-  public void testSetsDrawableOnLoadStarted() {
-    target.onLoadStarted(drawable);
-
-    assertEquals(drawable, view.getDrawable());
-  }
-
-  @Test
-  public void testSetDrawableOnLoadFailed() {
-    target.onLoadFailed(drawable);
-
-    assertEquals(drawable, view.getDrawable());
-  }
-
-  @Test
-  public void testSetsDrawableOnLoadCleared() {
-    target.onLoadCleared(drawable);
-
-    assertEquals(drawable, view.getDrawable());
-  }
-
-  @Test
-  public void testSetsDrawableOnViewInOnResourceReadyWhenAnimationReturnsFalse() {
-    @SuppressWarnings("unchecked") Transition<Drawable> animation = mock(Transition.class);
-    when(animation.transition(any(Drawable.class), eq(target))).thenReturn(false);
-    Drawable resource = new ColorDrawable(Color.GRAY);
-    target.onResourceReady(resource, animation);
-
-    assertEquals(resource, target.resource);
-  }
-
-  @Test
-  public void testDoesNotSetDrawableOnViewInOnResourceReadyWhenAnimationReturnsTrue() {
-    Drawable resource = new ColorDrawable(Color.RED);
-    @SuppressWarnings("unchecked") Transition<Drawable> animation = mock(Transition.class);
-    when(animation.transition(eq(resource), eq(target))).thenReturn(true);
-    target.onResourceReady(resource, animation);
-
-    assertNull(target.resource);
-  }
-
-  @Test
-  public void testProvidesCurrentPlaceholderToAnimationIfPresent() {
-    Drawable placeholder = new ColorDrawable(Color.BLACK);
-    view.setImageDrawable(placeholder);
-
-    @SuppressWarnings("unchecked") Transition<Drawable> animation = mock(Transition.class);
-
-    target.onResourceReady(new ColorDrawable(Color.GREEN), animation);
-
-    verify(animation).transition(eq(placeholder), eq(target));
-  }
-
-  private static class TestTarget extends ImageViewTarget<Drawable> {
-    public Drawable resource;
-
-    public TestTarget(ImageView view) {
-      super(view);
-    }
-
-    @Override
-    protected void setResource(Drawable resource) {
-      this.resource = resource;
-    }
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/request/target/NotificationTargetTest.java b/library/src/test/java/com/bumptech/glide/request/target/NotificationTargetTest.java
deleted file mode 100644
index e48962886..000000000
--- a/library/src/test/java/com/bumptech/glide/request/target/NotificationTargetTest.java
+++ /dev/null
@@ -1,106 +0,0 @@
-package com.bumptech.glide.request.target;
-
-import static org.junit.Assert.assertEquals;
-import static org.mockito.Matchers.eq;
-import static org.mockito.Mockito.mock;
-import static org.mockito.Mockito.verify;
-
-import android.app.Notification;
-import android.app.NotificationManager;
-import android.content.Context;
-import android.graphics.Bitmap;
-import android.widget.RemoteViews;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.RuntimeEnvironment;
-import org.robolectric.annotation.Config;
-import org.robolectric.annotation.Implementation;
-import org.robolectric.annotation.Implements;
-import org.robolectric.internal.ShadowExtractor;
-import org.robolectric.shadows.ShadowNotificationManager;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18, shadows = NotificationTargetTest
-    .UpdateShadowNotificationManager.class)
-public class NotificationTargetTest {
-  private UpdateShadowNotificationManager shadowManager;
-  private RemoteViews remoteViews;
-  private int viewId;
-  private Notification notification;
-  private int notificationId;
-  private String notificationTag;
-  private NotificationTarget target;
-
-  @Before
-  public void setUp() {
-    NotificationManager notificationManager = (NotificationManager) RuntimeEnvironment.application
-        .getSystemService(Context.NOTIFICATION_SERVICE);
-    shadowManager = (UpdateShadowNotificationManager) ShadowExtractor.extract(notificationManager);
-
-    remoteViews = mock(RemoteViews.class);
-    viewId = 123;
-    notification = mock(Notification.class);
-    notificationId = 456;
-    notificationTag = "tag";
-
-
-    target =
-        new NotificationTarget(RuntimeEnvironment.application, 100 /*width*/, 100 /*height*/,
-            viewId, remoteViews, notification, notificationId, notificationTag);
-  }
-
-  @Test
-  public void testSetsBitmapOnRemoteViewsWithGivenImageIdOnResourceReady() {
-    Bitmap bitmap = Bitmap.createBitmap(100, 100, Bitmap.Config.ARGB_8888);
-    target.onResourceReady(bitmap, null /*glideAnimation*/);
-    verify(remoteViews).setImageViewBitmap(eq(viewId), eq(bitmap));
-  }
-
-  @Test
-  public void updatesNotificationManagerWithNotificationIdAndNotificationOnResourceReady() {
-    target.onResourceReady(Bitmap.createBitmap(100, 100, Bitmap.Config.ARGB_8888), null
-    /*glideAnimation*/);
-
-    assertEquals(notificationId, shadowManager.updatedNotificationId);
-    assertEquals(notificationTag, shadowManager.updatedNotificationTag);
-    assertEquals(notification, shadowManager.updatedNotification);
-  }
-
-  @Test(expected = NullPointerException.class)
-  public void testThrowsIfContextIsNull() {
-    new NotificationTarget(null /*context*/, 100 /*width*/, 100 /*height*/,
-        123 /*viewId*/, mock(RemoteViews.class), mock(Notification.class), 456 /*notificationId*/,
-        "tag" /*notificationTag*/);
-  }
-
-
-  @Test(expected = NullPointerException.class)
-  public void testThrowsIfNotificationIsNull() {
-    new NotificationTarget(RuntimeEnvironment.application, 100 /*width*/, 100 /*height*/,
-        123 /*viewId*/, mock(RemoteViews.class), null /*notification*/, 456 /*notificationId*/,
-        "tag" /*notificationTag*/);
-  }
-
-  @Test(expected = NullPointerException.class)
-  public void testThrowsIfRemoteViewsIsNull() {
-    new NotificationTarget(RuntimeEnvironment.application, 100 /*width*/, 100 /*height*/,
-        123 /*viewId*/, null /*remoteViews*/, mock(Notification.class), 456 /*notificationId*/,
-        "tag" /*notificationTag*/);
-  }
-
-  @Implements(NotificationManager.class)
-  public static class UpdateShadowNotificationManager extends ShadowNotificationManager {
-    int updatedNotificationId;
-    String updatedNotificationTag;
-    Notification updatedNotification;
-
-    @Implementation
-    public void notify(String notificationTag, int notificationId, Notification notification) {
-      updatedNotificationTag = notificationTag;
-      updatedNotificationId = notificationId;
-      updatedNotification = notification;
-    }
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/request/target/PreloadTargetTest.java b/library/src/test/java/com/bumptech/glide/request/target/PreloadTargetTest.java
deleted file mode 100644
index e5e397f41..000000000
--- a/library/src/test/java/com/bumptech/glide/request/target/PreloadTargetTest.java
+++ /dev/null
@@ -1,48 +0,0 @@
-package com.bumptech.glide.request.target;
-
-import static org.mockito.Matchers.eq;
-import static org.mockito.Mockito.mock;
-import static org.mockito.Mockito.verify;
-
-import com.bumptech.glide.RequestManager;
-import com.bumptech.glide.request.Request;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.mockito.Mock;
-import org.mockito.MockitoAnnotations;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class PreloadTargetTest {
-
-  @Mock RequestManager requestManager;
-
-  @Before
-  public void setUp() {
-    MockitoAnnotations.initMocks(this);
-  }
-
-  @Test
-  public void testCallsSizeReadyWithGivenDimensions() {
-    int width = 1234;
-    int height = 456;
-    PreloadTarget<Object> target = PreloadTarget.obtain(requestManager, width, height);
-    SizeReadyCallback cb = mock(SizeReadyCallback.class);
-    target.getSize(cb);
-
-    verify(cb).onSizeReady(eq(width), eq(height));
-  }
-
-  @Test
-  public void testClearsTargetInOnResourceReady() {
-    Request request = mock(Request.class);
-    PreloadTarget<Object> target = PreloadTarget.obtain(requestManager, 100, 100);
-    target.setRequest(request);
-    target.onResourceReady(new Object(), null);
-
-    verify(requestManager).clear(eq(target));
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/request/target/SimpleTargetTest.java b/library/src/test/java/com/bumptech/glide/request/target/SimpleTargetTest.java
deleted file mode 100644
index 14e1362f7..000000000
--- a/library/src/test/java/com/bumptech/glide/request/target/SimpleTargetTest.java
+++ /dev/null
@@ -1,65 +0,0 @@
-package com.bumptech.glide.request.target;
-
-import static org.mockito.Mockito.mock;
-
-import com.bumptech.glide.request.transition.Transition;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.junit.runners.JUnit4;
-
-@RunWith(JUnit4.class)
-public class SimpleTargetTest {
-
-  @Test(expected = IllegalArgumentException.class)
-  public void testThrowsOnGetSizeIfGivenWidthIsLessThanZero() {
-    getTarget(-1, 1).getSize(mock(SizeReadyCallback.class));
-  }
-
-  @Test(expected = IllegalArgumentException.class)
-  public void testThrowsOnGetSizeIfGivenWidthIsEqualToZero() {
-    getTarget(0, 1).getSize(mock(SizeReadyCallback.class));
-  }
-
-  @Test(expected = IllegalArgumentException.class)
-  public void testThrowsOnGetSizeIfGivenHeightIsLessThanZero() {
-    getTarget(1, -1).getSize(mock(SizeReadyCallback.class));
-  }
-
-  @Test(expected = IllegalArgumentException.class)
-  public void testThrowsOnGetSizeIfGivenHeightIsEqualToZero() {
-    getTarget(1, 0).getSize(mock(SizeReadyCallback.class));
-  }
-
-  @Test
-  public void testCanBeConstructedWithoutDimensions() {
-    getTarget();
-  }
-
-  @Test
-  public void testConstructorDoesNotThrowWithSizeOriginal() {
-    getTarget(Target.SIZE_ORIGINAL, Target.SIZE_ORIGINAL);
-  }
-
-  @Test
-  public void testGetSizeDoesNotThrowWithSizeOriginal() {
-    getTarget(Target.SIZE_ORIGINAL, Target.SIZE_ORIGINAL).getSize(mock(SizeReadyCallback.class));
-  }
-
-  private SimpleTarget<Object> getTarget() {
-    return new SimpleTarget<Object>() {
-      @Override
-      public void onResourceReady(Object resource, Transition<? super Object> transition) {
-        // Do nothing.
-      }
-    };
-  }
-
-  private SimpleTarget<Object> getTarget(int width, int height) {
-    return new SimpleTarget<Object>(width, height) {
-      @Override
-      public void onResourceReady(Object resource, Transition<? super Object> transition) {
-        // Do nothing.
-      }
-    };
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/request/target/ViewTargetTest.java b/library/src/test/java/com/bumptech/glide/request/target/ViewTargetTest.java
deleted file mode 100644
index aea5b2891..000000000
--- a/library/src/test/java/com/bumptech/glide/request/target/ViewTargetTest.java
+++ /dev/null
@@ -1,498 +0,0 @@
-package com.bumptech.glide.request.target;
-
-import static android.view.ViewGroup.LayoutParams;
-import static android.view.ViewTreeObserver.OnPreDrawListener;
-import static com.google.common.truth.Truth.assertThat;
-import static org.junit.Assert.assertEquals;
-import static org.junit.Assert.assertNull;
-import static org.mockito.Matchers.anyInt;
-import static org.mockito.Matchers.eq;
-import static org.mockito.Mockito.inOrder;
-import static org.mockito.Mockito.mock;
-import static org.mockito.Mockito.never;
-import static org.mockito.Mockito.times;
-import static org.mockito.Mockito.verify;
-
-import android.content.Context;
-import android.graphics.drawable.Drawable;
-import android.view.View;
-import android.view.ViewTreeObserver;
-import android.view.WindowManager;
-import com.bumptech.glide.request.Request;
-import com.bumptech.glide.request.transition.Transition;
-import java.util.List;
-import java.util.concurrent.CopyOnWriteArrayList;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.mockito.InOrder;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.RuntimeEnvironment;
-import org.robolectric.Shadows;
-import org.robolectric.annotation.Config;
-import org.robolectric.annotation.Implementation;
-import org.robolectric.annotation.Implements;
-import org.robolectric.internal.ShadowExtractor;
-import org.robolectric.shadows.ShadowDisplay;
-import org.robolectric.shadows.ShadowView;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18, shadows = { ViewTargetTest.SizedShadowView.class,
-    ViewTargetTest.PreDrawShadowViewTreeObserver.class })
-public class ViewTargetTest {
-  private View view;
-  private ViewTarget<View, Object> target;
-  private SizedShadowView shadowView;
-  private PreDrawShadowViewTreeObserver shadowObserver;
-
-  @Before
-  public void setUp() {
-    view = new View(RuntimeEnvironment.application);
-    target = new TestViewTarget(view);
-
-    shadowView = (SizedShadowView) ShadowExtractor.extract(view);
-    shadowObserver =
-        (PreDrawShadowViewTreeObserver) ShadowExtractor.extract(view.getViewTreeObserver());
-  }
-
-  @Test
-  public void testReturnsWrappedView() {
-    assertEquals(view, target.getView());
-  }
-
-  @Test
-  public void testReturnsNullFromGetRequestIfNoRequestSet() {
-    assertNull(target.getRequest());
-  }
-
-  @Test(expected = IllegalArgumentException.class)
-  public void testThrowsIfViewTagIsNotRequestObject() {
-    view.setTag(new Object());
-    target.getRequest();
-  }
-
-  @Test
-  public void testCanSetAndRetrieveRequest() {
-    Request request = mock(Request.class);
-
-    target.setRequest(request);
-
-    assertEquals(request, target.getRequest());
-  }
-
-  @Test
-  public void testRetrievesRequestFromPreviousTargetForView() {
-    Request request = mock(Request.class);
-
-    target.setRequest(request);
-
-    ViewTarget<View, Object> second = new TestViewTarget(view);
-
-    assertEquals(request, second.getRequest());
-  }
-
-  @Test
-  public void testSizeCallbackIsCalledSynchronouslyIfViewSizeSet() {
-    int dimens = 333;
-    shadowView.setWidth(dimens);
-    shadowView.setHeight(dimens);
-
-    SizeReadyCallback cb = mock(SizeReadyCallback.class);
-    target.getSize(cb);
-
-    verify(cb).onSizeReady(eq(dimens), eq(dimens));
-  }
-
-  @Test
-  public void testSizeCallbackIsCalledSynchronouslyIfLayoutParamsConcreteSizeSet() {
-    int dimens = 444;
-    LayoutParams layoutParams = new LayoutParams(dimens, dimens);
-    view.setLayoutParams(layoutParams);
-
-    SizeReadyCallback cb = mock(SizeReadyCallback.class);
-    target.getSize(cb);
-
-    verify(cb).onSizeReady(eq(dimens), eq(dimens));
-  }
-
-  private void setDisplayDimens(Integer width, Integer height) {
-    WindowManager windowManager =
-        (WindowManager) RuntimeEnvironment.application.getSystemService(Context.WINDOW_SERVICE);
-    ShadowDisplay shadowDisplay = Shadows.shadowOf(windowManager.getDefaultDisplay());
-    if (width != null) {
-      shadowDisplay.setWidth(width);
-    }
-
-    if (height != null) {
-      shadowDisplay.setHeight(height);
-    }
-  }
-
-  private void setDisplayWidth(int width) {
-    setDisplayDimens(width, null);
-  }
-
-  private void setDisplayHeight(int height) {
-    setDisplayDimens(null, height);
-  }
-
-  @Test
-  public void testBothParamsWrapContent() {
-    LayoutParams layoutParams =
-        new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
-    view.setLayoutParams(layoutParams);
-
-    int width = 123;
-    int height = 456;
-    setDisplayDimens(width, height);
-    SizeReadyCallback cb = mock(SizeReadyCallback.class);
-    target.getSize(cb);
-
-    verify(cb).onSizeReady(eq(width), eq(height));
-  }
-
-  @Test
-  public void testWrapContentWidthWithValidHeight() {
-    int displayWidth = 500;
-    setDisplayWidth(displayWidth);
-
-    int height = 100;
-    LayoutParams params = new LayoutParams(LayoutParams.WRAP_CONTENT, height);
-    view.setLayoutParams(params);
-
-    SizeReadyCallback cb = mock(SizeReadyCallback.class);
-    target.getSize(cb);
-
-    verify(cb).onSizeReady(eq(displayWidth), eq(height));
-  }
-
-  @Test
-  public void testWrapContentHeightWithValidWidth() {
-    int displayHeight = 700;
-    setDisplayHeight(displayHeight);
-    int width = 100;
-    LayoutParams params = new LayoutParams(width, LayoutParams.WRAP_CONTENT);
-    view.setLayoutParams(params);
-
-    SizeReadyCallback cb = mock(SizeReadyCallback.class);
-    target.getSize(cb);
-
-    verify(cb).onSizeReady(eq(width), eq(displayHeight));
-  }
-
-  @Test
-  public void testWrapContentWidthWithMatchParentHeight() {
-    int displayWidth = 1234;
-    setDisplayWidth(displayWidth);
-
-    LayoutParams params = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.MATCH_PARENT);
-    view.setLayoutParams(params);
-
-    SizeReadyCallback cb = mock(SizeReadyCallback.class);
-    target.getSize(cb);
-
-    verify(cb, never()).onSizeReady(anyInt(), anyInt());
-
-    int height = 32;
-    shadowView.setHeight(height);
-
-    shadowObserver.fireOnPreDrawListeners();
-
-    verify(cb).onSizeReady(eq(displayWidth), eq(height));
-  }
-
-  @Test
-  public void testWrapContentHeightWithMatchParentWidth() {
-    int displayHeight = 5812;
-    setDisplayHeight(displayHeight);
-
-    LayoutParams params = new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);
-    view.setLayoutParams(params);
-
-    SizeReadyCallback cb = mock(SizeReadyCallback.class);
-    target.getSize(cb);
-
-    verify(cb, never()).onSizeReady(anyInt(), anyInt());
-
-    int width = 32;
-    shadowView.setWidth(width);
-    shadowObserver.fireOnPreDrawListeners();
-
-    verify(cb).onSizeReady(eq(width), eq(displayHeight));
-  }
-
-  @Test
-  public void testMatchParentWidthAndHeight() {
-    LayoutParams params = new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);
-    view.setLayoutParams(params);
-
-    SizeReadyCallback cb = mock(SizeReadyCallback.class);
-    target.getSize(cb);
-
-    verify(cb, never()).onSizeReady(anyInt(), anyInt());
-
-    int width = 32;
-    int height = 45;
-    shadowView.setWidth(width);
-    shadowView.setHeight(height);
-    shadowObserver.fireOnPreDrawListeners();
-
-    verify(cb).onSizeReady(eq(width), eq(height));
-  }
-
-  @Test
-  public void testSizeCallbackIsCalledPreDrawIfNoDimensAndNoLayoutParams() {
-    SizeReadyCallback cb = mock(SizeReadyCallback.class);
-    target.getSize(cb);
-
-    int width = 12;
-    int height = 32;
-    shadowView.setWidth(width);
-    shadowView.setHeight(height);
-    shadowObserver.fireOnPreDrawListeners();
-
-    verify(cb).onSizeReady(eq(width), eq(height));
-  }
-
-  @Test
-  public void testSizeCallbacksAreCalledInOrderPreDraw() {
-    SizeReadyCallback[] cbs = new SizeReadyCallback[25];
-    for (int i = 0; i < cbs.length; i++) {
-      cbs[i] = mock(SizeReadyCallback.class);
-      target.getSize(cbs[i]);
-    }
-
-    int width = 100, height = 111;
-    shadowView.setWidth(width);
-    shadowView.setHeight(height);
-    shadowObserver.fireOnPreDrawListeners();
-
-    InOrder order = inOrder((Object[]) cbs);
-    for (SizeReadyCallback cb : cbs) {
-      order.verify(cb).onSizeReady(eq(width), eq(height));
-    }
-  }
-
-  @Test
-  public void testDoesNotNotifyCallbackTwiceIfAddedTwice() {
-    SizeReadyCallback cb = mock(SizeReadyCallback.class);
-    target.getSize(cb);
-    target.getSize(cb);
-
-    view.setLayoutParams(new LayoutParams(100, 100));
-    shadowObserver.fireOnPreDrawListeners();
-
-    verify(cb, times(1)).onSizeReady(anyInt(), anyInt());
-  }
-
-  @Test
-  public void testDoesNotAddMultipleListenersIfMultipleCallbacksAreAdded() {
-    SizeReadyCallback cb1 = mock(SizeReadyCallback.class);
-    SizeReadyCallback cb2 = mock(SizeReadyCallback.class);
-    target.getSize(cb1);
-    target.getSize(cb2);
-    assertThat(shadowObserver.getPreDrawListeners()).hasSize(1);
-  }
-
-  @Test
-  public void testDoesAddSecondListenerIfFirstListenerIsRemovedBeforeSecondRequest() {
-    SizeReadyCallback cb1 = mock(SizeReadyCallback.class);
-    target.getSize(cb1);
-
-    view.setLayoutParams(new LayoutParams(100, 100));
-    shadowObserver.fireOnPreDrawListeners();
-
-    assertThat(shadowObserver.getPreDrawListeners()).hasSize(0);
-
-    SizeReadyCallback cb2 = mock(SizeReadyCallback.class);
-    view.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
-    target.getSize(cb2);
-
-    view.setLayoutParams(new LayoutParams(100, 100));
-    shadowObserver.fireOnPreDrawListeners();
-
-    verify(cb2).onSizeReady(anyInt(), anyInt());
-  }
-
-  @Test
-  public void testSizeCallbackIsNotCalledPreDrawIfNoDimensSetOnPreDraw() {
-    SizeReadyCallback cb = mock(SizeReadyCallback.class);
-    target.getSize(cb);
-    shadowObserver.fireOnPreDrawListeners();
-
-    verify(cb, never()).onSizeReady(anyInt(), anyInt());
-    assertThat(shadowObserver.getPreDrawListeners()).hasSize(1);
-  }
-
-  @Test
-  public void testSizeCallbackIsCalledPreDrawIfNoDimensAndNoLayoutParamsButLayoutParamsSetLater() {
-    SizeReadyCallback cb = mock(SizeReadyCallback.class);
-    target.getSize(cb);
-
-    int width = 689;
-    int height = 354;
-    LayoutParams layoutParams = new LayoutParams(width, height);
-    view.setLayoutParams(layoutParams);
-    shadowObserver.fireOnPreDrawListeners();
-
-    verify(cb).onSizeReady(eq(width), eq(height));
-  }
-
-  @Test
-  public void testCallbackIsNotCalledTwiceIfPreDrawFiresTwice() {
-    SizeReadyCallback cb = mock(SizeReadyCallback.class);
-    target.getSize(cb);
-
-    LayoutParams layoutParams = new LayoutParams(1234, 4123);
-    view.setLayoutParams(layoutParams);
-    shadowObserver.fireOnPreDrawListeners();
-    shadowObserver.fireOnPreDrawListeners();
-
-    verify(cb, times(1)).onSizeReady(anyInt(), anyInt());
-  }
-
-  @Test
-  public void testCallbacksFromMultipleRequestsAreNotifiedOnPreDraw() {
-    SizeReadyCallback firstCb = mock(SizeReadyCallback.class);
-    SizeReadyCallback secondCb = mock(SizeReadyCallback.class);
-    target.getSize(firstCb);
-    target.getSize(secondCb);
-
-    int width = 68;
-    int height = 875;
-    LayoutParams layoutParams = new LayoutParams(width, height);
-    view.setLayoutParams(layoutParams);
-    shadowObserver.fireOnPreDrawListeners();
-    shadowObserver.fireOnPreDrawListeners();
-
-    verify(firstCb, times(1)).onSizeReady(eq(width), eq(height));
-    verify(secondCb, times(1)).onSizeReady(eq(width), eq(height));
-  }
-
-  @Test
-  public void testDoesNotThrowOnPreDrawIfViewTreeObserverIsDead() {
-    SizeReadyCallback cb = mock(SizeReadyCallback.class);
-    target.getSize(cb);
-
-    int width = 1;
-    int height = 2;
-    LayoutParams layoutParams = new LayoutParams(width, height);
-    view.setLayoutParams(layoutParams);
-    shadowObserver.setIsAlive(false);
-    shadowObserver.fireOnPreDrawListeners();
-
-    verify(cb).onSizeReady(eq(width), eq(height));
-  }
-
-  @Test(expected = NullPointerException.class)
-  public void testThrowsIfGivenNullView() {
-    new TestViewTarget(null);
-  }
-
-  @Test
-  public void testDecreasesDimensionsByViewPadding() {
-    SizeReadyCallback cb = mock(SizeReadyCallback.class);
-    view.setLayoutParams(new LayoutParams(100, 100));
-    view.setPadding(25, 25, 25, 25);
-
-    target.getSize(cb);
-
-    verify(cb).onSizeReady(50, 50);
-  }
-
-  @Implements(ViewTreeObserver.class)
-  public static class PreDrawShadowViewTreeObserver {
-    private CopyOnWriteArrayList<OnPreDrawListener> preDrawListeners = new CopyOnWriteArrayList<>();
-    private boolean isAlive = true;
-
-    @SuppressWarnings("unused")
-    @Implementation
-    public void addOnPreDrawListener(OnPreDrawListener listener) {
-      checkIsAlive();
-      preDrawListeners.add(listener);
-    }
-
-    @SuppressWarnings("unused")
-    @Implementation
-    public void removeOnPreDrawListener(OnPreDrawListener listener) {
-      checkIsAlive();
-      preDrawListeners.remove(listener);
-    }
-
-    @Implementation
-    public boolean isAlive() {
-      return isAlive;
-    }
-
-    private void checkIsAlive() {
-      if (!isAlive()) {
-        throw new IllegalStateException("ViewTreeObserver is not alive!");
-      }
-    }
-
-    public void setIsAlive(boolean isAlive) {
-      this.isAlive = isAlive;
-    }
-
-    public void fireOnPreDrawListeners() {
-      for (OnPreDrawListener listener : preDrawListeners) {
-        listener.onPreDraw();
-      }
-    }
-
-    public List<OnPreDrawListener> getPreDrawListeners() {
-      return preDrawListeners;
-    }
-  }
-
-  @Implements(View.class)
-  public static class SizedShadowView extends ShadowView {
-    private int width;
-    private int height;
-
-    public void setWidth(int width) {
-      this.width = width;
-    }
-
-    public void setHeight(int height) {
-      this.height = height;
-    }
-
-    @Implementation
-    public int getWidth() {
-      return width;
-    }
-
-    @Implementation
-    public int getHeight() {
-      return height;
-    }
-  }
-
-  private static class TestViewTarget extends ViewTarget<View, Object> {
-
-    public TestViewTarget(View view) {
-      super(view);
-    }
-
-    @Override
-    public void onLoadStarted(Drawable placeholder) {
-
-    }
-
-    @Override
-    public void onLoadFailed(Drawable errorDrawable) {
-
-    }
-
-    @Override
-    public void onResourceReady(Object resource, Transition<? super Object> transition) {
-
-    }
-
-    @Override
-    public void onLoadCleared(Drawable placeholder) {
-
-    }
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/request/transition/DrawableCrossFadeFactoryTest.java b/library/src/test/java/com/bumptech/glide/request/transition/DrawableCrossFadeFactoryTest.java
deleted file mode 100644
index 98d37cb3d..000000000
--- a/library/src/test/java/com/bumptech/glide/request/transition/DrawableCrossFadeFactoryTest.java
+++ /dev/null
@@ -1,46 +0,0 @@
-package com.bumptech.glide.request.transition;
-
-import static org.junit.Assert.assertEquals;
-import static org.junit.Assert.assertNotEquals;
-import static org.mockito.Mockito.mock;
-
-import android.graphics.drawable.Drawable;
-import com.bumptech.glide.load.DataSource;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class DrawableCrossFadeFactoryTest {
-
-  private DrawableCrossFadeFactory factory;
-
-  @SuppressWarnings("unchecked")
-  @Before
-  public void setUp() {
-    ViewAnimationFactory<Drawable> viewAnimationFactory = mock(ViewAnimationFactory.class);
-    factory = new DrawableCrossFadeFactory(viewAnimationFactory, 100 /*duration*/,
-        false /*isCrossFadeEnabled*/);
-  }
-
-  @Test
-  public void testReturnsNoAnimationIfFromMemoryCache() {
-    assertEquals(NoTransition.<Drawable>get(),
-        factory.build(DataSource.MEMORY_CACHE, true /*isFirstResource*/));
-  }
-
-  @Test
-  public void testReturnsReturnsAnimationIfNotFromMemoryCacheAndIsFirstResource() {
-    assertNotEquals(NoTransition.<Drawable>get(),
-        factory.build(DataSource.DATA_DISK_CACHE, true /*isFirstResource*/));
-  }
-
-  @Test
-  public void testReturnsAnimationIfNotFromMemoryCacheAndNotIsFirstResource() {
-    assertNotEquals(NoTransition.<Drawable>get(),
-        factory.build(DataSource.DATA_DISK_CACHE, false /*isFirstResource*/));
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/request/transition/DrawableCrossFadeViewAnimationTest.java b/library/src/test/java/com/bumptech/glide/request/transition/DrawableCrossFadeViewAnimationTest.java
deleted file mode 100644
index 6ade60e8b..000000000
--- a/library/src/test/java/com/bumptech/glide/request/transition/DrawableCrossFadeViewAnimationTest.java
+++ /dev/null
@@ -1,78 +0,0 @@
-package com.bumptech.glide.request.transition;
-
-import static com.bumptech.glide.request.transition.Transition.ViewAdapter;
-import static org.junit.Assert.assertFalse;
-import static org.junit.Assert.assertTrue;
-import static org.mockito.Matchers.any;
-import static org.mockito.Matchers.eq;
-import static org.mockito.Mockito.mock;
-import static org.mockito.Mockito.verify;
-import static org.mockito.Mockito.when;
-
-import android.graphics.Color;
-import android.graphics.drawable.ColorDrawable;
-import android.graphics.drawable.Drawable;
-import android.graphics.drawable.TransitionDrawable;
-import android.widget.ImageView;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class DrawableCrossFadeViewAnimationTest {
-  private CrossFadeHarness harness;
-
-  @Before
-  public void setup() {
-    harness = new CrossFadeHarness();
-  }
-
-  @Test
-  public void testStartsDefaultAnimationIfNoPreviousDrawableIsNotSet() {
-    when(harness.adapter.getView()).thenReturn(harness.view);
-    harness.animation.transition(harness.current, harness.adapter);
-    verify(harness.defaultAnimation).transition(eq(harness.current), eq(harness.adapter));
-  }
-
-  @Test
-  public void testIgnoresNullViews() {
-    when(harness.adapter.getView()).thenReturn(null);
-    harness.animation.transition(harness.current, harness.adapter);
-  }
-
-  @Test
-  public void testReturnsFalseIfStartsDefaultAnimation() {
-    assertFalse(harness.animation.transition(harness.current, harness.adapter));
-  }
-
-  @Test
-  public void testSetsTransitionDrawableIfPreviousIsNotNull() {
-    Drawable previous = new ColorDrawable(Color.WHITE);
-    when(harness.adapter.getCurrentDrawable()).thenReturn(previous);
-    harness.animation.transition(harness.current, harness.adapter);
-
-    verify(harness.adapter).setDrawable(any(TransitionDrawable.class));
-  }
-
-  @Test
-  public void testReturnsTrueIfSetsTransitionDrawable() {
-    Drawable previous = new ColorDrawable(Color.RED);
-    when(harness.adapter.getCurrentDrawable()).thenReturn(previous);
-    assertTrue(harness.animation.transition(harness.current, harness.adapter));
-  }
-
-  @SuppressWarnings("unchecked")
-  private static class CrossFadeHarness {
-    Drawable current = new ColorDrawable(Color.GRAY);
-    ViewAdapter adapter = mock(ViewAdapter.class);
-    ImageView view = mock(ImageView.class);
-    Transition<Drawable> defaultAnimation = mock(Transition.class);
-    int duration = 200;
-    DrawableCrossFadeTransition animation =
-        new DrawableCrossFadeTransition(defaultAnimation, duration, true /*isCrossFadeEnabled*/);
-  }
-}
-
diff --git a/library/src/test/java/com/bumptech/glide/request/transition/ViewAnimationTest.java b/library/src/test/java/com/bumptech/glide/request/transition/ViewAnimationTest.java
deleted file mode 100644
index bdfef1c41..000000000
--- a/library/src/test/java/com/bumptech/glide/request/transition/ViewAnimationTest.java
+++ /dev/null
@@ -1,58 +0,0 @@
-package com.bumptech.glide.request.transition;
-
-import static com.bumptech.glide.request.transition.Transition.ViewAdapter;
-import static org.junit.Assert.assertFalse;
-import static org.mockito.Matchers.any;
-import static org.mockito.Matchers.eq;
-import static org.mockito.Mockito.mock;
-import static org.mockito.Mockito.verify;
-import static org.mockito.Mockito.when;
-
-import android.content.Context;
-import android.view.animation.Animation;
-import android.widget.ImageView;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class ViewAnimationTest {
-  private ViewTransition<Object> viewAnimation;
-  private ViewAdapter adapter;
-  private ImageView view;
-  private ViewTransition.ViewTransitionAnimationFactory viewTransitionAnimationFactory;
-
-  @SuppressWarnings("unchecked")
-  @Before
-  public void setUp() {
-    viewTransitionAnimationFactory = mock(ViewTransition.ViewTransitionAnimationFactory.class);
-    view = mock(ImageView.class);
-    adapter = mock(ViewAdapter.class);
-    when(adapter.getView()).thenReturn(view);
-    viewAnimation = new ViewTransition<>(viewTransitionAnimationFactory);
-  }
-
-  @Test
-  public void testClearsAnimationOnAnimate() {
-    viewAnimation.transition(null, adapter);
-
-    verify(view).clearAnimation();
-  }
-
-  @Test
-  public void testAlwaysReturnsFalse() {
-    assertFalse(viewAnimation.transition(null, adapter));
-  }
-
-  @Test
-  public void testStartsAnimationOnAnimate() {
-    Animation animation = mock(Animation.class);
-    when(viewTransitionAnimationFactory.build(any(Context.class))).thenReturn(animation);
-    viewAnimation.transition(null, adapter);
-    verify(view).clearAnimation();
-    verify(view).startAnimation(eq(animation));
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/request/transition/ViewPropertyAnimationTest.java b/library/src/test/java/com/bumptech/glide/request/transition/ViewPropertyAnimationTest.java
deleted file mode 100644
index 2b50c15d8..000000000
--- a/library/src/test/java/com/bumptech/glide/request/transition/ViewPropertyAnimationTest.java
+++ /dev/null
@@ -1,55 +0,0 @@
-package com.bumptech.glide.request.transition;
-
-import static com.bumptech.glide.request.transition.Transition.ViewAdapter;
-import static org.junit.Assert.assertFalse;
-import static org.mockito.Matchers.any;
-import static org.mockito.Matchers.eq;
-import static org.mockito.Mockito.mock;
-import static org.mockito.Mockito.never;
-import static org.mockito.Mockito.verify;
-import static org.mockito.Mockito.when;
-
-import android.view.View;
-import android.widget.ImageView;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.RuntimeEnvironment;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class ViewPropertyAnimationTest {
-  private ViewPropertyTransition.Animator animator;
-  private ViewPropertyTransition<Object> animation;
-
-  @Before
-  public void setUp() {
-    animator = mock(ViewPropertyTransition.Animator.class);
-    animation = new ViewPropertyTransition<>(animator);
-  }
-
-  @Test
-  public void testAlwaysReturnsFalse() {
-    assertFalse(animation.transition(new Object(), mock(ViewAdapter.class)));
-  }
-
-  @Test
-  public void testCallsAnimatorWithGivenView() {
-    ImageView view = new ImageView(RuntimeEnvironment.application);
-    ViewAdapter adapter = mock(ViewAdapter.class);
-    when(adapter.getView()).thenReturn(view);
-    animation.transition(new Object(), adapter);
-
-    verify(animator).animate(eq(view));
-  }
-
-  @Test
-  public void testDoesNotCallAnimatorIfGivenAdapterWithNullView() {
-    ViewAdapter adapter = mock(ViewAdapter.class);
-    animation.transition(new Object(), adapter);
-
-    verify(animator, never()).animate(any(View.class));
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/request/transition/ViewPropertyViewTransitionAnimationFactoryTest.java b/library/src/test/java/com/bumptech/glide/request/transition/ViewPropertyViewTransitionAnimationFactoryTest.java
deleted file mode 100644
index 831a9d047..000000000
--- a/library/src/test/java/com/bumptech/glide/request/transition/ViewPropertyViewTransitionAnimationFactoryTest.java
+++ /dev/null
@@ -1,41 +0,0 @@
-package com.bumptech.glide.request.transition;
-
-import static org.junit.Assert.assertEquals;
-import static org.junit.Assert.assertNotEquals;
-import static org.mockito.Mockito.mock;
-
-import com.bumptech.glide.load.DataSource;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.junit.runners.JUnit4;
-
-@RunWith(JUnit4.class)
-public class ViewPropertyViewTransitionAnimationFactoryTest {
-
-  private ViewPropertyAnimationFactory<Object> factory;
-
-  @Before
-  public void setUp() {
-    ViewPropertyTransition.Animator animator = mock(ViewPropertyTransition.Animator.class);
-    factory = new ViewPropertyAnimationFactory<>(animator);
-  }
-
-  @Test
-  public void testReturnsNoAnimationIfFromMemoryCache() {
-    assertEquals(NoTransition.get(),
-        factory.build(DataSource.MEMORY_CACHE, true /*isFirstResource*/));
-  }
-
-  @Test
-  public void testReturnsNoAnimationIfNotFirstResource() {
-    assertEquals(NoTransition.get(),
-        factory.build(DataSource.DATA_DISK_CACHE, false /*isFirstResource*/));
-  }
-
-  @Test
-  public void testReturnsAnimationIfNotFromMemoryCacheAndFirstResource() {
-    assertNotEquals(NoTransition.get(),
-        factory.build(DataSource.DATA_DISK_CACHE, true /*isFirstResource*/));
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/request/transition/ViewTransitionAnimationFactoryTest.java b/library/src/test/java/com/bumptech/glide/request/transition/ViewTransitionAnimationFactoryTest.java
deleted file mode 100644
index 6f1cb4ec5..000000000
--- a/library/src/test/java/com/bumptech/glide/request/transition/ViewTransitionAnimationFactoryTest.java
+++ /dev/null
@@ -1,65 +0,0 @@
-package com.bumptech.glide.request.transition;
-
-import static org.junit.Assert.assertEquals;
-import static org.mockito.Matchers.any;
-import static org.mockito.Matchers.eq;
-import static org.mockito.Mockito.mock;
-import static org.mockito.Mockito.never;
-import static org.mockito.Mockito.verify;
-import static org.mockito.Mockito.when;
-
-import android.content.Context;
-import android.view.View;
-import android.view.animation.Animation;
-import com.bumptech.glide.load.DataSource;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.RuntimeEnvironment;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE)
-public class ViewTransitionAnimationFactoryTest {
-  private ViewTransition.ViewTransitionAnimationFactory viewTransitionAnimationFactory;
-  private ViewAnimationFactory<Object> factory;
-
-  @Before
-  public void setUp() {
-    viewTransitionAnimationFactory = mock(ViewTransition.ViewTransitionAnimationFactory.class);
-    factory = new ViewAnimationFactory<>(viewTransitionAnimationFactory);
-  }
-
-  @Test
-  public void testFactoryReturnsNoAnimationIfFromMemoryCache() {
-    Transition<Object> animation =
-        factory.build(DataSource.MEMORY_CACHE, true /*isFirstResource*/);
-    assertEquals(NoTransition.get(), animation);
-    verify(viewTransitionAnimationFactory, never()).build(RuntimeEnvironment.application);
-  }
-
-  @Test
-  public void testFactoryReturnsNoAnimationIfNotFirstResource() {
-    Transition<Object> animation =
-        factory.build(DataSource.DATA_DISK_CACHE, false /*isFirstResource*/);
-    assertEquals(NoTransition.get(), animation);
-    verify(viewTransitionAnimationFactory, never()).build(RuntimeEnvironment.application);
-  }
-
-  @Test
-  public void testFactoryReturnsActualAnimationIfNotIsFromMemoryCacheAndIsFirstResource() {
-    Transition<Object> transition =
-        factory.build(DataSource.DATA_DISK_CACHE, true /*isFirstResource*/);
-
-    Animation animation = mock(Animation.class);
-    when(viewTransitionAnimationFactory.build(any(Context.class))).thenReturn(animation);
-
-    Transition.ViewAdapter adapter = mock(Transition.ViewAdapter.class);
-    View view = mock(View.class);
-    when(adapter.getView()).thenReturn(view);
-    transition.transition(new Object(), adapter);
-
-    verify(view).startAnimation(eq(animation));
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/resize/load/ExifTest.java b/library/src/test/java/com/bumptech/glide/resize/load/ExifTest.java
deleted file mode 100644
index 649c906de..000000000
--- a/library/src/test/java/com/bumptech/glide/resize/load/ExifTest.java
+++ /dev/null
@@ -1,83 +0,0 @@
-package com.bumptech.glide.resize.load;
-
-import static com.google.common.truth.Truth.assertThat;
-import static org.junit.Assert.assertEquals;
-
-import com.bumptech.glide.load.engine.bitmap_recycle.ArrayPool;
-import com.bumptech.glide.load.engine.bitmap_recycle.LruArrayPool;
-import com.bumptech.glide.load.resource.bitmap.ImageHeaderParser;
-import com.bumptech.glide.testutil.TestResourceUtil;
-import java.io.IOException;
-import java.io.InputStream;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class ExifTest {
-
-  private ArrayPool byteArrayPool;
-
-  private InputStream open(String imageName) throws IOException {
-    return TestResourceUtil.openResource(getClass(), "exif-orientation-examples/" + imageName);
-  }
-
-  private void assertOrientation(String filePrefix, int expectedOrientation) {
-    InputStream is = null;
-    try {
-      is = open(filePrefix + "_" + expectedOrientation + ".jpg");
-      assertEquals(new ImageHeaderParser(is, byteArrayPool).getOrientation(),
-          expectedOrientation);
-    } catch (IOException e) {
-      throw new RuntimeException(e);
-    } finally {
-      if (is != null) {
-        try {
-          is.close();
-        } catch (IOException e) {
-          // Do nothing.
-        }
-      }
-    }
-  }
-
-  @Before
-  public void setUp() {
-    byteArrayPool = new LruArrayPool();
-  }
-
-  @Test
-  public void testIssue387() throws IOException {
-    InputStream is = TestResourceUtil.openResource(getClass(), "issue387_rotated_jpeg.jpg");
-    assertThat(new ImageHeaderParser(is, byteArrayPool).getOrientation()).isEqualTo(6);
-  }
-
-  @Test
-  public void testLandscape() throws IOException {
-    for (int i = 1; i <= 8; i++) {
-      assertOrientation("Landscape", i);
-    }
-  }
-
-  @Test
-  public void testPortrait() throws IOException {
-    for (int i = 1; i <= 8; i++) {
-      assertOrientation("Portrait", i);
-    }
-  }
-
-  @Test
-  public void testHandlesInexactSizesInByteArrayPools() {
-    for (int i = 1; i <= 8; i++) {
-      byteArrayPool.put(new byte[ArrayPool.STANDARD_BUFFER_SIZE_BYTES], byte[].class);
-      assertOrientation("Portrait", i);
-    }
-    for (int i = 1; i <= 8; i++) {
-      byteArrayPool.put(new byte[ArrayPool.STANDARD_BUFFER_SIZE_BYTES], byte[].class);
-      assertOrientation("Landscape", i);
-    }
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/signature/ApplicationVersionSignatureTest.java b/library/src/test/java/com/bumptech/glide/signature/ApplicationVersionSignatureTest.java
deleted file mode 100644
index 7a55e9990..000000000
--- a/library/src/test/java/com/bumptech/glide/signature/ApplicationVersionSignatureTest.java
+++ /dev/null
@@ -1,38 +0,0 @@
-package com.bumptech.glide.signature;
-
-import static org.junit.Assert.assertNotNull;
-
-import com.bumptech.glide.load.Key;
-import com.bumptech.glide.tests.KeyAssertions;
-import java.io.UnsupportedEncodingException;
-import java.security.NoSuchAlgorithmException;
-import org.junit.After;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.RuntimeEnvironment;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class ApplicationVersionSignatureTest {
-
-  @After
-  public void tearDown() {
-    ApplicationVersionSignature.reset();
-  }
-
-  @Test
-  public void testCanGetKeyForSignature() {
-    Key key = ApplicationVersionSignature.obtain(RuntimeEnvironment.application);
-    assertNotNull(key);
-  }
-
-  @Test
-  public void testKeyForSignatureIsTheSameAcrossCallsInTheSamePackage()
-      throws NoSuchAlgorithmException, UnsupportedEncodingException {
-    Key first = ApplicationVersionSignature.obtain(RuntimeEnvironment.application);
-    Key second = ApplicationVersionSignature.obtain(RuntimeEnvironment.application);
-    KeyAssertions.assertSame(first, second);
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/signature/MediaStoreSignatureTest.java b/library/src/test/java/com/bumptech/glide/signature/MediaStoreSignatureTest.java
deleted file mode 100644
index 7f465fb23..000000000
--- a/library/src/test/java/com/bumptech/glide/signature/MediaStoreSignatureTest.java
+++ /dev/null
@@ -1,48 +0,0 @@
-package com.bumptech.glide.signature;
-
-import com.bumptech.glide.tests.KeyAssertions;
-import java.io.UnsupportedEncodingException;
-import java.security.NoSuchAlgorithmException;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.junit.runners.JUnit4;
-
-@RunWith(JUnit4.class)
-public class MediaStoreSignatureTest {
-
-  @Test
-  public void testSignaturesDifferIfMimeTypeDiffers()
-      throws UnsupportedEncodingException, NoSuchAlgorithmException {
-    MediaStoreSignature first = new MediaStoreSignature("first", 100, 1);
-    MediaStoreSignature second = new MediaStoreSignature("second", 100, 1);
-
-    KeyAssertions.assertDifferent(first, second);
-  }
-
-  @Test
-  public void testSignaturesDifferIfDateModifiedDiffers()
-      throws UnsupportedEncodingException, NoSuchAlgorithmException {
-    MediaStoreSignature first = new MediaStoreSignature("mimeType", 100, 1);
-    MediaStoreSignature second = new MediaStoreSignature("mimeType", 999, 1);
-
-    KeyAssertions.assertDifferent(first, second);
-  }
-
-  @Test
-  public void testSignaturesDifferIfOrientationDiffers()
-      throws UnsupportedEncodingException, NoSuchAlgorithmException {
-    MediaStoreSignature first = new MediaStoreSignature("mimeType", 100, 1);
-    MediaStoreSignature second = new MediaStoreSignature("mimeType", 100, 9);
-
-    KeyAssertions.assertDifferent(first, second);
-  }
-
-  @Test
-  public void testSignaturesAreTheSameIfAllArgsAreTheSame()
-      throws UnsupportedEncodingException, NoSuchAlgorithmException {
-    MediaStoreSignature first = new MediaStoreSignature("mimeType", 100, 1);
-    MediaStoreSignature second = new MediaStoreSignature("mimeType", 100, 1);
-
-    KeyAssertions.assertSame(first, second);
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/signature/ObjectKeyTest.java b/library/src/test/java/com/bumptech/glide/signature/ObjectKeyTest.java
deleted file mode 100644
index 21570323c..000000000
--- a/library/src/test/java/com/bumptech/glide/signature/ObjectKeyTest.java
+++ /dev/null
@@ -1,18 +0,0 @@
-package com.bumptech.glide.signature;
-
-import com.bumptech.glide.tests.KeyAssertions;
-import java.security.NoSuchAlgorithmException;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.junit.runners.JUnit4;
-
-@RunWith(JUnit4.class)
-public class ObjectKeyTest {
-
-  @Test
-  public void testEquals() throws NoSuchAlgorithmException {
-    Object object = new Object();
-    KeyAssertions.assertSame(new ObjectKey(object), new ObjectKey(object));
-    KeyAssertions.assertDifferent(new ObjectKey(object), new ObjectKey(new Object()));
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/tests/BackgroundUtil.java b/library/src/test/java/com/bumptech/glide/tests/BackgroundUtil.java
deleted file mode 100644
index 796a09240..000000000
--- a/library/src/test/java/com/bumptech/glide/tests/BackgroundUtil.java
+++ /dev/null
@@ -1,35 +0,0 @@
-package com.bumptech.glide.tests;
-
-public class BackgroundUtil {
-  public interface BackgroundTester {
-    public void runTest() throws Exception;
-  }
-
-  public static void testInBackground(BackgroundTester test) throws InterruptedException {
-    TestThread thread = new TestThread(test);
-    thread.start();
-    thread.join();
-    if (thread.exception != null) {
-      throw new RuntimeException(thread.exception);
-    }
-  }
-
-  private static class TestThread extends Thread {
-    private Exception exception;
-    private BackgroundTester test;
-
-    public TestThread(BackgroundTester test) {
-      this.test = test;
-    }
-
-    @Override
-    public void run() {
-      super.run();
-      try {
-        test.runTest();
-      } catch (Exception e) {
-        exception = e;
-      }
-    }
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/tests/ContentResolverShadow.java b/library/src/test/java/com/bumptech/glide/tests/ContentResolverShadow.java
deleted file mode 100644
index 326096bad..000000000
--- a/library/src/test/java/com/bumptech/glide/tests/ContentResolverShadow.java
+++ /dev/null
@@ -1,34 +0,0 @@
-package com.bumptech.glide.tests;
-
-import android.content.ContentResolver;
-import android.content.res.AssetFileDescriptor;
-import android.net.Uri;
-import java.io.InputStream;
-import java.util.HashMap;
-import java.util.Map;
-import org.robolectric.annotation.Implementation;
-import org.robolectric.annotation.Implements;
-
-@Implements(ContentResolver.class)
-public class ContentResolverShadow {
-  private final Map<Uri, AssetFileDescriptor> fileDescriptorMap = new HashMap<>();
-  private final Map<Uri, InputStream> inputStreamMap = new HashMap<>();
-
-  public void registerFileDescriptor(Uri uri, AssetFileDescriptor fileDescriptor) {
-    fileDescriptorMap.put(uri, fileDescriptor);
-  }
-
-  public void registerInputStream(Uri uri, InputStream inputStream) {
-    inputStreamMap.put(uri, inputStream);
-  }
-
-  @Implementation
-  public InputStream openInputStream(Uri uri) {
-    return inputStreamMap.get(uri);
-  }
-
-  @Implementation
-  public AssetFileDescriptor openAssetFileDescriptor(Uri uri, String mode) {
-    return fileDescriptorMap.get(uri);
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/tests/GlideShadowLog.java b/library/src/test/java/com/bumptech/glide/tests/GlideShadowLog.java
deleted file mode 100644
index ddd9d06b8..000000000
--- a/library/src/test/java/com/bumptech/glide/tests/GlideShadowLog.java
+++ /dev/null
@@ -1,20 +0,0 @@
-package com.bumptech.glide.tests;
-
-import android.util.Log;
-import org.robolectric.annotation.Implementation;
-import org.robolectric.annotation.Implements;
-import org.robolectric.shadows.ShadowLog;
-
-/**
- * Exists only to "enable" logging for test coverage.
- *
- * TODO: when we can ignore Log.* via configuration, remove this class.
- */
-@Implements(Log.class)
-public class GlideShadowLog extends ShadowLog {
-
-  @Implementation
-  public static boolean isLoggable(String tag, int level) {
-    return true;
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/tests/GlideShadowLooper.java b/library/src/test/java/com/bumptech/glide/tests/GlideShadowLooper.java
deleted file mode 100644
index 7b94a888c..000000000
--- a/library/src/test/java/com/bumptech/glide/tests/GlideShadowLooper.java
+++ /dev/null
@@ -1,18 +0,0 @@
-package com.bumptech.glide.tests;
-
-import static org.mockito.Mockito.mock;
-
-import android.os.Looper;
-import android.os.MessageQueue;
-import org.robolectric.annotation.Implementation;
-import org.robolectric.annotation.Implements;
-import org.robolectric.shadows.ShadowLooper;
-
-@Implements(Looper.class)
-public class GlideShadowLooper extends ShadowLooper {
-
-  @Implementation
-  public static MessageQueue myQueue() {
-    return mock(MessageQueue.class);
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/tests/KeyAssertions.java b/library/src/test/java/com/bumptech/glide/tests/KeyAssertions.java
deleted file mode 100644
index 5ee17790a..000000000
--- a/library/src/test/java/com/bumptech/glide/tests/KeyAssertions.java
+++ /dev/null
@@ -1,52 +0,0 @@
-package com.bumptech.glide.tests;
-
-import static com.google.common.truth.Truth.assertThat;
-
-import com.bumptech.glide.load.Key;
-import com.google.common.testing.EqualsTester;
-import java.security.MessageDigest;
-import java.security.NoSuchAlgorithmException;
-
-public class KeyAssertions {
-
-  public static void assertSame(Key first, Key second) throws NoSuchAlgorithmException {
-    assertSameOrdered(first, second);
-    assertSameOrdered(second, first);
-  }
-
-  private static void assertSameOrdered(Key first, Key second) throws NoSuchAlgorithmException {
-    new EqualsTester()
-        .addEqualityGroup(first, second)
-        .testEquals();
-
-    assertThat(getDigest(first)).isEqualTo(getDigest(second));
-  }
-
-  public static void assertDifferent(Key first, Key second) throws NoSuchAlgorithmException {
-    assertDifferent(first, second, true);
-    assertDifferent(second, first, true);
-  }
-
-  public static void assertDifferent(Key first, Key second, boolean checkDiskCacheKey)
-      throws NoSuchAlgorithmException {
-    new EqualsTester()
-        .addEqualityGroup(first)
-        .addEqualityGroup(second)
-        .testEquals();
-
-    if (checkDiskCacheKey) {
-      MessageDigest firstDigest = MessageDigest.getInstance("SHA-1");
-      first.updateDiskCacheKey(firstDigest);
-      MessageDigest secondDigest = MessageDigest.getInstance("SHA-1");
-      second.updateDiskCacheKey(secondDigest);
-
-      assertThat(getDigest(first)).isNotEqualTo(getDigest(second));
-    }
-  }
-
-  private static byte[] getDigest(Key key) throws NoSuchAlgorithmException {
-    MessageDigest md = MessageDigest.getInstance("SHA-1");
-    key.updateDiskCacheKey(md);
-    return md.digest();
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/tests/Util.java b/library/src/test/java/com/bumptech/glide/tests/Util.java
deleted file mode 100644
index 5ca34fca6..000000000
--- a/library/src/test/java/com/bumptech/glide/tests/Util.java
+++ /dev/null
@@ -1,159 +0,0 @@
-package com.bumptech.glide.tests;
-
-import static org.junit.Assert.assertEquals;
-import static org.mockito.Matchers.any;
-import static org.mockito.Matchers.isA;
-import static org.mockito.Mockito.RETURNS_DEFAULTS;
-import static org.mockito.Mockito.mock;
-
-import android.graphics.Bitmap;
-import android.os.Build;
-import com.bumptech.glide.load.DataSource;
-import com.bumptech.glide.load.data.DataFetcher;
-import com.bumptech.glide.load.engine.Resource;
-import java.io.File;
-import java.io.FileInputStream;
-import java.io.FileOutputStream;
-import java.io.IOException;
-import java.io.InputStream;
-import java.io.OutputStream;
-import java.security.MessageDigest;
-import org.mockito.ArgumentCaptor;
-import org.mockito.invocation.InvocationOnMock;
-import org.mockito.stubbing.Answer;
-import org.robolectric.util.ReflectionHelpers;
-
-// FIXME move to testutil module
-public class Util {
-
-  public static String getExpectedClassId(Class<?> clazz) {
-    return clazz.getSimpleName() + "." + clazz.getPackage().getName();
-  }
-
-  /**
-   * Gives the proper generic type to the {@link ArgumentCaptor}.
-   * Only useful when the captor's {@code T} is also a generic type.
-   * Without this it's really ugly to have a properly typed captor object.
-   */
-  @SuppressWarnings("unchecked")
-  public static <T> ArgumentCaptor<T> cast(ArgumentCaptor<?> captor) {
-    return (ArgumentCaptor<T>) captor;
-  }
-
-  public static DataSource isADataSource() {
-    return isA(DataSource.class);
-  }
-
-  /**
-   * Creates a Mockito argument matcher to be used in verify.
-   * It returns a generic typed {@link Resource} to prevent unchecked warnings.
-   */
-  @SuppressWarnings("unchecked")
-  public static <T> Resource<T> anyResource() {
-    return any(Resource.class);
-  }
-
-  /**
-   * Creates a Mockito mock object.
-   * It returns a generic typed {@link Resource} to prevent unchecked warnings.
-   */
-  @SuppressWarnings("unchecked")
-  public static <T> Resource<T> mockResource() {
-    return mock(Resource.class);
-  }
-
-  public static boolean isWindows() {
-    return System.getProperty("os.name").startsWith("Windows");
-  }
-
-  public static void writeFile(File file, byte[] data) throws IOException {
-    OutputStream out = new FileOutputStream(file);
-    try {
-      out.write(data);
-      out.flush();
-      out.close();
-    } finally {
-      try {
-        out.close();
-      } catch (IOException ex) {
-        // Do nothing.
-      }
-    }
-  }
-
-  public static byte[] readFile(File file, int expectedLength) throws IOException {
-    InputStream is = new FileInputStream(file);
-    byte[] result = new byte[expectedLength];
-    try {
-      assertEquals(expectedLength, is.read(result));
-      assertEquals(-1, is.read());
-    } finally {
-      try {
-        is.close();
-      } catch (IOException e) {
-        // Do nothing.
-      }
-    }
-    return result;
-  }
-
-  public static void setSdkVersionInt(int version) {
-    ReflectionHelpers.setStaticField(Build.VERSION.class, "SDK_INT", version);
-  }
-
-  public static class WriteDigest implements Answer<Void> {
-    private String toWrite;
-
-    public WriteDigest(String toWrite) {
-      this.toWrite = toWrite;
-    }
-
-    @Override
-    public Void answer(InvocationOnMock invocationOnMock) throws Throwable {
-      MessageDigest md = (MessageDigest) invocationOnMock.getArguments()[0];
-      md.update(toWrite.getBytes());
-      return null;
-    }
-  }
-
-  public static class ReturnsSelfAnswer implements Answer<Object> {
-
-    public Object answer(InvocationOnMock invocation) throws Throwable {
-      Object mock = invocation.getMock();
-      if (invocation.getMethod().getReturnType().isInstance(mock)) {
-        return mock;
-      } else {
-        return RETURNS_DEFAULTS.answer(invocation);
-      }
-    }
-  }
-
-  public static class CallDataReady<T> implements Answer<Void> {
-
-    private T data;
-
-    public CallDataReady(T data) {
-      this.data = data;
-    }
-
-    @SuppressWarnings("unchecked")
-    @Override
-    public Void answer(InvocationOnMock invocationOnMock) throws Throwable {
-      DataFetcher.DataCallback<T> callback =
-          (DataFetcher.DataCallback<T>) invocationOnMock.getArguments()[1];
-      callback.onDataReady(data);
-      return null;
-    }
-  }
-
-  public static class CreateBitmap implements Answer<Bitmap> {
-
-    @Override
-    public Bitmap answer(InvocationOnMock invocation) throws Throwable {
-      int width = (Integer) invocation.getArguments()[0];
-      int height = (Integer) invocation.getArguments()[1];
-      Bitmap.Config config = (Bitmap.Config) invocation.getArguments()[2];
-      return Bitmap.createBitmap(width, height, config);
-    }
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/util/ByteBufferUtilTest.java b/library/src/test/java/com/bumptech/glide/util/ByteBufferUtilTest.java
deleted file mode 100644
index 007e5a26b..000000000
--- a/library/src/test/java/com/bumptech/glide/util/ByteBufferUtilTest.java
+++ /dev/null
@@ -1,67 +0,0 @@
-package com.bumptech.glide.util;
-
-import static org.junit.Assert.assertEquals;
-
-import java.io.ByteArrayInputStream;
-import java.io.IOException;
-import java.io.InputStream;
-import java.nio.ByteBuffer;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class ByteBufferUtilTest {
-  private static final int BUFFER_SIZE = 16384;
-
-  @Test
-  public void testFromStream_small() throws IOException {
-    testFromStream(4);
-  }
-
-  @Test
-  public void testFromStream_empty() throws IOException {
-    testFromStream(0);
-  }
-
-  @Test
-  public void testFromStream_bufferAndAHalf() throws IOException {
-    testFromStream(BUFFER_SIZE + BUFFER_SIZE / 2);
-  }
-
-  @Test
-  public void testFromStream_massive() throws IOException {
-    testFromStream(12 * BUFFER_SIZE + 12345);
-  }
-
-  /**
-   * All tests are basically the same thing but with different amounts of data.
-   */
-  private void testFromStream(int dataLength) throws IOException {
-    byte[] bytes = createByteData(dataLength);
-    InputStream byteStream = new ByteArrayInputStream(bytes);
-    ByteBuffer byteBuffer = ByteBufferUtil.fromStream(byteStream);
-    assertByteBufferContents(byteBuffer, bytes);
-    byteStream.close();
-  }
-
-  private byte[] createByteData(int size) {
-    byte[] bytes = new byte[size];
-
-    // Put some arbitrary bytes in there.
-    for (int i = 0; i < size; i++) {
-      bytes[i] = (byte) (i % 4);
-    }
-
-    return bytes;
-  }
-
-  private void assertByteBufferContents(ByteBuffer buffer, byte[] expectedBytes) {
-    assertEquals(expectedBytes.length, buffer.limit());
-    for (int i = 0; i < expectedBytes.length; i++) {
-      assertEquals(expectedBytes[i], buffer.get(i));
-    }
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/util/ContentLengthInputStreamTest.java b/library/src/test/java/com/bumptech/glide/util/ContentLengthInputStreamTest.java
deleted file mode 100644
index 328bfb928..000000000
--- a/library/src/test/java/com/bumptech/glide/util/ContentLengthInputStreamTest.java
+++ /dev/null
@@ -1,133 +0,0 @@
-package com.bumptech.glide.util;
-
-import static com.google.common.truth.Truth.assertThat;
-import static org.junit.Assert.fail;
-import static org.mockito.Matchers.any;
-import static org.mockito.Matchers.anyInt;
-import static org.mockito.Mockito.when;
-
-import java.io.IOException;
-import java.io.InputStream;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.mockito.Mock;
-import org.mockito.MockitoAnnotations;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class ContentLengthInputStreamTest {
-  @Mock InputStream wrapped;
-
-  @Before
-  public void setUp() {
-    MockitoAnnotations.initMocks(this);
-  }
-
-  @Test
-  public void testAvailable_withZeroReadsAndValidContentLength_returnsContentLength()
-      throws IOException {
-    int value = 123356;
-    InputStream is = ContentLengthInputStream.obtain(wrapped, String.valueOf(value));
-
-    assertThat(is.available()).isEqualTo(value);
-  }
-
-  @Test
-  public void testAvailable_withNullContentLength_returnsWrappedAvailable()
-      throws IOException {
-    InputStream is = ContentLengthInputStream.obtain(wrapped, null /*contentLengthHeader*/);
-    int expected = 1234;
-    when(wrapped.available()).thenReturn(expected);
-
-    assertThat(is.available()).isEqualTo(expected);
-  }
-
-  @Test
-  public void testAvailable_withInvalidContentLength_returnsWrappedAvailable() throws IOException {
-    InputStream is = ContentLengthInputStream.obtain(wrapped, "invalid_length");
-    int expected = 567;
-    when(wrapped.available()).thenReturn(expected);
-
-    assertThat(is.available()).isEqualTo(expected);
-  }
-
-  @Test
-  public void testAvailable_withRead_returnsContentLengthOffsetByRead() throws IOException {
-    int contentLength = 999;
-    InputStream is = ContentLengthInputStream.obtain(wrapped, String.valueOf(contentLength));
-    when(wrapped.read()).thenReturn(1);
-
-    assertThat(is.read()).isEqualTo(1);
-    assertThat(is.available()).isEqualTo(contentLength - 1);
-  }
-
-  @Test
-  public void testAvailable_handlesReadValueOfZero() throws IOException {
-    int contentLength = 999;
-    InputStream is = ContentLengthInputStream.obtain(wrapped, String.valueOf(contentLength));
-    when(wrapped.read()).thenReturn(0);
-
-    assertThat(is.read()).isEqualTo(0);
-    assertThat(is.available()).isEqualTo(contentLength);
-  }
-
-  @Test
-  public void testAvailable_withReadBytes_returnsContentLengthOffsetByNumberOfBytes()
-      throws IOException {
-    int contentLength = 678;
-    InputStream is = ContentLengthInputStream.obtain(wrapped, String.valueOf(contentLength));
-    int read = 100;
-    when(wrapped.read(any(byte[].class), anyInt(), anyInt())).thenReturn(read);
-
-    assertThat(is.read(new byte[500], 0, 0)).isEqualTo(read);
-    assertThat(is.available()).isEqualTo(contentLength - read);
-  }
-
-  @Test
-  public void testRead_whenReturnsLessThanZeroWithoutReadingAllContent_throwsIOException()
-      throws IOException {
-    int contentLength = 1;
-    InputStream is = ContentLengthInputStream.obtain(wrapped, String.valueOf(contentLength));
-    when(wrapped.read()).thenReturn(-1);
-
-    try {
-      is.read();
-      fail("Failed to throw expected exception");
-    } catch (IOException e) {
-      // Expected.
-    }
-  }
-
-  @Test
-  public void testReadBytes_whenReturnsLessThanZeroWithoutReadingAllContent_throwsIOException()
-      throws IOException {
-    int contentLength = 2;
-    InputStream is = ContentLengthInputStream.obtain(wrapped, String.valueOf(contentLength));
-    when(wrapped.read(any(byte[].class), anyInt(), anyInt())).thenReturn(-1);
-
-    try {
-      is.read(new byte[10], 0, 0);
-      fail("Failed to throw expected exception");
-    } catch (IOException e) {
-      // Expected.
-    }
-  }
-
-  @Test
-  public void testRead_whenReturnsLessThanZeroWithInvalidLength_doesNotThrow() throws IOException {
-    InputStream is = ContentLengthInputStream.obtain(wrapped, "invalid_length");
-    when(wrapped.read()).thenReturn(-1);
-    is.read();
-  }
-
-  @Test
-  public void testReadBytes_whenReturnsLessThanZeroWithInvalidLength_doesNotThrow()
-      throws IOException {
-    InputStream is = ContentLengthInputStream.obtain(wrapped, "invalid_length");
-    when(wrapped.read(any(byte[].class), anyInt(), anyInt())).thenReturn(-1);
-    is.read(new byte[10], 0, 0);
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/util/ExceptionCatchingInputStreamTest.java b/library/src/test/java/com/bumptech/glide/util/ExceptionCatchingInputStreamTest.java
deleted file mode 100644
index 913432b92..000000000
--- a/library/src/test/java/com/bumptech/glide/util/ExceptionCatchingInputStreamTest.java
+++ /dev/null
@@ -1,173 +0,0 @@
-package com.bumptech.glide.util;
-
-import static org.junit.Assert.assertEquals;
-import static org.junit.Assert.assertNull;
-import static org.junit.Assert.assertTrue;
-import static org.mockito.Matchers.any;
-import static org.mockito.Matchers.anyInt;
-import static org.mockito.Matchers.anyLong;
-import static org.mockito.Matchers.eq;
-import static org.mockito.Mockito.mock;
-import static org.mockito.Mockito.verify;
-import static org.mockito.Mockito.when;
-
-import com.bumptech.glide.load.resource.bitmap.RecyclableBufferedInputStream;
-import java.io.IOException;
-import java.io.InputStream;
-import java.net.SocketTimeoutException;
-import org.junit.After;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.junit.runners.JUnit4;
-
-@RunWith(JUnit4.class)
-public class ExceptionCatchingInputStreamTest {
-
-  private RecyclableBufferedInputStream wrapped;
-  private ExceptionCatchingInputStream is;
-
-  @Before
-  public void setUp() throws Exception {
-    wrapped = mock(RecyclableBufferedInputStream.class);
-    is = new ExceptionCatchingInputStream();
-    is.setInputStream(wrapped);
-  }
-
-  @After
-  public void tearDown() {
-    ExceptionCatchingInputStream.clearQueue();
-  }
-
-  @Test
-  public void testReturnsWrappedAvailable() throws IOException {
-    when(wrapped.available()).thenReturn(25);
-    assertEquals(25, is.available());
-  }
-
-  @Test
-  public void testCallsCloseOnWrapped() throws IOException {
-    is.close();
-    verify(wrapped).close();
-  }
-
-  @Test
-  public void testCallsMarkOnWrapped() {
-    int toMark = 50;
-    is.mark(toMark);
-    verify(wrapped).mark(eq(toMark));
-  }
-
-  @Test
-  public void testReturnsWrappedMarkSupported() {
-    when(wrapped.markSupported()).thenReturn(true);
-    assertTrue(is.markSupported());
-  }
-
-  @Test
-  public void testCallsReadByteArrayOnWrapped() throws IOException {
-    byte[] buffer = new byte[100];
-    when(wrapped.read(eq(buffer))).thenReturn(buffer.length);
-    assertEquals(buffer.length, is.read(buffer));
-  }
-
-  @Test
-  public void testCallsReadArrayWithOffsetAndCountOnWrapped() throws IOException {
-    int offset = 5;
-    int count = 100;
-    byte[] buffer = new byte[105];
-
-    when(wrapped.read(eq(buffer), eq(offset), eq(count))).thenReturn(count);
-    assertEquals(count, is.read(buffer, offset, count));
-  }
-
-  @Test
-  public void testCallsReadOnWrapped() throws IOException {
-    when(wrapped.read()).thenReturn(1);
-    assertEquals(1, is.read());
-  }
-
-  @Test
-  public void testCallsResetOnWrapped() throws IOException {
-    is.reset();
-    verify(wrapped).reset();
-  }
-
-  @Test
-  public void testCallsSkipOnWrapped() throws IOException {
-    long toSkip = 67;
-    long expected = 55;
-    when(wrapped.skip(eq(toSkip))).thenReturn(expected);
-    assertEquals(expected, is.skip(toSkip));
-  }
-
-  @Test
-  public void testCatchesExceptionOnRead() throws IOException {
-    IOException expected = new SocketTimeoutException();
-    when(wrapped.read()).thenThrow(expected);
-    int read = is.read();
-
-    assertEquals(-1, read);
-    assertEquals(expected, is.getException());
-  }
-
-  @Test
-  public void testCatchesExceptionOnReadBuffer() throws IOException {
-    IOException exception = new SocketTimeoutException();
-    when(wrapped.read(any(byte[].class))).thenThrow(exception);
-
-    int read = is.read(new byte[0]);
-    assertEquals(-1, read);
-    assertEquals(exception, is.getException());
-  }
-
-  @Test
-  public void testCatchesExceptionOnReadBufferWithOffsetAndCount() throws IOException {
-    IOException exception = new SocketTimeoutException();
-    when(wrapped.read(any(byte[].class), anyInt(), anyInt())).thenThrow(exception);
-
-    int read = is.read(new byte[0], 10, 100);
-    assertEquals(-1, read);
-    assertEquals(exception, is.getException());
-  }
-
-  @Test
-  public void testCatchesExceptionOnSkip() throws IOException {
-    IOException exception = new SocketTimeoutException();
-    when(wrapped.skip(anyLong())).thenThrow(exception);
-
-    long skipped = is.skip(100);
-    assertEquals(0, skipped);
-    assertEquals(exception, is.getException());
-  }
-
-  @Test
-  public void testExceptionIsNotSetInitially() {
-    assertNull(is.getException());
-  }
-
-  @SuppressWarnings("ResultOfMethodCallIgnored")
-  @Test
-  public void testResetsExceptionToNullOnRelease() throws IOException {
-    IOException exception = new SocketTimeoutException();
-    when(wrapped.read()).thenThrow(exception);
-    is.read();
-    is.release();
-    assertNull(is.getException());
-  }
-
-  @Test
-  public void testCanReleaseAnObtainFromPool() {
-    is.release();
-    InputStream fromPool = ExceptionCatchingInputStream.obtain(wrapped);
-    assertEquals(is, fromPool);
-  }
-
-  @Test
-  public void testCanObtainNewStreamFromPool() throws IOException {
-    InputStream fromPool = ExceptionCatchingInputStream.obtain(wrapped);
-    when(wrapped.read()).thenReturn(1);
-    int read = fromPool.read();
-    assertEquals(1, read);
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/util/FixedPreloadSizeProviderTest.java b/library/src/test/java/com/bumptech/glide/util/FixedPreloadSizeProviderTest.java
deleted file mode 100644
index 89cab6985..000000000
--- a/library/src/test/java/com/bumptech/glide/util/FixedPreloadSizeProviderTest.java
+++ /dev/null
@@ -1,24 +0,0 @@
-package com.bumptech.glide.util;
-
-import static com.google.common.truth.Truth.assertThat;
-
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class FixedPreloadSizeProviderTest {
-
-  @Test
-  public void testReturnsGivenSize() {
-    int width = 500;
-    int height = 1234;
-    FixedPreloadSizeProvider<Object> provider = new FixedPreloadSizeProvider<>(width, height);
-
-    int[] size = provider.getPreloadSize(new Object(), 0, 0);
-
-    assertThat(size).asList().containsExactly(width, height);
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/util/MarkEnforcingInputStreamTest.java b/library/src/test/java/com/bumptech/glide/util/MarkEnforcingInputStreamTest.java
deleted file mode 100644
index 1e18b4203..000000000
--- a/library/src/test/java/com/bumptech/glide/util/MarkEnforcingInputStreamTest.java
+++ /dev/null
@@ -1,169 +0,0 @@
-package com.bumptech.glide.util;
-
-import static com.google.common.truth.Truth.assertThat;
-import static org.junit.Assert.assertEquals;
-
-import java.io.ByteArrayInputStream;
-import java.io.IOException;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE)
-public class MarkEnforcingInputStreamTest {
-  // An arbitrary number > 0.
-  private static final int MARK_LIMIT = 5;
-  // Another arbitrary number > MARK_LIMIT.
-  private static final int DATA_SIZE = MARK_LIMIT + 1;
-
-  @Test
-  public void testReturnsByte_whenReadsUpToMarkLimit_withMoreBytesAvailable() throws IOException {
-    MarkEnforcingInputStream is =
-        new MarkEnforcingInputStream(new ByteArrayInputStream(new byte[DATA_SIZE]));
-    is.mark(MARK_LIMIT);
-
-    for (int i = 0; i < MARK_LIMIT; i++) {
-      assertThat(is.read()).isAtLeast(0);
-    }
-  }
-
-  @Test
-  public void testReturnsByte_whenReadsUpToMarkLimit_withNoMoreBytesAvailable() throws IOException {
-    MarkEnforcingInputStream is =
-        new MarkEnforcingInputStream(new ByteArrayInputStream(new byte[MARK_LIMIT]));
-
-    for (int i = 0; i < MARK_LIMIT; i++) {
-      assertThat(is.read()).isAtLeast(0);
-    }
-  }
-
-  @Test
-  public void testReturnsEndOfStream_whenReadsSingleBytePastMarkLimit() throws IOException {
-    MarkEnforcingInputStream is =
-        new MarkEnforcingInputStream(new ByteArrayInputStream(new byte[DATA_SIZE]));
-
-    is.mark(MARK_LIMIT);
-    for (int i = 0; i < MARK_LIMIT; i++) {
-      assertThat(is.read()).isAtLeast(0);
-    }
-
-    assertEquals(-1, is.read());
-  }
-
-  @Test
-  public void
-  testOverridesByteCount_whenReadBufferLargerThanMarkLimit_withNonZeroBytesRemainingInMarkLimit()
-      throws IOException {
-    MarkEnforcingInputStream is =
-        new MarkEnforcingInputStream(new ByteArrayInputStream(new byte[DATA_SIZE]));
-
-    is.mark(MARK_LIMIT);
-    byte[] buffer = new byte[DATA_SIZE];
-    assertEquals(MARK_LIMIT, is.read(buffer));
-  }
-
-  @Test
-  public void
-  testReturnsEndOfStream_whenReadBufferLargerThanMarkLimit_withZeroBytesRemainingInMarkLimit()
-      throws IOException {
-    MarkEnforcingInputStream is =
-        new MarkEnforcingInputStream(new ByteArrayInputStream(new byte[DATA_SIZE]));
-    is.mark(MARK_LIMIT);
-
-    byte[] buffer = new byte[MARK_LIMIT];
-    assertEquals(MARK_LIMIT, is.read(buffer));
-    assertEquals(-1, is.read(buffer));
-  }
-
-  @Test
-  public void testDoesNotReadIntoBuffer_withZeroBytesRemainingInMarkLimit() throws IOException {
-    byte[] expected = new byte[MARK_LIMIT];
-    for (int i = 0; i < MARK_LIMIT; i++) {
-      expected[i] = (byte) (i + 1);
-    }
-    byte[] buffer = new byte[MARK_LIMIT];
-    System.arraycopy(expected, 0, buffer, 0, MARK_LIMIT);
-
-    // All zeros.
-    MarkEnforcingInputStream is =
-        new MarkEnforcingInputStream(new ByteArrayInputStream(new byte[DATA_SIZE]));
-    is.mark(MARK_LIMIT);
-    for (int i = 0; i < MARK_LIMIT; i++) {
-      assertThat(is.read()).isAtLeast(0);
-    }
-
-    assertEquals(-1, is.read(buffer));
-
-    assertThat(buffer).isEqualTo(expected);
-  }
-
-  @Test
-  public void testResetUnsetsLimit() throws IOException {
-    MarkEnforcingInputStream is =
-        new MarkEnforcingInputStream(new ByteArrayInputStream(new byte[DATA_SIZE]));
-    is.mark(MARK_LIMIT);
-
-    for (int i = 0; i < MARK_LIMIT; i++) {
-      assertThat(is.read()).isAtLeast(0);
-    }
-
-    is.reset();
-
-    for (int i = 0; i < DATA_SIZE; i++) {
-      assertThat(is.read()).isAtLeast(0);
-    }
-  }
-
-  @Test
-  public void
-  testOverridesByteCount_whenSkipCountLargerThanMarkLimit_withNonZeroBytesRemainingInMarkLimit()
-      throws IOException {
-    MarkEnforcingInputStream is =
-        new MarkEnforcingInputStream(new ByteArrayInputStream(new byte[DATA_SIZE]));
-    is.mark(MARK_LIMIT);
-
-    assertEquals(MARK_LIMIT, is.skip(DATA_SIZE));
-  }
-
-  @Test
-  public void testReturnsEndOfStream_whenSkipping_withZeroBytesRemainingInMarkLimit()
-      throws IOException {
-    MarkEnforcingInputStream is =
-        new MarkEnforcingInputStream(new ByteArrayInputStream(new byte[DATA_SIZE]));
-    is.mark(MARK_LIMIT);
-
-    assertEquals(MARK_LIMIT, is.skip(DATA_SIZE));
-    assertEquals(-1, is.skip(1));
-  }
-
-  @Test
-  public void testReturnsStreamAvailable_whenMarkIsNotSet() throws IOException {
-    ByteArrayInputStream wrapped = new ByteArrayInputStream(new byte[MARK_LIMIT]);
-    MarkEnforcingInputStream is = new MarkEnforcingInputStream(wrapped);
-
-    assertEquals(wrapped.available(), is.available());
-  }
-
-  @Test
-  public void testReturnsStreamAvailable_whenMarkIsSet_withMarkGreaterThanStreamAvailable()
-      throws IOException {
-    ByteArrayInputStream wrapped = new ByteArrayInputStream(new byte[MARK_LIMIT]);
-    MarkEnforcingInputStream is = new MarkEnforcingInputStream(wrapped);
-    is.mark(wrapped.available() + 1);
-
-    assertEquals(wrapped.available(), is.available());
-  }
-
-  @Test
-  public void testReturnsMarkLimitAsAvailable_whenMarkIsSet_withMarkLessThanStreamAvailable()
-      throws IOException {
-    ByteArrayInputStream wrapped = new ByteArrayInputStream(new byte[MARK_LIMIT]);
-    MarkEnforcingInputStream is = new MarkEnforcingInputStream(wrapped);
-    int expected = wrapped.available() - 1;
-    is.mark(expected);
-
-    assertEquals(expected, is.available());
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/util/UtilTest.java b/library/src/test/java/com/bumptech/glide/util/UtilTest.java
deleted file mode 100644
index 92d16e95b..000000000
--- a/library/src/test/java/com/bumptech/glide/util/UtilTest.java
+++ /dev/null
@@ -1,73 +0,0 @@
-package com.bumptech.glide.util;
-
-import static org.junit.Assert.assertEquals;
-
-import android.graphics.Bitmap;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class UtilTest {
-
-  @Test
-  public void testReturnsCorrectBitmapSizeForDifferentDimensions() {
-    int width = 100;
-    int height = 100;
-    Bitmap.Config config = Bitmap.Config.ARGB_8888;
-
-    int initialSize = Util.getBitmapByteSize(width, height, config);
-    int sizeOne = Util.getBitmapByteSize(width * 2, height, config);
-    int sizeTwo = Util.getBitmapByteSize(width, height * 2, config);
-
-    assertEquals(4 * width * height, initialSize);
-    assertEquals(2 * initialSize, sizeOne);
-    assertEquals(2 * initialSize, sizeTwo);
-  }
-
-  @Test
-  public void testReturnsCorrectBitmapSizeForAlpha8Bitmap() {
-    int width = 110;
-    int height = 43;
-
-    int size = Util.getBitmapByteSize(width, height, Bitmap.Config.ALPHA_8);
-    assertEquals(width * height, size);
-  }
-
-  @Test
-  public void testReturnsCorrectBitmapSizeForRgb565() {
-    int width = 34;
-    int height = 1444;
-
-    int size = Util.getBitmapByteSize(width, height, Bitmap.Config.RGB_565);
-    assertEquals(width * height * 2, size);
-  }
-
-  @Test
-  public void testReturnsCorrectBitmapSizeForARGB4444() {
-    int width = 4454;
-    int height = 1235;
-
-    int size = Util.getBitmapByteSize(width, height, Bitmap.Config.ARGB_4444);
-    assertEquals(width * height * 2, size);
-  }
-
-  @Test
-  public void testReturnsCorrectBitmapSizeForARGB8888() {
-    int width = 943;
-    int height = 3584;
-
-    int size = Util.getBitmapByteSize(width, height, Bitmap.Config.ARGB_8888);
-    assertEquals(width * height * 4, size);
-  }
-
-  @Test
-  public void testReturnsLargestSizeForNullConfig() {
-    int width = 999;
-    int height = 41324;
-    int size = Util.getBitmapByteSize(width, height, null);
-    assertEquals(width * height * 4, size);
-  }
-}
diff --git a/library/src/test/java/com/bumptech/glide/util/ViewPreloadSizeProviderTest.java b/library/src/test/java/com/bumptech/glide/util/ViewPreloadSizeProviderTest.java
deleted file mode 100644
index 8e23094cc..000000000
--- a/library/src/test/java/com/bumptech/glide/util/ViewPreloadSizeProviderTest.java
+++ /dev/null
@@ -1,90 +0,0 @@
-package com.bumptech.glide.util;
-
-import static com.google.common.truth.Truth.assertThat;
-import static org.junit.Assert.assertNull;
-
-import android.view.View;
-import android.view.ViewGroup;
-import org.junit.Before;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.robolectric.RobolectricTestRunner;
-import org.robolectric.RuntimeEnvironment;
-import org.robolectric.annotation.Config;
-
-@RunWith(RobolectricTestRunner.class)
-@Config(manifest = Config.NONE, sdk = 18)
-public class ViewPreloadSizeProviderTest {
-
-  private View view;
-  private ViewPreloadSizeProvider<Object> provider;
-
-  @Before
-  public void setUp() {
-    view = new View(RuntimeEnvironment.application);
-    provider = new ViewPreloadSizeProvider<>();
-  }
-
-  @Test
-  public void testReturnsNullFromGetPreloadSizeBeforeHasSize() {
-    assertNull(provider.getPreloadSize(new Object(), 0, 0));
-  }
-
-  @Test
-  public void testReturnsValidSizeFromGetPreloadSizeAfterHasSize() {
-    int width = 4123;
-    int height = 342;
-    provider.onSizeReady(width, height);
-
-    int[] size = provider.getPreloadSize(new Object(), 0, 0);
-    assertThat(size).asList().containsExactly(width, height);
-  }
-
-  @Test
-  public void testDoesNotObtainSizeFromViewOnceSizeIsSet() {
-    int width = 123;
-    int height = 456;
-    provider.onSizeReady(width, height);
-    view.setLayoutParams(new ViewGroup.LayoutParams(1, 1));
-
-    provider.setView(view);
-
-    int[] size = provider.getPreloadSize(new Object(), 0, 0);
-    assertThat(size).asList().containsExactly(width, height);
-  }
-
-  @Test
-  public void testCanObtainFixedSizeFromView() {
-    int width = 123;
-    int height = 456;
-    view.setLayoutParams(new ViewGroup.LayoutParams(width, height));
-
-    provider.setView(view);
-
-    int[] size = provider.getPreloadSize(new Object(), 0, 0);
-    assertThat(size).asList().containsExactly(width, height);
-  }
-
-  @Test
-  public void testIgnoresNewViewIfAlreadyWaitingOnSizeOfAnotherView() {
-    provider.setView(view);
-
-    View newView = new View(RuntimeEnvironment.application);
-    newView.setLayoutParams(new ViewGroup.LayoutParams(100, 100));
-    provider.setView(newView);
-
-    assertNull(provider.getPreloadSize(new Object(), 0, 0));
-  }
-
-  @Test
-  public void testCanObtainSizeFromViewWhenGivenViewInConstructor() {
-    int width = 100;
-    int height = 200;
-    view.setLayoutParams(new ViewGroup.LayoutParams(width, height));
-
-    provider = new ViewPreloadSizeProvider<>(view);
-
-    int[] size = provider.getPreloadSize(new Object(), 0, 0);
-    assertThat(size).asList().containsExactly(width, height);
-  }
-}
diff --git a/library/src/test/java/javax/microedition/khronos/opengles/GL.java b/library/src/test/java/javax/microedition/khronos/opengles/GL.java
deleted file mode 100644
index 40792a85f..000000000
--- a/library/src/test/java/javax/microedition/khronos/opengles/GL.java
+++ /dev/null
@@ -1,9 +0,0 @@
-package javax.microedition.khronos.opengles;
-
-/**
- * TODO: Figure out why this is necessary and remove it.
- * See: https://github.com/robolectric/robolectric-gradle-plugin/issues/145
- */
-public interface GL {
-}
-
diff --git a/library/src/test/resources/exif-orientation-examples b/library/src/test/resources/exif-orientation-examples
deleted file mode 160000
index 85c6e142e..000000000
--- a/library/src/test/resources/exif-orientation-examples
+++ /dev/null
@@ -1 +0,0 @@
-Subproject commit 85c6e142ee57d1c5c7a29b2efcd5980a584758e2
diff --git a/library/src/test/resources/issue387_rotated_jpeg.jpg b/library/src/test/resources/issue387_rotated_jpeg.jpg
deleted file mode 100644
index 5852dac00..000000000
Binary files a/library/src/test/resources/issue387_rotated_jpeg.jpg and /dev/null differ
diff --git a/library/src/test/resources/org.robolectric.Config.properties b/library/src/test/resources/org.robolectric.Config.properties
deleted file mode 100644
index 3219ec4f1..000000000
--- a/library/src/test/resources/org.robolectric.Config.properties
+++ /dev/null
@@ -1,3 +0,0 @@
-# Exists only to "enable" logging for test coverage.
-# TODO: when we can ignore Log.* via configuration, remove this line.
-shadows=com.bumptech.glide.tests.GlideShadowLog
diff --git a/library/src/test/resources/short_exif_sample.jpg b/library/src/test/resources/short_exif_sample.jpg
deleted file mode 100644
index 80f8ebd49..000000000
Binary files a/library/src/test/resources/short_exif_sample.jpg and /dev/null differ
diff --git a/library/src/test/resources/test.gif b/library/src/test/resources/test.gif
deleted file mode 100644
index 6ef53ed76..000000000
Binary files a/library/src/test/resources/test.gif and /dev/null differ
