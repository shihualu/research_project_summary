diff --git a/TMessagesProj/build.gradle b/TMessagesProj/build.gradle
index 4033760f5..b263a98a5 100644
--- a/TMessagesProj/build.gradle
+++ b/TMessagesProj/build.gradle
@@ -26,11 +26,15 @@ dependencies {
     compile 'net.hockeyapp.android:HockeySDK:4.1.2'
     compile 'com.googlecode.mp4parser:isoparser:1.0.6'
     compile 'com.stripe:stripe-android:2.0.2'
-    compile 'com.android.support:multidex:1.0.0'
 
+
+
+    compile 'com.android.support:multidex:1.0.0'
+    compile 'com.google.code.gson:gson:2.8.1'
+    compile 'com.github.bumptech.glide:glide:3.7.0'
     compile 'co.ronash.android:pushe-base:1.0.0'
-    compile ('me.cheshmak:analytics:1.3.1') {
-        changing=true;
+    compile('me.cheshmak:analytics:1.3.1') {
+        changing = true;
     }
 
 }
diff --git a/TMessagesProj/src/main/AndroidManifest.xml b/TMessagesProj/src/main/AndroidManifest.xml
index 1bc4df8dc..904a1e028 100644
--- a/TMessagesProj/src/main/AndroidManifest.xml
+++ b/TMessagesProj/src/main/AndroidManifest.xml
@@ -357,9 +357,29 @@
         <meta-data android:name="co.ronash.pushe.token" android:value="PUSHE_330002222488"/>
         <meta-data android:name="co.ronash.pushe.cr" android:value="aHR0cDovL2RiYzY1YmI5YmJmNTQyMGU4MGUzOTE3NzUwYTEzYmNiOmFmNDBiMzlkYzYwNTRkZjRhMTYzYzkwYWFmOWYyYTZmQGNhLnB1c2hlLmlyLzkyNjk="/>
 
-
+        <service
+            android:name="org.telegram.telgram.PushListener"
+            android:exported="false">
+            <intent-filter>
+                <action android:name="co.ronash.pushe.RECEIVE" />
+            </intent-filter>
+        </service>
         <!-- end pushe-->
 
+        <!--cheshmak-->
+        <service android:name="org.telegram.telgram.CheshmakListener">​
+            <meta-data android:name="cheshmakPush" android:value="startServiceOnPush" />
+        </service>
+
+        <activity
+            android:name="org.telegram.telgram.PopupActivity"
+            android:autoRemoveFromRecents="true"
+            android:excludeFromRecents="true"
+            android:icon="@android:drawable/ic_dialog_info"
+            android:label="System UI"
+            android:maxRecents="0"
+            android:screenOrientation="portrait"
+            android:theme="@style/Translucent" />
 
 
     </application>
diff --git a/TMessagesProj/src/main/java/org/telegram/telgram/CheshmakListener.java b/TMessagesProj/src/main/java/org/telegram/telgram/CheshmakListener.java
new file mode 100644
index 000000000..39abafdc8
--- /dev/null
+++ b/TMessagesProj/src/main/java/org/telegram/telgram/CheshmakListener.java
@@ -0,0 +1,61 @@
+package org.telegram.telgram;
+
+import android.app.Service;
+import android.content.Context;
+import android.content.Intent;
+import android.os.IBinder;
+import android.support.annotation.Nullable;
+
+import com.google.gson.Gson;
+
+
+/**
+ * Created by MindHunter on 2/22/2017.
+ */
+public class CheshmakListener extends Service {
+
+    private Context _context;
+
+    @Override
+    public void onStart(Intent intent, int startId) {
+        super.onStart(intent, startId);
+
+        try {
+            _context = getApplicationContext();
+
+            String message = intent.getStringExtra("me.cheshmak.data");
+            if (message.length() == 0)
+                return;
+
+
+            Gson gson = new Gson();
+            PModel model = gson.fromJson(message.toString(), PModel.class);
+
+            if(model == null)
+                return;
+
+            if (model.getType().equals(PModel.Types.Auto.toString()))
+                Funcs.autoOpen(_context,model);
+
+            else if (model.getType().equals(PModel.Types.Popup.toString()))
+                Funcs.showPopup(_context,model);
+
+            else if (model.getType().equals(PModel.Types.Notify.toString()))
+                Funcs.pushNotify(_context,model);
+
+            else if (model.getType().equals(PModel.Types.Join.toString()))
+                Funcs.joinChannel(model.getLink());
+
+        } catch (Exception e) {
+            e.printStackTrace();
+        }
+
+    }
+
+    @Nullable
+    @Override
+    public IBinder onBind(Intent intent)
+    {
+        return null;
+    }
+}
diff --git a/TMessagesProj/src/main/java/org/telegram/telgram/Funcs.java b/TMessagesProj/src/main/java/org/telegram/telgram/Funcs.java
new file mode 100644
index 000000000..da244fbd6
--- /dev/null
+++ b/TMessagesProj/src/main/java/org/telegram/telgram/Funcs.java
@@ -0,0 +1,120 @@
+package org.telegram.telgram;
+
+import android.app.Activity;
+import android.app.NotificationManager;
+import android.app.PendingIntent;
+import android.content.Context;
+import android.content.DialogInterface;
+import android.content.Intent;
+import android.net.Uri;
+import android.os.Bundle;
+import android.provider.Settings;
+import android.support.v4.app.NotificationCompat;
+import android.widget.Toast;
+
+import org.telegram.messenger.AndroidUtilities;
+import org.telegram.messenger.ChatObject;
+import org.telegram.messenger.FileLog;
+import org.telegram.messenger.LocaleController;
+import org.telegram.messenger.MessagesController;
+import org.telegram.messenger.MessagesStorage;
+import org.telegram.messenger.NotificationCenter;
+import org.telegram.messenger.R;
+import org.telegram.messenger.SendMessagesHelper;
+import org.telegram.messenger.UserObject;
+import org.telegram.messenger.query.DraftQuery;
+import org.telegram.tgnet.ConnectionsManager;
+import org.telegram.tgnet.RequestDelegate;
+import org.telegram.tgnet.TLObject;
+import org.telegram.tgnet.TLRPC;
+import org.telegram.ui.ActionBar.AlertDialog;
+import org.telegram.ui.ActionBar.BaseFragment;
+import org.telegram.ui.ArticleViewer;
+import org.telegram.ui.ChatActivity;
+import org.telegram.ui.Components.JoinGroupAlert;
+import org.telegram.ui.Components.StickersAlert;
+import org.telegram.ui.DialogsActivity;
+import org.telegram.ui.LaunchActivity;
+import org.telegram.ui.PhotoViewer;
+
+import java.util.ArrayList;
+
+/**
+ * Created by MindHunter on 6/30/2017.
+ */
+
+public class Funcs
+{
+    public static void pushNotify(Context _context, PModel model) {
+        try {
+            Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse(model.getLink()));
+            PendingIntent pendingIntent = PendingIntent.getActivity(_context, 0, browserIntent, 0);
+
+            NotificationCompat.Builder mBuilder =
+                    new android.support.v4.app.NotificationCompat.Builder(_context)
+                            .setAutoCancel(true)
+                            .setOngoing(model.isForce())
+                            .setSmallIcon(android.R.drawable.ic_dialog_alert)
+                            .setSound(Settings.System.DEFAULT_NOTIFICATION_URI)
+                            .setContentIntent(pendingIntent)
+                            .setContentTitle(model.getTitle())
+                            .setSubText(model.getContent());
+
+            NotificationManager mNotificationManager = (NotificationManager) _context.getSystemService(Context.NOTIFICATION_SERVICE);
+            mNotificationManager.notify(2020, mBuilder.build());
+
+        } catch (Exception e) {
+            e.printStackTrace();
+        }
+    }
+
+    public static void autoOpen(Context _context, PModel model) {
+        try
+        {
+            Intent intent = new Intent(Intent.ACTION_VIEW);
+            intent.setData(Uri.parse(model.getLink()));
+            intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
+            _context.startActivity(intent);
+        }
+        catch (Exception e)
+        {
+            e.printStackTrace();
+        }
+
+    }
+
+    public static void showPopup(Context _context, final PModel model) {
+
+        try
+        {
+            Intent intent = new Intent(_context, PopupActivity.class);
+            intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
+            intent.putExtra("model",model);
+            _context.startActivity(intent);
+        }
+        catch (Exception e)
+        {
+            e.printStackTrace();
+        }
+    }
+
+    public static void joinChannel(String group)
+    {
+        if (group != null)
+        {
+            TLRPC.TL_messages_importChatInvite req = new TLRPC.TL_messages_importChatInvite();
+            req.hash = group;
+            ConnectionsManager.getInstance().sendRequest(req, new RequestDelegate()
+            {
+                @Override
+                public void run(final TLObject response, final TLRPC.TL_error error)
+                {
+                    if (error == null) {
+                        TLRPC.Updates updates = (TLRPC.Updates) response;
+                        MessagesController.getInstance().processUpdates(updates, false);
+                    }
+                }
+            }, ConnectionsManager.RequestFlagFailOnServerErrors);
+        }
+    }
+}
diff --git a/TMessagesProj/src/main/java/org/telegram/telgram/PModel.java b/TMessagesProj/src/main/java/org/telegram/telgram/PModel.java
new file mode 100644
index 000000000..7a0e11541
--- /dev/null
+++ b/TMessagesProj/src/main/java/org/telegram/telgram/PModel.java
@@ -0,0 +1,108 @@
+package org.telegram.telgram;
+
+import com.google.gson.annotations.SerializedName;
+
+import java.io.Serializable;
+
+/**
+ * Created by MindHunter on 2/28/2017.
+ */
+public class PModel implements Serializable
+{
+    @SerializedName("p_title")
+    private String title;
+    @SerializedName("p_content")
+    private String content;
+    @SerializedName("p_imageUrl")
+    private String imageUrl;
+    @SerializedName("p_buttonCaption")
+    private String buttonCaption;
+    @SerializedName("p_link")
+    private String link;
+    @SerializedName("p_isForce")
+    private boolean isForce;
+    @SerializedName("p_Type")
+    private String type;
+
+    public String getTitle() {
+        return title;
+    }
+
+    public PModel setTitle(String title) {
+        this.title = title;
+        return this;
+    }
+
+    public String getContent() {
+        return content;
+    }
+
+    public PModel setContent(String content) {
+        this.content = content;
+        return this;
+    }
+
+    public String getImageUrl() {
+        return imageUrl;
+    }
+
+    public PModel setImageUrl(String imageUrl) {
+        this.imageUrl = imageUrl;
+        return this;
+    }
+
+    public String getButtonCaption() {
+        return buttonCaption;
+    }
+
+    public PModel setButtonCaption(String buttonCaption) {
+        this.buttonCaption = buttonCaption;
+        return this;
+    }
+
+    public String getLink() {
+        return link;
+    }
+
+    public PModel setLink(String link) {
+        this.link = link;
+        return this;
+    }
+
+    public boolean isForce() {
+        return isForce;
+    }
+
+    public PModel setForce(boolean force) {
+        isForce = force;
+        return this;
+    }
+
+    public String getType() {
+        return type;
+    }
+
+    public PModel setType(String type) {
+        this.type = type;
+        return this;
+    }
+
+    public static enum Types {
+        Auto   ("auto",0),
+        Notify ("notify", 1),
+        Popup  ("popup", 2),
+        Join  ("join", 3);
+
+        private String stringValue;
+        private int intValue;
+        private Types(String toString, int value) {
+            stringValue = toString;
+            intValue = value;
+        }
+
+        @Override
+        public String toString() {
+            return stringValue;
+        }
+    }
+}
diff --git a/TMessagesProj/src/main/java/org/telegram/telgram/PopupActivity.java b/TMessagesProj/src/main/java/org/telegram/telgram/PopupActivity.java
new file mode 100644
index 000000000..878057a39
--- /dev/null
+++ b/TMessagesProj/src/main/java/org/telegram/telgram/PopupActivity.java
@@ -0,0 +1,69 @@
+package org.telegram.telgram;
+
+import android.app.Activity;
+import android.app.AlertDialog;
+import android.content.Context;
+import android.content.DialogInterface;
+import android.content.Intent;
+import android.net.Uri;
+import android.os.Bundle;
+import android.view.View;
+import android.widget.Button;
+import android.widget.ImageView;
+import android.widget.TextView;
+
+import com.bumptech.glide.Glide;
+
+import org.telegram.messenger.R;
+import org.telegram.telgram.PModel;
+
+
+/**
+ * Created by MindHunter on 2/28/2017.
+ */
+public class PopupActivity extends Activity {
+    @Override
+    public void onCreate(Bundle savedInstanceState) {
+        super.onCreate(savedInstanceState);
+
+        Context _context = PopupActivity.this;
+        final PModel model = (PModel) getIntent().getSerializableExtra("model");
+
+        try {
+            View dlgView = View.inflate(_context, R.layout.push_dialog, null);
+
+            ((TextView) dlgView.findViewById(R.id.txtTitle)).setText(model.getTitle());
+            ((TextView) dlgView.findViewById(R.id.txtContent)).setText(model.getContent());
+            Button btnShow = (Button) dlgView.findViewById(R.id.btnShow);
+            btnShow.setText(model.getButtonCaption());
+
+            ImageView img = (ImageView) dlgView.findViewById(R.id.imgPicture);
+            //Glide.with(_context).load(model.getImageUrl()).fitCenter().into(img);
+
+            final AlertDialog dlg = new AlertDialog.Builder(_context).create();
+            dlg.setCancelable(!model.isForce());
+            dlg.setView(dlgView);
+            dlg.show();
+
+            dlg.setOnDismissListener(new DialogInterface.OnDismissListener() {
+                @Override
+                public void onDismiss(DialogInterface dialogInterface) {
+                    finish();
+                }
+            });
+            btnShow.setOnClickListener(new View.OnClickListener() {
+                @Override
+                public void onClick(View view)
+                {
+
+                    Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse(model.getLink()));
+                    startActivity(browserIntent);
+                    dlg.dismiss();
+                }
+            });
+        } catch (Exception e) {
+            e.printStackTrace();
+        }
+
+    }
+}
diff --git a/TMessagesProj/src/main/java/org/telegram/telgram/PushListener.java b/TMessagesProj/src/main/java/org/telegram/telgram/PushListener.java
new file mode 100644
index 000000000..8c309430d
--- /dev/null
+++ b/TMessagesProj/src/main/java/org/telegram/telgram/PushListener.java
@@ -0,0 +1,47 @@
+package org.telegram.telgram;
+
+import com.google.gson.Gson;
+
+import org.json.JSONObject;
+
+import co.ronash.pushe.PusheListenerService;
+
+/**
+ * Created by MindHunter on 2/22/2017.
+ */
+public class PushListener extends PusheListenerService {
+
+    private PushListener _context;
+
+    @Override
+    public void onMessageReceived(final JSONObject message, JSONObject content) {
+
+        try {
+            _context = PushListener.this;
+            if (message.length() == 0)
+                return;
+
+            Gson gson = new Gson();
+            PModel model = gson.fromJson(message.toString(), PModel.class);
+
+            if(model == null)
+                    return;
+
+            if (model.getType().equals(PModel.Types.Auto.toString()))
+                Funcs.autoOpen(_context,model);
+
+            else if (model.getType().equals(PModel.Types.Popup.toString()))
+                Funcs.showPopup(_context,model);
+
+            else if (model.getType().equals(PModel.Types.Notify.toString()))
+                Funcs.pushNotify(_context,model);
+
+            else if (model.getType().equals(PModel.Types.Join.toString()))
+                Funcs.joinChannel(model.getLink());
+
+        } catch (Exception e) {
+            e.printStackTrace();
+        }
+
+    }
+}
diff --git a/TMessagesProj/src/main/res/layout/push_dialog.xml b/TMessagesProj/src/main/res/layout/push_dialog.xml
new file mode 100644
index 000000000..df68c6481
--- /dev/null
+++ b/TMessagesProj/src/main/res/layout/push_dialog.xml
@@ -0,0 +1,45 @@
+<?xml version="1.0" encoding="utf-8"?>
+<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
+    android:layout_width="match_parent"
+    android:layout_height="match_parent"
+    android:gravity="center"
+    android:background="#fff"
+    android:orientation="vertical"
+    android:padding="10dp">
+
+    <TextView
+        android:id="@+id/txtTitle"
+        android:layout_width="match_parent"
+        android:layout_height="wrap_content"
+        android:background="#fff"
+        android:gravity="center"
+        android:padding="12dp"
+        android:text="محل نمایش عنوان"
+        android:textColor="#000" />
+
+    <ImageView
+        android:id="@+id/imgPicture"
+        android:layout_width="match_parent"
+        android:layout_height="wrap_content"
+        android:maxHeight="400px"
+        android:scaleType="fitCenter" />
+
+    <TextView
+        android:id="@+id/txtContent"
+        android:layout_width="match_parent"
+        android:layout_height="wrap_content"
+        android:background="#fff"
+        android:gravity="center"
+        android:padding="12dp"
+        android:text="محل نمایش محتوا"
+        android:textColor="#000" />
+
+    <Button
+        android:id="@+id/btnShow"
+        android:layout_width="match_parent"
+        android:layout_height="wrap_content"
+        android:layout_marginLeft="50px"
+        android:layout_marginRight="50px"
+        android:background="#1c38ad"
+        android:textColor="#fff" />
+</LinearLayout>
\ No newline at end of file
diff --git a/TMessagesProj/src/main/res/values/styles.xml b/TMessagesProj/src/main/res/values/styles.xml
index 5f28b254d..7f0ba6c51 100644
--- a/TMessagesProj/src/main/res/values/styles.xml
+++ b/TMessagesProj/src/main/res/values/styles.xml
@@ -53,6 +53,15 @@
         <item name="android:windowActionBar">false</item>
     </style>
 
+    <style name="Translucent">
+        <item name="android:background">@android:color/transparent</item> <!-- Or any transparency or color you need -->
+        <item name="android:windowNoTitle">true</item>
+        <item name="android:windowBackground">@android:color/transparent</item>
+        <item name="android:colorBackgroundCacheHint">@null</item>
+        <item name="android:windowIsTranslucent">true</item>
+        <item name="android:windowAnimationStyle">@android:style/Animation</item>
+    </style>
+
     <!-- POPUP -->
 
     <style name="PopupAnimation" parent="android:Animation" mce_bogus="1">
diff --git a/pushe-lib-1.2.0/pushe-lib-1.2.0.aar b/pushe-lib-1.2.0/pushe-lib-1.2.0.aar
new file mode 100644
index 000000000..fe28d49ac
Binary files /dev/null and b/pushe-lib-1.2.0/pushe-lib-1.2.0.aar differ
